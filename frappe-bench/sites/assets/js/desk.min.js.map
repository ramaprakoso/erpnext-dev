{"version":3,"file":"desk.min.js","sources":["../../../apps/frappe/frappe/public/js/frappe/class.js","../../../apps/frappe/frappe/public/js/frappe/format.js","../../../apps/frappe/frappe/public/js/frappe/ui/keyboard.js","../../../apps/frappe/frappe/public/js/frappe/polyfill.js","../../../apps/frappe/frappe/public/js/frappe/provide.js","../../../apps/frappe/frappe/public/js/frappe/assets.js","../../../apps/frappe/frappe/public/js/frappe/form/formatters.js","../../../apps/frappe/frappe/public/js/frappe/dom.js","../../../apps/frappe/frappe/public/js/frappe/form/layout.js","../../../apps/frappe/frappe/public/js/frappe/ui/field_group.js","../../../apps/frappe/frappe/public/js/frappe/ui/dialog.js","../../../apps/frappe/frappe/public/js/frappe/ui/messages.js","../../../apps/frappe/frappe/public/js/frappe/ui/colors.js","../../../apps/frappe/frappe/public/js/frappe/ui/sidebar.js","../../../apps/frappe/frappe/public/js/frappe/ui/link_preview.js","../../../apps/frappe/frappe/public/js/frappe/request.js","../../../apps/frappe/frappe/public/js/frappe/socketio_client.js","../../../apps/frappe/node_modules/fast-deep-equal/index.js","../../../apps/frappe/frappe/public/js/frappe/misc/utils.js","../../../apps/frappe/frappe/public/js/frappe/event_emitter.js","../../../apps/frappe/frappe/public/js/frappe/router.js","../../../apps/frappe/frappe/public/js/frappe/router_history.js","../../../apps/frappe/frappe/public/js/legacy/datatype.js","../../../apps/frappe/frappe/public/js/legacy/handler.js","../../../apps/frappe/frappe/public/js/frappe/misc/pretty_date.js","../../../apps/frappe/frappe/public/js/frappe/defaults.js","../../../apps/frappe/frappe/public/js/frappe/roles_editor.js","../../../apps/frappe/frappe/public/js/lib/microtemplate.js","../../../apps/frappe/frappe/public/js/legacy/globals.js","../../../apps/frappe/frappe/public/js/legacy/dom.js","../../../apps/frappe/frappe/public/js/frappe/ui/page.js","../../../apps/frappe/frappe/public/js/frappe/ui/slides.js","../../../apps/frappe/frappe/public/js/frappe/ui/find.js","../../../apps/frappe/frappe/public/js/frappe/ui/iconbar.js","../../../apps/frappe/frappe/public/js/frappe/form/link_selector.js","../../../apps/frappe/frappe/public/js/frappe/form/multi_select_dialog.js","../../../apps/frappe/frappe/public/js/frappe/ui/capture.js","../../../apps/frappe/frappe/public/js/frappe/ui/app_icon.js","../../../apps/frappe/frappe/public/js/frappe/ui/dropzone.js","../../../apps/frappe/frappe/public/js/frappe/model/model.js","../../../apps/frappe/frappe/public/js/frappe/db.js","../../../apps/frappe/frappe/public/js/frappe/model/meta.js","../../../apps/frappe/frappe/public/js/frappe/model/sync.js","../../../apps/frappe/frappe/public/js/frappe/model/create_new.js","../../../apps/frappe/frappe/public/js/frappe/model/perm.js","../../../apps/frappe/frappe/public/js/frappe/model/workflow.js","../../../apps/frappe/frappe/public/js/frappe/model/user_settings.js","../../../apps/frappe/frappe/public/js/lib/md5.min.js","../../../apps/frappe/frappe/public/js/frappe/misc/user.js","../../../apps/frappe/frappe/public/js/frappe/misc/common.js","../../../apps/frappe/frappe/public/js/frappe/misc/test_utils.js","../../../apps/frappe/node_modules/showdown/dist/showdown.js","../../../apps/frappe/frappe/public/js/frappe/misc/number_format.js","../../../apps/frappe/frappe/public/js/frappe/misc/tools.js","../../../apps/frappe/frappe/public/js/frappe/misc/datetime.js","../../../apps/frappe/frappe/public/js/frappe/misc/help.js","../../../apps/frappe/frappe/public/js/frappe/misc/help_links.js","../../../apps/frappe/frappe/public/js/frappe/misc/address_and_contact.js","../../../apps/frappe/frappe/public/js/frappe/misc/preview_email.js","../../../apps/frappe/frappe/public/js/frappe/misc/file_manager.js","../../../apps/frappe/frappe/public/js/frappe/file_uploader/FilePreview.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/file_uploader/TreeNode.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/file_uploader/FileBrowser.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/file_uploader/WebLink.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/file_uploader/FileUploader.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/file_uploader/index.js","../../../apps/frappe/frappe/public/js/frappe/upload.js","../../../apps/frappe/frappe/public/js/integrations/gsuite.js","../../../apps/frappe/frappe/public/js/frappe/ui/tree.js","../../../apps/frappe/frappe/public/js/frappe/views/container.js","../../../apps/frappe/frappe/public/js/frappe/views/breadcrumbs.js","../../../apps/frappe/frappe/public/js/frappe/views/factory.js","../../../apps/frappe/frappe/public/js/frappe/views/components/Popover.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/views/components/Dropdown.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/views/components/DeskModuleBox.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/views/components/DeskSection.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/views/components/utils.js","../../../apps/frappe/frappe/public/js/frappe/views/components/Desktop.vue?rollup-plugin-vue=script.js","../../../apps/frappe/frappe/public/js/frappe/query_string.js","../../../apps/frappe/frappe/public/js/frappe/views/pageview.js","../../../apps/frappe/frappe/public/js/frappe/ui/toolbar/awesome_bar.js","../../../apps/frappe/frappe/public/js/frappe/ui/toolbar/search.js","../../../apps/frappe/frappe/public/js/frappe/ui/toolbar/search_utils.js","../../../apps/frappe/frappe/public/js/frappe/ui/toolbar/about.js","../../../apps/frappe/frappe/public/js/frappe/ui/toolbar/toolbar.js","../../../apps/frappe/frappe/public/js/frappe/ui/toolbar/notifications.js","../../../apps/frappe/frappe/public/js/frappe/views/communication.js","../../../apps/frappe/frappe/public/js/frappe/views/translation_manager.js","../../../apps/frappe/frappe/public/js/frappe/ui/sort_selector.js","../../../apps/frappe/frappe/public/js/frappe/desk.js","../../../apps/frappe/node_modules/fuse.js/dist/fuse.js","../../../apps/frappe/frappe/public/js/lib/hyper.min.js","../../../apps/frappe/frappe/public/js/frappe/chat.js","../../../apps/frappe/frappe/public/js/frappe/social/social_factory.js","../../../apps/frappe/frappe/public/js/frappe/misc/energy_point_utils.js"],"sourcesContent":["// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n/*\n\nInheritence \"Class\"\n-------------------\nsee: http://ejohn.org/blog/simple-javascript-inheritance/\nTo subclass, use:\n\n\tvar MyClass = Class.extend({\n\t\tinit: function\n\t})\n\n*/\n// https://stackoverflow.com/a/15052240/5353542\n\n/* Simple JavaScript Inheritance for ES 5.1\n * based on http://ejohn.org/blog/simple-javascript-inheritance/\n *  (inspired by base2 and Prototype)\n * MIT Licensed.\n */\n(function(global) {\n\t\"use strict\";\n\tvar fnTest = /xyz/.test(function(){xyz;}) ? /\\b_super\\b/ : /.*/;\n\n\t// The base Class implementation (does nothing)\n\tfunction Class(){}\n\n\t// Create a new Class that inherits from this class\n\tClass.extend = function(props) {\n\t  var _super = this.prototype;\n\n\t  // Set up the prototype to inherit from the base class\n\t  // (but without running the init constructor)\n\t  var proto = Object.create(_super);\n\n\t  // Copy the properties over onto the new prototype\n\t  for (var name in props) {\n\t\t// Check if we're overwriting an existing function\n\t\tproto[name] = typeof props[name] === \"function\" &&\n\t\t  typeof _super[name] == \"function\" && fnTest.test(props[name])\n\t\t  ? (function(name, fn){\n\t\t\t  return function() {\n\t\t\t\tvar tmp = this._super;\n\n\t\t\t\t// Add a new ._super() method that is the same method\n\t\t\t\t// but on the super-class\n\t\t\t\tthis._super = _super[name];\n\n\t\t\t\t// The method only need to be bound temporarily, so we\n\t\t\t\t// remove it when we're done executing\n\t\t\t\tvar ret = fn.apply(this, arguments);\n\t\t\t\tthis._super = tmp;\n\n\t\t\t\treturn ret;\n\t\t\t  };\n\t\t\t})(name, props[name])\n\t\t  : props[name];\n\t  }\n\n\t  // The new constructor\n\t  var newClass = typeof proto.init === \"function\"\n\t\t? proto.hasOwnProperty(\"init\")\n\t\t  ? proto.init // All construction is actually done in the init method\n\t\t  : function SubClass(){ _super.init.apply(this, arguments); }\n\t\t: function EmptyClass(){};\n\n\t  // Populate our constructed prototype object\n\t  newClass.prototype = proto;\n\n\t  // Enforce the constructor to be what we expect\n\t  proto.constructor = newClass;\n\n\t  // And make this class extendable\n\t  newClass.extend = Class.extend;\n\n\t  return newClass;\n\t};\n\n\t// export\n\tglobal.Class = Class;\n  })(this);","function format (str, args) {\n\tif(str==undefined) return str;\n\n\tthis.unkeyed_index = 0;\n\treturn str.replace(/\\{(\\w*)\\}/g, function(match, key) {\n\n\t\tif (key === '') {\n\t\t\tkey = this.unkeyed_index;\n\t\t\tthis.unkeyed_index++\n\t\t}\n\t\tif (key == +key) {\n\t\t\treturn args[key] !== undefined\n\t\t\t\t? args[key]\n\t\t\t\t: match;\n\t\t}\n\t}.bind(this));\n}\n\nif (jQuery) {\n\tjQuery.format = format\n}\n","frappe.provide('frappe.ui.keys.handlers');\n\nfrappe.ui.keys.setup = function() {\n\t$(window).on('keydown', function(e) {\n\t\tvar key = frappe.ui.keys.get_key(e);\n\t\tif(frappe.ui.keys.handlers[key]) {\n\t\t\tvar out = null;\n\t\t\tfor(var i=0, l = frappe.ui.keys.handlers[key].length; i<l; i++) {\n\t\t\t\tvar handler = frappe.ui.keys.handlers[key][i];\n\t\t\t\tvar _out = handler.apply(this, [e]);\n\t\t\t\tif(_out===false) {\n\t\t\t\t\tout = _out;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t});\n}\n\nfrappe.ui.keys.get_key = function(e) {\n\tvar keycode = e.keyCode || e.which;\n\tvar key = frappe.ui.keys.key_map[keycode] || String.fromCharCode(keycode);\n\n\tif(e.ctrlKey || e.metaKey) {\n\t\t// add ctrl+ the key\n\t\tkey = 'ctrl+' + key;\n\t}\n\tif(e.shiftKey) {\n\t\t// add ctrl+ the key\n\t\tkey = 'shift+' + key;\n\t}\n\tif (e.altKey) {\n\t\t// add alt+ the key\n\t\tkey = 'alt+' + key;\n\t}\n\tif (e.altKey && e.ctrlKey) {\n\t\t// add alt+ctrl+ the key or single key e.g f1,f2,etc..\n\t\treturn key.toLowerCase();\n\t}\n\treturn key.toLowerCase();\n}\n\nfrappe.ui.keys.on = function(key, handler) {\n\tif(!frappe.ui.keys.handlers[key]) {\n\t\tfrappe.ui.keys.handlers[key] = [];\n\t}\n\tfrappe.ui.keys.handlers[key].push(handler);\n}\n\nfrappe.ui.keys.on('ctrl+s', function(e) {\n\tfrappe.app.trigger_primary_action();\n\te.preventDefault();\n\treturn false;\n});\n\nfrappe.ui.keys.on('ctrl+g', function(e) {\n\t$(\"#navbar-search\").focus();\n\te.preventDefault();\n\treturn false;\n});\n\nfrappe.ui.keys.on('ctrl+b', function(e) {\n\tvar route = frappe.get_route();\n\tif(route[0]==='Form' || route[0]==='List') {\n\t\tfrappe.new_doc(route[1], true);\n\t\te.preventDefault();\n\t\treturn false;\n\t}\n});\n\nfrappe.ui.keys.on('escape', function(e) {\n\tclose_grid_and_dialog();\n});\n\nfrappe.ui.keys.on('esc', function(e) {\n\tclose_grid_and_dialog();\n});\n\nfrappe.ui.keys.on('enter', function(e) {\n\tif(window.cur_dialog && cur_dialog.confirm_dialog) {\n\t\tcur_dialog.get_primary_btn().trigger('click');\n\t}\n});\n\nfrappe.ui.keys.on('ctrl+down', function(e) {\n\tvar grid_row = frappe.ui.form.get_open_grid_form();\n\tgrid_row && grid_row.toggle_view(false, function() { grid_row.open_next() });\n});\n\nfrappe.ui.keys.on('ctrl+up', function(e) {\n\tvar grid_row = frappe.ui.form.get_open_grid_form();\n\tgrid_row && grid_row.toggle_view(false, function() { grid_row.open_prev() });\n});\n\nfrappe.ui.keys.on('shift+ctrl+r', function(e) {\n\tfrappe.ui.toolbar.clear_cache();\n});\n\nfrappe.ui.keys.key_map = {\n\t8: 'backspace',\n\t9: 'tab',\n\t13: 'enter',\n\t16: 'shift',\n\t17: 'ctrl',\n\t91: 'meta',\n\t18: 'alt',\n\t27: 'escape',\n\t37: 'left',\n\t39: 'right',\n\t38: 'up',\n\t40: 'down',\n\t32: 'space',\n\t112: 'f1',\n\t113: 'f2',\n\t114: 'f3',\n\t115: 'f4',\n\t116: 'f5'\n}\n\n// keyCode map\nfrappe.ui.keyCode = {\n\tESCAPE: 27,\n\tLEFT: 37,\n\tRIGHT: 39,\n\tUP: 38,\n\tDOWN: 40,\n\tENTER: 13,\n\tTAB: 9,\n\tSPACE: 32,\n\tBACKSPACE: 8\n}\n\nfunction close_grid_and_dialog() {\n\t// close open grid row\n\tvar open_row = $(\".grid-row-open\");\n\tif (open_row.length) {\n\t\tvar grid_row = open_row.data(\"grid_row\");\n\t\tgrid_row.toggle_view(false);\n\t\treturn false;\n\t}\n\n\t// close open dialog\n\tif (cur_dialog && !cur_dialog.no_cancel_flag) {\n\t\tcur_dialog.cancel();\n\t\treturn false;\n\t}\n}\n","// String.prototype.includes polyfill\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/includes\nif (!String.prototype.includes) {\n\tString.prototype.includes = function(search, start) {\n\t\t'use strict';\n\t\tif (typeof start !== 'number') {\n\t\t\tstart = 0;\n\t\t}\n\t\tif (start + search.length > this.length) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn this.indexOf(search, start) !== -1;\n\t\t}\n\t};\n}\n// Array.prototype.includes polyfill\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/includes\nif (!Array.prototype.includes) {\n\tObject.defineProperty(Array.prototype, 'includes', {\n\t\tvalue: function(searchElement, fromIndex) {\n\t\t\tif (this == null) {\n\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t}\n\t\t\tvar o = Object(this);\n\t\t\tvar len = o.length >>> 0;\n\t\t\tif (len === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar n = fromIndex | 0;\n\t\t\tvar k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\t\t\twhile (k < len) {\n\t\t\t\tif (o[k] === searchElement) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tk++;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t});\n}\n\n\nif (typeof String.prototype.trimLeft !== \"function\") {\n\tString.prototype.trimLeft = function() {\n\t\treturn this.replace(/^\\s+/, \"\");\n\t};\n}\nif (typeof String.prototype.trimRight !== \"function\") {\n\tString.prototype.trimRight = function() {\n\t\treturn this.replace(/\\s+$/, \"\");\n\t};\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nif (typeof Object.assign != 'function') {\n\t// Must be writable: true, enumerable: false, configurable: true\n\tObject.defineProperty(Object, \"assign\", {\n\t\tvalue: function assign(target) { // .length of function is 2\n\t\t\t'use strict';\n\t\t\tif (target == null) { // TypeError if undefined or null\n\t\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\t\t\t}\n\n\t\t\tvar to = Object(target);\n\n\t\t\tfor (var index = 1; index < arguments.length; index++) {\n\t\t\t\tvar nextSource = arguments[index];\n\n\t\t\t\tif (nextSource != null) { // Skip over if undefined or null\n\t\t\t\t\tfor (var nextKey in nextSource) {\n\t\t\t\t\t\t// Avoid bugs when hasOwnProperty is shadowed\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n\t\t\t\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn to;\n\t\t},\n\t\twritable: true,\n\t\tconfigurable: true\n\t});\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n// provide a namespace\nif(!window.frappe)\n\twindow.frappe = {};\n\nfrappe.provide = function(namespace) {\n\t// docs: create a namespace //\n\tvar nsl = namespace.split('.');\n\tvar parent = window;\n\tfor(var i=0; i<nsl.length; i++) {\n\t\tvar n = nsl[i];\n\t\tif(!parent[n]) {\n\t\t\tparent[n] = {}\n\t\t}\n\t\tparent = parent[n];\n\t}\n\treturn parent;\n}\n\nfrappe.provide(\"locals\");\nfrappe.provide(\"frappe.flags\");\nfrappe.provide(\"frappe.settings\");\nfrappe.provide(\"frappe.utils\");\nfrappe.provide(\"frappe.ui\");\nfrappe.provide(\"frappe.modules\");\nfrappe.provide(\"frappe.templates\");\nfrappe.provide(\"frappe.test_data\");\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n// library to mange assets (js, css, models, html) etc in the app.\n// will try and get from localStorge if latest are available\n// depends on frappe.versions to manage versioning\n\nfrappe.require = function(items, callback) {\n\tif(typeof items === \"string\") {\n\t\titems = [items];\n\t}\n\tfrappe.assets.execute(items, callback);\n};\n\nfrappe.assets = {\n\tcheck: function() {\n\t\t// if version is different then clear localstorage\n\t\tif(window._version_number != localStorage.getItem(\"_version_number\")) {\n\t\t\tfrappe.assets.clear_local_storage();\n\t\t\tconsole.log(\"Cleared App Cache.\");\n\t\t}\n\n\t\tif(localStorage._last_load) {\n\t\t\tvar not_updated_since = new Date() - new Date(localStorage._last_load);\n\t\t\tif(not_updated_since < 10000 || not_updated_since > 86400000) {\n\t\t\t\tfrappe.assets.clear_local_storage();\n\t\t\t}\n\t\t} else {\n\t\t\tfrappe.assets.clear_local_storage();\n\t\t}\n\n\t\tfrappe.assets.init_local_storage();\n\t},\n\n\tinit_local_storage: function() {\n\t\tlocalStorage._last_load = new Date();\n\t\tlocalStorage._version_number = window._version_number;\n\t\tif(frappe.boot) localStorage.metadata_version = frappe.boot.metadata_version;\n\t},\n\n\tclear_local_storage: function() {\n\t\t$.each([\"_last_load\", \"_version_number\", \"metadata_version\", \"page_info\",\n\t\t\t\"last_visited\"], function(i, key) {\n\t\t\tlocalStorage.removeItem(key);\n\t\t});\n\n\t\t// clear assets\n\t\tfor(var key in localStorage) {\n\t\t\tif(key.indexOf(\"desk_assets:\")===0 || key.indexOf(\"_page:\")===0\n\t\t\t\t|| key.indexOf(\"_doctype:\")===0 || key.indexOf(\"preferred_breadcrumbs:\")===0) {\n\t\t\t\tlocalStorage.removeItem(key);\n\t\t\t}\n\t\t}\n\t\tconsole.log(\"localStorage cleared\");\n\t},\n\n\n\t// keep track of executed assets\n\texecuted_ : [],\n\n\t// pass on to the handler to set\n\texecute: function(items, callback) {\n\t\tvar to_fetch = []\n\t\tfor(var i=0, l=items.length; i<l; i++) {\n\t\t\tif(!frappe.assets.exists(items[i])) {\n\t\t\t\tto_fetch.push(items[i]);\n\t\t\t}\n\t\t}\n\t\tif(to_fetch.length) {\n\t\t\tfrappe.assets.fetch(to_fetch, function() {\n\t\t\t\tfrappe.assets.eval_assets(items, callback);\n\t\t\t});\n\t\t} else {\n\t\t\tfrappe.assets.eval_assets(items, callback);\n\t\t}\n\t},\n\n\teval_assets: function(items, callback) {\n\t\tfor(var i=0, l=items.length; i<l; i++) {\n\t\t\t// execute js/css if not already.\n\t\t\tvar path = items[i];\n\t\t\tif(frappe.assets.executed_.indexOf(path)===-1) {\n\t\t\t\t// execute\n\t\t\t\tfrappe.assets.handler[frappe.assets.extn(path)](frappe.assets.get(path), path);\n\t\t\t\tfrappe.assets.executed_.push(path)\n\t\t\t}\n\t\t}\n\t\tcallback && callback();\n\t},\n\n\t// check if the asset exists in\n\t// localstorage\n\texists: function(src) {\n\t\tif(frappe.assets.executed_.indexOf(src)!== -1) {\n\t\t\treturn true;\n\t\t}\n\t\tif(frappe.boot.developer_mode) {\n\t\t\treturn false;\n\t\t}\n\t\tif(frappe.assets.get(src)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\t// load an asset via\n\tfetch: function(items, callback) {\n\t\t// this is virtual page load, only get the the source\n\t\t// *without* the template\n\n\t\tfrappe.call({\n\t\t\ttype: \"GET\",\n\t\t\tmethod:\"frappe.client.get_js\",\n\t\t\targs: {\n\t\t\t\t\"items\": items\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\t$.each(items, function(i, src) {\n\t\t\t\t\tfrappe.assets.add(src, r.message[i]);\n\t\t\t\t});\n\t\t\t\tcallback();\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t});\n\t},\n\n\tadd: function(src, txt) {\n\t\tif('localStorage' in window) {\n\t\t\ttry {\n\t\t\t\tfrappe.assets.set(src, txt);\n\t\t\t} catch(e) {\n\t\t\t\t// if quota is exceeded, clear local storage and set item\n\t\t\t\tfrappe.assets.clear_local_storage();\n\t\t\t\tfrappe.assets.set(src, txt);\n\t\t\t}\n\t\t}\n\t},\n\n\tget: function(src) {\n\t\treturn localStorage.getItem(\"desk_assets:\" + src);\n\t},\n\n\tset: function(src, txt) {\n\t\tlocalStorage.setItem(\"desk_assets:\" + src, txt);\n\t},\n\n\textn: function(src) {\n\t\tif(src.indexOf('?')!=-1) {\n\t\t\tsrc = src.split('?').slice(-1)[0];\n\t\t}\n\t\treturn src.split('.').slice(-1)[0];\n\t},\n\n\thandler: {\n\t\tjs: function(txt, src) {\n\t\t\tfrappe.dom.eval(txt);\n\t\t},\n\t\tcss: function(txt, src) {\n\t\t\tfrappe.dom.set_style(txt);\n\t\t}\n\t},\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n// for license information please see license.txt\n\nfrappe.provide(\"frappe.form.formatters\");\n\nfrappe.form.link_formatters = {};\n\nfrappe.form.formatters = {\n\t_right: function(value, options) {\n\t\tif(options && (options.inline || options.only_value)) {\n\t\t\treturn value;\n\t\t} else {\n\t\t\treturn \"<div style='text-align: right'>\" + value + \"</div>\";\n\t\t}\n\t},\n\tData: function(value) {\n\t\treturn value==null ? \"\" : value;\n\t},\n\tSelect: function(value) {\n\t\treturn __(frappe.form.formatters[\"Data\"](value));\n\t},\n\tFloat: function(value, docfield, options, doc) {\n\t\t// don't allow 0 precision for Floats, hence or'ing with null\n\t\tvar precision = docfield.precision\n\t\t\t|| cint(frappe.boot.sysdefaults && frappe.boot.sysdefaults.float_precision)\n\t\t\t|| null;\n\t\tif (docfield.options && docfield.options.trim()) {\n\t\t\t// options points to a currency field, but expects precision of float!\n\t\t\tdocfield.precision = precision;\n\t\t\treturn frappe.form.formatters.Currency(value, docfield, options, doc);\n\n\t\t} else {\n\t\t\t// show 1.000000 as 1\n\t\t\tif (!(options || {}).always_show_decimals && !is_null(value)) {\n\t\t\t\tvar temp = cstr(value).split(\".\");\n\t\t\t\tif (temp[1]==undefined || cint(temp[1])===0) {\n\t\t\t\t\tprecision = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn frappe.form.formatters._right(\n\t\t\t\t((value==null || value===\"\")\n\t\t\t\t\t? \"\"\n\t\t\t\t\t: format_number(value, null, precision)), options);\n\t\t}\n\t},\n\tInt: function(value, docfield, options) {\n\t\treturn frappe.form.formatters._right(value==null ? \"\" : cint(value), options)\n\t},\n\tPercent: function(value, docfield, options) {\n\t\treturn frappe.form.formatters._right(flt(value, 2) + \"%\", options)\n\t},\n\tRating: function(value) {\n\t\treturn `<span class=\"rating\">\n\t${Array.from(new Array(5)).map((_, i) =>\n\t\t`<i class=\"fa fa-fw fa-star ${i < (value || 0) ? \"star-click\": \"\" } star-icon\" data-idx=\"${(i+1)}\"></i>`\n\t).join('')}\n\t\t</span>`;\n\t},\n\tCurrency: function (value, docfield, options, doc) {\n\t\tvar currency  = frappe.meta.get_field_currency(docfield, doc);\n\t\tvar precision = docfield.precision || cint(frappe.boot.sysdefaults.currency_precision) || 2;\n\n\t\t// If you change anything below, it's going to hurt a company in UAE, a bit.\n\t\tif (precision > 2) {\n\t\t\tvar parts\t = cstr(value).split(\".\"); // should be minimum 2, comes from the DB\n\t\t\tvar decimals = parts.length > 1 ? parts[1] : \"\"; // parts.length == 2 ???\n\n\t\t\tif ( decimals.length < 3 || decimals.length < precision ) {\n\t\t\t\tconst fraction = frappe.model.get_value(\":Currency\", currency, \"fraction_units\") || 100; // if not set, minimum 2.\n\t\t\t\tprecision      = cstr(fraction).length - 1;\n\t\t\t}\n\t\t}\n\n\t\tvalue = (value == null || value === \"\") ? \"\" : format_currency(value, currency, precision);\n\n\t\tif ( options && options.only_value ) {\n\t\t\treturn value;\n\t\t} else {\n\t\t\treturn frappe.form.formatters._right(value, options);\n\t\t}\n\t},\n\tCheck: function(value) {\n\t\tif(value) {\n\t\t\treturn '<i class=\"octicon octicon-check\" style=\"margin-right: 3px;\"></i>';\n\t\t} else {\n\t\t\treturn '<i class=\"fa fa-square disabled-check\"></i>';\n\t\t}\n\t},\n\tLink: function(value, docfield, options, doc) {\n\t\tvar doctype = docfield._options || docfield.options;\n\t\tvar original_value = value;\n\t\tif(value && value.match && value.match(/^['\"].*['\"]$/)) {\n\t\t\tvalue.replace(/^.(.*).$/, \"$1\");\n\t\t}\n\n\t\tif(options && (options.for_print || options.only_value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif(frappe.form.link_formatters[doctype]) {\n\t\t\t// don't apply formatters in case of composite (parent field of same type)\n\t\t\tif (doc && doctype !== doc.doctype) {\n\t\t\t\tvalue = frappe.form.link_formatters[doctype](value, doc);\n\t\t\t}\n\t\t}\n\n\t\tif(!value) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif(value[0] == \"'\" && value[value.length -1] == \"'\") {\n\t\t\treturn value.substring(1, value.length - 1);\n\t\t}\n\t\tif(docfield && docfield.link_onclick) {\n\t\t\treturn repl('<a onclick=\"%(onclick)s\">%(value)s</a>',\n\t\t\t\t{onclick: docfield.link_onclick.replace(/\"/g, '&quot;'), value:value});\n\t\t} else if(docfield && doctype) {\n\t\t\treturn `<a class=\"grey\"\n\t\t\t\thref=\"#Form/${encodeURIComponent(doctype)}/${encodeURIComponent(original_value)}\"\n\t\t\t\tdata-doctype=\"${doctype}\"\n\t\t\t\tdata-name=\"${original_value}\">\n\t\t\t\t${__(options && options.label || value)}</a>`\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t},\n\tDate: function(value) {\n\t\tif (value) {\n\t\t\tvalue = frappe.datetime.str_to_user(value);\n\t\t\t// handle invalid date\n\t\t\tif (value===\"Invalid date\") {\n\t\t\t\tvalue = null;\n\t\t\t}\n\t\t}\n\n\t\treturn value || \"\";\n\t},\n\tDateRange: function(value) {\n\t\tif($.isArray(value)) {\n\t\t\treturn __(\"{0} to {1}\", [\n\t\t\t\tfrappe.datetime.str_to_user(value[0]),\n\t\t\t\tfrappe.datetime.str_to_user(value[1])\n\t\t\t]);\n\t\t} else {\n\t\t\treturn value || \"\";\n\t\t}\n\t},\n\tDatetime: function(value) {\n\t\tif(value) {\n\t\t\tvar m = moment(frappe.datetime.convert_to_user_tz(value));\n\t\t\tif(frappe.boot.sysdefaults.time_zone) {\n\t\t\t\tm = m.tz(frappe.boot.sysdefaults.time_zone);\n\t\t\t}\n\t\t\treturn m.format(frappe.boot.sysdefaults.date_format.toUpperCase() + ', h:mm a z');\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t},\n\tText: function(value) {\n\t\tif(value) {\n\t\t\tvar tags = [\"<p\", \"<div\", \"<br\", \"<table\"];\n\t\t\tvar match = false;\n\n\t\t\tfor(var i=0; i<tags.length; i++) {\n\t\t\t\tif(value.match(tags[i])) {\n\t\t\t\t\tmatch = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!match) {\n\t\t\t\tvalue = frappe.utils.replace_newlines(value);\n\t\t\t}\n\t\t}\n\n\t\treturn frappe.form.formatters.Data(value);\n\t},\n\tLikedBy: function(value) {\n\t\tvar html = \"\";\n\t\t$.each(JSON.parse(value || \"[]\"), function(i, v) {\n\t\t\tif(v) html+= frappe.avatar(v);\n\t\t});\n\t\treturn html;\n\t},\n\tTag: function(value) {\n\t\tvar html = \"\";\n\t\t$.each((value || \"\").split(\",\"), function(i, v) {\n\t\t\tif(v) html+= '<span class=\"label label-info\" \\\n\t\t\t\tstyle=\"margin-right: 7px; cursor: pointer;\"\\\n\t\t\t\tdata-field=\"_user_tags\" data-label=\"'+v+'\">'+v +'</span>';\n\t\t});\n\t\treturn html;\n\t},\n\tComment: function(value) {\n\t\tvar html = \"\";\n\t\t$.each(JSON.parse(value || \"[]\"), function(i, v) {\n\t\t\tif(v) html+= '<span class=\"label label-warning\" \\\n\t\t\t\tstyle=\"margin-right: 7px;\"\\\n\t\t\t\tdata-field=\"_comments\" data-label=\"'+v.name+'\">'+v.comment+'</span>';\n\t\t});\n\t\treturn html;\n\t},\n\tAssign: function(value) {\n\t\tvar html = \"\";\n\t\t$.each(JSON.parse(value || \"[]\"), function(i, v) {\n\t\t\tif(v) html+= '<span class=\"label label-warning\" \\\n\t\t\t\tstyle=\"margin-right: 7px;\"\\\n\t\t\t\tdata-field=\"_assign\">'+v+'</span>';\n\t\t});\n\t\treturn html;\n\t},\n\tSmallText: function(value) {\n\t\treturn frappe.form.formatters.Text(value);\n\t},\n\tTextEditor: function(value) {\n\t\treturn frappe.form.formatters.Text(value);\n\t},\n\tCode: function(value) {\n\t\treturn \"<pre>\" + (value==null ? \"\" : $(\"<div>\").text(value).html()) + \"</pre>\"\n\t},\n\tWorkflowState: function(value) {\n\t\tvar workflow_state = frappe.get_doc(\"Workflow State\", value);\n\t\tif(workflow_state) {\n\t\t\treturn repl(\"<span class='label label-%(style)s' \\\n\t\t\t\tdata-workflow-state='%(value)s'\\\n\t\t\t\tstyle='padding-bottom: 4px; cursor: pointer;'>\\\n\t\t\t\t<i class='fa fa-small fa-white fa-%(icon)s'></i> %(value)s</span>\", {\n\t\t\t\t\tvalue: value,\n\t\t\t\t\tstyle: workflow_state.style.toLowerCase(),\n\t\t\t\t\ticon: workflow_state.icon\n\t\t\t\t});\n\t\t} else {\n\t\t\treturn \"<span class='label'>\" + value + \"</span>\";\n\t\t}\n\t},\n\tEmail: function(value) {\n\t\treturn $(\"<div></div>\").text(value).html();\n\t},\n\tFileSize: function(value) {\n\t\tif(value > 1048576) {\n\t\t\tvalue = flt(flt(value) / 1048576, 1) + \"M\";\n\t\t} else if (value > 1024) {\n\t\t\tvalue = flt(flt(value) / 1024, 1) + \"K\";\n\t\t}\n\t\treturn value;\n\t},\n\tTableMultiSelect: function(rows, df, options) {\n\t\trows = rows || [];\n\t\tconst meta = frappe.get_meta(df.options);\n\t\tconst link_field = meta.fields.find(df => df.fieldtype === 'Link');\n\t\tconst formatted_values = rows.map(row => {\n\t\t\tconst value = row[link_field.fieldname];\n\t\t\treturn frappe.format(value, link_field, options, row);\n\t\t});\n\t\treturn formatted_values.join(', ');\n\t}\n}\n\nfrappe.form.get_formatter = function(fieldtype) {\n\tif(!fieldtype)\n\t\tfieldtype = \"Data\";\n\treturn frappe.form.formatters[fieldtype.replace(/ /g, \"\")] || frappe.form.formatters.Data;\n}\n\nfrappe.format = function(value, df, options, doc) {\n\tif(!df) df = {\"fieldtype\":\"Data\"};\n\tvar fieldtype = df.fieldtype || \"Data\";\n\n\t// format Dynamic Link as a Link\n\tif(fieldtype===\"Dynamic Link\") {\n\t\tfieldtype = \"Link\";\n\t\tdf._options = doc ? doc[df.options] : null;\n\t}\n\n\tvar formatter = df.formatter || frappe.form.get_formatter(fieldtype);\n\n\tvar formatted = formatter(value, df, options, doc);\n\n\tif (typeof formatted == \"string\")\n\t\tformatted = frappe.dom.remove_script_and_style(formatted);\n\n\treturn formatted;\n}\n\nfrappe.get_format_helper = function(doc) {\n\tvar helper = {\n\t\tget_formatted: function(fieldname) {\n\t\t\tvar df = frappe.meta.get_docfield(doc.doctype, fieldname);\n\t\t\tif(!df) { console.log(\"fieldname not found: \" + fieldname); }\n\t\t\treturn frappe.format(doc[fieldname], df, {inline:1}, doc);\n\t\t}\n\t};\n\t$.extend(helper, doc);\n\treturn helper;\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n// add a new dom element\nfrappe.provide('frappe.dom');\n\nfrappe.dom = {\n\tid_count: 0,\n\tfreeze_count: 0,\n\tby_id: function(id) {\n\t\treturn document.getElementById(id);\n\t},\n\tget_unique_id: function() {\n\t\tconst id = 'unique-' + frappe.dom.id_count;\n\t\tfrappe.dom.id_count++;\n\t\treturn id;\n\t},\n\tset_unique_id: function(ele) {\n\t\tvar $ele = $(ele);\n\t\tif($ele.attr('id')) {\n\t\t\treturn $ele.attr('id');\n\t\t}\n\t\tvar id = 'unique-' + frappe.dom.id_count;\n\t\t$ele.attr('id', id);\n\t\tfrappe.dom.id_count++;\n\t\treturn id;\n\t},\n\teval: function(txt) {\n\t\tif(!txt) return;\n\t\tvar el = document.createElement('script');\n\t\tel.appendChild(document.createTextNode(txt));\n\t\t// execute the script globally\n\t\tdocument.getElementsByTagName('head')[0].appendChild(el);\n\t},\n\tremove_script_and_style: function(txt) {\n\t\tconst evil_tags = [\"script\", \"style\", \"noscript\", \"title\", \"meta\", \"base\", \"head\"];\n\t\tconst regex = new RegExp(evil_tags.map(tag => `<${tag}>.*<\\\\/${tag}>`).join('|'));\n\t\tif (!regex.test(txt)) {\n\t\t\t// no evil tags found, skip the DOM method entirely!\n\t\t\treturn txt;\n\t\t}\n\n\t\tvar div = document.createElement('div');\n\t\tdiv.innerHTML = txt;\n\t\tvar found = false;\n\t\tevil_tags.forEach(function(e) {\n\t\t\tvar elements = div.getElementsByTagName(e);\n\t\t\ti = elements.length;\n\t\t\twhile (i--) {\n\t\t\t\tfound = true;\n\t\t\t\telements[i].parentNode.removeChild(elements[i]);\n\t\t\t}\n\t\t});\n\n\t\t// remove links with rel=\"stylesheet\"\n\t\tvar elements = div.getElementsByTagName('link');\n\t\tvar i = elements.length;\n\t\twhile (i--) {\n\t\t\tif (elements[i].getAttribute(\"rel\")==\"stylesheet\"){\n\t\t\t\tfound = true;\n\t\t\t\telements[i].parentNode.removeChild(elements[i]);\n\t\t\t}\n\t\t}\n\t\tif(found) {\n\t\t\treturn div.innerHTML;\n\t\t} else {\n\t\t\t// don't disturb\n\t\t\treturn txt;\n\t\t}\n\t},\n\tis_element_in_viewport: function (el, tolerance=0) {\n\n\t\t//special bonus for those using jQuery\n\t\tif (typeof jQuery === \"function\" && el instanceof jQuery) {\n\t\t\tel = el[0];\n\t\t}\n\n\t\tvar rect = el.getBoundingClientRect();\n\n\t\treturn (\n\t\t\trect.top + tolerance >= 0\n\t\t\t&& rect.left + tolerance >= 0\n\t\t\t&& rect.bottom - tolerance <= $(window).height()\n\t\t\t&& rect.right - tolerance <= $(window).width()\n\t\t);\n\t},\n\n\tset_style: function(txt, id) {\n\t\tif(!txt) return;\n\n\t\tvar se = document.createElement('style');\n\t\tse.type = \"text/css\";\n\n\t\tif (id) {\n\t\t\tvar element = document.getElementById(id);\n\t\t\tif (element) {\n\t\t\t\telement.parentNode.removeChild(element);\n\t\t\t}\n\t\t\tse.id = id;\n\t\t}\n\n\t\tif (se.styleSheet) {\n\t\t\tse.styleSheet.cssText = txt;\n\t\t} else {\n\t\t\tse.appendChild(document.createTextNode(txt));\n\t\t}\n\t\tdocument.getElementsByTagName('head')[0].appendChild(se);\n\t\treturn se;\n\t},\n\tadd: function(parent, newtag, className, cs, innerHTML, onclick) {\n\t\tif(parent && parent.substr)parent = frappe.dom.by_id(parent);\n\t\tvar c = document.createElement(newtag);\n\t\tif(parent)\n\t\t\tparent.appendChild(c);\n\n\t\t// if image, 3rd parameter is source\n\t\tif(className) {\n\t\t\tif(newtag.toLowerCase()=='img')\n\t\t\t\tc.src = className\n\t\t\telse\n\t\t\t\tc.className = className;\n\t\t}\n\t\tif(cs) frappe.dom.css(c,cs);\n\t\tif(innerHTML) c.innerHTML = innerHTML;\n\t\tif(onclick) c.onclick = onclick;\n\t\treturn c;\n\t},\n\tcss: function(ele, s) {\n\t\tif(ele && s) {\n\t\t\t$.extend(ele.style, s);\n\t\t}\n\t\treturn ele;\n\t},\n\tactivate: function($parent, $child, common_class, active_class='active') {\n\t\t$parent.find(`.${common_class}.${active_class}`)\n\t\t\t.removeClass(active_class);\n\t\t$child.addClass(active_class);\n\t},\n\tfreeze: function(msg, css_class) {\n\t\t// blur\n\t\tif(!$('#freeze').length) {\n\t\t\tvar freeze = $('<div id=\"freeze\" class=\"modal-backdrop fade\"></div>')\n\t\t\t\t.on(\"click\", function() {\n\t\t\t\t\tif (cur_frm && cur_frm.cur_grid) {\n\t\t\t\t\t\tcur_frm.cur_grid.toggle_view();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.appendTo(\"#body_div\");\n\n\t\t\tfreeze.html(repl('<div class=\"freeze-message-container\"><div class=\"freeze-message\"><p class=\"lead\">%(msg)s</p></div></div>',\n\t\t\t\t{msg: msg || \"\"}));\n\n\t\t\tsetTimeout(function() { freeze.addClass(\"in\") }, 1);\n\n\t\t} else {\n\t\t\t$(\"#freeze\").addClass(\"in\");\n\t\t}\n\n\t\tif (css_class) {\n\t\t\t$(\"#freeze\").addClass(css_class);\n\t\t}\n\n\t\tfrappe.dom.freeze_count++;\n\t},\n\tunfreeze: function() {\n\t\tif(!frappe.dom.freeze_count) return; // anything open?\n\t\tfrappe.dom.freeze_count--;\n\t\tif(!frappe.dom.freeze_count) {\n\t\t\tvar freeze = $('#freeze').removeClass(\"in\").remove();\n\t\t}\n\t},\n\tsave_selection: function() {\n\t\t// via http://stackoverflow.com/questions/5605401/insert-link-in-contenteditable-element\n\t\tif (window.getSelection) {\n\t\t\tvar sel = window.getSelection();\n\t\t\tif (sel.getRangeAt && sel.rangeCount) {\n\t\t\t\tvar ranges = [];\n\t\t\t\tfor (var i = 0, len = sel.rangeCount; i < len; ++i) {\n\t\t\t\t\tranges.push(sel.getRangeAt(i));\n\t\t\t\t}\n\t\t\t\treturn ranges;\n\t\t\t}\n\t\t} else if (document.selection && document.selection.createRange) {\n\t\t\treturn document.selection.createRange();\n\t\t}\n\t\treturn null;\n\t},\n\trestore_selection: function(savedSel) {\n\t\tif (savedSel) {\n\t\t\tif (window.getSelection) {\n\t\t\t\tvar sel = window.getSelection();\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tfor (var i = 0, len = savedSel.length; i < len; ++i) {\n\t\t\t\t\tsel.addRange(savedSel[i]);\n\t\t\t\t}\n\t\t\t} else if (document.selection && savedSel.select) {\n\t\t\t\tsavedSel.select();\n\t\t\t}\n\t\t}\n\t},\n\tis_touchscreen: function() {\n\t\treturn ('ontouchstart' in window)\n\t},\n\thandle_broken_images(container) {\n\t\t$(container).find('img').on('error', (e) => {\n\t\t\tconst $img = $(e.currentTarget);\n\t\t\t$img.addClass('no-image');\n\t\t});\n\t},\n\tscroll_to_bottom(container) {\n\t\tconst $container = $(container);\n\t\t$container.scrollTop($container[0].scrollHeight);\n\t},\n\tfile_to_base64(file_obj) {\n\t\treturn new Promise(resolve => {\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = function() {\n\t\t\t\tresolve(reader.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(file_obj);\n\t\t});\n\t},\n\tscroll_to_section(section_name) {\n\t\tsetTimeout(() => {\n\t\t\tconst section = $(`a:contains(\"${section_name}\")`);\n\t\t\tif (section.length) {\n\t\t\t\tif(section.parent().hasClass('collapsed')) {\n\t\t\t\t\t// opens the section\n\t\t\t\t\tsection.click();\n\t\t\t\t}\n\t\t\t\tfrappe.ui.scroll(section.parent().parent());\n\t\t\t}\n\t\t}, 200);\n\t},\n\tpixel_to_inches(pixels) {\n\t\tconst div = $('<div id=\"dpi\" style=\"height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;\"></div>');\n\t\tdiv.appendTo(document.body);\n\n\t\tconst dpi_x = document.getElementById('dpi').offsetWidth;\n\t\tconst inches = pixels / dpi_x;\n\t\tdiv.remove();\n\n\t\treturn inches;\n\t}\n};\n\nfrappe.ellipsis = function(text, max) {\n\tif(!max) max = 20;\n\ttext = cstr(text);\n\tif(text.length > max) {\n\t\ttext = text.substr(0, max) + '...';\n\t}\n\treturn text;\n};\n\nfrappe.run_serially = function(tasks) {\n\tvar result = Promise.resolve();\n\ttasks.forEach(task => {\n\t\tif(task) {\n\t\t\tresult = result.then ? result.then(task) : Promise.resolve();\n\t\t}\n\t});\n\treturn result;\n};\n\nfrappe.load_image = (src, onload, onerror, preprocess = () => {}) => {\n\tvar tester = new Image();\n\ttester.onload = function() {\n\t\tonload(this);\n\t};\n\ttester.onerror = onerror;\n\n\tpreprocess(tester);\n\ttester.src = src;\n}\n\nfrappe.timeout = seconds => {\n\treturn new Promise((resolve) => {\n\t\tsetTimeout(() => resolve(), seconds * 1000);\n\t});\n};\n\nfrappe.scrub = function(text, spacer='_') {\n\treturn text.replace(/ /g, spacer).toLowerCase();\n};\n\nfrappe.get_modal = function(title, content) {\n\treturn $(`<div class=\"modal fade\" style=\"overflow: auto;\" tabindex=\"-1\">\n\t\t<div class=\"modal-dialog\">\n\t\t\t<div class=\"modal-content\">\n\t\t\t\t<div class=\"modal-header\">\n\t                <div class=\"row\">\n\t                    <div class=\"col-xs-7\">\n\t\t\t\t\t\t\t<span class=\"indicator hidden\"></span>\n\t                        <h4 class=\"modal-title\" style=\"font-weight: bold;\">${title}</h4>\n\t                    </div>\n\t                    <div class=\"col-xs-5\">\n\t                        <div class=\"text-right buttons\">\n\t            \t\t\t\t<button type=\"button\" class=\"btn btn-default btn-sm btn-modal-close\"\n\t                                data-dismiss=\"modal\">\n\t\t\t\t\t\t\t\t\t<i class=\"octicon octicon-x visible-xs\" style=\"padding: 1px 0px;\"></i>\n\t\t\t\t\t\t\t\t\t<span class=\"hidden-xs\">${__(\"Close\")}</span></button>\n\t            \t\t\t\t<button type=\"button\" class=\"btn btn-primary btn-sm hide\">\n\t                                ${__(\"Confirm\")}</button>\n\t                        </div>\n\t                    </div>\n\t                </div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"modal-body ui-front\">${content}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>`)\n};\n\nfrappe.is_online = function() {\n\tif (frappe.boot.developer_mode == 1) {\n\t\t// always online in developer_mode\n\t\treturn true;\n\t}\n\tif ('onLine' in navigator) {\n\t\treturn navigator.onLine;\n\t}\n\treturn true;\n};\n\n// bind online/offline events\n$(window).on('online', function() {\n\tfrappe.show_alert({\n\t\tindicator: 'green',\n\t\tmessage: __('You are connected to internet.')\n\t});\n});\n\n$(window).on('offline', function() {\n\tfrappe.show_alert({\n\t\tindicator: 'orange',\n\t\tmessage: __('Connection lost. Some features might not work.')\n\t});\n});\n\n\n// add <option> list to <select>\n(function($) {\n\t$.fn.add_options = function(options_list) {\n\t\t// create options\n\t\tfor(var i=0, j=options_list.length; i<j; i++) {\n\t\t\tvar v = options_list[i];\n\t\t\tif (is_null(v)) {\n\t\t\t\tvar value = null;\n\t\t\t\tvar label = null;\n\t\t\t} else {\n\t\t\t\tvar is_value_null = is_null(v.value);\n\t\t\t\tvar is_label_null = is_null(v.label);\n\t\t\t\tvar is_disabled = Boolean(v.disabled);\n\n\t\t\t\tif (is_value_null && is_label_null) {\n\t\t\t\t\tvar value = v;\n\t\t\t\t\tvar label = __(v);\n\t\t\t\t} else {\n\t\t\t\t\tvar value = is_value_null ? \"\" : v.value;\n\t\t\t\t\tvar label = is_label_null ? __(value) : __(v.label);\n\t\t\t\t}\n\t\t\t}\n\t\t\t$('<option>').html(cstr(label))\n\t\t\t\t.attr('value', value)\n\t\t\t\t.prop('disabled', is_disabled)\n\t\t\t\t.appendTo(this);\n\t\t}\n\t\t// select the first option\n\t\tthis.selectedIndex = 0;\n\t\treturn $(this);\n\t}\n\t$.fn.set_working = function() {\n\t\tthis.prop('disabled', true);\n\t}\n\t$.fn.done_working = function() {\n\t\tthis.prop('disabled', false);\n\t}\n})(jQuery);\n\n(function($) {\n\tfunction pasteIntoInput(el, text) {\n\t\tel.focus();\n\t\tif (typeof el.selectionStart == \"number\") {\n\t\t\tvar val = el.value;\n\t\t\tvar selStart = el.selectionStart;\n\t\t\tel.value = val.slice(0, selStart) + text + val.slice(el.selectionEnd);\n\t\t\tel.selectionEnd = el.selectionStart = selStart + text.length;\n\t\t} else if (typeof document.selection != \"undefined\") {\n\t\t\tvar textRange = document.selection.createRange();\n\t\t\ttextRange.text = text;\n\t\t\ttextRange.collapse(false);\n\t\t\ttextRange.select();\n\t\t}\n\t}\n\n\tfunction allowTabChar(el) {\n\t\t$(el).keydown(function(e) {\n\t\t\tif (e.which == 9) {\n\t\t\t\tpasteIntoInput(this, \"\\t\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\t// For Opera, which only allows suppression of keypress events, not keydown\n\t\t$(el).keypress(function(e) {\n\t\t\tif (e.which == 9) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t}\n\n\t$.fn.allowTabs = function() {\n\t\tif (this.jquery) {\n\t\t\tthis.each(function() {\n\t\t\t\tif (this.nodeType == 1) {\n\t\t\t\t\tvar nodeName = this.nodeName.toLowerCase();\n\t\t\t\t\tif (nodeName == \"textarea\" || (nodeName == \"input\" && this.type == \"text\")) {\n\t\t\t\t\t\tallowTabChar(this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\treturn this;\n\t}\n})(jQuery);","import '../class';\n\nfrappe.provide(\"frappe.ui.form\");\nfrappe.ui.form.Layout = Class.extend({\n\tinit: function(opts) {\n\t\tthis.views = {};\n\t\tthis.pages = [];\n\t\tthis.sections = [];\n\t\tthis.fields_list = [];\n\t\tthis.fields_dict = {};\n\n\t\t$.extend(this, opts);\n\t},\n\tmake: function() {\n\t\tif(!this.parent && this.body) {\n\t\t\tthis.parent = this.body;\n\t\t}\n\t\tthis.wrapper = $('<div class=\"form-layout\">').appendTo(this.parent);\n\t\tthis.message = $('<div class=\"form-message text-muted small hidden\"></div>').appendTo(this.wrapper);\n\t\tif(!this.fields) {\n\t\t\tthis.fields = this.get_doctype_fields();\n\t\t}\n\t\tthis.setup_tabbing();\n\t\tthis.render();\n\t},\n\tshow_empty_form_message: function() {\n\t\tif(!(this.wrapper.find(\".frappe-control:visible\").length || this.wrapper.find(\".section-head.collapsed\").length)) {\n\t\t\tthis.show_message(__(\"This form does not have any input\"));\n\t\t}\n\t},\n\tget_doctype_fields: function() {\n\t\tlet fields = [\n\t\t\t{\n\t\t\t\tparent: this.frm.doctype,\n\t\t\t\tfieldtype: 'Data',\n\t\t\t\tfieldname: '__newname',\n\t\t\t\treqd: 1,\n\t\t\t\thidden: 1,\n\t\t\t\tlabel: __('Name'),\n\t\t\t\tget_status: function(field) {\n\t\t\t\t\tif (field.frm && field.frm.is_new()\n\t\t\t\t\t\t&& field.frm.meta.autoname\n\t\t\t\t\t\t&& ['prompt', 'name'].includes(field.frm.meta.autoname.toLowerCase())) {\n\t\t\t\t\t\treturn 'Write';\n\t\t\t\t\t}\n\t\t\t\t\treturn 'None';\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\tfields = fields.concat(frappe.meta.sort_docfields(frappe.meta.docfield_map[this.doctype]));\n\t\treturn fields;\n\t},\n\tshow_message: function(html, color) {\n\t\tif (this.message_color) {\n\t\t\t// remove previous color\n\t\t\tthis.message.removeClass(this.message_color);\n\t\t}\n\t\tthis.message_color = (color && ['yellow', 'blue'].includes(color)) ? color : 'blue';\n\t\tif(html) {\n\t\t\tif(html.substr(0, 1)!=='<') {\n\t\t\t\t// wrap in a block\n\t\t\t\thtml = '<div>' + html + '</div>';\n\t\t\t}\n\t\t\tthis.message.removeClass('hidden').addClass(this.message_color);\n\t\t\t$(html).appendTo(this.message);\n\t\t} else {\n\t\t\tthis.message.empty().addClass('hidden');\n\t\t}\n\t},\n\trender: function(new_fields) {\n\t\tvar me = this;\n\t\tvar fields = new_fields || this.fields;\n\n\t\tthis.section = null;\n\t\tthis.column = null;\n\n\t\tif (this.with_dashboard) {\n\t\t\tthis.setup_dashboard_section();\n\t\t}\n\n\t\tif (this.no_opening_section()) {\n\t\t\tthis.make_section();\n\t\t}\n\t\t$.each(fields, function(i, df) {\n\t\t\tswitch(df.fieldtype) {\n\t\t\t\tcase \"Fold\":\n\t\t\t\t\tme.make_page(df);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Section Break\":\n\t\t\t\t\tme.make_section(df);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Column Break\":\n\t\t\t\t\tme.make_column(df);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tme.make_field(df);\n\t\t\t}\n\t\t});\n\n\t},\n\n\tno_opening_section: function() {\n\t\treturn (this.fields[0] && this.fields[0].fieldtype!=\"Section Break\") || !this.fields.length;\n\t},\n\n\tsetup_dashboard_section: function() {\n\t\tif (this.no_opening_section()) {\n\t\t\tthis.fields.unshift({fieldtype: 'Section Break'});\n\t\t}\n\n\t\tthis.fields.unshift({\n\t\t\tfieldtype: 'Section Break',\n\t\t\tfieldname: '_form_dashboard',\n\t\t\tlabel: __('Dashboard'),\n\t\t\tcssClass: 'form-dashboard',\n\t\t\tcollapsible: 1,\n\t\t\t//hidden: 1\n\t\t});\n\t},\n\n\treplace_field: function(fieldname, df, render) {\n\t\tdf.fieldname = fieldname; // change of fieldname is avoided\n\t\tif (this.fields_dict[fieldname] && this.fields_dict[fieldname].df) {\n\t\t\tconst fieldobj = this.init_field(df, render);\n\t\t\tthis.fields_dict[fieldname].$wrapper.remove();\n\t\t\tthis.fields_list.splice(this.fields_dict[fieldname], 1, fieldobj);\n\t\t\tthis.fields_dict[fieldname] = fieldobj;\n\t\t\tif (this.frm) {\n\t\t\t\tfieldobj.perm = this.frm.perm;\n\t\t\t}\n\t\t\tthis.section.fields_list.splice(this.section.fields_dict[fieldname], 1, fieldobj);\n\t\t\tthis.section.fields_dict[fieldname] = fieldobj;\n\t\t\tthis.refresh_fields([df]);\n\t\t}\n\t},\n\n\tmake_field: function(df, colspan, render) {\n\t\t!this.section && this.make_section();\n\t\t!this.column && this.make_column();\n\n\t\tconst fieldobj = this.init_field(df, render);\n\t\tthis.fields_list.push(fieldobj);\n\t\tthis.fields_dict[df.fieldname] = fieldobj;\n\t\tif(this.frm) {\n\t\t\tfieldobj.perm = this.frm.perm;\n\t\t}\n\n\t\tthis.section.fields_list.push(fieldobj);\n\t\tthis.section.fields_dict[df.fieldname] = fieldobj;\n\t},\n\n\tinit_field: function(df, render = false) {\n\t\tconst fieldobj = frappe.ui.form.make_control({\n\t\t\tdf: df,\n\t\t\tdoctype: this.doctype,\n\t\t\tparent: this.column.wrapper.get(0),\n\t\t\tfrm: this.frm,\n\t\t\trender_input: render\n\t\t});\n\n\t\tfieldobj.layout = this;\n\t\treturn fieldobj;\n\t},\n\n\tmake_page: function(df) {\n\t\tvar me = this,\n\t\t\thead = $('<div class=\"form-clickable-section text-center\">\\\n\t\t\t\t<a class=\"btn-fold h6 text-muted\">'+__(\"Show more details\")+'</a>\\\n\t\t\t</div>').appendTo(this.wrapper);\n\n\t\tthis.page = $('<div class=\"form-page second-page hide\"></div>').appendTo(this.wrapper);\n\n\t\tthis.fold_btn = head.find(\".btn-fold\").on(\"click\", function() {\n\t\t\tvar page = $(this).parent().next();\n\t\t\tif(page.hasClass(\"hide\")) {\n\t\t\t\t$(this).removeClass(\"btn-fold\").html(__(\"Hide details\"));\n\t\t\t\tpage.removeClass(\"hide\");\n\t\t\t\tfrappe.utils.scroll_to($(this), true, 30);\n\t\t\t\tme.folded = false;\n\t\t\t} else {\n\t\t\t\t$(this).addClass(\"btn-fold\").html(__(\"Show more details\"));\n\t\t\t\tpage.addClass(\"hide\");\n\t\t\t\tme.folded = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.section = null;\n\t\tthis.folded = true;\n\t},\n\n\tunfold: function() {\n\t\tthis.fold_btn.trigger('click');\n\t},\n\n\tmake_section: function(df) {\n\t\tthis.section = new frappe.ui.form.Section(this, df);\n\n\t\t// append to layout fields\n\t\tif(df) {\n\t\t\tthis.fields_dict[df.fieldname] = this.section;\n\t\t\tthis.fields_list.push(this.section);\n\t\t}\n\n\t\tthis.column = null;\n\t},\n\n\tmake_column: function(df) {\n\t\tthis.column = new frappe.ui.form.Column(this.section, df);\n\t\tif(df && df.fieldname) {\n\t\t\tthis.fields_list.push(this.column);\n\t\t}\n\t},\n\n\trefresh: function(doc) {\n\t\tvar me = this;\n\t\tif(doc) this.doc = doc;\n\n\t\tif (this.frm) {\n\t\t\tthis.wrapper.find(\".empty-form-alert\").remove();\n\t\t}\n\n\t\t// NOTE this might seem redundant at first, but it needs to be executed when frm.refresh_fields is called\n\t\tme.attach_doc_and_docfields(true);\n\n\t\tif(this.frm && this.frm.wrapper) {\n\t\t\t$(this.frm.wrapper).trigger(\"refresh-fields\");\n\t\t}\n\n\t\t// dependent fields\n\t\tthis.refresh_dependency();\n\n\t\t// refresh sections\n\t\tthis.refresh_sections();\n\n\t\t// collapse sections\n\t\tif(this.frm) {\n\t\t\tthis.refresh_section_collapse();\n\t\t}\n\t},\n\n\trefresh_sections: function() {\n\t\tvar cnt = 0;\n\n\t\t// hide invisible sections and set alternate background color\n\t\tthis.wrapper.find(\".form-section:not(.hide-control)\").each(function() {\n\t\t\tvar $this = $(this).removeClass(\"empty-section\")\n\t\t\t\t.removeClass(\"visible-section\")\n\t\t\t\t.removeClass(\"shaded-section\");\n\t\t\tif(!$this.find(\".frappe-control:not(.hide-control)\").length\n\t\t\t\t&& !$this.hasClass('form-dashboard')) {\n\t\t\t\t// nothing visible, hide the section\n\t\t\t\t$this.addClass(\"empty-section\");\n\t\t\t} else {\n\t\t\t\t$this.addClass(\"visible-section\");\n\t\t\t\tif(cnt % 2) {\n\t\t\t\t\t$this.addClass(\"shaded-section\");\n\t\t\t\t}\n\t\t\t\tcnt++;\n\t\t\t}\n\t\t});\n\t},\n\n\trefresh_fields: function(fields) {\n\t\tlet fieldnames = fields.map((field) => {\n\t\t\tif(field.fieldname) return field.fieldname;\n\t\t});\n\n\t\tthis.fields_list.map(fieldobj => {\n\t\t\tif(fieldnames.includes(fieldobj.df.fieldname)) {\n\t\t\t\tfieldobj.refresh();\n\t\t\t\tif(fieldobj.df[\"default\"]) {\n\t\t\t\t\tfieldobj.set_input(fieldobj.df[\"default\"]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tadd_fields: function(fields) {\n\t\tthis.render(fields);\n\t\tthis.refresh_fields(fields);\n\t},\n\n\trefresh_section_collapse: function() {\n\t\tif(!this.doc) return;\n\n\t\tfor(var i=0; i<this.sections.length; i++) {\n\t\t\tvar section = this.sections[i];\n\t\t\tvar df = section.df;\n\t\t\tif(df && df.collapsible) {\n\t\t\t\tvar collapse = true;\n\n\t\t\t\tif(df.collapsible_depends_on) {\n\t\t\t\t\tcollapse = !this.evaluate_depends_on_value(df.collapsible_depends_on);\n\t\t\t\t}\n\n\t\t\t\tif (collapse && section.has_missing_mandatory()) {\n\t\t\t\t\tcollapse = false;\n\t\t\t\t}\n\n\t\t\t\tif(df.fieldname === '_form_dashboard') {\n\t\t\t\t\tcollapse = localStorage.getItem('collapseFormDashboard')==='yes' ? true : false;\n\t\t\t\t}\n\n\t\t\t\tsection.collapse(collapse);\n\t\t\t}\n\t\t}\n\t},\n\n\tattach_doc_and_docfields: function(refresh) {\n\t\tvar me = this;\n\t\tfor(var i=0, l=this.fields_list.length; i<l; i++) {\n\t\t\tvar fieldobj = this.fields_list[i];\n\t\t\tif(me.doc) {\n\t\t\t\tfieldobj.doc = me.doc;\n\t\t\t\tfieldobj.doctype = me.doc.doctype;\n\t\t\t\tfieldobj.docname = me.doc.name;\n\t\t\t\tfieldobj.df = frappe.meta.get_docfield(me.doc.doctype,\n\t\t\t\t\tfieldobj.df.fieldname, me.frm ? me.frm.doc.name : me.doc.name) || fieldobj.df;\n\n\t\t\t\t// on form change, permissions can change\n\t\t\t\tif(me.frm) {\n\t\t\t\t\tfieldobj.perm = me.frm.perm;\n\t\t\t\t}\n\t\t\t}\n\t\t\trefresh && fieldobj.df && fieldobj.refresh && fieldobj.refresh();\n\t\t}\n\t},\n\n\trefresh_section_count: function() {\n\t\tthis.wrapper.find(\".section-count-label:visible\").each(function(i) {\n\t\t\t$(this).html(i+1);\n\t\t});\n\t},\n\tsetup_tabbing: function() {\n\t\tvar me = this;\n\t\tthis.wrapper.on(\"keydown\", function(ev) {\n\t\t\tif(ev.which==9) {\n\t\t\t\tvar current = $(ev.target),\n\t\t\t\t\tdoctype = current.attr(\"data-doctype\"),\n\t\t\t\t\tfieldname = current.attr(\"data-fieldname\");\n\t\t\t\tif(doctype)\n\t\t\t\t\treturn me.handle_tab(doctype, fieldname, ev.shiftKey);\n\t\t\t}\n\t\t});\n\t},\n\thandle_tab: function(doctype, fieldname, shift) {\n\t\tvar me = this,\n\t\t\tgrid_row = null,\n\t\t\tprev = null,\n\t\t\tfields = me.fields_list,\n\t\t\tin_grid = false,\n\t\t\tfocused = false;\n\n\t\t// in grid\n\t\tif(doctype != me.doctype) {\n\t\t\tgrid_row = me.get_open_grid_row();\n\t\t\tif(!grid_row || !grid_row.layout) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfields = grid_row.layout.fields_list;\n\t\t}\n\n\t\tfor(var i=0, len=fields.length; i < len; i++) {\n\t\t\tif(fields[i].df.fieldname==fieldname) {\n\t\t\t\tif(shift) {\n\t\t\t\t\tif(prev) {\n\t\t\t\t\t\tthis.set_focus(prev);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(this.primary_button).focus();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif(i < len-1) {\n\t\t\t\t\tfocused = me.focus_on_next_field(i, fields);\n\t\t\t\t}\n\n\t\t\t\tif (focused) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.is_visible(fields[i]))\n\t\t\t\tprev = fields[i];\n\t\t}\n\n\t\tif (!focused) {\n\t\t\t// last field in this group\n\t\t\tif(grid_row) {\n\t\t\t\t// in grid\n\t\t\t\tif(grid_row.doc.idx==grid_row.grid.grid_rows.length) {\n\t\t\t\t\t// last row, close it and find next field\n\t\t\t\t\tgrid_row.toggle_view(false, function() {\n\t\t\t\t\t\tgrid_row.grid.frm.layout.handle_tab(grid_row.grid.df.parent, grid_row.grid.df.fieldname);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// next row\n\t\t\t\t\tgrid_row.grid.grid_rows[grid_row.doc.idx].toggle_view(true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$(this.primary_button).focus();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\tfocus_on_next_field: function(start_idx, fields) {\n\t\t// loop to find next eligible fields\n\t\tfor(var i= start_idx + 1, len = fields.length; i < len; i++) {\n\t\t\tvar field = fields[i];\n\t\t\tif(this.is_visible(field)) {\n\t\t\t\tif(field.df.fieldtype===\"Table\") {\n\t\t\t\t\t// open table grid\n\t\t\t\t\tif(!(field.grid.grid_rows && field.grid.grid_rows.length)) {\n\t\t\t\t\t\t// empty grid, add a new row\n\t\t\t\t\t\tfield.grid.add_new_row();\n\t\t\t\t\t}\n\t\t\t\t\t// show grid row (if exists)\n\t\t\t\t\tfield.grid.grid_rows[0].show_form();\n\t\t\t\t\treturn true;\n\n\t\t\t\t} else if(!in_list(frappe.model.no_value_type, field.df.fieldtype)) {\n\t\t\t\t\tthis.set_focus(field);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tis_visible: function(field) {\n\t\treturn field.disp_status===\"Write\" && (field.$wrapper && field.$wrapper.is(\":visible\"));\n\t},\n\tset_focus: function(field) {\n\t\t// next is table, show the table\n\t\tif(field.df.fieldtype==\"Table\") {\n\t\t\tif(!field.grid.grid_rows.length) {\n\t\t\t\tfield.grid.add_new_row(1);\n\t\t\t} else {\n\t\t\t\tfield.grid.grid_rows[0].toggle_view(true);\n\t\t\t}\n\t\t} else if(field.editor) {\n\t\t\tfield.editor.set_focus();\n\t\t} else if(field.$input) {\n\t\t\tfield.$input.focus();\n\t\t}\n\t},\n\tget_open_grid_row: function() {\n\t\treturn $(\".grid-row-open\").data(\"grid_row\");\n\t},\n\trefresh_dependency: function() {\n\t\t// Resolve \"depends_on\" and show / hide accordingly\n\t\tvar me = this;\n\n\t\t// build dependants' dictionary\n\t\tvar has_dep = false;\n\n\t\tfor(var fkey in this.fields_list) {\n\t\t\tvar f = this.fields_list[fkey];\n\t\t\tf.dependencies_clear = true;\n\t\t\tif(f.df.depends_on) {\n\t\t\t\thas_dep = true;\n\t\t\t}\n\t\t}\n\n\t\tif(!has_dep)return;\n\n\t\t// show / hide based on values\n\t\tfor(var i=me.fields_list.length-1;i>=0;i--) {\n\t\t\tvar f = me.fields_list[i];\n\t\t\tf.guardian_has_value = true;\n\t\t\tif(f.df.depends_on) {\n\t\t\t\t// evaluate guardian\n\n\t\t\t\tf.guardian_has_value = this.evaluate_depends_on_value(f.df.depends_on);\n\n\t\t\t\t// show / hide\n\t\t\t\tif(f.guardian_has_value) {\n\t\t\t\t\tif(f.df.hidden_due_to_dependency) {\n\t\t\t\t\t\tf.df.hidden_due_to_dependency = false;\n\t\t\t\t\t\tf.refresh();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(!f.df.hidden_due_to_dependency) {\n\t\t\t\t\t\tf.df.hidden_due_to_dependency = true;\n\t\t\t\t\t\tf.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.refresh_section_count();\n\t},\n\tevaluate_depends_on_value: function(expression) {\n\t\tvar out = null;\n\t\tvar doc = this.doc;\n\n\t\tif (!doc && this.get_values) {\n\t\t\tvar doc = this.get_values(true);\n\t\t}\n\n\t\tif (!doc) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar parent = this.frm ? this.frm.doc : null;\n\n\t\tif(typeof(expression) === 'boolean') {\n\t\t\tout = expression;\n\n\t\t} else if(typeof(expression) === 'function') {\n\t\t\tout = expression(doc);\n\n\t\t} else if(expression.substr(0,5)=='eval:') {\n\t\t\ttry {\n\t\t\t\tout = eval(expression.substr(5));\n\t\t\t\tif(parent && parent.istable && expression.includes('is_submittable')) {\n\t\t\t\t\tout = true;\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\tfrappe.throw(__('Invalid \"depends_on\" expression'));\n\t\t\t}\n\n\t\t} else if(expression.substr(0,3)=='fn:' && this.frm) {\n\t\t\tout = this.frm.script_manager.trigger(expression.substr(3), this.doctype, this.docname);\n\t\t} else {\n\t\t\tvar value = doc[expression];\n\t\t\tif($.isArray(value)) {\n\t\t\t\tout = !!value.length;\n\t\t\t} else {\n\t\t\t\tout = !!value;\n\t\t\t}\n\t\t}\n\n\t\treturn out;\n\t}\n});\n\nfrappe.ui.form.Section = Class.extend({\n\tinit: function(layout, df) {\n\t\tvar me = this;\n\t\tthis.layout = layout;\n\t\tthis.df = df || {};\n\t\tthis.fields_list = [];\n\t\tthis.fields_dict = {};\n\n\t\tthis.make();\n\t\t// if(this.frm)\n\t\t// \tthis.section.body.css({\"padding\":\"0px 3%\"})\n\t\tthis.row = {\n\t\t\twrapper: this.wrapper\n\t\t};\n\n\t\tif (this.df.collapsible && this.df.fieldname !== '_form_dashboard') {\n\t\t\tthis.collapse(true);\n\t\t}\n\n\t\tthis.refresh();\n\t},\n\tmake: function() {\n\t\tif(!this.layout.page) {\n\t\t\tthis.layout.page = $('<div class=\"form-page\"></div>').appendTo(this.layout.wrapper);\n\t\t}\n\n\t\tthis.wrapper = $('<div class=\"row form-section\">')\n\t\t\t.appendTo(this.layout.page);\n\t\tthis.layout.sections.push(this);\n\n\t\tif(this.df) {\n\t\t\tif(this.df.label) {\n\t\t\t\tthis.make_head();\n\t\t\t}\n\t\t\tif(this.df.description) {\n\t\t\t\t$('<div class=\"col-sm-12 small text-muted form-section-description\">' + __(this.df.description) + '</div>')\n\t\t\t\t\t.appendTo(this.wrapper);\n\t\t\t}\n\t\t\tif(this.df.cssClass) {\n\t\t\t\tthis.wrapper.addClass(this.df.cssClass);\n\t\t\t}\n\t\t}\n\n\n\t\t// for bc\n\t\tthis.body = $('<div class=\"section-body\">').appendTo(this.wrapper);\n\t},\n\tmake_head: function() {\n\t\tvar me = this;\n\t\tif(!this.df.collapsible) {\n\t\t\t$('<div class=\"col-sm-12\"><h6 class=\"form-section-heading uppercase\">'\n\t\t\t\t+ __(this.df.label) + '</h6></div>')\n\t\t\t\t.appendTo(this.wrapper);\n\t\t} else {\n\t\t\tthis.head = $('<div class=\"section-head\"><a class=\"h6 uppercase\">'\n\t\t\t\t+__(this.df.label)+'</a><span class=\"octicon octicon-chevron-down collapse-indicator\"></span></div>').appendTo(this.wrapper);\n\n\t\t\t// show / hide based on status\n\t\t\tthis.collapse_link = this.head.on(\"click\", function() {\n\t\t\t\tme.collapse();\n\t\t\t});\n\n\t\t\tthis.indicator = this.head.find(\".collapse-indicator\");\n\t\t}\n\t},\n\trefresh: function() {\n\t\tif(!this.df)\n\t\t\treturn;\n\n\t\t// hide if explictly hidden\n\t\tvar hide = this.df.hidden || this.df.hidden_due_to_dependency;\n\n\t\t// hide if no perm\n\t\tif(!hide && this.layout && this.layout.frm && !this.layout.frm.get_perm(this.df.permlevel || 0, \"read\")) {\n\t\t\thide = true;\n\t\t}\n\n\t\tthis.wrapper.toggleClass(\"hide-control\", !!hide);\n\t},\n\tcollapse: function(hide) {\n\t\t// unknown edge case\n\t\tif (!(this.head && this.body)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(hide===undefined) {\n\t\t\thide = !this.body.hasClass(\"hide\");\n\t\t}\n\n\t\tif (this.df.fieldname==='_form_dashboard') {\n\t\t\tlocalStorage.setItem('collapseFormDashboard', hide ? 'yes' : 'no');\n\t\t}\n\n\t\tthis.body.toggleClass(\"hide\", hide);\n\t\tthis.head.toggleClass(\"collapsed\", hide);\n\t\tthis.indicator.toggleClass(\"octicon-chevron-down\", hide);\n\t\tthis.indicator.toggleClass(\"octicon-chevron-up\", !hide);\n\n\t\t// refresh signature fields\n\t\tthis.fields_list.forEach((f) => {\n\t\t\tif (f.df.fieldtype=='Signature') {\n\t\t\t\tf.refresh();\n\t\t\t}\n\t\t});\n\n\n\t},\n\thas_missing_mandatory: function() {\n\t\tvar missing_mandatory = false;\n\t\tfor (var j=0, l=this.fields_list.length; j < l; j++) {\n\t\t\tvar section_df = this.fields_list[j].df;\n\t\t\tif (section_df.reqd && this.layout.doc[section_df.fieldname]==null) {\n\t\t\t\tmissing_mandatory = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn missing_mandatory;\n\t}\n});\n\nfrappe.ui.form.Column = Class.extend({\n\tinit: function(section, df) {\n\t\tif(!df) df = {};\n\n\t\tthis.df = df;\n\t\tthis.section = section;\n\t\tthis.make();\n\t\tthis.resize_all_columns();\n\t},\n\tmake: function() {\n\t\tthis.wrapper = $('<div class=\"form-column\">\\\n\t\t\t<form>\\\n\t\t\t</form>\\\n\t\t</div>').appendTo(this.section.body)\n\t\t\t.find(\"form\")\n\t\t\t.on(\"submit\", function() {\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\tif (this.df.label) {\n\t\t\t$('<label class=\"control-label\">' + __(this.df.label)\n\t\t\t\t+ '</label>').appendTo(this.wrapper);\n\t\t}\n\t},\n\tresize_all_columns: function() {\n\t\t// distribute all columns equally\n\t\tvar colspan = cint(12 / this.section.wrapper.find(\".form-column\").length);\n\n\t\tthis.section.wrapper.find(\".form-column\").removeClass()\n\t\t\t.addClass(\"form-column\")\n\t\t\t.addClass(\"col-sm-\" + colspan);\n\n\t},\n\trefresh: function() {\n\t\tthis.section.refresh();\n\t}\n});\n","import '../form/layout';\n\nfrappe.provide('frappe.ui');\n\nfrappe.ui.FieldGroup = frappe.ui.form.Layout.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.dirty = false;\n\t\tthis._super();\n\t\t$.each(this.fields || [], function(i, f) {\n\t\t\tif(!f.fieldname && f.label) {\n\t\t\t\tf.fieldname = f.label.replace(/ /g, \"_\").toLowerCase();\n\t\t\t}\n\t\t})\n\t\tif(this.values) {\n\t\t\tthis.set_values(this.values);\n\t\t}\n\t},\n\tmake: function() {\n\t\tvar me = this;\n\t\tif(this.fields) {\n\t\t\tthis._super();\n\t\t\tthis.refresh();\n\t\t\t// set default\n\t\t\t$.each(this.fields_list, function(i, field) {\n\t\t\t\tif (field.df[\"default\"]) {\n\t\t\t\t\tlet def_value = field.df[\"default\"];\n\n\t\t\t\t\tif (def_value == 'Today' && field.df[\"fieldtype\"] == 'Date') {\n\t\t\t\t\t\tdef_value = frappe.datetime.get_today();\n\t\t\t\t\t}\n\n\t\t\t\t\tfield.set_input(def_value);\n\t\t\t\t\t// if default and has depends_on, render its fields.\n\t\t\t\t\tme.refresh_dependency();\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif(!this.no_submit_on_enter) {\n\t\t\t\tthis.catch_enter_as_submit();\n\t\t\t}\n\n\t\t\t$(this.wrapper).find('input, select').on('change', () => {\n\t\t\t\tthis.dirty = true;\n\n\t\t\t\tfrappe.run_serially([\n\t\t\t\t\t() => frappe.timeout(0.1),\n\t\t\t\t\t() => me.refresh_dependency()\n\t\t\t\t]);\n\t\t\t});\n\n\t\t}\n\t},\n\tfirst_button: false,\n\tfocus_on_first_input: function() {\n\t\tif(this.no_focus) return;\n\t\t$.each(this.fields_list, function(i, f) {\n\t\t\tif(!in_list(['Date', 'Datetime', 'Time', 'Check'], f.df.fieldtype) && f.set_focus) {\n\t\t\t\tf.set_focus();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\tcatch_enter_as_submit: function() {\n\t\tvar me = this;\n\t\t$(this.body).find('input[type=\"text\"], input[type=\"password\"]').keypress(function(e) {\n\t\t\tif(e.which==13) {\n\t\t\t\tif(me.has_primary_action) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tme.get_primary_btn().trigger(\"click\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tget_input: function(fieldname) {\n\t\tvar field = this.fields_dict[fieldname];\n\t\treturn $(field.txt ? field.txt : field.input);\n\t},\n\tget_field: function(fieldname) {\n\t\treturn this.fields_dict[fieldname];\n\t},\n\tget_values: function(ignore_errors) {\n\t\tvar ret = {};\n\t\tvar errors = [];\n\t\tfor(var key in this.fields_dict) {\n\t\t\tvar f = this.fields_dict[key];\n\t\t\tif(f.get_value) {\n\t\t\t\tvar v = f.get_value();\n\t\t\t\tif(f.df.reqd && is_null(v))\n\t\t\t\t\terrors.push(__(f.df.label));\n\n\t\t\t\tif(!is_null(v)) ret[f.df.fieldname] = v;\n\t\t\t}\n\t\t}\n\t\tif(errors.length && !ignore_errors) {\n\t\t\tfrappe.msgprint({\n\t\t\t\ttitle: __('Missing Values Required'),\n\t\t\t\tmessage: __('Following fields have missing values:') +\n\t\t\t\t\t'<br><br><ul><li>' + errors.join('<li>') + '</ul>',\n\t\t\t\tindicator: 'orange'\n\t\t\t});\n\t\t\treturn null;\n\t\t}\n\t\treturn ret;\n\t},\n\tget_value: function(key) {\n\t\tvar f = this.fields_dict[key];\n\t\treturn f && (f.get_value ? f.get_value() : null);\n\t},\n\tset_value: function(key, val){\n\t\treturn new Promise(resolve => {\n\t\t\tvar f = this.fields_dict[key];\n\t\t\tif(f) {\n\t\t\t\tf.set_value(val).then(() => {\n\t\t\t\t\tf.set_input(val);\n\t\t\t\t\tthis.refresh_dependency();\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t},\n\tset_input: function(key, val) {\n\t\treturn this.set_value(key, val);\n\t},\n\tset_values: function(dict) {\n\t\tfor(var key in dict) {\n\t\t\tif(this.fields_dict[key]) {\n\t\t\t\tthis.set_value(key, dict[key]);\n\t\t\t}\n\t\t}\n\t},\n\tclear: function() {\n\t\tfor(var key in this.fields_dict) {\n\t\t\tvar f = this.fields_dict[key];\n\t\t\tif(f && f.set_input) {\n\t\t\t\tf.set_input(f.df['default'] || '');\n\t\t\t}\n\t\t}\n\t},\n\tset_df_property: function (fieldname, prop, value) {\n\t\tconst field    = this.get_field(fieldname);\n\t\tfield.df[prop] = value;\n\t\tfield.refresh();\n\t}\n});\n","\nimport './field_group';\nimport '../dom';\n\nfrappe.provide('frappe.ui');\n\nwindow.cur_dialog = null;\n\nfrappe.ui.open_dialogs = [];\n\nfrappe.ui.Dialog = class Dialog extends frappe.ui.FieldGroup {\n\tconstructor(opts) {\n\t\tsuper();\n\t\tthis.display = false;\n\t\tthis.is_dialog = true;\n\n\t\t$.extend(this, { animate: true, size: null }, opts);\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tthis.$wrapper = frappe.get_modal(\"\", \"\");\n\n\t\tif(this.static) {\n\t\t\tthis.$wrapper.modal({\n\t\t\t\tbackdrop: 'static',\n\t\t\t\tkeyboard: false\n\t\t\t});\n\t\t\tthis.get_close_btn().hide();\n\t\t}\n\n\t\tthis.wrapper = this.$wrapper.find('.modal-dialog')\n\t\t\t.get(0);\n\t\tif ( this.size == \"small\" )\n\t\t\t$(this.wrapper).addClass(\"modal-sm\");\n\t\telse if ( this.size == \"large\" )\n\t\t\t$(this.wrapper).addClass(\"modal-lg\");\n\n\t\tthis.make_head();\n\t\tthis.modal_body = this.$wrapper.find(\".modal-body\");\n\t\tthis.$body = $('<div></div>').appendTo(this.modal_body);\n\t\tthis.body = this.$body.get(0);\n\t\tthis.$message = $('<div class=\"hide modal-message\"></div>').appendTo(this.modal_body);\n\t\tthis.header = this.$wrapper.find(\".modal-header\");\n\n\t\t// make fields (if any)\n\t\tsuper.make();\n\n\t\t// show footer\n\t\tthis.action = this.action || { primary: { }, secondary: { } };\n\t\tif(this.primary_action || (this.action.primary && this.action.primary.onsubmit)) {\n\t\t\tthis.set_primary_action(this.primary_action_label || this.action.primary.label || __(\"Submit\"),\n\t\t\t\tthis.primary_action || this.action.primary.onsubmit);\n\t\t}\n\n\t\tif(this.secondary_action) {\n\t\t\tthis.set_secondary_action(this.secondary_action);\n\t\t}\n\n\t\tif (this.secondary_action_label || (this.action.secondary && this.action.secondary.label)) {\n\t\t\tthis.get_close_btn().html(this.secondary_action_label || this.action.secondary.label);\n\t\t}\n\n\t\tvar me = this;\n\t\tthis.$wrapper\n\t\t\t.on(\"hide.bs.modal\", function() {\n\t\t\t\tme.display = false;\n\t\t\t\tme.secondary_action && me.secondary_action();\n\n\t\t\t\tif(frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]===me) {\n\t\t\t\t\tfrappe.ui.open_dialogs.pop();\n\t\t\t\t\tif(frappe.ui.open_dialogs.length) {\n\t\t\t\t\t\twindow.cur_dialog = frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1];\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.cur_dialog = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tme.onhide && me.onhide();\n\t\t\t\tme.on_hide && me.on_hide();\n\t\t\t})\n\t\t\t.on(\"shown.bs.modal\", function() {\n\t\t\t\t// focus on first input\n\t\t\t\tme.display = true;\n\t\t\t\twindow.cur_dialog = me;\n\t\t\t\tfrappe.ui.open_dialogs.push(me);\n\t\t\t\tme.focus_on_first_input();\n\t\t\t\tme.on_page_show && me.on_page_show();\n\t\t\t\t$(document).trigger('frappe.ui.Dialog:shown');\n\t\t\t})\n\t\t\t.on('scroll', function() {\n\t\t\t\tvar $input = $('input:focus');\n\t\t\t\tif($input.length && ['Date', 'Datetime',\n\t\t\t\t\t'Time'].includes($input.attr('data-fieldtype'))) {\n\t\t\t\t\t$input.blur();\n\t\t\t\t}\n\t\t\t});\n\n\t}\n\n\tget_primary_btn() {\n\t\treturn this.$wrapper.find(\".modal-header .btn-primary\");\n\t}\n\n\tset_message(text) {\n\t\tthis.$message.removeClass('hide');\n\t\tthis.$body.addClass('hide');\n\t\tthis.$message.text(text);\n\t}\n\n\tclear_message() {\n\t\tthis.$message.addClass('hide');\n\t\tthis.$body.removeClass('hide');\n\t}\n\n\tclear() {\n\t\tsuper.clear();\n\t\tthis.clear_message();\n\t}\n\n\tset_primary_action(label, click) {\n\t\tthis.has_primary_action = true;\n\t\tvar me = this;\n\t\treturn this.get_primary_btn()\n\t\t\t.removeClass(\"hide\")\n\t\t\t.html(label)\n\t\t\t.click(function() {\n\t\t\t\tme.primary_action_fulfilled = true;\n\t\t\t\t// get values and send it\n\t\t\t\t// as first parameter to click callback\n\t\t\t\t// if no values then return\n\t\t\t\tvar values = me.get_values();\n\t\t\t\tif(!values) return;\n\t\t\t\tclick && click.apply(me, [values]);\n\t\t\t});\n\t}\n\n\tset_secondary_action(click) {\n\t\tthis.get_close_btn().on('click', click);\n\t}\n\n\tdisable_primary_action() {\n\t\tthis.get_primary_btn().addClass('disabled');\n\t}\n\tenable_primary_action() {\n\t\tthis.get_primary_btn().removeClass('disabled');\n\t}\n\tmake_head() {\n\t\tthis.set_title(this.title);\n\t}\n\tset_title(t) {\n\t\tthis.$wrapper.find(\".modal-title\").html(t);\n\t}\n\tshow() {\n\t\t// show it\n\t\tif ( this.animate ) {\n\t\t\tthis.$wrapper.addClass('fade');\n\t\t} else {\n\t\t\tthis.$wrapper.removeClass('fade');\n\t\t}\n\t\tthis.$wrapper.modal(\"show\");\n\n\t\t// clear any message\n\t\tthis.clear_message();\n\n\t\tthis.primary_action_fulfilled = false;\n\t\tthis.is_visible = true;\n\t\treturn this;\n\t}\n\thide() {\n\t\tthis.$wrapper.modal(\"hide\");\n\t\tthis.is_visible = false;\n\t}\n\tget_close_btn() {\n\t\treturn this.$wrapper.find(\".btn-modal-close\");\n\t}\n\tno_cancel() {\n\t\tthis.get_close_btn().toggle(false);\n\t}\n\tcancel() {\n\t\tthis.get_close_btn().trigger(\"click\");\n\t}\n};\n\n\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.messages\");\n\nimport './dialog';\n\nfrappe.messages.waiting = function(parent, msg) {\n\treturn $(frappe.messages.get_waiting_message(msg))\n\t\t.appendTo(parent);\n};\n\nfrappe.messages.get_waiting_message = function(msg) {\n\treturn repl('<div class=\"msg-box\" style=\"width: 63%; margin: 30px auto;\">\\\n\t\t<p class=\"text-center\">%(msg)s</p></div>', { msg: msg });\n}\n\nfrappe.throw = function(msg) {\n\tif(typeof msg==='string') {\n\t\tmsg = {message: msg, title: __('Error')};\n\t}\n\tif(!msg.indicator) msg.indicator = 'red';\n\tfrappe.msgprint(msg);\n\tthrow new Error(msg.message);\n}\n\nfrappe.confirm = function(message, ifyes, ifno) {\n\tvar d = new frappe.ui.Dialog({\n\t\ttitle: __(\"Confirm\"),\n\t\tfields: [\n\t\t\t{fieldtype:\"HTML\", options:`<p class=\"frappe-confirm-message\">${message}</p>`}\n\t\t],\n\t\tprimary_action_label: __(\"Yes\"),\n\t\tprimary_action: function() {\n\t\t\tif(ifyes) ifyes();\n\t\t\td.hide();\n\t\t},\n\t\tsecondary_action_label: __(\"No\")\n\t});\n\td.show();\n\n\t// flag, used to bind \"okay\" on enter\n\td.confirm_dialog = true;\n\n\t// no if closed without primary action\n\tif(ifno) {\n\t\td.onhide = function() {\n\t\t\tif(!d.primary_action_fulfilled) {\n\t\t\t\tifno();\n\t\t\t}\n\t\t};\n\t}\n\treturn d;\n}\n\nfrappe.prompt = function(fields, callback, title, primary_label) {\n\tif (typeof fields === \"string\") {\n\t\tfields = [{\n\t\t\tlabel: fields,\n\t\t\tfieldname: \"value\",\n\t\t\tfieldtype: \"Data\",\n\t\t\treqd: 1\n\t\t}];\n\t}\n\tif(!$.isArray(fields)) fields = [fields];\n\tvar d = new frappe.ui.Dialog({\n\t\tfields: fields,\n\t\ttitle: title || __(\"Enter Value\"),\n\t});\n\td.set_primary_action(primary_label || __(\"Submit\"), function() {\n\t\tvar values = d.get_values();\n\t\tif(!values) {\n\t\t\treturn;\n\t\t}\n\t\td.hide();\n\t\tcallback(values);\n\t});\n\td.show();\n\treturn d;\n}\n\nfrappe.msgprint = function(msg, title) {\n\tif(!msg) return;\n\n\tif($.isPlainObject(msg)) {\n\t\tvar data = msg;\n\t} else {\n\t\t// passed as JSON\n\t\tif(typeof msg==='string' && msg.substr(0,1)==='{') {\n\t\t\tvar data = JSON.parse(msg);\n\t\t} else {\n\t\t\tvar data = {'message': msg, 'title': title};\n\t\t}\n\t}\n\n\tif(!data.indicator) {\n\t\tdata.indicator = 'blue';\n\t}\n\n\tif(data.message instanceof Array) {\n\t\tdata.message.forEach(function(m) {\n\t\t\tfrappe.msgprint(m);\n\t\t});\n\t\treturn;\n\t}\n\n\tif(data.alert) {\n\t\tfrappe.show_alert(data);\n\t\treturn;\n\t}\n\n\tif(!frappe.msg_dialog) {\n\t\tfrappe.msg_dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Message\"),\n\t\t\tonhide: function() {\n\t\t\t\tif(frappe.msg_dialog.custom_onhide) {\n\t\t\t\t\tfrappe.msg_dialog.custom_onhide();\n\t\t\t\t}\n\t\t\t\tfrappe.msg_dialog.msg_area.empty();\n\t\t\t}\n\t\t});\n\n\t\t// class \"msgprint\" is used in tests\n\t\tfrappe.msg_dialog.msg_area = $('<div class=\"msgprint\">')\n\t\t\t.appendTo(frappe.msg_dialog.body);\n\n\t\tfrappe.msg_dialog.clear = function() {\n\t\t\tfrappe.msg_dialog.msg_area.empty();\n\t\t}\n\n\t\tfrappe.msg_dialog.indicator = frappe.msg_dialog.header.find('.indicator');\n\t}\n\n\tif(data.message==null) {\n\t\tdata.message = '';\n\t}\n\n\tif(data.message.search(/<br>|<p>|<li>/)==-1) {\n\t\tmsg = frappe.utils.replace_newlines(data.message);\n\t}\n\n\tvar msg_exists = false;\n\tif(data.clear) {\n\t\tfrappe.msg_dialog.msg_area.empty();\n\t} else {\n\t\tmsg_exists = frappe.msg_dialog.msg_area.html();\n\t}\n\n\tif(data.title || !msg_exists) {\n\t\t// set title only if it is explicitly given\n\t\t// and no existing title exists\n\t\tfrappe.msg_dialog.set_title(data.title || __('Message'));\n\t}\n\n\t// show / hide indicator\n\tif(data.indicator) {\n\t\tfrappe.msg_dialog.indicator.removeClass().addClass('indicator ' + data.indicator);\n\t} else {\n\t\tfrappe.msg_dialog.indicator.removeClass().addClass('hidden');\n\t}\n\n\t// width\n\tif (data.wide) {\n\t\t// msgprint should be narrower than the usual dialog\n\t\tif (frappe.msg_dialog.wrapper.classList.contains('msgprint-dialog')) {\n\t\t\tfrappe.msg_dialog.wrapper.classList.remove('msgprint-dialog');\n\t\t}\n\t} else {\n\t\t// msgprint should be narrower than the usual dialog\n\t\tfrappe.msg_dialog.wrapper.classList.add('msgprint-dialog');\n\t}\n\n\n\tif(msg_exists) {\n\t\tfrappe.msg_dialog.msg_area.append(\"<hr>\");\n\t// append a <hr> if another msg already exists\n\t}\n\n\tfrappe.msg_dialog.msg_area.append(data.message);\n\n\t// make msgprint always appear on top\n\tfrappe.msg_dialog.$wrapper.css(\"z-index\", 2000);\n\tfrappe.msg_dialog.show();\n\n\treturn frappe.msg_dialog;\n}\n\nwindow.msgprint = frappe.msgprint;\n\nfrappe.hide_msgprint = function(instant) {\n\t// clear msgprint\n\tif(frappe.msg_dialog && frappe.msg_dialog.msg_area) {\n\t\tfrappe.msg_dialog.msg_area.empty();\n\t}\n\tif(frappe.msg_dialog && frappe.msg_dialog.$wrapper.is(\":visible\")) {\n\t\tif(instant) {\n\t\t\tfrappe.msg_dialog.$wrapper.removeClass(\"fade\");\n\t\t}\n\t\tfrappe.msg_dialog.hide();\n\t\tif(instant) {\n\t\t\tfrappe.msg_dialog.$wrapper.addClass(\"fade\");\n\t\t}\n\t}\n}\n\n// update html in existing msgprint\nfrappe.update_msgprint = function(html) {\n\tif(!frappe.msg_dialog || (frappe.msg_dialog && !frappe.msg_dialog.$wrapper.is(\":visible\"))) {\n\t\tfrappe.msgprint(html);\n\t} else {\n\t\tfrappe.msg_dialog.msg_area.html(html);\n\t}\n}\n\nfrappe.verify_password = function(callback) {\n\tfrappe.prompt({\n\t\tfieldname: \"password\",\n\t\tlabel: __(\"Enter your password\"),\n\t\tfieldtype: \"Password\",\n\t\treqd: 1\n\t}, function(data) {\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.core.doctype.user.user.verify_password\",\n\t\t\targs: {\n\t\t\t\tpassword: data.password\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}, __(\"Verify Password\"), __(\"Verify\"))\n}\n\nfrappe.show_progress = function(title, count, total=100, description) {\n\tif(frappe.cur_progress && frappe.cur_progress.title === title && frappe.cur_progress.is_visible) {\n\t\tvar dialog = frappe.cur_progress;\n\t} else {\n\t\tvar dialog = new frappe.ui.Dialog({\n\t\t\ttitle: title,\n\t\t});\n\t\tdialog.progress = $(`<div>\n\t\t\t<div class=\"progress\">\n\t\t\t\t<div class=\"progress-bar\"></div>\n\t\t\t</div>\n\t\t\t<p class=\"description text-muted small\"></p>\n\t\t</div`).appendTo(dialog.body);\n\t\tdialog.progress_bar = dialog.progress.css({\"margin-top\": \"10px\"})\n\t\t\t.find(\".progress-bar\");\n\t\tdialog.$wrapper.removeClass(\"fade\");\n\t\tdialog.show();\n\t\tfrappe.cur_progress = dialog;\n\t}\n\tif (description) {\n\t\tdialog.progress.find('.description').text(description);\n\t}\n\tdialog.percent = cint(flt(count) * 100 / total);\n\tdialog.progress_bar.css({\"width\": dialog.percent + \"%\" });\n\treturn dialog;\n}\n\nfrappe.hide_progress = function() {\n\tif(frappe.cur_progress) {\n\t\tfrappe.cur_progress.hide();\n\t\tfrappe.cur_progress = null;\n\t}\n}\n\n// Floating Message\nfrappe.show_alert = function(message, seconds=7, actions={}) {\n\tif(typeof message==='string') {\n\t\tmessage = {\n\t\t\tmessage: message\n\t\t};\n\t}\n\tif(!$('#dialog-container').length) {\n\t\t$('<div id=\"dialog-container\"><div id=\"alert-container\"></div></div>').appendTo('body');\n\t}\n\n\tlet body_html;\n\n\tif (message.body) {\n\t\tbody_html = message.body;\n\t}\n\n\tconst div = $(`\n\t\t<div class=\"alert desk-alert\">\n\t\t\t<div class=\"alert-message small\"></div>\n\t\t\t<div class=\"alert-body\" style=\"display: none\"></div>\n\t\t\t<a class=\"close\">&times;</a>\n\t\t</div>`);\n\n\tif(message.indicator) {\n\t\tdiv.find('.alert-message').append(`<span class=\"indicator ${message.indicator}\"></span>`);\n\t}\n\n\tdiv.find('.alert-message').append(message.message);\n\n\tif (body_html) {\n\t\tdiv.find('.alert-body').show().html(body_html);\n\t}\n\n\tdiv.hide().appendTo(\"#alert-container\").show()\n\t\t.css('transform', 'translateX(0)');\n\n\tdiv.find('.close, button').click(function() {\n\t\tdiv.remove();\n\t\treturn false;\n\t});\n\n\tObject.keys(actions).map(key => {\n\t\tdiv.find(`[data-action=${key}]`).on('click', actions[key]);\n\t});\n\n\tdiv.delay(seconds * 1000).fadeOut(300);\n\treturn div;\n}\n\n// Proxy for frappe.show_alert\nObject.defineProperty(window, 'show_alert', {\n\tget: function() {\n\t\tconsole.warn('Please use `frappe.show_alert` instead of `show_alert`. It will be deprecated soon.');\n\t\treturn frappe.show_alert;\n\t}\n});\n","// Copyright (c) 2017, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui\");\n\nfrappe.ui.color_map = {\n\tred: [\"#ffc4c4\", \"#ff8989\", \"#ff4d4d\", \"#a83333\"],\n\tbrown: [\"#ffe8cd\", \"#ffd19c\", \"#ffb868\", \"#a87945\"],\n\torange: [\"#ffd2c2\", \"#ffa685\", \"#ff7846\", \"#a85b5b\"],\n\tpeach: [\"#ffd7d7\", \"#ffb1b1\", \"#ff8989\", \"#a84f2e\"],\n\tyellow: [\"#fffacd\", \"#fff168\", \"#fff69c\", \"#a89f45\"],\n\tyellowgreen: [\"#ebf8cc\", \"#d9f399\", \"#c5ec63\", \"#7b933d\"],\n\tgreen: [\"#cef6d1\", \"#9deca2\", \"#6be273\", \"#428b46\"],\n\tcyan: [\"#d2f8ed\", \"#a4f3dd\", \"#77ecca\", \"#49937e\"],\n\tskyblue: [\"#d2f1ff\", \"#a6e4ff\", \"#78d6ff\", \"#4f8ea8\"],\n\tblue: [\"#d2d2ff\", \"#a3a3ff\", \"#7575ff\", \"#4d4da8\"],\n\tpurple: [\"#dac7ff\", \"#b592ff\", \"#8e58ff\", \"#5e3aa8\"],\n\tpink: [\"#f8d4f8\", \"#f3aaf0\", \"#ec7dea\", \"#934f92\"],\n\twhite: [\"#d1d8dd\", \"#fafbfc\", \"#ffffff\", \"\"],\n\tblack: [\"#8D99A6\", \"#6c7680\", \"#36414c\", \"#212a33\"]\n};\n\nfrappe.ui.color = {\n\tget: function(color_name, shade) {\n\t\tif(color_name && shade) return this.get_color_shade(color_name, shade);\n\t\tif(color_name) return this.get_color_shade(color_name, 'default');\n\t\treturn frappe.ui.color_map;\n\t},\n\tget_color: function(color_name) {\n\t\tconst color_names = Object.keys(frappe.ui.color_map);\n\t\tif(color_names.includes(color_name)) {\n\t\t\treturn frappe.ui.color_map[color_name];\n\t\t} else {\n\t\t\t// eslint-disable-next-line\n\t\t\tconsole.warn(`'color_name' can be one of ${color_names} and not ${color_name}`);\n\t\t}\n\t},\n\tget_color_shade: function(color_name, shade) {\n\t\tconst shades = {\n\t\t\t'default': 2,\n\t\t\t'light': 1,\n\t\t\t'extra-light': 0,\n\t\t\t'dark': 3\n\t\t};\n\n\t\tif(Object.keys(shades).includes(shade)) {\n\t\t\treturn frappe.ui.color_map[color_name][shades[shade]];\n\t\t} else {\n\t\t\t// eslint-disable-next-line\n\t\t\tconsole.warn(`'shade' can be one of ${Object.keys(shades)} and not ${shade}`);\n\t\t}\n\t},\n\tall: function() {\n\t\treturn Object.values(frappe.ui.color_map)\n\t\t\t.reduce((acc, curr) => acc.concat(curr) , []);\n\t},\n\tnames: function() {\n\t\treturn Object.keys(frappe.ui.color_map);\n\t},\n\tis_standard: function(color_name) {\n\t\tif(!color_name) return false;\n\t\tif(color_name.startsWith('#')) {\n\t\t\treturn this.all().includes(color_name);\n\t\t}\n\t\treturn this.names().includes(color_name);\n\t},\n\tget_color_name: function(hex) {\n\t\tfor (const key in frappe.ui.color_map) {\n\t\t\tconst colors = frappe.ui.color_map[key];\n\t\t\tif (colors.includes(hex)) return key;\n\t\t}\n\t},\n\tget_contrast_color: function(hex) {\n\t\tif(!this.validate_hex(hex)) {\n\t\t\treturn;\n\t\t}\n\t\tif(!this.is_standard(hex)) {\n\t\t\tconst brightness = this.brightness(hex);\n\t\t\tif(brightness < 128) {\n\t\t\t\treturn this.lighten(hex, 0.5);\n\t\t\t}\n\t\t\treturn this.lighten(hex, -0.5);\n\t\t}\n\n\t\tconst color_name = this.get_color_name(hex);\n\t\tconst colors = this.get_color(color_name);\n\t\tconst shade_value = colors.indexOf(hex);\n\t\tif(shade_value <= 1) {\n\t\t\treturn this.get(color_name, 'dark');\n\t\t}\n\t\treturn this.get(color_name, 'extra-light');\n\t},\n\n\tvalidate_hex: function(hex) {\n\t\t// https://stackoverflow.com/a/8027444/5353542\n\t\treturn /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(hex);\n\t},\n\n\tlighten(color, percent) {\n\t\t// https://stackoverflow.com/a/13542669/5353542\n\t\tvar f = parseInt(color.slice(1), 16),\n\t\t\tt = percent < 0 ? 0 : 255,\n\t\t\tp = percent < 0 ? percent * -1 : percent,\n\t\t\tR = f >> 16,\n\t\t\tG = f >> 8 & 0x00FF,\n\t\t\tB = f & 0x0000FF;\n\t\treturn \"#\" +\n\t\t\t(0x1000000 +\n\t\t\t\t(Math.round((t - R) * p) + R) *\n\t\t\t\t0x10000 +\n\t\t\t\t(Math.round((t - G) * p) + G) *\n\t\t\t\t0x100 + (Math.round((t - B) * p) + B)\n\t\t\t).toString(16).slice(1);\n\t},\n\n\thex_to_rgb(hex) {\n\t\tif(hex.startsWith('#')) {\n\t\t\thex = hex.substring(1);\n\t\t}\n\t\tconst r = parseInt(hex.substring(0, 2), 16);\n\t\tconst g = parseInt(hex.substring(2, 4), 16);\n\t\tconst b = parseInt(hex.substring(4, 6), 16);\n\t\treturn {r, g, b};\n\t},\n\n\tbrightness(hex) {\n\t\tconst rgb = this.hex_to_rgb(hex);\n\t\t// https://www.w3.org/TR/AERT#color-contrast\n\t\t// 255 - brightest (#fff)\n\t\t// 0 - darkest (#000)\n\t\treturn (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n\t}\n};\n","frappe.provide('frappe.ui');\n\nfrappe.ui.Sidebar = class Sidebar {\n\tconstructor({ wrapper, css_class }) {\n\t\tthis.wrapper = wrapper;\n\t\tthis.css_class = css_class;\n\t\tthis.items = {};\n\t\tthis.make_dom();\n\t}\n\n\tmake_dom() {\n\t\tthis.wrapper.html(`\n\t\t\t<div class=\"${this.css_class} overlay-sidebar hidden-xs hidden-sm\">\n\t\t\t</div>\n\t\t`);\n\n\t\tthis.$sidebar = this.wrapper.find('.' + this.css_class);\n\t}\n\n\tadd_item(item, section, h6=false) {\n\t\tlet $section, $li_item;\n\t\tif(!section && this.wrapper.find('.sidebar-menu').length === 0) {\n\t\t\t// if no section, add section with no heading\n\t\t\t$section = this.get_section();\n\t\t} else {\n\t\t\t$section = this.get_section(section);\n\t\t}\n\n\t\tif(item instanceof jQuery) {\n\t\t\t$li_item = $(`<li>`);\n\t\t\titem.appendTo($li_item);\n\t\t} else {\n\t\t\tconst className = h6 ? 'h6' : '';\n\t\t\tconst html = `<li class=${className}>\n\t\t\t\t<a ${item.href ? `href=\"${item.href}\"` : ''}>${item.label}</a>\n\t\t\t</li>`;\n\t\t\t$li_item = $(html).click(\n\t\t\t\t() => item.on_click && item.on_click()\n\t\t\t);\n\t\t}\n\n\t\t$section.append($li_item);\n\n\t\tif(item.name) {\n\t\t\tthis.items[item.name] = $li_item;\n\t\t}\n\t}\n\n\tremove_item(name) {\n\t\tif(this.items[name]) {\n\t\t\tthis.items[name].remove();\n\t\t}\n\t}\n\n\tget_section(section_heading=\"\") {\n\t\tlet $section = $(this.wrapper.find(\n\t\t\t`[data-section-heading=\"${section_heading}\"]`));\n\t\tif($section.length) {\n\t\t\treturn $section;\n\t\t}\n\n\t\tconst $section_heading = section_heading ?\n\t\t\t`<li class=\"h6\">${section_heading}</li>` : '';\n\n\t\t$section = $(`\n\t\t\t<ul class=\"list-unstyled sidebar-menu\" data-section-heading=\"${section_heading || 'default'}\">\n\t\t\t\t${$section_heading}\n\t\t\t</ul>\n\t\t`);\n\n\t\tthis.$sidebar.append($section);\n\t\treturn $section;\n\t}\n};\n","frappe.ui.LinkPreview = class {\n\n\tconstructor() {\n\t\tthis.$links = [];\n\t\tthis.LINK_CLASSES = 'a[data-doctype], input[data-fieldtype=\"Link\"], .popover';\n\t\tthis.popover_timeout = null;\n\t\tthis.setup_events();\n\t}\n\n\tsetup_events() {\n\t\t$(document.body).on('mouseover', this.LINK_CLASSES, (e) => {\n\t\t\tthis.link_hovered = true;\n\t\t\tthis.element = $(e.currentTarget);\n\t\t\tthis.is_link = this.element.get(0).tagName.toLowerCase() === 'a';\n\n\t\t\tif(!this.element.parents().find('.popover').length) {\n\t\t\t\tthis.identify_doc();\n\t\t\t\tthis.popover = this.element.data(\"bs.popover\");\n\t\t\t\tif(this.name && this.doctype) {\n\t\t\t\t\tthis.setup_popover_control(e);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n\n\tidentify_doc() {\n\t\tif (this.is_link) {\n\t\t\tthis.doctype = this.element.attr('data-doctype');\n\t\t\tthis.name = this.element.attr('data-name');\n\t\t} else {\n\t\t\t// input\n\t\t\tthis.doctype = this.element.attr('data-target');\n\t\t\tthis.name = this.element.val();\n\t\t}\n\t}\n\n\tsetup_popover_control(e) {\n\t\tif(!this.popover) {\n\t\t\tthis.get_preview_fields().then(preview_fields => {\n\t\t\t\tif(preview_fields.length) {\n\t\t\t\t\tthis.data_timeout = setTimeout(() => {\n\t\t\t\t\t\tthis.create_popover(e, preview_fields);\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.popover_timeout = setTimeout(() => {\n\t\t\t\tif (this.element.is(':focus')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.popover.show();\n\t\t\t}, 1000);\n\t\t}\n\t\tthis.handle_popover_hide();\n\t}\n\n\tcreate_popover(e, preview_fields) {\n\t\tif (this.element.is(':focus')) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.get_preview_fields_value(preview_fields).then((preview_data)=> {\n\t\t\tif(preview_data) {\n\t\t\t\tif(this.popover_timeout) {\n\t\t\t\t\tclearTimeout(this.popover_timeout);\n\t\t\t\t}\n\n\t\t\t\tthis.popover_timeout = setTimeout(() => {\n\t\t\t\t\tif(this.popover) {\n\t\t\t\t\t\tlet new_content = this.get_popover_html(preview_data);\n\t\t\t\t\t\tthis.popover.options.content = new_content;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.init_preview_popover(preview_data);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!this.is_link) {\n\t\t\t\t\t\tvar left = e.pageX;\n\t\t\t\t\t\tthis.element.popover('show');\n\t\t\t\t\t\tvar width = $('.popover').width();\n\t\t\t\t\t\t$('.control-field-popover').css('left', (left-(width/2)) + 'px');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.element.popover('show');\n\t\t\t\t\t}\n\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t});\n\t}\n\n\thandle_popover_hide() {\n\t\t$(document.body).on('mouseout', this.LINK_CLASSES, () => {\n\t\t\tthis.link_hovered = false;\n\t\t\tif(this.data_timeout) {\n\t\t\t\tclearTimeout(this.data_timeout);\n\t\t\t}\n\t\t\tif (this.popover_timeout) {\n\t\t\t\tclearTimeout(this.popover_timeout);\n\t\t\t}\n\t\t\tthis.clear_all_popovers();\n\t\t});\n\n\t\t$(window).on('hashchange', () => {\n\t\t\tthis.clear_all_popovers();\n\t\t});\n\t}\n\n\tclear_all_popovers() {\n\t\tthis.$links.forEach($el => $el.popover('hide'));\n\t}\n\n\tget_preview_fields() {\n\t\treturn new Promise((resolve) => {\n\t\t\tlet dt = this.doctype;\n\t\t\tlet fields = [];\n\t\t\tfrappe.model.with_doctype(dt, () => {\n\t\t\t\tlet meta = frappe.get_meta(dt);\n\t\t\t\tlet meta_fields = meta.fields;\n\n\t\t\t\tif (!meta.show_preview_popup) {\n\t\t\t\t\t// no preview\n\t\t\t\t\tresolve([]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tmeta_fields.filter((field) => {\n\t\t\t\t\t// build list of fields to fetch\n\t\t\t\t\tif(field.in_preview) {\n\t\t\t\t\t\tfields.push({'name':field.fieldname,'type':field.fieldtype});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// no preview fields defined, build list from mandatory fields\n\t\t\t\tif(!fields.length) {\n\t\t\t\t\tmeta_fields.filter((field) => {\n\t\t\t\t\t\tif(field.reqd) {\n\t\t\t\t\t\t\tfields.push({'name':field.fieldname,'type':field.fieldtype});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresolve(fields);\n\t\t\t});\n\t\t});\n\t}\n\n\tget_preview_fields_value(field_list) {\n\t\treturn frappe.xcall('frappe.desk.link_preview.get_preview_data', {\n\t\t\t'doctype': this.doctype,\n\t\t\t'docname': this.name,\n\t\t\t'fields': field_list,\n\t\t});\n\t}\n\n\tinit_preview_popover(preview_data) {\n\t\tlet popover_content = this.get_popover_html(preview_data);\n\t\tthis.element.popover({\n\t\t\tcontainer: 'body',\n\t\t\thtml: true,\n\t\t\tcontent: popover_content,\n\t\t\ttrigger: 'manual',\n\t\t\tplacement: 'top auto',\n\t\t\tanimation: false,\n\t\t});\n\n\t\tif(!this.is_link) {\n\t\t\tthis.element.data('bs.popover').tip().addClass('control-field-popover');\n\t\t}\n\n\t\tthis.$links.push(this.element);\n\n\t}\n\n\tget_popover_html(preview_data) {\n\t\tif(!this.href) {\n\t\t\tthis.href = window.location.href;\n\t\t}\n\n\t\tif(this.href && this.href.includes(' ')) {\n\t\t\tthis.href = this.href.replace(new RegExp(' ', 'g'), '%20');\n\t\t}\n\n\t\tlet image_html = '';\n\t\tlet id_html = '';\n\t\tlet content_html = '';\n\t\tlet meta = frappe.get_meta(this.doctype);\n\t\tlet title = preview_data[meta.title_field];\n\n\t\tif(preview_data[meta.image_field]) {\n\t\t\tlet image_url = encodeURI(preview_data[meta.image_field]);\n\t\t\timage_html += `\n\t\t\t<div class=\"preview-header\">\n\t\t\t\t<img src=${image_url} class=\"preview-image\"></img>\n\t\t\t</div>`;\n\t\t}\n\n\n\t\tif(title && title != preview_data.name) {\n\t\t\tid_html+= `<a class=\"text-muted\" href=${this.href}>${preview_data.name}</a>`;\n\t\t}\n\n\t\tObject.keys(preview_data).forEach(key => {\n\t\t\tif(key!=meta.image_field && key!='name' && key!=meta.title_field) {\n\t\t\t\tlet value = this.truncate_value(preview_data[key]);\n\t\t\t\tlet label = this.truncate_value(frappe.meta.get_label(this.doctype, key));\n\t\t\t\tcontent_html += `\n\t\t\t\t<div class=\"preview-field\">\n\t\t\t\t\t<div class='small preview-label text-muted bold'>${label}</div>\n\t\t\t\t\t<div class=\"small preview-value\"> ${value} </div>\n\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}\n\t\t});\n\n\t\tcontent_html = `<div class=\"preview-table\">${content_html}</div>`;\n\n\t\tlet popover_content =\n\t\t\t`<div class=\"preview-popover-header\">${image_html}\n\t\t\t\t<div class=\"preview-header\">\n\t\t\t\t\t<div class=\"preview-main\">\n\t\t\t\t\t\t<a class=\"preview-name bold\" href=${this.href}>${title}</a>\n\t\t\t\t\t\t<span class=\"text-muted small\">${this.doctype} ${id_html}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<hr>\n\t\t\t<div class=\"popover-body\">\n\t\t\t\t${content_html}\n\t\t\t</div>`;\n\n\t\treturn popover_content;\n\t}\n\n\ttruncate_value(value) {\n\t\tif (value.length > 280) {\n\t\t\tvalue = value.slice(0,280) + '...';\n\t\t}\n\t\treturn value;\n\t}\n\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n// My HTTP Request\n\nfrappe.provide('frappe.request');\nfrappe.request.url = '/';\nfrappe.request.ajax_count = 0;\nfrappe.request.waiting_for_ajax = [];\n\nfrappe.xcall = function(method, params) {\n\treturn new Promise((resolve, reject) => {\n\t\tfrappe.call({\n\t\t\tmethod: method,\n\t\t\targs: params,\n\t\t\tcallback: (r) => {\n\t\t\t\tresolve(r.message);\n\t\t\t},\n\t\t\terror: (r) => {\n\t\t\t\treject(r.message);\n\t\t\t}\n\t\t});\n\t});\n};\n\n// generic server call (call page, object)\nfrappe.call = function(opts) {\n\tif (!frappe.is_online()) {\n\t\tfrappe.show_alert({\n\t\t\tindicator: 'orange',\n\t\t\tmessage: __('You are not connected to Internet. Retry after sometime.')\n\t\t}, 3);\n\t\topts.always && opts.always();\n\t\treturn $.ajax();\n\t}\n\tif (typeof arguments[0]==='string') {\n\t\topts = {\n\t\t\tmethod: arguments[0],\n\t\t\targs: arguments[1],\n\t\t\tcallback: arguments[2],\n\t\t\theaders: arguments[3]\n\t\t}\n\t}\n\n\tif(opts.quiet) {\n\t\topts.no_spinner = true;\n\t}\n\tvar args = $.extend({}, opts.args);\n\n\t// cmd\n\tif(opts.module && opts.page) {\n\t\targs.cmd = opts.module+'.page.'+opts.page+'.'+opts.page+'.'+opts.method;\n\t} else if(opts.doc) {\n\t\t$.extend(args, {\n\t\t\tcmd: \"runserverobj\",\n\t\t\tdocs: frappe.get_doc(opts.doc.doctype, opts.doc.name),\n\t\t\tmethod: opts.method,\n\t\t\targs: opts.args,\n\t\t});\n\t} else if(opts.method) {\n\t\targs.cmd = opts.method;\n\t}\n\n\tvar callback = function(data, response_text) {\n\t\tif(data.task_id) {\n\t\t\t// async call, subscribe\n\t\t\tfrappe.socketio.subscribe(data.task_id, opts);\n\n\t\t\tif(opts.queued) {\n\t\t\t\topts.queued(data);\n\t\t\t}\n\t\t}\n\t\telse if (opts.callback) {\n\t\t\t// ajax\n\t\t\treturn opts.callback(data, response_text);\n\t\t}\n\t}\n\n\tlet url = opts.url;\n\tif (!url) {\n\t\turl = '/api/method/' + args.cmd;\n\t\tdelete args.cmd;\n\t}\n\n\treturn frappe.request.call({\n\t\ttype: opts.type || \"POST\",\n\t\targs: args,\n\t\tsuccess: callback,\n\t\terror: opts.error,\n\t\talways: opts.always,\n\t\tbtn: opts.btn,\n\t\tfreeze: opts.freeze,\n\t\tfreeze_message: opts.freeze_message,\n\t\theaders: opts.headers || {},\n\t\t// show_spinner: !opts.no_spinner,\n\t\tasync: opts.async,\n\t\turl,\n\t});\n}\n\n\nfrappe.request.call = function(opts) {\n\tfrappe.request.prepare(opts);\n\n\tvar statusCode = {\n\t\t200: function(data, xhr) {\n\t\t\topts.success_callback && opts.success_callback(data, xhr.responseText);\n\t\t},\n\t\t401: function(xhr) {\n\t\t\tif(frappe.app.session_expired_dialog && frappe.app.session_expired_dialog.display) {\n\t\t\t\tfrappe.app.redirect_to_login();\n\t\t\t} else {\n\t\t\t\tfrappe.app.handle_session_expired();\n\t\t\t}\n\t\t},\n\t\t404: function(xhr) {\n\t\t\tfrappe.msgprint({title:__(\"Not found\"), indicator:'red',\n\t\t\t\tmessage: __('The resource you are looking for is not available')});\n\t\t},\n\t\t403: function(xhr) {\n\t\t\tif (frappe.get_cookie('sid')==='Guest') {\n\t\t\t\t// session expired\n\t\t\t\tfrappe.app.handle_session_expired();\n\t\t\t}\n\t\t\telse if(xhr.responseJSON && xhr.responseJSON._error_message) {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\ttitle:__(\"Not permitted\"), indicator:'red',\n\t\t\t\t\tmessage: xhr.responseJSON._error_message\n\t\t\t\t});\n\n\t\t\t\txhr.responseJSON._server_messages = null;\n\t\t\t}\n\t\t\telse if (xhr.responseJSON && xhr.responseJSON._server_messages) {\n\t\t\t\tvar _server_messages = JSON.parse(xhr.responseJSON._server_messages);\n\n\t\t\t\t// avoid double messages\n\t\t\t\tif (_server_messages.indexOf(__(\"Not permitted\"))!==-1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\ttitle:__(\"Not permitted\"), indicator:'red',\n\t\t\t\t\tmessage: __('You do not have enough permissions to access this resource. Please contact your manager to get access.')});\n\t\t\t}\n\n\n\t\t},\n\t\t508: function(xhr) {\n\t\t\tfrappe.utils.play_sound(\"error\");\n\t\t\tfrappe.msgprint({title:__('Please try again'), indicator:'red',\n\t\t\t\tmessage:__(\"Another transaction is blocking this one. Please try again in a few seconds.\")});\n\t\t},\n\t\t413: function(data, xhr) {\n\t\t\tfrappe.msgprint({indicator:'red', title:__('File too big'), message:__(\"File size exceeded the maximum allowed size of {0} MB\",\n\t\t\t\t[(frappe.boot.max_file_size || 5242880) / 1048576])});\n\t\t},\n\t\t417: function(xhr) {\n\t\t\tvar r = xhr.responseJSON;\n\t\t\tif (!r) {\n\t\t\t\ttry {\n\t\t\t\t\tr = JSON.parse(xhr.responseText);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tr = xhr.responseText;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\topts.error_callback && opts.error_callback(r);\n\t\t},\n\t\t501: function(data, xhr) {\n\t\t\tif(typeof data === \"string\") data = JSON.parse(data);\n\t\t\topts.error_callback && opts.error_callback(data, xhr.responseText);\n\t\t},\n\t\t500: function(xhr) {\n\t\t\tfrappe.utils.play_sound(\"error\");\n\t\t\ttry {\n\t\t\t\topts.error_callback && opts.error_callback();\n\t\t\t\tfrappe.request.report_error(xhr, opts);\n\t\t\t} catch (e) {\n\t\t\t\tfrappe.request.report_error(xhr, opts);\n\t\t\t}\n\t\t},\n\t\t504: function(xhr) {\n\t\t\tfrappe.msgprint(__(\"Request Timed Out\"))\n\t\t\topts.error_callback && opts.error_callback();\n\t\t},\n\t\t502: function(xhr) {\n\t\t\tfrappe.msgprint(__(\"Internal Server Error\"));\n\t\t}\n\t};\n\n\tvar ajax_args = {\n\t\turl: opts.url || frappe.request.url,\n\t\tdata: opts.args,\n\t\ttype: opts.type,\n\t\tdataType: opts.dataType || 'json',\n\t\tasync: opts.async,\n\t\theaders: Object.assign({\n\t\t\t\"X-Frappe-CSRF-Token\": frappe.csrf_token,\n\t\t\t\"Accept\": \"application/json\"\n\t\t}, opts.headers),\n\t\tcache: false\n\t};\n\n\tfrappe.last_request = ajax_args.data;\n\n\treturn $.ajax(ajax_args)\n\t\t.done(function(data, textStatus, xhr) {\n\t\t\ttry {\n\t\t\t\tif(typeof data === \"string\") data = JSON.parse(data);\n\n\t\t\t\t// sync attached docs\n\t\t\t\tif(data.docs || data.docinfo) {\n\t\t\t\t\tfrappe.model.sync(data);\n\t\t\t\t}\n\n\t\t\t\t// sync translated messages\n\t\t\t\tif(data.__messages) {\n\t\t\t\t\t$.extend(frappe._messages, data.__messages);\n\t\t\t\t}\n\n\t\t\t\t// callbacks\n\t\t\t\tvar status_code_handler = statusCode[xhr.statusCode().status];\n\t\t\t\tif (status_code_handler) {\n\t\t\t\t\tstatus_code_handler(data, xhr);\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\tconsole.log(\"Unable to handle success response\"); // eslint-disable-line\n\t\t\t\tconsole.trace(e); // eslint-disable-line\n\t\t\t}\n\n\t\t})\n\t\t.always(function(data, textStatus, xhr) {\n\t\t\ttry {\n\t\t\t\tif(typeof data===\"string\") {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t}\n\t\t\t\tif(data.responseText) {\n\t\t\t\t\tvar xhr = data;\n\t\t\t\t\tdata = JSON.parse(data.responseText);\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\tdata = null;\n\t\t\t\t// pass\n\t\t\t}\n\t\t\tfrappe.request.cleanup(opts, data);\n\t\t\tif(opts.always) {\n\t\t\t\topts.always(data);\n\t\t\t}\n\t\t})\n\t\t.fail(function(xhr, textStatus) {\n\t\t\ttry {\n\t\t\t\tvar status_code_handler = statusCode[xhr.statusCode().status];\n\t\t\t\tif (status_code_handler) {\n\t\t\t\t\tstatus_code_handler(xhr);\n\t\t\t\t} else {\n\t\t\t\t\t// if not handled by error handler!\n\t\t\t\t\topts.error_callback && opts.error_callback(xhr);\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\tconsole.log(\"Unable to handle failed response\"); // eslint-disable-line\n\t\t\t\tconsole.trace(e); // eslint-disable-line\n\t\t\t}\n\t\t});\n}\n\n// call execute serverside request\nfrappe.request.prepare = function(opts) {\n\t$(\"body\").attr(\"data-ajax-state\", \"triggered\");\n\n\t// btn indicator\n\tif(opts.btn) $(opts.btn).prop(\"disabled\", true);\n\n\t// freeze page\n\tif(opts.freeze) frappe.dom.freeze(opts.freeze_message);\n\n\t// stringify args if required\n\tfor(var key in opts.args) {\n\t\tif(opts.args[key] && ($.isPlainObject(opts.args[key]) || $.isArray(opts.args[key]))) {\n\t\t\topts.args[key] = JSON.stringify(opts.args[key]);\n\t\t}\n\t}\n\n\t// no cmd?\n\tif(!opts.args.cmd && !opts.url) {\n\t\tconsole.log(opts)\n\t\tthrow \"Incomplete Request\";\n\t}\n\n\topts.success_callback = opts.success;\n\topts.error_callback = opts.error;\n\tdelete opts.success;\n\tdelete opts.error;\n\n}\n\nfrappe.request.cleanup = function(opts, r) {\n\t// stop button indicator\n\tif(opts.btn) {\n\t\t$(opts.btn).prop(\"disabled\", false);\n\t}\n\n\t$(\"body\").attr(\"data-ajax-state\", \"complete\");\n\n\t// un-freeze page\n\tif(opts.freeze) frappe.dom.unfreeze();\n\n\tif(r) {\n\n\t\t// session expired? - Guest has no business here!\n\t\tif(r.session_expired || frappe.get_cookie(\"sid\")===\"Guest\") {\n\t\t\tfrappe.app.handle_session_expired();\n\t\t\treturn;\n\t\t}\n\n\t\t// show messages\n\t\tif(r._server_messages && !opts.silent) {\n\t\t\tr._server_messages = JSON.parse(r._server_messages);\n\t\t\tfrappe.hide_msgprint();\n\t\t\tfrappe.msgprint(r._server_messages);\n\t\t}\n\n\t\t// show errors\n\t\tif(r.exc) {\n\t\t\tr.exc = JSON.parse(r.exc);\n\t\t\tif(r.exc instanceof Array) {\n\t\t\t\t$.each(r.exc, function(i, v) {\n\t\t\t\t\tif(v) {\n\t\t\t\t\t\tconsole.log(v);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tconsole.log(r.exc);\n\t\t\t}\n\t\t}\n\n\t\t// debug messages\n\t\tif(r._debug_messages) {\n\t\t\tif(opts.args) {\n\t\t\t\tconsole.log(\"======== arguments ========\");\n\t\t\t\tconsole.log(opts.args);\n\t\t\t\tconsole.log(\"========\")\n\t\t\t}\n\t\t\t$.each(JSON.parse(r._debug_messages), function(i, v) { console.log(v); });\n\t\t\tconsole.log(\"======== response ========\");\n\t\t\tdelete r._debug_messages;\n\t\t\tconsole.log(r);\n\t\t\tconsole.log(\"========\");\n\t\t}\n\t}\n\n\tfrappe.last_response = r;\n}\n\nfrappe.after_server_call = () => {\n\tif(frappe.request.ajax_count) {\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.request.waiting_for_ajax.push(() => {\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t} else {\n\t\treturn null;\n\t}\n};\n\nfrappe.after_ajax = function(fn) {\n\treturn new Promise(resolve => {\n\t\tif(frappe.request.ajax_count) {\n\t\t\tfrappe.request.waiting_for_ajax.push(() => {\n\t\t\t\tif(fn) fn();\n\t\t\t\tresolve();\n\t\t\t});\n\t\t} else {\n\t\t\tif(fn) fn();\n\t\t\tresolve();\n\t\t}\n\t});\n};\n\nfrappe.request.report_error = function(xhr, request_opts) {\n\tvar data = JSON.parse(xhr.responseText);\n\tvar exc;\n\tif (data.exc) {\n\t\ttry {\n\t\t\texc = (JSON.parse(data.exc) || []).join(\"\\n\");\n\t\t} catch (e) {\n\t\t\texc = data.exc;\n\t\t}\n\t\tdelete data.exc;\n\t} else {\n\t\texc = \"\";\n\t}\n\n\tvar show_communication = function() {\n\t\tvar error_report_message = [\n\t\t\t'<h5>Please type some additional information that could help us reproduce this issue:</h5>',\n\t\t\t'<div style=\"min-height: 100px; border: 1px solid #bbb; \\\n\t\t\t\tborder-radius: 5px; padding: 15px; margin-bottom: 15px;\"></div>',\n\t\t\t'<hr>',\n\t\t\t'<h5>App Versions</h5>',\n\t\t\t'<pre>' + JSON.stringify(frappe.boot.versions, null, \"\\t\") + '</pre>',\n\t\t\t'<h5>Route</h5>',\n\t\t\t'<pre>' + frappe.get_route_str() + '</pre>',\n\t\t\t'<hr>',\n\t\t\t'<h5>Error Report</h5>',\n\t\t\t'<pre>' + exc + '</pre>',\n\t\t\t'<hr>',\n\t\t\t'<h5>Request Data</h5>',\n\t\t\t'<pre>' + JSON.stringify(request_opts, null, \"\\t\") + '</pre>',\n\t\t\t'<hr>',\n\t\t\t'<h5>Response JSON</h5>',\n\t\t\t'<pre>' + JSON.stringify(data, null, '\\t')+ '</pre>'\n\t\t].join(\"\\n\");\n\n\t\tvar communication_composer = new frappe.views.CommunicationComposer({\n\t\t\tsubject: 'Error Report [' + frappe.datetime.nowdate() + ']',\n\t\t\trecipients: error_report_email,\n\t\t\tmessage: error_report_message,\n\t\t\tdoc: {\n\t\t\t\tdoctype: \"User\",\n\t\t\t\tname: frappe.session.user\n\t\t\t}\n\t\t});\n\t\tcommunication_composer.dialog.$wrapper.css(\"z-index\", cint(frappe.msg_dialog.$wrapper.css(\"z-index\")) + 1);\n\t}\n\n\tif (exc) {\n\t\tvar error_report_email = (frappe.boot.error_report_email || []).join(\", \");\n\n\t\trequest_opts = frappe.request.cleanup_request_opts(request_opts);\n\n\t\t// window.msg_dialog = frappe.msgprint({message:error_message, indicator:'red', big: true});\n\n\t\tif (!frappe.error_dialog) {\n\t\t\tfrappe.error_dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: 'Server Error',\n\t\t\t\tprimary_action_label: __('Report'),\n\t\t\t\tprimary_action: () => {\n\t\t\t\t\tif (error_report_email) {\n\t\t\t\t\t\tshow_communication();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.msgprint(__('Support Email Address Not Specified'));\n\t\t\t\t\t}\n\t\t\t\t\tfrappe.error_dialog.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\tfrappe.error_dialog.wrapper.classList.add('msgprint-dialog');\n\n\t\t}\n\n\t\tlet parts = strip(exc).split('\\n');\n\n\t\tfrappe.error_dialog.$body.html(parts[parts.length - 1]);\n\t\tfrappe.error_dialog.show();\n\n\t}\n};\n\nfrappe.request.cleanup_request_opts = function(request_opts) {\n\tvar doc = (request_opts.args || {}).doc;\n\tif (doc) {\n\t\tdoc = JSON.parse(doc);\n\t\t$.each(Object.keys(doc), function(i, key) {\n\t\t\tif (key.indexOf(\"password\")!==-1 && doc[key]) {\n\t\t\t\t// mask the password\n\t\t\t\tdoc[key] = \"*****\";\n\t\t\t}\n\t\t});\n\t\trequest_opts.args.doc = JSON.stringify(doc);\n\t}\n\treturn request_opts;\n};\n\n$(document).ajaxSend(function() {\n\tfrappe.request.ajax_count++;\n});\n\n$(document).ajaxComplete(function() {\n\tfrappe.request.ajax_count--;\n\tif(!frappe.request.ajax_count) {\n\t\t$.each(frappe.request.waiting_for_ajax || [], function(i, fn) {\n\t\t\tfn();\n\t\t});\n\t\tfrappe.request.waiting_for_ajax = [];\n\t}\n});\n","frappe.socketio = {\n\topen_tasks: {},\n\topen_docs: [],\n\temit_queue: [],\n\tinit: function(port = 3000) {\n\t\tif (!window.io) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (frappe.boot.disable_async) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (frappe.socketio.socket) {\n\t\t\treturn;\n\t\t}\n\n\t\t//Enable secure option when using HTTPS\n\t\tif (window.location.protocol == \"https:\") {\n\t\t\tfrappe.socketio.socket = io.connect(frappe.socketio.get_host(port), {secure: true});\n\t\t}\n\t\telse if (window.location.protocol == \"http:\") {\n\t\t\tfrappe.socketio.socket = io.connect(frappe.socketio.get_host(port));\n\t\t}\n\t\telse if (window.location.protocol == \"file:\") {\n\t\t\tfrappe.socketio.socket = io.connect(window.localStorage.server);\n\t\t}\n\n\t\tif (!frappe.socketio.socket) {\n\t\t\tconsole.log(\"Unable to connect to \" + frappe.socketio.get_host(port));\n\t\t\treturn;\n\t\t}\n\n\t\tfrappe.socketio.socket.on('msgprint', function(message) {\n\t\t\tfrappe.msgprint(message);\n\t\t});\n\n\t\tfrappe.socketio.socket.on('eval_js', function(message) {\n\t\t\teval(message);\n\t\t});\n\n\t\tfrappe.socketio.socket.on('progress', function(data) {\n\t\t\tif(data.progress) {\n\t\t\t\tdata.percent = flt(data.progress[0]) / data.progress[1] * 100;\n\t\t\t}\n\t\t\tif(data.percent) {\n\t\t\t\tif(data.percent==100) {\n\t\t\t\t\tfrappe.hide_progress();\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.show_progress(data.title || __(\"Progress\"), data.percent, 100, data.description);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfrappe.socketio.setup_listeners();\n\t\tfrappe.socketio.setup_reconnect();\n\t\tfrappe.socketio.uploader = new frappe.socketio.SocketIOUploader();\n\n\t\t$(document).on('form-load form-rename', function(e, frm) {\n\t\t\tif (frm.is_new()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var i=0, l=frappe.socketio.open_docs.length; i<l; i++) {\n\t\t\t\tvar d = frappe.socketio.open_docs[i];\n\t\t\t\tif (frm.doctype==d.doctype && frm.docname==d.name) {\n\t\t\t\t\t// already subscribed\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfrappe.socketio.doc_subscribe(frm.doctype, frm.docname);\n\t\t});\n\n\t\t$(document).on(\"form-refresh\", function(e, frm) {\n\t\t\tif (frm.is_new()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfrappe.socketio.doc_open(frm.doctype, frm.docname);\n\t\t});\n\n\t\t$(document).on('form-unload', function(e, frm) {\n\t\t\tif (frm.is_new()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// frappe.socketio.doc_unsubscribe(frm.doctype, frm.docname);\n\t\t\tfrappe.socketio.doc_close(frm.doctype, frm.docname);\n\t\t});\n\n\t\twindow.onbeforeunload = function() {\n\t\t\tif (!cur_frm || cur_frm.is_new()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// if tab/window is closed, notify other users\n\t\t\tif (cur_frm.doc) {\n\t\t\t\tfrappe.socketio.doc_close(cur_frm.doctype, cur_frm.docname);\n\t\t\t}\n\t\t}\n\t},\n\tget_host: function(port = 3000) {\n\t\tvar host = window.location.origin;\n\t\tif(window.dev_server) {\n\t\t\tvar parts = host.split(\":\");\n\t\t\tport = frappe.boot.socketio_port || port.toString() || '3000';\n\t\t\tif(parts.length > 2) {\n\t\t\t\thost = parts[0] + \":\" + parts[1];\n\t\t\t}\n\t\t\thost = host + \":\" + port;\n\t\t}\n\t\treturn host;\n\t},\n\tsubscribe: function(task_id, opts) {\n\t\t// TODO DEPRECATE\n\n\t\tfrappe.socketio.socket.emit('task_subscribe', task_id);\n\t\tfrappe.socketio.socket.emit('progress_subscribe', task_id);\n\n\t\tfrappe.socketio.open_tasks[task_id] = opts;\n\t},\n\ttask_subscribe: function(task_id) {\n\t\tfrappe.socketio.socket.emit('task_subscribe', task_id);\n\t},\n\ttask_unsubscribe: function(task_id) {\n\t\tfrappe.socketio.socket.emit('task_unsubscribe', task_id);\n\t},\n\tdoc_subscribe: function(doctype, docname) {\n\t\tif (frappe.flags.doc_subscribe) {\n\t\t\tconsole.log('throttled');\n\t\t\treturn;\n\t\t}\n\n\t\tfrappe.flags.doc_subscribe = true;\n\n\t\t// throttle to 1 per sec\n\t\tsetTimeout(function() { frappe.flags.doc_subscribe = false }, 1000);\n\n\t\tfrappe.socketio.socket.emit('doc_subscribe', doctype, docname);\n\t\tfrappe.socketio.open_docs.push({doctype: doctype, docname: docname});\n\t},\n\tdoc_unsubscribe: function(doctype, docname) {\n\t\tfrappe.socketio.socket.emit('doc_unsubscribe', doctype, docname);\n\t\tfrappe.socketio.open_docs = $.filter(frappe.socketio.open_docs, function(d) {\n\t\t\tif(d.doctype===doctype && d.name===docname) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\treturn d;\n\t\t\t}\n\t\t})\n\t},\n\tdoc_open: function(doctype, docname) {\n\t\t// notify that the user has opened this doc, if not already notified\n\t\tif(!frappe.socketio.last_doc\n\t\t\t|| (frappe.socketio.last_doc[0]!=doctype && frappe.socketio.last_doc[0]!=docname)) {\n\t\t\tfrappe.socketio.socket.emit('doc_open', doctype, docname);\n\t\t}\n\t\tfrappe.socketio.last_doc = [doctype, docname];\n\t},\n\tdoc_close: function(doctype, docname) {\n\t\t// notify that the user has closed this doc\n\t\tfrappe.socketio.socket.emit('doc_close', doctype, docname);\n\t},\n\n\tsetup_listeners: function() {\n\t\tfrappe.socketio.socket.on('task_status_change', function(data) {\n\t\t\tfrappe.socketio.process_response(data, data.status.toLowerCase());\n\t\t});\n\t\tfrappe.socketio.socket.on('task_progress', function(data) {\n\t\t\tfrappe.socketio.process_response(data, \"progress\");\n\t\t});\n\t},\n\tsetup_reconnect: function() {\n\t\t// subscribe again to open_tasks\n\t\tfrappe.socketio.socket.on(\"connect\", function() {\n\t\t\t// wait for 5 seconds before subscribing again\n\t\t\t// because it takes more time to start python server than nodejs server\n\t\t\t// and we use validation requests to python server for subscribing\n\t\t\tsetTimeout(function() {\n\t\t\t\t$.each(frappe.socketio.open_tasks, function(task_id, opts) {\n\t\t\t\t\tfrappe.socketio.subscribe(task_id, opts);\n\t\t\t\t});\n\n\t\t\t\t// re-connect open docs\n\t\t\t\t$.each(frappe.socketio.open_docs, function(d) {\n\t\t\t\t\tif(locals[d.doctype] && locals[d.doctype][d.name]) {\n\t\t\t\t\t\tfrappe.socketio.doc_subscribe(d.doctype, d.name);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (cur_frm && cur_frm.doc) {\n\t\t\t\t\tfrappe.socketio.doc_open(cur_frm.doc.doctype, cur_frm.doc.name);\n\t\t\t\t}\n\t\t\t}, 5000);\n\t\t});\n\t},\n\tprocess_response: function(data, method) {\n\t\tif(!data) {\n\t\t\treturn;\n\t\t}\n\n\t\t// success\n\t\tvar opts = frappe.socketio.open_tasks[data.task_id];\n\t\tif(opts[method]) {\n\t\t\topts[method](data);\n\t\t}\n\n\t\t// \"callback\" is std frappe term\n\t\tif(method===\"success\") {\n\t\t\tif(opts.callback) opts.callback(data);\n\t\t}\n\n\t\t// always\n\t\tfrappe.request.cleanup(opts, data);\n\t\tif(opts.always) {\n\t\t\topts.always(data);\n\t\t}\n\n\t\t// error\n\t\tif(data.status_code && data.status_code > 400 && opts.error) {\n\t\t\topts.error(data);\n\t\t}\n\t}\n}\n\nfrappe.provide(\"frappe.realtime\");\nfrappe.realtime.on = function(event, callback) {\n\tfrappe.socketio.socket && frappe.socketio.socket.on(event, callback);\n};\n\nfrappe.realtime.off = function(event, callback) {\n\tfrappe.socketio.socket && frappe.socketio.socket.off(event, callback);\n}\n\nfrappe.realtime.publish = function(event, message) {\n\tif(frappe.socketio.socket) {\n\t\tfrappe.socketio.socket.emit(event, message);\n\t}\n}\n\nfrappe.socketio.SocketIOUploader = class SocketIOUploader {\n\tconstructor() {\n\t\tfrappe.socketio.socket.on('upload-request-slice', (data) => {\n\t\t\tvar place = data.currentSlice * this.chunk_size,\n\t\t\t\tslice = this.file.slice(place,\n\t\t\t\t\tplace + Math.min(this.chunk_size, this.file.size - place));\n\n\t\t\tif (this.on_progress) {\n\t\t\t\t// update progress\n\t\t\t\tthis.on_progress(place / this.file.size * 100);\n\t\t\t}\n\n\t\t\tthis.reader.readAsArrayBuffer(slice);\n\t\t\tthis.started = true;\n\t\t\tthis.keep_alive();\n\t\t});\n\n\t\tfrappe.socketio.socket.on('upload-end', (data) => {\n\t\t\tthis.reader = null;\n\t\t\tthis.file = null;\n\t\t\tif (data.file_url.substr(0, 7)==='/public') {\n\t\t\t\tdata.file_url = data.file_url.substr(7);\n\t\t\t}\n\t\t\tthis.callback(data);\n\t\t});\n\n\t\tfrappe.socketio.socket.on('upload-error', (data) => {\n\t\t\tthis.disconnect(false);\n\t\t\tfrappe.msgprint({\n\t\t\t\ttitle: __('Upload Failed'),\n\t\t\t\tmessage: data.error,\n\t\t\t\tindicator: 'red'\n\t\t\t});\n\t\t});\n\n\t\tfrappe.socketio.socket.on('disconnect', () => {\n\t\t\tthis.disconnect();\n\t\t});\n\t}\n\n\tstart({file=null, is_private=0, filename='', callback=null, on_progress=null,\n\t\tchunk_size=24576, fallback=null} = {}) {\n\n\t\tif (this.reader) {\n\t\t\tfrappe.throw(__('File Upload in Progress. Please try again in a few moments.'));\n\t\t}\n\n\t\tfunction fallback_required() {\n\t\t\treturn !frappe.boot.sysdefaults.use_socketio_to_upload_file || !frappe.socketio.socket.connected;\n\t\t}\n\n\t\tif (fallback_required()) {\n\t\t\treturn fallback ? fallback() : frappe.throw(__('Socketio is not connected. Cannot upload'));\n\t\t}\n\n\t\tthis.reader = new FileReader();\n\t\tthis.file = file;\n\t\tthis.chunk_size = chunk_size;\n\t\tthis.callback = callback;\n\t\tthis.on_progress = on_progress;\n\t\tthis.fallback = fallback;\n\t\tthis.started = false;\n\n\t\tthis.reader.onload = () => {\n\t\t\tfrappe.socketio.socket.emit('upload-accept-slice', {\n\t\t\t\tis_private: is_private,\n\t\t\t\tname: filename,\n\t\t\t\ttype: this.file.type,\n\t\t\t\tsize: this.file.size,\n\t\t\t\tdata: this.reader.result\n\t\t\t});\n\t\t\tthis.keep_alive();\n\t\t};\n\n\t\tvar slice = file.slice(0, this.chunk_size);\n\t\tthis.reader.readAsArrayBuffer(slice);\n\t}\n\n\tkeep_alive() {\n\t\tif (this.next_check) {\n\t\t\tclearTimeout (this.next_check);\n\t\t}\n\t\tthis.next_check = setTimeout (() => {\n\t\t\tif (!this.started) {\n\t\t\t\t// upload never started, so try fallback\n\t\t\t\tif (this.fallback) {\n\t\t\t\t\tthis.fallback();\n\t\t\t\t} else {\n\t\t\t\t\tthis.disconnect();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.disconnect();\n\t\t}, 3000);\n\t}\n\n\tdisconnect(with_message = true) {\n\t\tif (this.reader) {\n\t\t\tthis.reader = null;\n\t\t\tthis.file = null;\n\t\t\tfrappe.hide_progress();\n\t\t\tif (with_message) {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\ttitle: __('File Upload'),\n\t\t\t\t\tmessage: __('File Upload Disconnected. Please try again.'),\n\t\t\t\t\tindicator: 'red'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nimport deep_equal from \"fast-deep-equal\";\nfrappe.provide('frappe.utils');\n\nObject.assign(frappe.utils, {\n\tget_random: function(len) {\n\t\tvar text = \"\";\n\t\tvar possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n\n\t\tfor( var i=0; i < len; i++ )\n\t\t\ttext += possible.charAt(Math.floor(Math.random() * possible.length));\n\n\t\treturn text;\n\t},\n\tget_file_link: function(filename) {\n\t\tfilename = cstr(filename);\n\t\tif(frappe.utils.is_url(filename)) {\n\t\t\treturn filename;\n\t\t} else if(filename.indexOf(\"/\")===-1) {\n\t\t\treturn \"files/\" + filename;\n\t\t} else {\n\t\t\treturn filename;\n\t\t}\n\t},\n\treplace_newlines(t) {\n\t\treturn t?t.replace(/\\n/g, '<br>'):'';\n\t},\n\tis_html: function(txt) {\n\t\tif (!txt) return false;\n\n\t\tif(txt.indexOf(\"<br>\")==-1 && txt.indexOf(\"<p\")==-1\n\t\t\t&& txt.indexOf(\"<img\")==-1 && txt.indexOf(\"<div\")==-1 && !txt.includes('<span')) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\tis_xs: function() {\n\t\treturn $(document).width() < 768;\n\t},\n\tis_sm: function() {\n\t\treturn $(document).width() < 991 && $(document).width() >= 768;\n\t},\n\tis_md: function() {\n\t\treturn $(document).width() < 1199 && $(document).width() >= 991;\n\t},\n\tis_json: function(str) {\n\t\ttry {\n\t\t\tJSON.parse(str);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\tstrip_whitespace: function(html) {\n\t\treturn (html || \"\").replace(/<p>\\s*<\\/p>/g, \"\").replace(/<br>(\\s*<br>\\s*)+/g, \"<br><br>\");\n\t},\n\tencode_tags: function(html) {\n\t\tvar tagsToReplace = {\n\t\t\t'&': '&amp;',\n\t\t\t'<': '&lt;',\n\t\t\t'>': '&gt;'\n\t\t};\n\n\t\tfunction replaceTag(tag) {\n\t\t\treturn tagsToReplace[tag] || tag;\n\t\t}\n\n\t\treturn html.replace(/[&<>]/g, replaceTag);\n\t},\n\tstrip_original_content: function(txt) {\n\t\tvar out = [],\n\t\t\tpart = [],\n\t\t\tnewline = txt.indexOf(\"<br>\")===-1 ? \"\\n\" : \"<br>\";\n\n\t\t$.each(txt.split(newline), function(i, t) {\n\t\t\tvar tt = strip(t);\n\t\t\tif(tt && (tt.substr(0,1)===\">\" || tt.substr(0,4)===\"&gt;\")) {\n\t\t\t\tpart.push(t);\n\t\t\t} else {\n\t\t\t\tout.concat(part);\n\t\t\t\tout.push(t);\n\t\t\t\tpart = [];\n\t\t\t}\n\t\t});\n\t\treturn out.join(newline);\n\t},\n\tescape_html: function(txt) {\n\t\treturn $(\"<div></div>\").text(txt || \"\").html();\n\t},\n\n\thtml2text: function(html) {\n\t\tlet d = document.createElement('div');\n\t\td.innerHTML = html;\n\t\treturn d.textContent;\n\t},\n\n\tis_url: function(txt) {\n\t\treturn txt.toLowerCase().substr(0,7)=='http://'\n\t\t\t|| txt.toLowerCase().substr(0,8)=='https://'\n\t},\n\tto_title_case: function(string, with_space=false) {\n\t\tlet titlecased_string = string.toLowerCase().replace(/(?:^|[\\s-/])\\w/g, function(match) {\n\t\t\treturn match.toUpperCase();\n\t\t});\n\n\t\tlet replace_with = with_space ? ' ' : '';\n\n\t\treturn titlecased_string.replace(/-|_/g, replace_with);\n\t},\n\ttoggle_blockquote: function(txt) {\n\t\tif (!txt) return txt;\n\n\t\tvar content = $(\"<div></div>\").html(txt)\n\t\tcontent.find(\"blockquote\").parent(\"blockquote\").addClass(\"hidden\")\n\t\t\t.before('<p><a class=\"text-muted btn btn-default toggle-blockquote\" style=\"padding: 2px 7px 0px; line-height: 1;\"> \\\n\t\t\t\t\t   \\\n\t\t\t\t</a></p>');\n\t\treturn content.html();\n\t},\n\tscroll_to: function(element, animate, additional_offset) {\n\t\tvar y = 0;\n\t\tif(element && typeof element==='number') {\n\t\t\ty = element;\n\t\t} else if(element) {\n\t\t\tvar header_offset = $(\".navbar\").height() + $(\".page-head\").height();\n\t\t\tvar y = $(element).offset().top - header_offset - cint(additional_offset);\n\t\t}\n\n\t\tif(y < 0) {\n\t\t\ty = 0;\n\t\t}\n\n\t\t// already there\n\t\tif(y==$('html, body').scrollTop()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (animate!==false) {\n\t\t\t$(\"html, body\").animate({ scrollTop: y });\n\t\t} else {\n\t\t\t$(window).scrollTop(y);\n\t\t}\n\n\t},\n\tfilter_dict: function(dict, filters) {\n\t\tvar ret = [];\n\t\tif(typeof filters=='string') {\n\t\t\treturn [dict[filters]]\n\t\t}\n\t\t$.each(dict, function(i, d) {\n\t\t\tfor(var key in filters) {\n\t\t\t\tif($.isArray(filters[key])) {\n\t\t\t\t\tif(filters[key][0]==\"in\") {\n\t\t\t\t\t\tif(filters[key][1].indexOf(d[key])==-1)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t} else if(filters[key][0]==\"not in\") {\n\t\t\t\t\t\tif(filters[key][1].indexOf(d[key])!=-1)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t} else if(filters[key][0]==\"<\") {\n\t\t\t\t\t\tif (!(d[key] < filters[key])) return;\n\t\t\t\t\t} else if(filters[key][0]==\"<=\") {\n\t\t\t\t\t\tif (!(d[key] <= filters[key])) return;\n\t\t\t\t\t} else if(filters[key][0]==\">\") {\n\t\t\t\t\t\tif (!(d[key] > filters[key])) return;\n\t\t\t\t\t} else if(filters[key][0]==\">=\") {\n\t\t\t\t\t\tif (!(d[key] >= filters[key])) return;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(d[key]!=filters[key]) return;\n\t\t\t\t}\n\t\t\t}\n\t\t\tret.push(d);\n\t\t});\n\t\treturn ret;\n\t},\n\tcomma_or: function(list) {\n\t\treturn frappe.utils.comma_sep(list, \" \" + __(\"or\") + \" \");\n\t},\n\tcomma_and: function(list) {\n\t\treturn frappe.utils.comma_sep(list, \" \" + __(\"and\") + \" \");\n\t},\n\tcomma_sep: function(list, sep) {\n\t\tif(list instanceof Array) {\n\t\t\tif(list.length==0) {\n\t\t\t\treturn \"\";\n\t\t\t} else if (list.length==1) {\n\t\t\t\treturn list[0];\n\t\t\t} else {\n\t\t\t\treturn list.slice(0, list.length-1).join(\", \") + sep + list.slice(-1)[0];\n\t\t\t}\n\t\t} else {\n\t\t\treturn list;\n\t\t}\n\t},\n\tset_footnote: function(footnote_area, wrapper, txt) {\n\t\tif(!footnote_area) {\n\t\t\tfootnote_area = $('<div class=\"text-muted footnote-area level\">')\n\t\t\t\t.appendTo(wrapper);\n\t\t}\n\n\t\tif(txt) {\n\t\t\tfootnote_area.html(txt);\n\t\t} else {\n\t\t\tfootnote_area.remove();\n\t\t\tfootnote_area = null;\n\t\t}\n\t\treturn footnote_area;\n\t},\n\tget_args_dict_from_url: function(txt) {\n\t\tvar args = {};\n\t\t$.each(decodeURIComponent(txt).split(\"&\"), function(i, arg) {\n\t\t\targ = arg.split(\"=\");\n\t\t\targs[arg[0]] = arg[1]\n\t\t});\n\t\treturn args;\n\t},\n\tget_url_from_dict: function(args) {\n\t\treturn $.map(args, function(val, key) {\n\t\t\tif(val!==null)\n\t\t\t\treturn encodeURIComponent(key)+\"=\"+encodeURIComponent(val);\n\t\t\telse\n\t\t\t\treturn null;\n\t\t}).join(\"&\") || \"\";\n\t},\n\tvalidate_type: function ( val, type ) {\n\t\t// from https://github.com/guillaumepotier/Parsley.js/blob/master/parsley.js#L81\n\t\tvar regExp;\n\n\t\tswitch ( type ) {\n\t\t\tcase \"number\":\n\t\t\t\tregExp = /^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/;\n\t\t\t\tbreak;\n\t\t\tcase \"digits\":\n\t\t\t\tregExp = /^\\d+$/;\n\t\t\t\tbreak;\n\t\t\tcase \"alphanum\":\n\t\t\t\tregExp = /^\\w+$/;\n\t\t\t\tbreak;\n\t\t\tcase \"email\":\n\t\t\t\tregExp = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n\t\t\t\tbreak;\n\t\t\tcase \"url\":\n\t\t\t\tregExp = /^(https?|s?ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i;\n\t\t\t\tbreak;\n\t\t\tcase \"dateIso\":\n\t\t\t\tregExp = /^(\\d{4})\\D?(0[1-9]|1[0-2])\\D?([12]\\d|0[1-9]|3[01])$/;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\n\t\t// test regExp if not null\n\t\treturn '' !== val ? regExp.test( val ) : false;\n\t},\n\tguess_style: function(text, default_style, _colour) {\n\t\tvar style = default_style || \"default\";\n\t\tvar colour = \"darkgrey\";\n\t\tif(text) {\n\t\t\tif(has_words([\"Pending\", \"Review\", \"Medium\", \"Not Approved\"], text)) {\n\t\t\t\tstyle = \"warning\";\n\t\t\t\tcolour = \"orange\";\n\t\t\t} else if(has_words([\"Open\", \"Urgent\", \"High\"], text)) {\n\t\t\t\tstyle = \"danger\";\n\t\t\t\tcolour = \"red\";\n\t\t\t} else if(has_words([\"Closed\", \"Finished\", \"Converted\", \"Completed\", \"Confirmed\",\n\t\t\t\t\"Approved\", \"Yes\", \"Active\", \"Available\", \"Paid\"], text)) {\n\t\t\t\tstyle = \"success\";\n\t\t\t\tcolour = \"green\";\n\t\t\t} else if(has_words([\"Submitted\"], text)) {\n\t\t\t\tstyle = \"info\";\n\t\t\t\tcolour = \"blue\";\n\t\t\t}\n\t\t}\n\t\treturn _colour ? colour : style;\n\t},\n\n\tguess_colour: function(text) {\n\t\treturn frappe.utils.guess_style(text, null, true);\n\t},\n\n\tsort: function(list, key, compare_type, reverse) {\n\t\tif(!list || list.length < 2)\n\t\t\treturn list || [];\n\n\t\tvar sort_fn = {\n\t\t\t\"string\": function(a, b) {\n\t\t\t\treturn cstr(a[key]).localeCompare(cstr(b[key]));\n\t\t\t},\n\t\t\t\"number\": function(a, b) {\n\t\t\t\treturn flt(a[key]) - flt(b[key]);\n\t\t\t}\n\t\t};\n\n\t\tif(!compare_type)\n\t\t\tcompare_type = typeof list[0][key]===\"string\" ? \"string\" : \"number\";\n\n\t\tlist.sort(sort_fn[compare_type]);\n\n\t\tif(reverse) { list.reverse(); }\n\n\t\treturn list;\n\t},\n\n\tunique: function(list) {\n\t\tvar dict = {},\n\t\t\tarr = [];\n\t\tfor(var i=0, l=list.length; i < l; i++) {\n\t\t\tif(!dict.hasOwnProperty(list[i])) {\n\t\t\t\tdict[list[i]] = null;\n\t\t\t\tarr.push(list[i]);\n\t\t\t}\n\t\t}\n\t\treturn arr;\n\t},\n\n\tremove_nulls: function(list) {\n\t\tvar new_list = [];\n\t\tfor (var i=0, l=list.length; i < l; i++) {\n\t\t\tif (!is_null(list[i])) {\n\t\t\t\tnew_list.push(list[i]);\n\t\t\t}\n\t\t}\n\t\treturn new_list;\n\t},\n\n\tall: function(lst) {\n\t\tfor(var i=0, l=lst.length; i<l; i++) {\n\t\t\tif(!lst[i]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\tdict: function(keys,values) {\n\t\t// make dictionaries from keys and values\n\t\tvar out = [];\n\t\t$.each(values, function(row_idx, row) {\n\t\t\tvar new_row = {};\n\t\t\t$.each(keys, function(key_idx, key) {\n\t\t\t\tnew_row[key] = row[key_idx];\n\t\t\t})\n\t\t\tout.push(new_row);\n\t\t});\n\t\treturn out;\n\t},\n\n\tsum: function(list) {\n\t\treturn list.reduce(function(previous_value, current_value) { return flt(previous_value) + flt(current_value); }, 0.0);\n\t},\n\n\tarrays_equal: function(arr1, arr2) {\n\t\tif (!arr1 || !arr2) {\n\t\t\treturn false;\n\t\t}\n\t\tif (arr1.length != arr2.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (var i = 0; i < arr1.length; i++) {\n\t\t\tif ($.isArray(arr1[i])) {\n\t\t\t\tif (!frappe.utils.arrays_equal(arr1[i], arr2[i])) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (arr1[i] !== arr2[i]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\tintersection: function(a, b) {\n\t\t// from stackoverflow: http://stackoverflow.com/questions/1885557/simplest-code-for-array-intersection-in-javascript\n\t\t/* finds the intersection of\n\t\t * two arrays in a simple fashion.\n\t\t *\n\t\t * PARAMS\n\t\t *  a - first array, must already be sorted\n\t\t *  b - second array, must already be sorted\n\t\t *\n\t\t * NOTES\n\t\t *\n\t\t *  Should have O(n) operations, where n is\n\t\t *    n = MIN(a.length(), b.length())\n\t\t */\n\t\tvar ai=0, bi=0;\n\t\tvar result = new Array();\n\n\t\t// sorted copies\n\t\ta = ([].concat(a)).sort();\n\t\tb = ([].concat(b)).sort();\n\n\t\twhile( ai < a.length && bi < b.length ) {\n\t\t\tif (a[ai] < b[bi] ) { ai++; }\n\t\t\telse if (a[ai] > b[bi] ) { bi++; }\n\t\t\telse {\n\t\t\t\t/* they're equal */\n\t\t\t\tresult.push(a[ai]);\n\t\t\t\tai++;\n\t\t\t\tbi++;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tresize_image: function(reader, callback, max_width, max_height) {\n\t\tvar tempImg = new Image();\n\t\tif(!max_width) max_width = 600;\n\t\tif(!max_height) max_height = 400;\n\t\ttempImg.src = reader.result;\n\n\t\ttempImg.onload = function() {\n\t\t\tvar tempW = tempImg.width;\n\t\t\tvar tempH = tempImg.height;\n\t\t\tif (tempW > tempH) {\n\t\t\t\tif (tempW > max_width) {\n\t\t\t\t\ttempH *= max_width / tempW;\n\t\t\t\t\ttempW = max_width;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (tempH > max_height) {\n\t\t\t\t\ttempW *= max_height / tempH;\n\t\t\t\t\ttempH = max_height;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.width = tempW;\n\t\t\tcanvas.height = tempH;\n\t\t\tvar ctx = canvas.getContext(\"2d\");\n\t\t\tctx.drawImage(this, 0, 0, tempW, tempH);\n\t\t\tvar dataURL = canvas.toDataURL(\"image/jpeg\");\n\t\t\tsetTimeout(function() { callback(dataURL); }, 10 );\n\t\t}\n\t},\n\n\tcsv_to_array: function (strData, strDelimiter) {\n\t\t// Check to see if the delimiter is defined. If not,\n\t\t// then default to comma.\n\t\tstrDelimiter = (strDelimiter || \",\");\n\n\t\t// Create a regular expression to parse the CSV values.\n\t\tvar objPattern = new RegExp(\n\t\t\t(\n\t\t\t\t// Delimiters.\n\t\t\t\t\"(\\\\\" + strDelimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\n\n\t\t\t\t// Quoted fields.\n\t\t\t\t\"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\n\n\t\t\t\t// Standard fields.\n\t\t\t\t\"([^\\\"\\\\\" + strDelimiter + \"\\\\r\\\\n]*))\"\n\t\t\t),\n\t\t\t\"gi\"\n\t\t\t);\n\n\n\t\t// Create an array to hold our data. Give the array\n\t\t// a default empty first row.\n\t\tvar arrData = [[]];\n\n\t\t// Create an array to hold our individual pattern\n\t\t// matching groups.\n\t\tvar arrMatches = null;\n\n\n\t\t// Keep looping over the regular expression matches\n\t\t// until we can no longer find a match.\n\t\twhile ((arrMatches = objPattern.exec( strData ))){\n\n\t\t\t// Get the delimiter that was found.\n\t\t\tvar strMatchedDelimiter = arrMatches[ 1 ];\n\n\t\t\t// Check to see if the given delimiter has a length\n\t\t\t// (is not the start of string) and if it matches\n\t\t\t// field delimiter. If id does not, then we know\n\t\t\t// that this delimiter is a row delimiter.\n\t\t\tif (\n\t\t\t\tstrMatchedDelimiter.length &&\n\t\t\t\tstrMatchedDelimiter !== strDelimiter\n\t\t\t\t){\n\n\t\t\t\t// Since we have reached a new row of data,\n\t\t\t\t// add an empty row to our data array.\n\t\t\t\tarrData.push( [] );\n\n\t\t\t}\n\n\t\t\tvar strMatchedValue;\n\n\t\t\t// Now that we have our delimiter out of the way,\n\t\t\t// let's check to see which kind of value we\n\t\t\t// captured (quoted or unquoted).\n\t\t\tif (arrMatches[ 2 ]){\n\n\t\t\t\t// We found a quoted value. When we capture\n\t\t\t\t// this value, unescape any double quotes.\n\t\t\t\tstrMatchedValue = arrMatches[ 2 ].replace(\n\t\t\t\t\tnew RegExp( \"\\\"\\\"\", \"g\" ),\n\t\t\t\t\t\"\\\"\"\n\t\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\t// We found a non-quoted value.\n\t\t\t\tstrMatchedValue = arrMatches[ 3 ];\n\n\t\t\t}\n\n\n\t\t\t// Now that we have our value string, let's add\n\t\t\t// it to the data array.\n\t\t\tarrData[ arrData.length - 1 ].push( strMatchedValue );\n\t\t}\n\n\t\t// Return the parsed data.\n\t\treturn( arrData );\n\t},\n\n\twarn_page_name_change: function(frm) {\n\t\tfrappe.msgprint(__(\"Note: Changing the Page Name will break previous URL to this page.\"));\n\t},\n\n\tnotify: function(subject, body, route, onclick) {\n\t\tconsole.log('push notifications are evil and deprecated');\n\t},\n\n\tset_title: function(title) {\n\t\tfrappe._original_title = title;\n\t\tif(frappe._title_prefix) {\n\t\t\ttitle = frappe._title_prefix + \" \" + title.replace(/<[^>]*>/g, \"\");\n\t\t}\n\t\tdocument.title = title;\n\t},\n\n\tset_title_prefix: function(prefix) {\n\t\tfrappe._title_prefix = prefix;\n\n\t\t// reset the original title\n\t\tfrappe.utils.set_title(frappe._original_title);\n\t},\n\n\tis_image_file: function(filename) {\n\t\tif (!filename) return false;\n\t\t// url can have query params\n\t\tfilename = filename.split('?')[0];\n\t\treturn (/\\.(gif|jpg|jpeg|tiff|png|svg)$/i).test(filename);\n\t},\n\n\tplay_sound: function(name) {\n\t\ttry {\n\t\t\tif (frappe.boot.user.mute_sounds) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar audio = $(\"#sound-\" + name)[0];\n\t\t\taudio.volume = audio.getAttribute(\"volume\");\n\t\t\taudio.play();\n\n\t\t} catch(e) {\n\t\t\tconsole.log(\"Cannot play sound\", name, e);\n\t\t\t// pass\n\t\t}\n\n\t},\n\tsplit_emails: function(txt) {\n\t\tvar email_list = [];\n\n\t\tif (!txt) {\n\t\t\treturn email_list;\n\t\t}\n\n\t\t// emails can be separated by comma or newline\n\t\ttxt.split(/[,\\n](?=(?:[^\"]|\"[^\"]*\")*$)/g).forEach(function(email) {\n\t\t\temail = email.trim();\n\t\t\tif (email) {\n\t\t\t\temail_list.push(email);\n\t\t\t}\n\t\t});\n\n\t\treturn email_list;\n\t},\n\tsupportsES6: function() {\n\t\ttry {\n\t\t\tnew Function(\"(a = 0) => a\");\n\t\t\treturn true;\n\t\t}\n\t\tcatch (err) {\n\t\t\treturn false;\n\t\t}\n\t}(),\n\tthrottle: function (func, wait, options) {\n\t\tvar context, args, result;\n\t\tvar timeout = null;\n\t\tvar previous = 0;\n\t\tif (!options) options = {};\n\n\t\tlet later = function () {\n\t\t\tprevious = options.leading === false ? 0 : Date.now();\n\t\t\ttimeout = null;\n\t\t\tresult = func.apply(context, args);\n\t\t\tif (!timeout) context = args = null;\n\t\t};\n\n\t\treturn function () {\n\t\t\tvar now = Date.now();\n\t\t\tif (!previous && options.leading === false) previous = now;\n\t\t\tlet remaining = wait - (now - previous);\n\t\t\tcontext = this;\n\t\t\targs = arguments;\n\t\t\tif (remaining <= 0 || remaining > wait) {\n\t\t\t\tif (timeout) {\n\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\ttimeout = null;\n\t\t\t\t}\n\t\t\t\tprevious = now;\n\t\t\t\tresult = func.apply(context, args);\n\t\t\t\tif (!timeout) context = args = null;\n\t\t\t} else if (!timeout && options.trailing !== false) {\n\t\t\t\ttimeout = setTimeout(later, remaining);\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t},\n\tdebounce: function(func, wait, immediate) {\n\t\tvar timeout;\n\t\treturn function() {\n\t\t\tvar context = this, args = arguments;\n\t\t\tvar later = function() {\n\t\t\t\ttimeout = null;\n\t\t\t\tif (!immediate) func.apply(context, args);\n\t\t\t};\n\t\t\tvar callNow = immediate && !timeout;\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t\tif (callNow) func.apply(context, args);\n\t\t};\n\t},\n\tget_form_link: function(doctype, name, html = false) {\n\t\tconst route = ['#Form', doctype, name].join('/');\n\t\tif (html) {\n\t\t\treturn `<a href=\"${route}\">${name}</a>`;\n\t\t}\n\t\treturn route;\n\t},\n\tget_route_label(route_str) {\n\t\tlet route = route_str.split('/');\n\n\t\tif (route[2] === 'Report' || route[0] === 'query-report') {\n\t\t\treturn __('{0} Report', [route[3] || route[1]]);\n\t\t}\n\t\tif (route[0] === 'List') {\n\t\t\treturn __('{0} List', [route[1]]);\n\t\t}\n\t\tif (route[0] === 'modules') {\n\t\t\treturn __('{0} Modules', [route[1]]);\n\t\t}\n\t\tif (route[0] === 'dashboard') {\n\t\t\treturn __('{0} Dashboard', [route[1]]);\n\t\t}\n\t\treturn __(frappe.utils.to_title_case(route[0], true));\n\t},\n\treport_column_total: function(values, column, type) {\n\t\tif (column.column.fieldtype == \"Percent\" || type === \"mean\") {\n\t\t\treturn values.reduce((a, b) => a + flt(b)) / values.length;\n\t\t} else if (column.column.fieldtype == \"Int\") {\n\t\t\treturn values.reduce((a, b) => a + cint(b));\n\t\t} else if (frappe.model.is_numeric_field(column.column.fieldtype)) {\n\t\t\treturn values.reduce((a, b) => a + flt(b));\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tdeep_equal(a, b) {\n\t\treturn deep_equal(a, b);\n\t},\n\n\tfile_name_ellipsis(filename, length) {\n\t\tlet first_part_length = length * 2 / 3;\n\t\tlet last_part_length = length - first_part_length;\n\t\tlet parts = filename.split('.');\n\t\tlet extn = parts.pop();\n\t\tlet name = parts.join('');\n\t\tlet first_part = name.slice(0, first_part_length);\n\t\tlet last_part = name.slice(-last_part_length);\n\t\tif (name.length > length) {\n\t\t\treturn `${first_part}...${last_part}.${extn}`;\n\t\t} else {\n\t\t\treturn filename;\n\t\t}\n\t},\n\tget_decoded_string(dataURI) {\n\t\t// decodes base64 to string\n\t\tlet parts = dataURI.split(',');\n\t\tconst encoded_data = parts[1];\n\t\treturn decodeURIComponent(escape(atob(encoded_data)));\n\t}\n});\n\n// Array de duplicate\nif (!Array.prototype.uniqBy) {\n\tObject.defineProperty(Array.prototype, 'uniqBy', {\n\t\tvalue: function (key) {\n\t\t\tvar seen = {};\n\t\t\treturn this.filter(function (item) {\n\t\t\t\tvar k = key(item);\n\t\t\t\treturn seen.hasOwnProperty(k) ? false : (seen[k] = true);\n\t\t\t});\n\t\t}\n\t});\n\tObject.defineProperty(Array.prototype, 'move', {\n\t\tvalue: function(from, to) {\n\t\t\tthis.splice(to, 0, this.splice(from, 1)[0]);\n\t\t}\n\t});\n}\n\n","frappe.provide('frappe.utils');\n/**\n * Simple EventEmitterMixin which uses jQuery's event system\n */\nconst EventEmitterMixin = {\n\tinit() {\n\t\tthis.jq = jQuery({});\n\t},\n\n\ttrigger(evt, data) {\n\t\t!this.jq && this.init();\n\t\tthis.jq.trigger(evt, data);\n\t},\n\n\tonce(evt, handler) {\n\t\t!this.jq && this.init();\n\t\tthis.jq.one(evt, (e, data) => handler(data));\n\t},\n\n\ton(evt, handler) {\n\t\t!this.jq && this.init();\n\t\tthis.jq.bind(evt, (e, data) => handler(data));\n\t},\n\n\toff(evt, handler) {\n\t\t!this.jq && this.init();\n\t\tthis.jq.unbind(evt, (e, data) => handler(data));\n\t}\n}\n\nfrappe.utils.make_event_emitter = function(object) {\n\tObject.assign(object, EventEmitterMixin);\n\treturn object;\n};\n\nexport default EventEmitterMixin;\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n// route urls to their virtual pages\n\n// re-route map (for rename)\nfrappe.provide('frappe.views');\nfrappe.re_route = {\"#login\": \"\"};\nfrappe.route_titles = {};\nfrappe.route_flags = {};\nfrappe.route_history = [];\nfrappe.view_factory = {};\nfrappe.view_factories = [];\nfrappe.route_options = null;\n\nfrappe.route = function() {\n\n\t// Application is not yet initiated\n\tif (!frappe.app) return;\n\n\tif(frappe.re_route[window.location.hash] !== undefined) {\n\t\t// after saving a doc, for example,\n\t\t// \"New DocType 1\" and the renamed \"TestDocType\", both exist in history\n\t\t// now if we try to go back,\n\t\t// it doesn't allow us to go back to the one prior to \"New DocType 1\"\n\t\t// Hence if this check is true, instead of changing location hash,\n\t\t// we just do a back to go to the doc previous to the \"New DocType 1\"\n\t\tvar re_route_val = frappe.get_route_str(frappe.re_route[window.location.hash]);\n\t\tvar cur_route_val = frappe.get_route_str(frappe._cur_route);\n\t\tif (decodeURIComponent(re_route_val) === decodeURIComponent(cur_route_val)) {\n\t\t\twindow.history.back();\n\t\t\treturn;\n\t\t} else {\n\t\t\twindow.location.hash = frappe.re_route[window.location.hash];\n\t\t}\n\t}\n\n\tfrappe._cur_route = window.location.hash;\n\n\tvar route = frappe.get_route();\n\tif (route === false) {\n\t\treturn;\n\t}\n\n\tfrappe.route_history.push(route);\n\n\tif(route[0]) {\n\t\tconst title_cased_route = frappe.utils.to_title_case(route[0]);\n\n\t\tif(route[1] && frappe.views[title_cased_route + \"Factory\"]) {\n\t\t\t// has a view generator, generate!\n\t\t\tif(!frappe.view_factory[title_cased_route]) {\n\t\t\t\tfrappe.view_factory[title_cased_route] = new frappe.views[title_cased_route + \"Factory\"]();\n\t\t\t}\n\n\t\t\tfrappe.view_factory[title_cased_route].show();\n\t\t} else {\n\t\t\t// show page\n\t\t\tconst route_name = frappe.utils.xss_sanitise(route[0]);\n\t\t\tif (frappe.views.pageview) {\n\t\t\t\tfrappe.views.pageview.show(route_name);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// Show desk\n\t\tfrappe.views.pageview.show('');\n\t}\n\n\n\tif(frappe.route_titles[window.location.hash]) {\n\t\tfrappe.utils.set_title(frappe.route_titles[window.location.hash]);\n\t} else {\n\t\tsetTimeout(function() {\n\t\t\tfrappe.route_titles[frappe.get_route_str()] = frappe._original_title || document.title;\n\t\t}, 1000);\n\t}\n\n\tif(window.mixpanel) {\n\t\twindow.mixpanel.track(route.slice(0, 2).join(' '));\n\t}\n}\n\nfrappe.get_route = function(route) {\n\t// for app\n\troute = frappe.get_raw_route_str(route).split('/');\n\troute = $.map(route, frappe._decode_str);\n\tvar parts = null;\n\tvar doc_name = route[route.length - 1];\n\t// if the last part contains ? then check if it is valid query string\n\tif(doc_name.indexOf(\"?\") < doc_name.indexOf(\"=\")){\n\t\tparts = doc_name.split(\"?\");\n\t\troute[route.length - 1] = parts[0];\n\t} else {\n\t\tparts = doc_name;\n\t}\n\tif (parts.length > 1) {\n\t\tvar query_params = frappe.utils.get_query_params(parts[1]);\n\t\tfrappe.route_options = $.extend(frappe.route_options || {}, query_params);\n\t}\n\n\t// backward compatibility\n\tif (route && route[0]==='Module') {\n\t\tfrappe.set_route('modules', route[1]);\n\t\treturn false;\n\t}\n\n\treturn route;\n}\n\nfrappe.get_prev_route = function() {\n\tif(frappe.route_history && frappe.route_history.length > 1) {\n\t\treturn frappe.route_history[frappe.route_history.length - 2];\n\t} else {\n\t\treturn [];\n\t}\n}\n\nfrappe._decode_str = function(r) {\n\ttry {\n\t\treturn decodeURIComponent(r);\n\t} catch(e) {\n\t\tif (e instanceof URIError) {\n\t\t\treturn r;\n\t\t} else {\n\t\t\tthrow e;\n\t\t}\n\t}\n}\n\nfrappe.get_raw_route_str = function(route) {\n\tif(!route)\n\t\troute = window.location.hash;\n\n\tif(route.substr(0,1)=='#') route = route.substr(1);\n\tif(route.substr(0,1)=='!') route = route.substr(1);\n\n\treturn route;\n}\n\nfrappe.get_route_str = function(route) {\n\tvar rawRoute = frappe.get_raw_route_str(route);\n\troute = $.map(rawRoute.split('/'), frappe._decode_str).join('/');\n\n\treturn route;\n}\n\nfrappe.set_route = function() {\n\treturn new Promise(resolve => {\n\t\tvar params = arguments;\n\t\tif(params.length===1 && $.isArray(params[0])) {\n\t\t\tparams = params[0];\n\t\t}\n\t\tvar route = $.map(params, function(a) {\n\t\t\tif($.isPlainObject(a)) {\n\t\t\t\tfrappe.route_options = a;\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\ta = String(a);\n\t\t\t\tif (a && a.match(/[%'\"]/)) {\n\t\t\t\t\t// if special chars, then encode\n\t\t\t\t\ta = encodeURIComponent(a);\n\t\t\t\t}\n\t\t\t\treturn a;\n\t\t\t}\n\t\t}).join('/');\n\n\t\twindow.location.hash = route;\n\n\t\t// Set favicon (app.js)\n\t\tfrappe.provide('frappe.app');\n\t\tfrappe.app.set_favicon && frappe.app.set_favicon();\n\t\tsetTimeout(() => {\n\t\t\tfrappe.after_ajax && frappe.after_ajax(() => {\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}, 100);\n\t});\n}\n\nfrappe.set_re_route = function() {\n\tvar tmp = window.location.hash;\n\tfrappe.set_route.apply(null, arguments);\n\tfrappe.re_route[tmp] = window.location.hash;\n};\n\n\nfrappe._cur_route = null;\n\n$(window).on('hashchange', function() {\n\t// save the title\n\tfrappe.route_titles[frappe._cur_route] = frappe._original_title || document.title;\n\n\tif(window.location.hash==frappe._cur_route)\n\t\treturn;\n\n\t// hide open dialog\n\tif(window.cur_dialog && cur_dialog.hide_on_page_refresh) {\n\t\tcur_dialog.hide();\n\t}\n\n\tfrappe.route();\n\n\tfrappe.route.trigger('change');\n});\n\nfrappe.utils.make_event_emitter(frappe.route);\n","frappe.provide('frappe.route');\nfrappe.route_history_queue = [];\nconst routes_to_skip = ['Form', 'social', 'setup-wizard'];\n\nconst save_routes = frappe.utils.debounce(() => {\n\tconst routes = frappe.route_history_queue;\n\tfrappe.route_history_queue = [];\n\tfrappe.xcall('frappe.deferred_insert.deferred_insert', {\n\t\t'doctype': 'Route History',\n\t\t'records': routes\n\t}).catch(() => {\n\t\tfrappe.route_history_queue.concat(routes);\n\t});\n}, 10000);\n\nfrappe.route.on('change', () => {\n\tconst route = frappe.get_route();\n\tif (is_route_useful(route)) {\n\t\tfrappe.route_history_queue.push({\n\t\t\t'user': frappe.session.user,\n\t\t\t'creation': frappe.datetime.now_datetime(),\n\t\t\t'route': frappe.get_route_str()\n\t\t});\n\n\t\tsave_routes();\n\t}\n});\n\nfunction is_route_useful(route) {\n\tif (!route[1]) {\n\t\treturn false;\n\t} else if ((route[0] === 'List' && !route[2]) || routes_to_skip.includes(route[0])) {\n\n\t\treturn false;\n\t} else {\n\t\treturn true;\n\t}\n}","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.utils.full_name = function(fn, ln) {\n\treturn fn + (ln ? ' ' : '') + (ln ? ln : '')\n}\n\nfunction fmt_money(v, format){\n\t// deprecated!\n\t// for backward compatibility\n\treturn format_currency(v, format);\n}\n\n\n// to title case\nfunction toTitle(str){\n\tvar word_in = str.split(\" \");\n\tvar word_out = [];\n\n\tfor(var w in word_in){\n\t\tword_out[w] = word_in[w].charAt(0).toUpperCase() + word_in[w].slice(1);\n\t}\n\n\treturn word_out.join(\" \");\n}\n\nfunction is_null(v) {\n\tif(v===null || v===undefined || cstr(v).trim()===\"\") return true;\n}\n\nfunction set_value_in(ele, v, ftype, fopt, doc) {\n\t$(ele).html(frappe.format(v, {fieldtype:ftype, options:fopt}, null, doc));\n\treturn;\n}\nvar $s = set_value_in; // used in print formats\n\nfunction copy_dict(d) {\n\tvar n = {};\n\tfor(var k in d) n[k] = d[k];\n\treturn n;\n}\n\nfunction validate_email(txt) {\n\treturn frappe.utils.validate_type(txt, \"email\");\n}\nfunction validate_spl_chars(txt) {\n\treturn frappe.utils.validate_type(txt, \"alphanum\")\n}\nfunction cstr(s) {\n\tif(s==null)return '';\n\treturn s+'';\n}\nfunction nth(number) {\n\tnumber = cint(number);\n\tvar s = 'th';\n\tif((number+'').substr(-1)=='1') s = 'st';\n\tif((number+'').substr(-1)=='2') s = 'nd';\n\tif((number+'').substr(-1)=='3') s = 'rd';\n\treturn number+s;\n}\n\nfunction esc_quotes(s) {\n\tif(s==null)s='';\n\treturn s.replace(/'/, \"\\'\");\n}\n\nvar crop = function(s, len) {\n\tif(s.length>len)\n\t\treturn s.substr(0, len-3) + '...';\n\telse\n\t\treturn s;\n}\n\n\nfunction has_words(list, item) {\n\tif(!item) return true;\n\tif(!list) return false;\n\tfor(var i=0, j=list.length; i<j; i++) {\n\t\tif(item.indexOf(list[i])!=-1)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction has_common(list1, list2) {\n\tif(!list1 || !list2) return false;\n\tfor(var i=0, j=list1.length; i<j; i++) {\n\t\tif(in_list(list2, list1[i]))return true;\n\t}\n\treturn false;\n}\n\nfunction add_lists(l1, l2) {\n\treturn [].concat(l1).concat(l2);\n}\n\nfunction docstring(obj)  {\n\treturn JSON.stringify(obj);\n}\n\nfunction remove_from_list(list, val) {\n\tif(list.indexOf(val)!==-1) {\n\t\tlist.splice(list.indexOf(val), 1);\n\t}\n\treturn list\n}\n\nObject.assign(window, {\n\tfmt_money,\n\ttoTitle,\n\tis_null,\n\tset_value_in,\n\tcopy_dict,\n\tvalidate_email,\n\tvalidate_spl_chars,\n\tcstr,\n\tnth,\n\tesc_quotes,\n\thas_words,\n\thas_common,\n\tadd_lists,\n\tdocstring,\n\tremove_from_list,\n});","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n/* eslint-disable no-console */\n\nfunction $c(command, args, callback, error, no_spinner, freeze_msg, btn) {\n\tconsole.warn(\"This function '$c' has been deprecated and will be removed soon.\");\n\treturn frappe.request.call({\n\t\ttype: \"POST\",\n\t\targs: $.extend(args, {cmd: command}),\n\t\tsuccess: callback,\n\t\terror: error,\n\t\tbtn: btn,\n\t\tfreeze: freeze_msg,\n\t\tshow_spinner: !no_spinner\n\t});\n}\n\n// For calling an object\nfunction $c_obj(doc, method, arg, callback, no_spinner, freeze_msg, btn) {\n\tconsole.warn(\"This function '$c_obj' has been deprecated and will be removed soon.\");\n\n\tif(arg && typeof arg!='string') arg = JSON.stringify(arg);\n\n\tvar args = {\n\t\tcmd:'runserverobj',\n\t\targs: arg,\n\t\tmethod: method\n\t};\n\n\tif(typeof doc=='string') {\n\t\targs.doctype = doc;\n\t} else {\n\t\targs.docs = doc;\n\t}\n\n\treturn frappe.request.call({\n\t\ttype: \"POST\",\n\t\targs: args,\n\t\tsuccess: callback,\n\t\tbtn: btn,\n\t\tfreeze: freeze_msg,\n\t\tshow_spinner: !no_spinner\n\t});\n}\n\n// For calling an for output as csv\nfunction $c_obj_csv(doc, method, arg) {\n\tconsole.warn(\"This function '$c_obj_csv' has been deprecated and will be removed soon.\");\n\t// single\n\n\tvar args = {};\n\targs.cmd = 'runserverobj';\n\targs.as_csv = 1;\n\targs.method = method;\n\targs.arg = arg;\n\n\tif(doc.substr)\n\t\targs.doctype = doc;\n\telse\n\t\targs.docs = doc;\n\n\t// open\n\topen_url_post(frappe.request.url, args);\n}\n\nwindow.open_url_post = function open_url_post(URL, PARAMS, new_window) {\n\tif (window.cordova) {\n\t\tlet url = URL + 'api/method/' + PARAMS.cmd + frappe.utils.make_query_string(PARAMS, false);\n\t\twindow.location.href = url;\n\t} else {\n\t\t// call a url as POST\n\t\t_open_url_post(URL, PARAMS, new_window);\n\t}\n};\n\nfunction _open_url_post(URL, PARAMS, new_window) {\n\tvar temp=document.createElement(\"form\");\n\ttemp.action=URL;\n\ttemp.method=\"POST\";\n\ttemp.style.display=\"none\";\n\tif(new_window){\n\t\ttemp.target = '_blank';\n\t}\n\tPARAMS[\"csrf_token\"] = frappe.csrf_token;\n\tfor(var x in PARAMS) {\n\t\tvar opt=document.createElement(\"textarea\");\n\t\topt.name=x;\n\t\tvar val = PARAMS[x];\n\t\tif(typeof val!='string')\n\t\t\tval = JSON.stringify(val);\n\t\topt.value=val;\n\t\ttemp.appendChild(opt);\n\t}\n\tdocument.body.appendChild(temp);\n\ttemp.submit();\n\treturn temp;\n}\n\nObject.assign(window, {\n\t$c, $c_obj, $c_obj_csv\n});","// moment strings for translation\n\nfunction prettyDate(time, mini) {\n\tif (!time) {\n\t\ttime = new Date();\n\t}\n\tif ('moment' in window) { // use frappe.ImportError ;)\n\t\tlet ret;\n\t\tif (frappe.sys_defaults && frappe.sys_defaults.time_zone) {\n\t\t\tret = moment.tz(time, frappe.sys_defaults.time_zone).locale(frappe.boot.lang).fromNow(mini);\n\t\t} else {\n\t\t\tret = moment(time).locale(frappe.boot.lang).fromNow(mini);\n\t\t}\n\t\tif (mini) {\n\t\t\tif (ret === moment().locale(frappe.boot.lang).fromNow(mini)) {\n\t\t\t\tret = __(\"now\");\n\t\t\t} else {\n\t\t\t\tvar parts = ret.split(\" \");\n\t\t\t\tif (parts.length > 1) {\n\t\t\t\t\tif (parts[0] === \"a\" || parts[0] === \"an\") {\n\t\t\t\t\t\tparts[0] = 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (parts[1].substr(0, 2) === \"mo\") {\n\t\t\t\t\t\tret = parts[0] + \" M\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tret = parts[0] + \" \" + parts[1].substr(0, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tret = ret.substr(0, 5);\n\t\t}\n\t\treturn ret;\n\t} else {\n\t\tif (!time) return '';\n\t\tvar date = time;\n\t\tif (typeof (time) == \"string\")\n\t\t\tdate = new Date((time || \"\").replace(/-/g, \"/\").replace(/[TZ]/g, \" \").replace(/\\.[0-9]*/, \"\"));\n\n\t\tvar diff = (((new Date()).getTime() - date.getTime()) / 1000),\n\t\t\tday_diff = Math.floor(diff / 86400);\n\n\t\tif (isNaN(day_diff) || day_diff < 0)\n\t\t\treturn '';\n\n\t\tvar when = day_diff == 0 && (\n\t\t\tdiff < 60 && __(\"just now\") ||\n\t\t\tdiff < 120 && __(\"1 minute ago\") ||\n\t\t\tdiff < 3600 && __(\"{0} minutes ago\", [Math.floor(diff / 60)]) ||\n\t\t\tdiff < 7200 && __(\"1 hour ago\") ||\n\t\t\tdiff < 86400 && (\"{0} hours ago\", [Math.floor(diff / 3600)])) ||\n\t\t\tday_diff == 1 && __(\"Yesterday\") ||\n\t\t\tday_diff < 7 && __(\"{0} days ago\", day_diff) ||\n\t\t\tday_diff < 31 && __(\"{0} weeks ago\", [Math.ceil(day_diff / 7)]) ||\n\t\t\tday_diff < 365 && __(\"{0} months ago\", [Math.ceil(day_diff / 30)]) ||\n\t\t\t__(\"> {0} year(s) ago\", [Math.floor(day_diff / 365)]);\n\n\t\treturn when;\n\t}\n}\n\n\nfrappe.provide(\"frappe.datetime\");\nwindow.comment_when = function(datetime, mini) {\n\tvar timestamp = frappe.datetime.str_to_user ?\n\t\tfrappe.datetime.str_to_user(datetime) : datetime;\n\treturn '<span class=\"frappe-timestamp '\n\t\t+ (mini ? \" mini\" : \"\") + '\" data-timestamp=\"' + datetime\n\t\t+ '\" title=\"' + timestamp + '\">'\n\t\t+ prettyDate(datetime, mini) + '</span>';\n};\nfrappe.datetime.comment_when = comment_when;\n\nfrappe.datetime.refresh_when = function() {\n\tif (jQuery) {\n\t\t$(\".frappe-timestamp\").each(function() {\n\t\t\t$(this).html(prettyDate($(this).attr(\"data-timestamp\"), $(this).hasClass(\"mini\")));\n\t\t});\n\t}\n};\n\nsetInterval(function() {\n\tfrappe.datetime.refresh_when();\n}, 60000); // refresh every minute\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.defaults = {\n\tget_user_default: function(key) {\n\t\tvar defaults = frappe.boot.user.defaults;\n\t\tvar d = defaults[key];\n\t\tif(!d && frappe.defaults.is_a_user_permission_key(key))\n\t\t\td = defaults[frappe.model.scrub(key)];\n\t\tif($.isArray(d)) d = d[0];\n\n\t\tif(!frappe.defaults.in_user_permission(key, d)) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn d;\n\t},\n\tget_user_defaults: function(key) {\n\t\tvar defaults = frappe.boot.user.defaults;\n\t\tvar d = defaults[key];\n\n\t\tif (frappe.defaults.is_a_user_permission_key(key)) {\n\t\t\tif (d && $.isArray(d) && d.length===1) {\n\t\t\t\t// Use User Permission value when only when it has a single value\n\t\t\t\td = d[0];\n\t\t\t} else {\n\t\t\t\td = defaults[key] || defaults[frappe.model.scrub(key)];\n\t\t\t}\n\t\t}\n\t\tif(!$.isArray(d)) d = [d];\n\n\t\t// filter out values which are not permitted to the user\n\t\td.filter(item => {\n\t\t\tif(frappe.defaults.in_user_permission(key, item)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t});\n\t\treturn d;\n\t},\n\tget_global_default: function(key) {\n\t\tvar d = frappe.sys_defaults[key];\n\t\tif($.isArray(d)) d = d[0];\n\t\treturn d;\n\t},\n\tget_global_defaults: function(key) {\n\t\tvar d = frappe.sys_defaults[key];\n\t\tif(!$.isArray(d)) d = [d];\n\t\treturn d;\n\t},\n\tset_default: function(key, value, callback) {\n\t\tif(typeof value!==\"string\")\n\t\t\tvalue = JSON.stringify(value);\n\n\t\tfrappe.boot.user.defaults[key] = value;\n\t\treturn frappe.call({\n\t\t\tmethod: \"frappe.client.set_default\",\n\t\t\targs: {\n\t\t\t\tkey: key,\n\t\t\t\tvalue: value\n\t\t\t},\n\t\t\tcallback: callback || function(r) {}\n\t\t});\n\t},\n\tset_user_default_local: function(key, value) {\n\t\tfrappe.boot.user.defaults[key] = value;\n\t},\n\tget_default: function(key) {\n\t\tvar defaults = frappe.boot.user.defaults;\n\t\tvar value = defaults[key];\n\t\tif (frappe.defaults.is_a_user_permission_key(key)) {\n\t\t\tif (value && $.isArray(value) && value.length===1) {\n\t\t\t\tvalue = value[0];\n\t\t\t} else {\n\t\t\t\tvalue = defaults[frappe.model.scrub(key)];\n\t\t\t}\n\t\t}\n\n\t\tif(!frappe.defaults.in_user_permission(key, value)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(value) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(value)\n\t\t\t} catch(e) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t},\n\n\tis_a_user_permission_key: function(key) {\n\t\treturn key.indexOf(\":\")===-1 && key !== frappe.model.scrub(key);\n\t},\n\n\tin_user_permission: function(key, value) {\n\t\tlet user_permission = this.get_user_permissions()[frappe.model.unscrub(key)];\n\n\t\tif (user_permission && user_permission.length) {\n\n\t\t\tlet doc_found = user_permission.some(perm => {\n\t\t\t\treturn perm.doc === value;\n\t\t\t});\n\t\t\treturn doc_found;\n\n\t\t} else {\n\t\t\t// there is no user permission for this doctype\n\t\t\t// so we can allow this doc i.e., value\n\t\t\treturn true;\n\t\t}\n\n\t},\n\n\tget_user_permissions: function() {\n\t\treturn this._user_permissions || {};\n\t},\n\n\tupdate_user_permissions: function() {\n\t\tconst method = 'frappe.core.doctype.user_permission.user_permission.get_user_permissions';\n\t\tfrappe.call(method).then(r => {\n\t\t\tif (r.message) {\n\t\t\t\tthis._user_permissions = Object.assign({}, r.message);\n\t\t\t}\n\t\t});\n\t}\n};\n","frappe.RoleEditor = Class.extend({\n\tinit: function(wrapper, frm, disable) {\n\t\tvar me = this;\n\t\tthis.frm = frm;\n\t\tthis.wrapper = wrapper;\n\t\tthis.disable = disable;\n\t\t$(wrapper).html('<div class=\"help\">' + __(\"Loading\") + '...</div>');\n\t\tfrappe.call({\n\t\t\tmethod: 'frappe.core.doctype.user.user.get_all_roles',\n\t\t\tcallback: function(r) {\n\t\t\t\tme.roles = r.message;\n\t\t\t\tme.show_roles();\n\n\t\t\t\t// refresh call could've already happened\n\t\t\t\t// when all role checkboxes weren't created\n\t\t\t\tif(me.frm.doc) {\n\t\t\t\t\tme.frm.roles_editor.show();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tshow_roles: function() {\n\t\tvar me = this;\n\t\t$(this.wrapper).empty();\n\t\tif(me.frm.doctype != 'User') {\n\t\t\tvar role_toolbar = $('<p><button class=\"btn btn-default btn-add btn-sm\" style=\"margin-right: 5px;\"></button>\\\n\t\t\t\t<button class=\"btn btn-sm btn-default btn-remove\"></button></p>').appendTo($(this.wrapper));\n\n\t\t\trole_toolbar.find(\".btn-add\")\n\t\t\t\t.html(__('Add all roles'))\n\t\t\t\t.on(\"click\", function() {\n\t\t\t\t\t$(me.wrapper).find('input[type=\"checkbox\"]').each(function(i, check) {\n\t\t\t\t\t\tif (!$(check).is(\":checked\")) {\n\t\t\t\t\t\t\tcheck.checked = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\trole_toolbar.find(\".btn-remove\")\n\t\t\t\t.html(__('Clear all roles'))\n\t\t\t\t.on(\"click\", function() {\n\t\t\t\t\t$(me.wrapper).find('input[type=\"checkbox\"]').each(function(i, check) {\n\t\t\t\t\t\tif($(check).is(\":checked\")) {\n\t\t\t\t\t\t\tcheck.checked = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\t$.each(this.roles, function(i, role) {\n\t\t\t$(me.wrapper).append(repl('<div class=\"user-role\" \\\n\t\t\t\tdata-user-role=\"%(role_value)s\">\\\n\t\t\t\t<input type=\"checkbox\" style=\"margin-top:0px;\" class=\"box\"> \\\n\t\t\t\t<a href=\"#\" class=\"grey role\">%(role_display)s</a>\\\n\t\t\t</div>', {role_value: role,role_display:__(role)}));\n\t\t});\n\n\t\t$(this.wrapper).find('input[type=\"checkbox\"]').change(function() {\n\t\t\tme.set_roles_in_table();\n\t\t\tme.frm.dirty();\n\t\t});\n\t\t$(this.wrapper).find('.user-role a').click(function() {\n\t\t\tme.show_permissions($(this).parent().attr('data-user-role'));\n\t\t\treturn false;\n\t\t});\n\t},\n\tshow: function() {\n\t\tvar me = this;\n\t\t$('.box').attr('disabled', this.disable);\n\n\t\t// uncheck all roles\n\t\t$(this.wrapper).find('input[type=\"checkbox\"]')\n\t\t\t.each(function(i, checkbox) {\n\t\t\t\tcheckbox.checked = false;\n\t\t\t});\n\n\t\t// set user roles as checked\n\t\t$.each((me.frm.doc.roles || []), function(i, user_role) {\n\t\t\tvar checkbox = $(me.wrapper)\n\t\t\t\t.find('[data-user-role=\"'+user_role.role+'\"] input[type=\"checkbox\"]').get(0);\n\t\t\tif(checkbox) checkbox.checked = true;\n\t\t});\n\n\t\tthis.set_enable_disable();\n\t},\n\tset_enable_disable: function() {\n\t\t$('.box').attr('disabled', this.disable ? true : false);\n\t},\n\tset_roles_in_table: function() {\n\t\tvar opts = this.get_roles();\n\t\tvar existing_roles_map = {};\n\t\tvar existing_roles_list = [];\n\t\tvar me = this;\n\n\t\t$.each((me.frm.doc.roles || []), function(i, user_role) {\n\t\t\texisting_roles_map[user_role.role] = user_role.name;\n\t\t\texisting_roles_list.push(user_role.role);\n\t\t});\n\n\t\t// remove unchecked roles\n\t\t$.each(opts.unchecked_roles, function(i, role) {\n\t\t\tif(existing_roles_list.indexOf(role)!=-1) {\n\t\t\t\tfrappe.model.clear_doc(\"Has Role\", existing_roles_map[role]);\n\t\t\t}\n\t\t});\n\n\t\t// add new roles that are checked\n\t\t$.each(opts.checked_roles, function(i, role) {\n\t\t\tif(existing_roles_list.indexOf(role)==-1) {\n\t\t\t\tvar user_role = frappe.model.add_child(me.frm.doc, \"Has Role\", \"roles\");\n\t\t\t\tuser_role.role = role;\n\t\t\t}\n\t\t});\n\n\t\trefresh_field(\"roles\");\n\t},\n\tget_roles: function() {\n\t\tvar checked_roles = [];\n\t\tvar unchecked_roles = [];\n\t\t$(this.wrapper).find('[data-user-role]').each(function() {\n\t\t\tif($(this).find('input[type=\"checkbox\"]:checked').length) {\n\t\t\t\tchecked_roles.push($(this).attr('data-user-role'));\n\t\t\t} else {\n\t\t\t\tunchecked_roles.push($(this).attr('data-user-role'));\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tchecked_roles: checked_roles,\n\t\t\tunchecked_roles: unchecked_roles\n\t\t};\n\t},\n\tshow_permissions: function(role) {\n\t\t// show permissions for a role\n\t\tvar me = this;\n\t\tif(!this.perm_dialog)\n\t\t\tthis.make_perm_dialog();\n\t\t$(this.perm_dialog.body).empty();\n\t\treturn frappe.call({\n\t\t\tmethod: 'frappe.core.doctype.user.user.get_perm_info',\n\t\t\targs: {role: role},\n\t\t\tcallback: function(r) {\n\t\t\t\tvar $body = $(me.perm_dialog.body);\n\t\t\t\t// TODO fix the overflow issue and also display perms like report, import, etc.\n\n\t\t\t\t$body.append('<table class=\"user-perm\"><thead><tr>'\n\t\t\t\t\t+ '<th style=\"text-align: left\">' + __('Document Type') + '</th>'\n\t\t\t\t\t+ '<th>' + __('Level') + '</th>'\n\t\t\t\t\t+ '<th>' + __('Read') + '</th>'\n\t\t\t\t\t+ '<th>' + __('Write') + '</th>'\n\t\t\t\t\t+ '<th>' + __('Create') + '</th>'\n\t\t\t\t\t+ '<th>' + __('Delete') + '</th>'\n\t\t\t\t\t+ '<th>' + __('Submit') + '</th>'\n\t\t\t\t\t+ '<th>' + __('Cancel') + '</th>'\n\t\t\t\t\t+ '<th>' + __('Amend') + '</th>'\n\t\t\t\t\t+ '<th>' + __('Set User Permissions') + '</th>'\n\t\t\t\t\t+ '</tr></thead><tbody></tbody></table>');\n\n\t\t\t\tfor(var i=0, l=r.message.length; i<l; i++) {\n\t\t\t\t\tvar perm = r.message[i];\n\n\t\t\t\t\t// if permission -> icon\n\t\t\t\t\tfor(var key in perm) {\n\t\t\t\t\t\tif(key!='parent' && key!='permlevel') {\n\t\t\t\t\t\t\tif(perm[key]) {\n\t\t\t\t\t\t\t\tperm[key] = '<i class=\"fa fa-check\"></i>';\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tperm[key] = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$body.find('tbody').append(repl('<tr>\\\n\t\t\t\t\t\t<td style=\"text-align: left\">%(parent)s</td>\\\n\t\t\t\t\t\t<td>%(permlevel)s</td>\\\n\t\t\t\t\t\t<td>%(read)s</td>\\\n\t\t\t\t\t\t<td>%(write)s</td>\\\n\t\t\t\t\t\t<td>%(create)s</td>\\\n\t\t\t\t\t\t<td>%(delete)s</td>\\\n\t\t\t\t\t\t<td>%(submit)s</td>\\\n\t\t\t\t\t\t<td>%(cancel)s</td>\\\n\t\t\t\t\t\t<td>%(amend)s</td>\\\n\t\t\t\t\t\t<td>%(set_user_permissions)s</td>\\\n\t\t\t\t\t\t</tr>', perm));\n\t\t\t\t}\n\t\t\t\tme.perm_dialog.set_title(role);\n\t\t\t\tme.perm_dialog.show();\n\t\t\t}\n\t\t});\n\n\t},\n\tmake_perm_dialog: function() {\n\t\tthis.perm_dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Role Permissions')\n\t\t});\n\n\t\tthis.perm_dialog.$wrapper.find('.modal-dialog').css(\"width\", \"800px\");\n\t}\n});","// Simple JavaScript Templating\n// Adapted from John Resig - http://ejohn.org/ - MIT Licensed\n\nfrappe.template = {compiled: {}, debug:{}};\nfrappe.template.compile = function(str, name) {\n\tvar key = name || str;\n\n\tif(!frappe.template.compiled[key]) {\n\t\tif(str.indexOf(\"'\")!==-1) {\n\t\t\tstr.replace(/'/g, \"\\\\'\");\n\t\t\t//console.warn(\"Warning: Single quotes (') may not work in templates\");\n\t\t}\n\n\t\t// replace jinja style tags\n\t\tstr = str.replace(/{{/g, \"{%=\").replace(/}}/g, \"%}\");\n\n\t\t// {% if not test %} --> {% if (!test) { %}\n\t\tstr = str.replace(/{%\\s?if\\s?\\s?not\\s?([^\\(][^%{]+)\\s?%}/g, \"{% if (! $1) { %}\")\n\n\t\t// {% if test %} --> {% if (test) { %}\n\t\tstr = str.replace(/{%\\s?if\\s?([^\\(][^%{]+)\\s?%}/g, \"{% if ($1) { %}\");\n\n\t\t// {% for item in list %}\n\t\t//       --> {% for (var i=0, len=list.length; i<len; i++) {  var item = list[i]; %}\n\t\tfunction replacer(match, p1, p2, offset, string) {\n\t\t\tvar i = frappe.utils.get_random(3);\n\t\t\tvar len = frappe.utils.get_random(3);\n\t\t\treturn \"{% for (var \"+i+\"=0, \"+len+\"=\"+p2+\".length; \"+i+\"<\"+len+\"; \"+i+\"++) { var \"\n\t\t\t\t+p1+\" = \"+p2+\"[\"+i+\"]; \"+p1+\"._index = \"+i+\"; %}\";\n\t\t}\n\t\tstr = str.replace(/{%\\s?for\\s([a-z._]+)\\sin\\s([a-z._]+)\\s?%}/g, replacer);\n\n\t\t// {% endfor %} --> {% } %}\n\t\tstr = str.replace(/{%\\s?endif\\s?%}/g, \"{% }; %}\");\n\n\t\t// {% else %} --> {% } else { %}\n\t\tstr = str.replace(/{%\\s?else\\s?%}/g, \"{% } else { %}\");\n\n\t\t// {% endif %} --> {% } %}\n\t\tstr = str.replace(/{%\\s?endfor\\s?%}/g, \"{% }; %}\");\n\n\t\tvar fn_str = \"var _p=[],print=function(){_p.push.apply(_p,arguments)};\" +\n\n\t        // Introduce the data as local variables using with(){}\n\t        \"with(obj){\\n_p.push('\" +\n\n\t        // Convert the template into pure JavaScript\n\t        str\n\t          .replace(/[\\r\\t\\n]/g, \" \")\n\t          .split(\"{%\").join(\"\\t\")\n\t          .replace(/((^|%})[^\\t]*)'/g, \"$1\\r\")\n\t          .replace(/\\t=(.*?)%}/g, \"',$1,'\")\n\t          .split(\"\\t\").join(\"');\\n\")\n\t          .split(\"%}\").join(\"\\n_p.push('\")\n\t          .split(\"\\r\").join(\"\\\\'\")\n\t      + \"');}return _p.join('');\";\n\n\t\t  frappe.template.debug[name] = fn_str;\n\t\ttry {\n\t\t\tfrappe.template.compiled[key] = new Function(\"obj\", fn_str);\n\t\t} catch (e) {\n\t\t\tconsole.log(\"Error in Template:\");\n\t\t\tconsole.log(fn_str);\n\t\t\tif(e.lineNumber) {\n\t\t\t\tconsole.log(\"Error in Line \"+e.lineNumber+\", Col \"+e.columnNumber+\":\");\n\t\t\t\tconsole.log(fn_str.split(\"\\n\")[e.lineNumber - 1]);\n\t\t\t}\n\t\t}\n    }\n\n\treturn frappe.template.compiled[key];\n};\nfrappe.render = function(str, data, name) {\n\treturn frappe.template.compile(str, name)(data);\n};\nfrappe.render_template = function(name, data) {\n\tif(name.indexOf(' ')!==-1) {\n\t\tvar template = name;\n\t} else {\n\t\tvar template = frappe.templates[name];\n\t}\n\tif(data===undefined) {\n\t\tdata = {};\n\t}\n\treturn frappe.render(template, data, name);\n}\nfrappe.render_grid = function(opts) {\n\t// build context\n\tif(opts.grid) {\n\t\topts.columns = opts.grid.getColumns();\n\t\tif(opts.report && opts.report.dataView) {\n\t\t\topts.data = frappe.slickgrid_tools.get_filtered_items(opts.report.dataView);\n\t\t} else if(opts.grid) {\n\t\t\topts.data = opts.grid.getData().getItems();\n\t\t}\n\t}\n\n\t// show landscape view if columns more than 10\n\tif (opts.landscape == null) {\n\t\tif(opts.columns && opts.columns.length > 10) {\n\t\t\topts.landscape = true;\n\t\t} else {\n\t\t\topts.landscape = false;\n\t\t}\n\t}\n\n\t// render content\n\tif(!opts.content) {\n\t\topts.content = frappe.render_template(opts.template || \"print_grid\", opts);\n\t}\n\n\t// render HTML wrapper page\n\topts.base_url = frappe.urllib.get_base_url();\n\topts.print_css = frappe.boot.print_css;\n\tvar html = frappe.render_template(\"print_template\", opts);\n\n\tvar w = window.open();\n\n\tif(!w) {\n\t\tfrappe.msgprint(__(\"Please enable pop-ups in your browser\"))\n\t}\n\n\tw.document.write(html);\n\tw.document.close();\n},\nfrappe.render_tree = function(opts) {\n\topts.base_url = frappe.urllib.get_base_url();\n\topts.landscape = false;\n\topts.print_css = frappe.boot.print_css;\n\tvar tree = frappe.render_template(\"print_tree\", opts);\n\tvar w = window.open();\n\n\tif(!w) {\n\t\tfrappe.msgprint(__(\"Please enable pop-ups in your browser\"))\n\t}\n\n\tw.document.write(tree);\n\tw.document.close();\n}\nfrappe.render_pdf = function(html, opts = {}) {\n\t//Create a form to place the HTML content\n\tvar formData = new FormData();\n\n\t//Push the HTML content into an element\n\tformData.append(\"html\", html);\n\tif (opts.orientation) {\n\t\tformData.append(\"orientation\", opts.orientation);\n\t}\n\tvar blob = new Blob([], { type: \"text/xml\"});\n\tformData.append(\"blob\", blob);\n\n\tvar xhr = new XMLHttpRequest();\n\txhr.open(\"POST\", '/api/method/frappe.utils.print_format.report_to_pdf');\n\txhr.setRequestHeader(\"X-Frappe-CSRF-Token\", frappe.csrf_token);\n\txhr.responseType = \"arraybuffer\";\n\n\txhr.onload = function(success) {\n\t\tif (this.status === 200) {\n\t\t\tvar blob = new Blob([success.currentTarget.response], {type: \"application/pdf\"});\n\t\t\tvar objectUrl = URL.createObjectURL(blob);\n\n\t\t\t//Open report in a new window\n\t\t\twindow.open(objectUrl);\n\t\t}\n\t};\n\txhr.send(formData);\n}","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.desk.form');\nfrappe.provide('frappe.desk.report');\nfrappe.provide('frappe.utils');\nfrappe.provide('frappe.model');\nfrappe.provide('frappe.user');\nfrappe.provide('frappe.session');\nfrappe.provide('locals');\nfrappe.provide('locals.DocType');\n\n// for listviews\nfrappe.provide(\"frappe.listview_settings\");\nfrappe.provide(\"frappe.listview_parent_route\");\n\n// setup custom binding for history\nfrappe.settings.no_history = 1;\n\n// constants\nwindow.NEWLINE = '\\n';\nwindow.TAB = 9;\nwindow.UP_ARROW = 38;\nwindow.DOWN_ARROW = 40;\n\n// proxy for user globals defined in desk.js\n\n// Name Spaces\n// ============\n\n// form\nwindow._f = {};\nwindow._p = {};\nwindow._r = {};\n\n// API globals\nwindow.frms={};\nwindow.cur_frm=null;\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfunction empty_select(s) {\n\tif(s.custom_select) { s.empty(); return; }\n\tif(s.inp)s = s.inp;\n\tif(s) {\n\t\tvar tmplen = s.length; for(var i=0;i<tmplen; i++) s.options[0] = null;\n\t}\n}\n\nfunction sel_val(s) {\n\tif(s.custom_select) {\n\t\treturn s.inp.value ? s.inp.value : '';\n\t}\n\tif(s.inp)s = s.inp;\n\ttry {\n\t\tif(s.selectedIndex<s.options.length) return s.options[s.selectedIndex].value;\n\t\telse return '';\n\t} catch(err) { return ''; /* IE fix */ }\n}\n\nvar $n = '\\n';\n\nfunction $a(parent, newtag, className, cs, innerHTML, onclick) {\n\tif(parent && parent.substr)parent = $i(parent);\n\tvar c = document.createElement(newtag);\n\tif(parent)\n\t\tparent.appendChild(c);\n\n\t// if image, 3rd parameter is source\n\tif(className) {\n\t\tif(newtag.toLowerCase()=='img')\n\t\t\tc.src = className\n\t\telse\n\t\t\tc.className = className;\n\t}\n\tif(cs)$y(c,cs);\n\tif(innerHTML) c.innerHTML = innerHTML;\n\tif(onclick) c.onclick = onclick;\n\treturn c;\n}\n\nfunction $dh(d) {\n\tif(d && d.substr)d=$i(d);\n\tif(d && d.style.display.toLowerCase() != 'none') d.style.display = 'none';\n}\nfunction $ds(d) {\n\tif(d && d.substr)d=$i(d);\n\tvar t = 'block';\n\tif(d && in_list(['span','img','button'], d.tagName.toLowerCase()))\n\t\tt = 'inline'\n\tif(d && d.style.display.toLowerCase() != t)\n\t\td.style.display = t;\n}\nfunction $di(d) { if(d && d.substr)d=$i(d); if(d)d.style.display = 'inline'; }\nfunction $i(id) {\n\tif(!id) return null;\n\tif(id && id.appendChild)return id; // already an element\n\treturn document.getElementById(id);\n}\nfunction $w(e,w) { if(e && e.style && w)e.style.width = w; }\nfunction $h(e,h) { if(e && e.style && h)e.style.height = h; }\nfunction $bg(e,w) { if(e && e.style && w)e.style.backgroundColor = w; }\n\nfunction $y(ele, s) {\n\tif(ele && s) {\n\t\tfor(var i in s) ele.style[i]=s[i];\n\t}\n\treturn ele;\n}\n\n// Make table\n\nfunction make_table(parent, nr, nc, table_width, widths, cell_style, table_style) {\n\tvar t = $a(parent, 'table');\n\tt.style.borderCollapse = 'collapse';\n\tif(table_width) t.style.width = table_width;\n\tif(cell_style) t.cell_style=cell_style;\n\tfor(var ri=0;ri<nr;ri++) {\n\t\tvar r = t.insertRow(ri);\n\t\tfor(var ci=0;ci<nc;ci++) {\n\t\t\tvar c = r.insertCell(ci);\n\t\t\tif(ri==0 && widths && widths[ci]) {\n\t\t\t\t// set widths\n\t\t\t\tc.style.width = widths[ci];\n\t\t\t}\n\t\t\tif(cell_style) {\n\t\t\t\tfor(var s in cell_style) c.style[s] = cell_style[s];\n\t\t\t}\n\t\t}\n\t}\n\tt.append_row = function() { return append_row(this); }\n\tif(table_style) $y(t, table_style);\n\treturn t;\n}\n\nfunction append_row(t, at, style) {\n\tvar r = t.insertRow(at ? at : t.rows.length);\n\tif(t.rows.length>1) {\n\t\tfor(var i=0;i<t.rows[0].cells.length;i++) {\n\t\t\tvar c = r.insertCell(i);\n\t\t\tif(style) $y(c, style);\n\t\t}\n\t}\n\treturn r\n}\n\nfunction $td(t,r,c) {\n\tif(r<0)r=t.rows.length+r;\n\tif(c<0)c=t.rows[0].cells.length+c;\n\treturn t.rows[r].cells[c];\n}\n\n// URL utilities\n\nfrappe.urllib = {\n\n\t// get argument from url\n\tget_arg: function(name) {\n\t\tname = name.replace(/[\\[]/,\"\\\\\\[\").replace(/[\\]]/,\"\\\\\\]\");\n\t\tvar regexS = \"[\\\\?&]\"+name+\"=([^&#]*)\";\n\t\tvar regex = new RegExp( regexS );\n\t\tvar results = regex.exec( window.location.href );\n\t\tif( results == null )\n\t\t\treturn \"\";\n\t\telse\n\t\t\treturn decodeURIComponent(results[1]);\n\t},\n\n\t// returns url dictionary\n\tget_dict: function() {\n\t\tvar d = {}\n\t\tvar t = window.location.href.split('?')[1];\n\t\tif(!t) return d;\n\n\t\tif(t.indexOf('#')!=-1) t = t.split('#')[0];\n\t\tif(!t) return d;\n\n\t\tt = t.split('&');\n\t\tfor(var i=0; i<t.length; i++) {\n\t\t\tvar a = t[i].split('=');\n\t\t\td[decodeURIComponent(a[0])] = decodeURIComponent(a[1]);\n\t\t}\n\t\treturn d;\n\t},\n\n\t// returns the base url with http + domain + path (-index.cgi or # or ?)\n\tget_base_url: function() {\n\t\t// var url= (frappe.base_url || window.location.href).split('#')[0].split('?')[0].split('desk')[0];\n\t\tvar url = (frappe.base_url || window.location.origin)\n\t\tif(url.substr(url.length-1, 1)=='/') url = url.substr(0, url.length-1)\n\t\treturn url\n\t},\n\n\t// returns absolute url\n\tget_full_url: function(url) {\n\t\tif(url.indexOf(\"http://\")===0 || url.indexOf(\"https://\")===0) {\n\t\t\treturn url;\n\t\t}\n\t\treturn url.substr(0,1)===\"/\" ?\n\t\t\t(frappe.urllib.get_base_url() + url) :\n\t\t\t(frappe.urllib.get_base_url() + \"/\" + url);\n\t}\n}\n\nwindow.get_url_arg = frappe.urllib.get_arg;\nwindow.get_url_dict = frappe.urllib.get_dict;\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n/**\n * Make a standard page layout with a toolbar and title\n *\n * @param {Object} opts\n *\n * @param {string} opts.parent [HTMLElement] Parent element\n * @param {boolean} opts.single_column Whether to include sidebar\n * @param {string} [opts.title] Page title\n * @param {Object} [opts.make_page]\n *\n * @returns {frappe.ui.Page}\n */\n\n/**\n * @typedef {Object} frappe.ui.Page\n */\n\n\nfrappe.ui.make_app_page = function(opts) {\n\topts.parent.page = new frappe.ui.Page(opts);\n\treturn opts.parent.page;\n}\n\nfrappe.ui.pages = {};\n\nfrappe.ui.Page = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\n\t\tthis.set_document_title = true;\n\t\tthis.buttons = {};\n\t\tthis.fields_dict = {};\n\t\tthis.views = {};\n\n\t\tthis.make();\n\t\tfrappe.ui.pages[frappe.get_route_str()] = this;\n\t},\n\n\tmake: function() {\n\t\tthis.wrapper = $(this.parent);\n\t\tthis.add_main_section();\n\t},\n\n\tget_empty_state: function(title, message, primary_action) {\n\t\tlet $empty_state = $(`<div class=\"page-card-container\">\n\t\t\t<div class=\"page-card\">\n\t\t\t\t<div class=\"page-card-head\">\n\t\t\t\t\t<span class=\"indicator blue\">\n\t\t\t\t\t\t${title}</span>\n\t\t\t\t</div>\n\t\t\t\t<p>${message}</p>\n\t\t\t\t<div>\n\t\t\t\t\t<button class=\"btn btn-primary btn-sm\">${primary_action}</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`);\n\n\t\treturn $empty_state;\n\t},\n\n\tload_lib: function(callback) {\n\t\tfrappe.require(this.required_libs, callback);\n\t},\n\n\tadd_main_section: function() {\n\t\t$(frappe.render_template(\"page\", {})).appendTo(this.wrapper);\n\t\tif(this.single_column) {\n\t\t\t// nesting under col-sm-12 for consistency\n\t\t\tthis.add_view(\"main\", '<div class=\"row layout-main\">\\\n\t\t\t\t\t<div class=\"col-md-12 layout-main-section-wrapper\">\\\n\t\t\t\t\t\t<div class=\"layout-main-section\"></div>\\\n\t\t\t\t\t\t<div class=\"layout-footer hide\"></div>\\\n\t\t\t\t\t</div>\\\n\t\t\t\t</div>');\n\t\t} else {\n\t\t\tthis.add_view(\"main\", '<div class=\"row layout-main\">\\\n\t\t\t\t<div class=\"col-md-2 layout-side-section\"></div>\\\n\t\t\t\t<div class=\"col-md-10 layout-main-section-wrapper\">\\\n\t\t\t\t\t<div class=\"layout-main-section\"></div>\\\n\t\t\t\t\t<div class=\"layout-footer hide\"></div>\\\n\t\t\t\t</div>\\\n\t\t\t</div>');\n\t\t}\n\n\t\tthis.setup_page();\n\t},\n\n\tsetup_page: function() {\n\t\tthis.$title_area = this.wrapper.find(\"h1\");\n\n\t\tthis.$sub_title_area = this.wrapper.find(\"h6\");\n\n\t\tif(this.set_document_title!==undefined)\n\t\t\tthis.set_document_title = this.set_document_title;\n\n\t\tif(this.title)\n\t\t\tthis.set_title(this.title);\n\n\t\tif(this.icon)\n\t\t\tthis.get_main_icon(this.icon);\n\n\t\tthis.body = this.main = this.wrapper.find(\".layout-main-section\");\n\t\tthis.sidebar = this.wrapper.find(\".layout-side-section\");\n\t\tthis.footer = this.wrapper.find(\".layout-footer\");\n\t\tthis.indicator = this.wrapper.find(\".indicator\");\n\n\t\tthis.page_actions = this.wrapper.find(\".page-actions\");\n\n\t\tthis.btn_primary = this.page_actions.find(\".primary-action\");\n\t\tthis.btn_secondary = this.page_actions.find(\".btn-secondary\");\n\n\t\tthis.menu = this.page_actions.find(\".menu-btn-group .dropdown-menu\");\n\t\tthis.menu_btn_group = this.page_actions.find(\".menu-btn-group\");\n\n\t\tthis.actions = this.page_actions.find(\".actions-btn-group .dropdown-menu\");\n\t\tthis.actions_btn_group = this.page_actions.find(\".actions-btn-group\");\n\n\t\tthis.page_form = $('<div class=\"page-form row hide\"></div>').prependTo(this.main);\n\t\tthis.inner_toolbar = $('<div class=\"form-inner-toolbar hide\"></div>').prependTo(this.main);\n\t\tthis.icon_group = this.page_actions.find(\".page-icon-group\");\n\n\t\tif(this.make_page) {\n\t\t\tthis.make_page();\n\t\t}\n\t},\n\n\tset_indicator: function(label, color) {\n\t\tthis.clear_indicator().removeClass(\"hide\").html(`<span class='hidden-xs'>${label}</span>`).addClass(color);\n\t},\n\n\tadd_action_icon: function(icon, click) {\n\t\treturn $('<a class=\"text-muted no-decoration\"><i class=\"'+icon+'\"></i></a>')\n\t\t\t.appendTo(this.icon_group.removeClass(\"hide\"))\n\t\t\t.click(click);\n\t},\n\n\tclear_indicator: function() {\n\t\treturn this.indicator.removeClass().addClass(\"indicator whitespace-nowrap hide\");\n\t},\n\n\tget_icon_label: function(icon, label) {\n\t\treturn '<i class=\"visible-xs ' + icon + '\"></i><span class=\"hidden-xs\">' + label + '</span>'\n\t},\n\n\tset_action: function(btn, opts) {\n\t\tlet me = this;\n\t\tif (opts.icon) {\n\t\t\topts.label = this.get_icon_label(opts.icon, opts.label);\n\t\t}\n\n\t\tthis.clear_action_of(btn);\n\n\t\tbtn.removeClass(\"hide\")\n\t\t\t.prop(\"disabled\", false)\n\t\t\t.html(opts.label)\n\t\t\t.on(\"click\", function() {\n\t\t\t\tlet response = opts.click.apply(this);\n\t\t\t\tme.btn_disable_enable(btn, response);\n\t\t\t});\n\n\t\tif (opts.working_label) {\n\t\t\tbtn.attr(\"data-working-label\", opts.working_label);\n\t\t}\n\t},\n\n\tset_primary_action: function(label, click, icon, working_label) {\n\t\tthis.set_action(this.btn_primary, {\n\t\t\tlabel: label,\n\t\t\tclick: click,\n\t\t\ticon: icon,\n\t\t\tworking_label: working_label\n\t\t});\n\n\t\treturn this.btn_primary;\n\t},\n\n\tset_secondary_action: function(label, click, icon, working_label) {\n\t\tthis.set_action(this.btn_secondary, {\n\t\t\tlabel: label,\n\t\t\tclick: click,\n\t\t\ticon: icon,\n\t\t\tworking_label: working_label\n\t\t});\n\n\t\treturn this.btn_secondary;\n\t},\n\n\n\tclear_action_of: function(btn) {\n\t\tbtn.addClass(\"hide\").unbind(\"click\").removeAttr(\"data-working-label\");\n\t},\n\n\tclear_primary_action: function() {\n\t\tthis.clear_action_of(this.btn_primary);\n\t},\n\n\tclear_secondary_action: function() {\n\t\tthis.clear_action_of(this.btn_secondary);\n\t},\n\n\tclear_actions: function() {\n\t\tthis.clear_primary_action();\n\t\tthis.clear_secondary_action();\n\t},\n\n\tclear_icons: function() {\n\t\tthis.icon_group.addClass(\"hide\").empty();\n\t},\n\n\t//--- Menu --//\n\n\tadd_menu_item: function(label, click, standard) {\n\t\treturn this.add_dropdown_item(label, click, standard, this.menu);\n\t},\n\n\tclear_menu: function() {\n\t\tthis.clear_btn_group(this.menu);\n\t},\n\n\tshow_menu: function() {\n\t\tthis.menu_btn_group.removeClass(\"hide\");\n\t},\n\n\thide_menu: function() {\n\t\tthis.menu_btn_group.addClass(\"hide\");\n\t},\n\n\tshow_icon_group: function() {\n\t\tthis.icon_group.removeClass(\"hide\");\n\t},\n\n\thide_icon_group: function() {\n\t\tthis.icon_group.addClass(\"hide\");\n\t},\n\n\t//--- Actions Menu--//\n\n\tshow_actions_menu: function() {\n\t\tthis.actions_btn_group.removeClass(\"hide\");\n\t},\n\n\thide_actions_menu: function() {\n\t\tthis.actions_btn_group.addClass(\"hide\");\n\t},\n\n\n\tadd_action_item: function(label, click, standard) {\n\t\treturn this.add_dropdown_item(label, click, standard, this.actions);\n\t},\n\n\tadd_actions_menu_item: function(label, click, standard) {\n\t\treturn this.add_dropdown_item(label, click, standard, this.actions, false);\n\t},\n\n\tclear_actions_menu: function() {\n\t\tthis.clear_btn_group(this.actions);\n\t},\n\n\n\t//-- Generic --//\n\n\t/*\n\t* Add label to given drop down menu. If label, is already contained in the drop\n\t* down menu, it will be ignored.\n\t* @param {string} label - Text for the drop down menu\n\t* @param {function} click - function to be called when `label` is clicked\n\t* @param {Boolean} standard\n\t* @param {object} parent - DOM object representing the parent of the drop down item lists\n\t* @param {Boolean} show_parent - Whether to show the dropdown button if dropdown item is added\n\t*/\n\tadd_dropdown_item: function(label, click, standard, parent, show_parent=true) {\n\t\tlet item_selector = 'li > a.grey-link';\n\t\tif(show_parent) {\n\t\t\tparent.parent().removeClass(\"hide\");\n\t\t}\n\n\t\tvar $li = $('<li><a class=\"grey-link\">'+ label +'</a><li>'),\n\t\t\t$link = $li.find(\"a\").on(\"click\", click);\n\n\t\tif (this.is_in_group_button_dropdown(parent, item_selector, label)) return;\n\n\t\tif(standard) {\n\t\t\t$li.appendTo(parent);\n\t\t} else {\n\t\t\tthis.divider = parent.find(\".divider\");\n\t\t\tif(!this.divider.length) {\n\t\t\t\tthis.divider = $('<li class=\"divider user-action\"></li>').prependTo(parent);\n\t\t\t}\n\t\t\t$li.addClass(\"user-action\").insertBefore(this.divider);\n\t\t}\n\n\t\treturn $link;\n\t},\n\n\t/*\n\t* Check if there already exists a button with a specified label in a specified button group\n\t* @param {object} parent - This should be the `ul` of the button group.\n\t* @param {string} selector - CSS Selector of the button to be searched for. By default, it is `li`.\n\t* @param {string} label - Label of the button\n\t*/\n\tis_in_group_button_dropdown: function(parent, selector, label){\n\t\tif (!selector) selector = 'li';\n\n\t\tif (!label || !parent) return false;\n\n\t\tconst result = $(parent).find(`${selector}:contains('${label}')`)\n\t\t\t.filter(function() {\n\t\t\t\treturn $(this).text() === label;\n\t\t\t});\n\t\treturn result.length > 0;\n\t},\n\n\tclear_btn_group: function(parent) {\n\t\tparent.empty();\n\t\tparent.parent().addClass(\"hide\");\n\t},\n\n\tadd_divider: function() {\n\t\treturn $('<li class=\"divider\"></li>').appendTo(this.menu);\n\t},\n\n\tget_or_add_inner_group_button: function(label) {\n\t\tvar $group = this.inner_toolbar.find('.btn-group[data-label=\"'+encodeURIComponent(label)+'\"]');\n\t\tif(!$group.length) {\n\t\t\t$group = $('<div class=\"btn-group\" data-label=\"'+encodeURIComponent(label)+'\" style=\"margin-left: 10px;\">\\\n\t\t\t\t<button type=\"button\" class=\"btn btn-default dropdown-toggle btn-xs\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\\\n\t\t\t\t'+label+' <span class=\"caret\"></span></button>\\\n\t\t\t\t<ul class=\"dropdown-menu\" style=\"margin-top: -8px;\"></ul></div>').appendTo(this.inner_toolbar);\n\t\t}\n\t\treturn $group;\n\t},\n\n\tget_inner_group_button: function(label) {\n\t\treturn this.inner_toolbar.find('.btn-group[data-label=\"'+encodeURIComponent(label)+'\"]');\n\t},\n\n\tset_inner_btn_group_as_primary: function(label) {\n\t\tthis.get_or_add_inner_group_button(label).find(\"button\").removeClass(\"btn-default\").addClass(\"btn-primary\");\n\t},\n\n\tbtn_disable_enable: function(btn, response) {\n\t\tif (response && response.then) {\n\t\t\tbtn.prop('disabled', true);\n\t\t\tresponse.then(() => {\n\t\t\t\tbtn.prop('disabled', false);\n\t\t\t})\n\t\t} else if (response && response.always) {\n\t\t\tbtn.prop('disabled', true);\n\t\t\tresponse.always(() => {\n\t\t\t\tbtn.prop('disabled', false);\n\t\t\t});\n\t\t}\n\t},\n\n\t/*\n\t* Add button to button group. If there exists another button with the same label,\n\t* `add_inner_button` will not add the new button to the button group even if the callback\n\t* function is different.\n\t*\n\t* @param {string} label - Label of the button to be added to the group\n\t* @param {object} action - function to be called when button is clicked\n\t* @param {string} group - Label of the group button\n\t*/\n\tadd_inner_button: function(label, action, group, type=\"default\") {\n\t\tvar me = this;\n\t\tlet _action = function() {\n\t\t\tlet btn = $(this);\n\t\t\tlet response = action();\n\t\t\tme.btn_disable_enable(btn, response);\n\t\t};\n\t\tif(group) {\n\t\t\tvar $group = this.get_or_add_inner_group_button(group);\n\t\t\t$(this.inner_toolbar).removeClass(\"hide\");\n\n\t\t\tif (!this.is_in_group_button_dropdown($group.find(\".dropdown-menu\"), 'li', label)) {\n\t\t\t\treturn $('<li><a data-label=\"'+encodeURIComponent(label)+'\">'+label+'</a></li>')\n\t\t\t\t\t.on('click', _action)\n\t\t\t\t\t.appendTo($group.find(\".dropdown-menu\"));\n\t\t\t}\n\n\t\t} else {\n\t\t\tvar button = this.inner_toolbar.find('button[data-label=\"'+encodeURIComponent(label)+'\"]');\n\t\t\tif( button.length == 0 ) {\n\t\t\t\treturn $('<button data-label=\"'+encodeURIComponent(label)+`\" class=\"btn btn-${type} btn-xs\" style=\"margin-left: 10px;\">`+__(label)+'</btn>')\n\t\t\t\t\t.on(\"click\", _action)\n\t\t\t\t\t.appendTo(this.inner_toolbar.removeClass(\"hide\"));\n\t\t\t} else {\n\t\t\t\treturn button;\n\t\t\t}\n\t\t}\n\t},\n\n\tremove_inner_button: function(label, group) {\n\t\tif (typeof label === 'string') {\n\t\t\tlabel = [label];\n\t\t}\n\t\t// translate\n\t\tlabel = label.map(l => __(l));\n\n\t\tif (group) {\n\t\t\tvar $group = this.get_inner_group_button(__(group));\n\t\t\tif($group.length) {\n\t\t\t\t$group.find('.dropdown-menu li a[data-label=\"'+encodeURIComponent(label)+'\"]').remove();\n\t\t\t}\n\t\t\tif ($group.find('.dropdown-menu li a').length === 0) $group.remove();\n\t\t} else {\n\n\t\t\tthis.inner_toolbar.find('button[data-label=\"'+encodeURIComponent(label)+'\"]').remove();\n\t\t}\n\t},\n\n\tadd_inner_message: function(message) {\n\t\tlet $message = $(`<span class='inner-page-message text-muted small'>${message}</div>`);\n\t\tthis.inner_toolbar.find('.inner-page-message').remove();\n\t\tthis.inner_toolbar.removeClass(\"hide\").prepend($message);\n\n\t\treturn $message;\n\t},\n\n\tclear_inner_toolbar: function() {\n\t\tthis.inner_toolbar.empty().addClass(\"hide\");\n\t},\n\n\t//-- Sidebar --//\n\n\tadd_sidebar_item: function(label, action, insert_after, prepend) {\n\t\tvar parent = this.sidebar.find(\".sidebar-menu.standard-actions\");\n\t\tvar li = $('<li>');\n\t\tvar link = $('<a>').html(label).on(\"click\", action).appendTo(li);\n\n\t\tif (insert_after) {\n\t\t\tli.insertAfter(parent.find(insert_after));\n\t\t} else {\n\t\t\tif(prepend) {\n\t\t\t\tli.prependTo(parent);\n\t\t\t} else {\n\t\t\t\tli.appendTo(parent);\n\t\t\t}\n\t\t}\n\t\treturn link;\n\t},\n\n\t//---//\n\n\tclear_user_actions: function() {\n\t\tthis.menu.find(\".user-action\").remove();\n\t},\n\n\t// page::title\n\tget_title_area: function() {\n\t\treturn this.$title_area;\n\t},\n\n\tset_title: function(txt, icon = '', stripHtml = true, tabTitle = '') {\n\t\tif(!txt) txt = \"\";\n\n\t\tif(stripHtml) {\n\t\t\ttxt = strip_html(txt);\n\t\t}\n\t\tthis.title = txt;\n\n\t\tfrappe.utils.set_title(tabTitle || txt);\n\t\tif(icon) {\n\t\t\ttxt = '<span class=\"'+ icon +' text-muted\" style=\"font-size: inherit;\"></span> ' + txt;\n\t\t}\n\t\tthis.$title_area.find(\".title-text\").html(txt);\n\t},\n\n\tset_title_sub: function(txt) {\n\t\t// strip icon\n\t\tthis.$sub_title_area.html(txt).toggleClass(\"hide\", !!!txt);\n\t},\n\n\tget_main_icon: function(icon) {\n\t\treturn this.$title_area.find(\".title-icon\")\n\t\t\t.html('<i class=\"'+icon+' fa-fw\"></i> ')\n\t\t\t.toggle(true);\n\t},\n\n\tadd_help_button: function(txt) {\n\t\t//\n\t},\n\n\tadd_button: function(label, click, icon, is_title) {\n\t\t//\n\t},\n\n\tadd_dropdown_button: function(parent, label, click, icon) {\n\t\tfrappe.ui.toolbar.add_dropdown_button(parent, label, click, icon);\n\t},\n\n\t// page::form\n\tadd_label: function(label) {\n\t\tthis.show_form();\n\t\treturn $(\"<label class='col-md-1 page-only-label'>\"+label+\" </label>\")\n\t\t\t.appendTo(this.page_form);\n\t},\n\tadd_select: function(label, options) {\n\t\tvar field = this.add_field({label:label, fieldtype:\"Select\"});\n\t\treturn field.$wrapper.find(\"select\").empty().add_options(options);\n\t},\n\tadd_data: function(label) {\n\t\tvar field = this.add_field({label: label, fieldtype: \"Data\"});\n\t\treturn field.$wrapper.find(\"input\").attr(\"placeholder\", label);\n\t},\n\tadd_date: function(label, date) {\n\t\tvar field = this.add_field({label: label, fieldtype: \"Date\", \"default\": date});\n\t\treturn field.$wrapper.find(\"input\").attr(\"placeholder\", label);\n\t},\n\tadd_check: function(label) {\n\t\treturn $(\"<div class='checkbox'><label><input type='checkbox'>\" + label + \"</label></div>\")\n\t\t\t.appendTo(this.page_form)\n\t\t\t.find(\"input\");\n\t},\n\tadd_break: function() {\n\t\t// add further fields in the next line\n\t\tthis.page_form.append('<div class=\"clearfix invisible-xs\"></div>');\n\t},\n\tadd_field: function(df) {\n\t\tthis.show_form();\n\t\tvar f = frappe.ui.form.make_control({\n\t\t\tdf: df,\n\t\t\tparent: this.page_form,\n\t\t\tonly_input: df.fieldtype==\"Check\" ? false : true,\n\t\t})\n\t\tf.refresh();\n\t\t$(f.wrapper)\n\t\t\t.addClass('col-md-2')\n\t\t\t.attr(\"title\", __(df.label)).tooltip();\n\n\t\t// html fields in toolbar are only for display\n\t\tif (df.fieldtype=='HTML') {\n\t\t\treturn;\n\t\t}\n\n\t\t// hidden fields dont have $input\n\t\tif (!f.$input) f.make_input();\n\n\t\tf.$input.addClass(\"input-sm\").attr(\"placeholder\", __(df.label));\n\n\t\tif(df.fieldtype===\"Check\") {\n\t\t\t$(f.wrapper).find(\":first-child\")\n\t\t\t\t.removeClass(\"col-md-offset-4 col-md-8\");\n\t\t}\n\n\t\tif(df.fieldtype==\"Button\") {\n\t\t\t$(f.wrapper).find(\".page-control-label\").html(\"&nbsp;\")\n\t\t\tf.$input.addClass(\"btn-sm\").css({\"width\": \"100%\", \"margin-top\": \"-1px\"});\n\t\t}\n\n\t\tif(df[\"default\"])\n\t\t\tf.set_input(df[\"default\"])\n\t\tthis.fields_dict[df.fieldname || df.label] = f;\n\t\treturn f;\n\t},\n\tclear_fields: function() {\n\t\tthis.page_form.empty();\n\t},\n\tshow_form: function() {\n\t\tthis.page_form.removeClass(\"hide\");\n\t},\n\thide_form: function() {\n\t\tthis.page_form.addClass(\"hide\");\n\t},\n\tget_form_values: function() {\n\t\tvar values = {};\n\t\tthis.page_form.fields_dict.forEach(function(field, key) {\n\t\t\tvalues[key] = field.get_value();\n\t\t});\n\t\treturn values;\n\t},\n\tadd_view: function(name, html) {\n\t\tlet element = html;\n\t\tif(typeof (html) === \"string\") {\n\t\t\telement = $(html);\n\t\t}\n\t\tthis.views[name] = element.appendTo($(this.wrapper).find(\".page-content\"));\n\t\tif(!this.current_view) {\n\t\t\tthis.current_view = this.views[name];\n\t\t} else {\n\t\t\tthis.views[name].toggle(false);\n\t\t}\n\t\treturn this.views[name];\n\t},\n\tset_view: function(name) {\n\t\tif(this.current_view_name===name)\n\t\t\treturn;\n\t\tthis.current_view && this.current_view.toggle(false);\n\t\tthis.current_view = this.views[name];\n\n\t\tthis.previous_view_name = this.current_view_name;\n\t\tthis.current_view_name = name;\n\n\t\tthis.views[name].toggle(true);\n\n\t\tthis.wrapper.trigger('view-change');\n\t},\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nfrappe.provide(\"frappe.ui\");\n\nfrappe.ui.Slide = class Slide {\n\tconstructor(slide = null) {\n\t\t$.extend(this, slide);\n\t\tthis.setup();\n\t}\n\n\tsetup() {\n\t\tthis.$wrapper = $('<div class=\"slide-wrapper hidden\"></div>')\n\t\t\t.attr({\"data-slide-id\": this.id, \"data-slide-name\": this.name})\n\t\t\t.appendTo(this.parent);\n\t}\n\n\t// Make has to be called manually, to account for on-demand use cases\n\tmake() {\n\t\tif(this.before_load) { this.before_load(this); }\n\n\t\tthis.$body = $(`<div class=\"slide-body\">\n\t\t\t<div class=\"content text-center\">\n\t\t\t\t<p class=\"title lead\">${this.title}</p>\n\t\t\t</div>\n\t\t\t<div class=\"form-wrapper\">\n\t\t\t\t<div class=\"form\"></div>\n\t\t\t\t<div class=\"add-more text-center\" style=\"margin-top: 5px;\">\n\t\t\t\t\t<a class=\"form-more-btn hide btn btn-default btn-xs\">${__(\"Add More\")}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`).appendTo(this.$wrapper);\n\n\t\tthis.$content = this.$body.find(\".content\");\n\t\tthis.$form = this.$body.find(\".form\");\n\t\tthis.$primary_btn = this.slides_footer.find('.primary');\n\n\t\tif(this.help) this.$content.append($(`<p class=\"slide-help\">${this.help}</p>`));\n\t\tif(this.image_src) this.$content.append(\n\t\t\t$(`<img src=\"${this.image_src}\" style=\"margin: 20px;\">`));\n\n\t\tthis.reqd_fields = [];\n\n\t\tthis.refresh();\n\t\tthis.made = true;\n\t}\n\n\trefresh() {\n\t\tthis.render_parent_dots();\n\t\tif(!this.done) {\n\t\t\tthis.setup_form();\n\t\t} else {\n\t\t\tthis.setup_done_state();\n\t\t}\n\t}\n\n\tsetup_form() {\n\t\tthis.form = new frappe.ui.FieldGroup({\n\t\t\tfields: this.get_atomic_fields(),\n\t\t\tbody: this.$form[0],\n\t\t\tno_submit_on_enter: true\n\t\t});\n\t\tthis.form.make();\n\t\tif(this.add_more) this.bind_more_button();\n\n\t\tthis.set_reqd_fields();\n\n\t\tif(this.onload) { this.onload(this); }\n\t\tthis.set_reqd_fields();\n\t}\n\n\t// Form methods\n\tget_atomic_fields() {\n\t\tvar fields = JSON.parse(JSON.stringify(this.fields));\n\t\tif(this.add_more) {\n\t\t\tthis.count = 1;\n\t\t\tfields = fields.map((field, i) => {\n\t\t\t\tif(field.fieldname) {\n\t\t\t\t\tfield.fieldname += '_1';\n\t\t\t\t}\n\t\t\t\tif(i === 1 && this.mandatory_entry) {\n\t\t\t\t\tfield.reqd = 1;\n\t\t\t\t}\n\t\t\t\tif(!field.static) {\n\t\t\t\t\tif(field.label) field.label += ' 1';\n\t\t\t\t}\n\t\t\t\treturn field;\n\t\t\t});\n\t\t}\n\t\treturn fields;\n\t}\n\n\tset_reqd_fields() {\n\t\tvar dict = this.form.fields_dict;\n\t\tthis.reqd_fields = [];\n\t\tObject.keys(dict).map(key => {\n\t\t\tif(dict[key].df.reqd) {\n\t\t\t\tthis.reqd_fields.push(dict[key]);\n\t\t\t}\n\t\t});\n\t}\n\n\tset_values() {\n\t\tthis.values = this.form.get_values();\n\t\tif(this.values===null) {\n\t\t\treturn false;\n\t\t}\n\t\tif(this.validate && !this.validate()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tbind_more_button() {\n\t\tthis.$more = this.$body.find('.form-more-btn');\n\t\tthis.$more.removeClass('hide')\n\t\t\t.on('click', () => {\n\t\t\t\tthis.count++;\n\t\t\t\tvar fields = JSON.parse(JSON.stringify(this.fields));\n\t\t\t\tthis.form.add_fields(fields.map(field => {\n\t\t\t\t\tif(field.fieldname) field.fieldname += '_' + this.count;\n\t\t\t\t\tif(!field.static) {\n\t\t\t\t\t\tif(field.label) field.label += ' ' + this.count;\n\t\t\t\t\t}\n\t\t\t\t\treturn field;\n\t\t\t\t}));\n\t\t\t\tif(this.count === this.max_count) {\n\t\t\t\t\tthis.$more.addClass('hide');\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t// Primary button (outside of slide)\n\tresetup_primary_button() {\n\t\tthis.unbind_primary_action();\n\t\tthis.bind_fields_to_action_btn();\n\t\tthis.reset_action_button_state();\n\t\tthis.bind_primary_action();\n\t}\n\n\tbind_fields_to_action_btn() {\n\t\tvar me = this;\n\t\tthis.reqd_fields.map((field) => {\n\t\t\tfield.$wrapper.on('change input', () => {\n\t\t\t\tme.reset_action_button_state();\n\t\t\t});\n\t\t});\n\t}\n\n\treset_action_button_state() {\n\t\tvar empty_fields = this.reqd_fields.filter((field) => {\n\t\t\treturn !field.get_value();\n\t\t});\n\t\tif(empty_fields.length) {\n\t\t\tthis.slides_footer.find('.action').addClass('disabled');\n\t\t} else {\n\t\t\tthis.slides_footer.find('.action').removeClass('disabled');\n\t\t}\n\t}\n\n\tunbind_primary_action() {\n\t\tthis.slides_footer.find(\".primary\").off();\n\t}\n\n\tbind_primary_action() {\n\t\tthis.slides_footer.find(\".primary\").on('click', () => {\n\t\t\tthis.primary_action();\n\t\t});\n\t}\n\n\tbefore_show() { }\n\n\tshow_slide() {\n\t\tthis.$wrapper.removeClass(\"hidden\");\n\t\tthis.before_show();\n\t\tthis.resetup_primary_button();\n\t\tif(!this.done) {\n\t\t\tthis.$body.find('.form-control').first().focus();\n\t\t\tthis.$primary_btn.show();\n\t\t} else {\n\t\t\tthis.$primary_btn.hide();\n\t\t}\n\t}\n\n\thide_slide() {\n\t\tthis.$wrapper.addClass(\"hidden\");\n\t}\n\n\tget_input(fieldname) {\n\t\treturn this.form.get_input(fieldname);\n\t}\n\n\tget_field(fieldname) {\n\t\treturn this.form.get_field(fieldname);\n\t}\n\n\tget_value(fieldname) {\n\t\treturn this.form.get_value(fieldname);\n\t}\n\n\tdestroy() {\n\t\tthis.$body.remove();\n\t}\n\n\tprimary_action() { }\n};\n\nfrappe.ui.Slides = class Slides {\n\tconstructor({\n\t\tparent = null,\n\t\tslides = [],\n\t\tslide_class = null,\n\t\tunidirectional = 0,\n\t\tdone_state = 0,\n\t\tbefore_load = null,\n\t\ton_update = null\n\t}) {\n\t\tthis.parent = parent;\n\t\tthis.slides = slides;\n\t\tthis.slide_class = slide_class;\n\t\tthis.unidirectional = unidirectional;\n\t\tthis.done_state = done_state;\n\t\tthis.before_load = before_load;\n\t\tthis.on_update = on_update;\n\n\t\tthis.slide_dict = {};\n\n\t\t//In case of refreshing\n\t\tthis.made_slide_ids = [];\n\t\tthis.values = {};\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tthis.container = $('<div>').addClass(\"slides-wrapper\").attr({\"tabindex\": -1})\n\t\t\t.appendTo(this.parent);\n\t\tthis.$slide_progress = $(`<div>`).addClass(`slides-progress text-center text-extra-muted`)\n\t\t\t.appendTo(this.container);\n\t\tthis.$body = $(`<div>`).addClass(`slide-container`)\n\t\t\t.appendTo(this.container);\n\t\tthis.$footer = $(`<div>`).addClass(`slide-footer`)\n\t\t\t.appendTo(this.container);\n\n\t\tthis.render_progress_dots();\n\t\tthis.make_prev_next_buttons();\n\t\tif(this.before_load) { this.before_load(this.$footer); }\n\n\t\t// can be on demand\n\t\tthis.setup();\n\n\t\t// can be on demand\n\t\tthis.show_slide(0);\n\t}\n\n\tsetup() {\n\t\tthis.slides.map((slide, id) => {\n\t\t\tif(!this.slide_dict[id]) {\n\t\t\t\tthis.slide_dict[id] = new (this.slide_class)(\n\t\t\t\t\t$.extend(this.slides[id], {\n\t\t\t\t\t\tparent: this.$body,\n\t\t\t\t\t\tslides_footer: this.$footer,\n\t\t\t\t\t\trender_parent_dots: this.render_progress_dots.bind(this),\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tif(!this.unidirectional) {\n\t\t\t\t\tthis.slide_dict[id].make();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(this.made_slide_ids.includes(id+\"\")) {\n\t\t\t\t\tthis.slide_dict[id].destroy();\n\t\t\t\t\tthis.slide_dict[id].make();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\trefresh(id) {\n\t\tthis.render_progress_dots();\n\t\tthis.show_hide_prev_next(id);\n\t\tthis.$body.find('.form-control').first().focus();\n\t}\n\n\trender_progress_dots() {\n\t\t// Depends on this.unidirectional and this.done_state\n\t\t// Can be called by a slide to update states\n\t\tthis.$slide_progress.empty();\n\n\t\tthis.slides.map((slide, id) => {\n\t\t\tlet $dot = $(`<i class=\"fa fa-fw fa-circle\"> </i> `)\n\t\t\t\t.attr({'data-step-id': id});\n\n\t\t\tif(this.done_state && (this.slide_dict[id] &&\n\t\t\t\tthis.slide_dict[id].done || slide.done)) {\n\t\t\t\t$dot.addClass('text-success');\n\t\t\t}\n\t\t\tif((this.unidirectional && id <= this.current_id) ||\n\t\t\t\tid === this.current_id) {\n\t\t\t\t$dot.addClass('active');\n\t\t\t}\n\t\t\t// Add pointer event for non-unidirectional\n\t\t\tthis.$slide_progress.append($dot);\n\t\t});\n\n\t\tthis.completed = 0;\n\t\tthis.slides.map((slide, i) => {\n\t\t\tif(this.slide_dict[i]) {\n\t\t\t\tif(this.slide_dict[i].done) this.completed++;\n\t\t\t} else {\n\t\t\t\tif(slide.done) this.completed++;\n\t\t\t}\n\t\t});\n\t\tif(this.on_update) {this.on_update(this.completed, this.slides.length);}\n\n\t\tif(!this.unidirectional) this.bind_progress_dots();\n\t}\n\n\tmake_prev_next_buttons() {\n\t\t$(`<div class=\"row\">\n\t\t\t<div class=\"col-sm-4\">\n\t\t\t\t<a class=\"prev-btn btn btn-default btn-sm\" tabindex=\"0\">${__(\"Previous\")}</a>\n\t\t\t</div>\n\t\t\t<div class=\"col-sm-8 text-right\">\n\t\t\t\t<a class=\"next-btn btn btn-default btn-sm\" tabindex=\"0\">${__(\"Next\")}</a>\n\t\t\t</div>\n\t\t</div>`).appendTo(this.$footer);\n\n\t\tthis.$prev_btn = this.$footer.find('.prev-btn').attr('tabIndex', 0)\n\t\t\t.on('click', () => { this.show_slide(this.current_id - 1); });\n\n\t\tthis.$next_btn = this.$footer.find('.next-btn').attr('tabIndex', 0)\n\t\t\t.on('click', () => {\n\t\t\t\tif (!this.unidirectional || (this.unidirectional && this.current_slide.set_values())) {\n\t\t\t\t\tthis.show_slide(this.current_id + 1);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tbind_progress_dots() {\n\t\tvar me = this;\n\t\tthis.$slide_progress.find('.fa-circle').addClass('link').on('click', function() {\n\t\t\tlet id = $(this).attr('data-step-id');\n\t\t\tme.show_slide(id);\n\t\t});\n\t}\n\n\tbefore_show_slide() {\n\t\treturn true;\n\t}\n\n\tshow_slide(id) {\n\t\tid = cint(id);\n\t\tif(!this.before_show_slide() ||\n\t\t\t(this.current_slide && this.current_id===id)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.update_values();\n\n\t\tif(this.current_slide) this.current_slide.hide_slide();\n\t\tif(this.unidirectional && !this.slide_dict[id].made) {\n\t\t\tthis.slide_dict[id].make();\n\t\t}\n\t\tthis.current_id = id;\n\t\tthis.current_slide = this.slide_dict[id];\n\t\tthis.current_slide.show_slide();\n\t\tthis.refresh(id);\n\t}\n\n\tdestroy_slide(id) {\n\t\tif(this.slide_dict[id]) this.slide_dict[id].destroy();\n\t\tthis.slide_dict[id] = null;\n\t}\n\n\ton_update(completed, total) {}\n\n\tshow_hide_prev_next(id) {\n\t\t(id === 0) ?\n\t\t\tthis.$prev_btn.hide() : this.$prev_btn.show();\n\t\t(id + 1 === this.slides.length) ?\n\t\t\tthis.$next_btn.hide() : this.$next_btn.show();\n\t}\n\n\tget_values() {\n\t\tvar values = {};\n\t\t$.each(this.slide_dict, function(id, slide) {\n\t\t\tif(slide.values) {\n\t\t\t\t$.extend(values, slide.values);\n\t\t\t}\n\t\t});\n\t\treturn values;\n\t}\n\n\tupdate_values() {\n\t\tthis.values = $.extend(this.values, this.get_values());\n\t}\n};","frappe.find = {\n\tpage_primary_action: () => {\n\t\treturn $('.page-actions:visible .btn-primary');\n\t},\n\tfield: (fieldname, value) => {\n\t\treturn new Promise(resolve => {\n\t\t\tlet input = $(`[data-fieldname=\"${fieldname}\"] :input`);\n\t\t\tif(value) {\n\t\t\t\tinput.val(value).trigger('change');\n\t\t\t\tfrappe.after_ajax(() => { resolve(input); });\n\t\t\t} else {\n\t\t\t\tresolve(input);\n\t\t\t}\n\t\t});\n\t}\n};","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.IconBar = Class.extend({\n\tinit: function(parent, n_groups) {\n\t\tthis.parent = parent;\n\t\tthis.buttons = {};\n\t\tthis.make(n_groups);\n\t},\n\tmake: function(n_groups) {\n\t\tthis.$wrapper = $('<div class=\"iconbar-wrapper hide\"></div>').appendTo(this.parent);\n\t\tfor(var i=0; i<n_groups; i++) {\n\t\t\tthis.get_group(i+1);\n\t\t}\n\t},\n\tget_group: function(group) {\n\t\tvar $ul = this.$wrapper.find(\".iconbar-\"+group+\" ul\");\n\t\t\n\t\tif(!$ul.length)\n\t\t\t$ul = $('<div class=\"iconbar iconbar-'+group+' hide\"><ul></ul></div>')\n\t\t\t\t.appendTo(this.$wrapper).find(\"ul\");\n\t\t\n\t\treturn $ul;\n\t},\n\tadd_btn: function(group, icon, label, click) {\n\t\tvar $ul = this.get_group(group);\n\t\tvar $li = $('<li><i class=\"'+icon+'\"></i></li>')\n\t\t\t.appendTo($ul)\n\t\t\t.on(\"click\", function() {\n\t\t\t\tclick.apply(this);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t\n\t\t$li.find(\"i\").attr(\"title\", label).tooltip();\n\n\t\t\t\n\t\tthis.$wrapper.find(\".iconbar-\" + group).removeClass(\"hide\")\n\t\tthis.show();\n\t\treturn $li;\n\t},\n\thide: function(group) {\n\t\tif(group) {\n\t\t\tthis.$wrapper.find(\".iconbar-\" + group).addClass(\"hide\");\n\t\t\tthis.check_if_all_hidden();\n\t\t} else {\n\t\t\tthis.$wrapper.addClass(\"hide\").trigger(\"hidden\");\n\t\t}\n\t},\n\tshow: function(group) {\n\t\tif(group) {\n\t\t\tthis.$wrapper.find(\".iconbar-\" + group).removeClass(\"hide\");\n\t\t\tthis.show();\n\t\t} else {\n\t\t\tif(this.$wrapper.hasClass(\"hide\"))\n\t\t\t\tthis.$wrapper.removeClass(\"hide\").trigger(\"shown\");\n\t\t}\n\t},\n\tclear: function(group) {\n\t\tvar me = this;\n\t\tthis.$wrapper.find(\".iconbar-\" + group).addClass(\"hide\").find(\"ul\").empty();\n\t\tthis.check_if_all_hidden();\n\t},\n\tcheck_if_all_hidden: function() {\n\t\tif(!this.$wrapper.find(\".iconbar:visible\").length) {\n\t\t\tthis.hide();\n\t\t}\n\t}\n})","// Copyright (c) 2018, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.form.LinkSelector = Class.extend({\n\tinit: function (opts) {\n\t\t/* help: Options: doctype, get_query, target */\n\t\t$.extend(this, opts);\n\n\t\tvar me = this;\n\t\tif (this.doctype != \"[Select]\") {\n\t\t\tfrappe.model.with_doctype(this.doctype, function (r) {\n\t\t\t\tme.make();\n\t\t\t});\n\t\t} else {\n\t\t\tthis.make();\n\t\t}\n\t},\n\tmake: function () {\n\t\tvar me = this;\n\n\t\tthis.start = 0;\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Select {0}\", [(this.doctype == '[Select]') ? __(\"value\") : __(this.doctype)]),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Data\", fieldname: \"txt\", label: __(\"Beginning with\"),\n\t\t\t\t\tdescription: __(\"You can use wildcard %\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"HTML\", fieldname: \"results\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Button\", fieldname: \"more\", label: __(\"More\"), click: () => {\n\t\t\t\t\t\tme.start += 20;\n\t\t\t\t\t\tme.search();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\tprimary_action_label: __(\"Search\"),\n\t\t\tprimary_action: function () {\n\t\t\t\tme.start = 0;\n\t\t\t\tme.search();\n\t\t\t}\n\t\t});\n\n\t\tif (this.txt)\n\t\t\tthis.dialog.fields_dict.txt.set_input(this.txt);\n\n\t\tthis.dialog.get_input(\"txt\").on(\"keypress\", function (e) {\n\t\t\tif (e.which === 13) {\n\t\t\t\tme.start = 0;\n\t\t\t\tme.search();\n\t\t\t}\n\t\t});\n\t\tthis.dialog.show();\n\t\tthis.search();\n\t},\n\tsearch: function () {\n\t\tvar args = {\n\t\t\ttxt: this.dialog.fields_dict.txt.get_value(),\n\t\t\tsearchfield: \"name\",\n\t\t\tstart: this.start\n\t\t};\n\t\tvar me = this;\n\n\t\tif (this.target.set_custom_query) {\n\t\t\tthis.target.set_custom_query(args);\n\t\t}\n\n\t\t// load custom query from grid\n\t\tif (this.target.is_grid && this.target.fieldinfo[this.fieldname]\n\t\t\t&& this.target.fieldinfo[this.fieldname].get_query) {\n\t\t\t$.extend(args,\n\t\t\t\tthis.target.fieldinfo[this.fieldname].get_query(cur_frm.doc));\n\t\t}\n\n\t\tfrappe.link_search(this.doctype, args, function (r) {\n\t\t\tvar parent = me.dialog.fields_dict.results.$wrapper;\n\t\t\tif (args.start === 0) {\n\t\t\t\tparent.empty();\n\t\t\t}\n\n\t\t\tif (r.values.length) {\n\t\t\t\t$.each(r.values, function (i, v) {\n\t\t\t\t\tvar row = $(repl('<div class=\"row link-select-row\">\\\n\t\t\t\t\t\t<div class=\"col-xs-4\">\\\n\t\t\t\t\t\t\t<b><a href=\"#\">%(name)s</a></b></div>\\\n\t\t\t\t\t\t<div class=\"col-xs-8\">\\\n\t\t\t\t\t\t\t<span class=\"text-muted\">%(values)s</span></div>\\\n\t\t\t\t\t\t</div>', {\n\t\t\t\t\t\t\tname: v[0],\n\t\t\t\t\t\t\tvalues: v.splice(1).join(\", \")\n\t\t\t\t\t\t})).appendTo(parent);\n\n\t\t\t\t\trow.find(\"a\")\n\t\t\t\t\t\t.attr('data-value', v[0])\n\t\t\t\t\t\t.click(function () {\n\t\t\t\t\t\t\tvar value = $(this).attr(\"data-value\");\n\t\t\t\t\t\t\tvar $link = this;\n\t\t\t\t\t\t\tif (me.target.is_grid) {\n\t\t\t\t\t\t\t\t// set in grid\n\t\t\t\t\t\t\t\tme.set_in_grid(value);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (me.target.doctype)\n\t\t\t\t\t\t\t\t\tme.target.parse_validate_and_set_in_model(value);\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tme.target.set_input(value);\n\t\t\t\t\t\t\t\t\tme.target.$input.trigger(\"change\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tme.dialog.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t$('<p><br><span class=\"text-muted\">' + __(\"No Results\") + '</span>'\n\t\t\t\t\t+ (frappe.model.can_create(me.doctype) ?\n\t\t\t\t\t\t('<br><br><a class=\"new-doc btn btn-default btn-sm\">'\n\t\t\t\t\t\t\t+ __('Create a new {0}', [__(me.doctype)]) + \"</a>\") : '')\n\t\t\t\t\t+ '</p>').appendTo(parent).find(\".new-doc\").click(function () {\n\t\t\t\t\t\tfrappe.new_doc(me.doctype);\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (r.values.length < 20) {\n\t\t\t\tvar more_btn = me.dialog.fields_dict.more.$wrapper;\n\t\t\t\tmore_btn.hide();\n\t\t\t}\n\n\t\t}, this.dialog.get_primary_btn());\n\n\t},\n\tset_in_grid: function (value) {\n\t\tvar me = this, updated = false;\n\t\tvar d = null;\n\t\tif (this.qty_fieldname) {\n\t\t\tfrappe.prompt({\n\t\t\t\tfieldname: \"qty\", fieldtype: \"Float\", label: \"Qty\",\n\t\t\t\t\"default\": 1, reqd: 1\n\t\t\t}, function (data) {\n\t\t\t\t$.each(me.target.frm.doc[me.target.df.fieldname] || [], function (i, d) {\n\t\t\t\t\tif (d[me.fieldname] === value) {\n\t\t\t\t\t\tfrappe.model.set_value(d.doctype, d.name, me.qty_fieldname, data.qty);\n\t\t\t\t\t\tfrappe.show_alert(__(\"Added {0} ({1})\", [value, d[me.qty_fieldname]]));\n\t\t\t\t\t\tupdated = true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (!updated) {\n\t\t\t\t\tfrappe.run_serially([\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\td = me.target.add_new_row();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t() => frappe.timeout(0.1),\n\t\t\t\t\t\t() => frappe.model.set_value(d.doctype, d.name, me.fieldname, value),\n\t\t\t\t\t\t() => frappe.timeout(0.5),\n\t\t\t\t\t\t() => frappe.model.set_value(d.doctype, d.name, me.qty_fieldname, data.qty),\n\t\t\t\t\t\t() => frappe.show_alert(__(\"Added {0} ({1})\", [value, data.qty]))\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}, __(\"Set Quantity\"), __(\"Set\"));\n\t\t} else if (me.dynamic_link_field) {\n\t\t\tvar d = me.target.add_new_row();\n\t\t\tfrappe.model.set_value(d.doctype, d.name, me.dynamic_link_field, me.dynamic_link_reference);\n\t\t\tfrappe.model.set_value(d.doctype, d.name, me.fieldname, value);\n\t\t\tfrappe.show_alert(__(\"{0} {1} added\", [me.dynamic_link_reference, value]));\n\t\t} else {\n\t\t\tvar d = me.target.add_new_row();\n\t\t\tfrappe.model.set_value(d.doctype, d.name, me.fieldname, value);\n\t\t\tfrappe.show_alert(__(\"{0} added\", [value]));\n\t\t}\n\t}\n});\n\nfrappe.link_search = function (doctype, args, callback, btn) {\n\tif (!args) {\n\t\targs = {\n\t\t\ttxt: ''\n\t\t}\n\t}\n\targs.doctype = doctype;\n\tif (!args.searchfield) {\n\t\targs.searchfield = 'name';\n\t}\n\n\tfrappe.call({\n\t\tmethod: \"frappe.desk.search.search_widget\",\n\t\ttype: \"GET\",\n\t\targs: args,\n\t\tcallback: function (r) {\n\t\t\tcallback && callback(r);\n\t\t},\n\t\tbtn: btn\n\t});\n}\n\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.form.MultiSelectDialog = Class.extend({\n\tinit: function(opts) {\n\t\t/* Options: doctype, target, setters, get_query, action */\n\t\t$.extend(this, opts);\n\n\t\tvar me = this;\n\t\tif(this.doctype!=\"[Select]\") {\n\t\t\tfrappe.model.with_doctype(this.doctype, function(r) {\n\t\t\t\tme.make();\n\t\t\t});\n\t\t} else {\n\t\t\tthis.make();\n\t\t}\n\t},\n\tmake: function() {\n\t\tlet me = this;\n\n\t\tthis.page_length = 20;\n\n\t\tlet fields = [\n\t\t\t{\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tlabel: __(\"Search Term\"),\n\t\t\t\tfieldname: \"search_term\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Column Break\"\n\t\t\t}\n\t\t];\n\t\tlet count = 0;\n\t\tif(!this.date_field) {\n\t\t\tthis.date_field = \"transaction_date\";\n\t\t}\n\t\tObject.keys(this.setters).forEach(function(setter) {\n\t\t\tfields.push({\n\t\t\t\tfieldtype: me.target.fields_dict[setter].df.fieldtype,\n\t\t\t\tlabel: me.target.fields_dict[setter].df.label,\n\t\t\t\tfieldname: setter,\n\t\t\t\toptions: me.target.fields_dict[setter].df.options,\n\t\t\t\tdefault: me.setters[setter]\n\t\t\t});\n\t\t\tif (count++ < Object.keys(me.setters).length) {\n\t\t\t\tfields.push({fieldtype: \"Column Break\"});\n\t\t\t}\n\t\t});\n\n\t\tfields = fields.concat([\n\t\t\t{\n\t\t\t\t\"fieldname\":\"date_range\",\n\t\t\t\t\"label\": __(\"Date Range\"),\n\t\t\t\t\"fieldtype\": \"DateRange\",\n\t\t\t},\n\t\t\t{ fieldtype: \"Section Break\" },\n\t\t\t{ fieldtype: \"HTML\", fieldname: \"results_area\" },\n\t\t\t{ fieldtype: \"Button\", fieldname: \"make_new\", label: __('Create a new ' + me.doctype) }\n\t\t]);\n\n\t\tlet doctype_plural = !this.doctype.endsWith('y') ? this.doctype + 's'\n\t\t\t: this.doctype.slice(0, -1) + 'ies';\n\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Select {0}\", [(this.doctype=='[Select]') ? __(\"value\") : __(doctype_plural)]),\n\t\t\tfields: fields,\n\t\t\tprimary_action_label: __(\"Get Items\"),\n\t\t\tprimary_action: function() {\n\t\t\t\tme.action(me.get_checked_values(), me.args);\n\t\t\t}\n\t\t});\n\n\t\tthis.$parent = $(this.dialog.body);\n\t\tthis.$wrapper = this.dialog.fields_dict.results_area.$wrapper.append(`<div class=\"results\"\n\t\t\tstyle=\"border: 1px solid #d1d8dd; border-radius: 3px; height: 300px; overflow: auto;\"></div>`);\n\t\tthis.$results = this.$wrapper.find('.results');\n\t\tthis.$make_new_btn = this.dialog.fields_dict.make_new.$wrapper;\n\n\t\tthis.$placeholder = $(`<div class=\"multiselect-empty-state\">\n\t\t\t\t\t<span class=\"text-center\" style=\"margin-top: -40px;\">\n\t\t\t\t\t\t<i class=\"fa fa-2x fa-tags text-extra-muted\"></i>\n\t\t\t\t\t\t<p class=\"text-extra-muted\">No ${this.doctype} found</p>\n\t\t\t\t\t\t<button class=\"btn btn-default btn-xs text-muted\" data-fieldtype=\"Button\"\n\t\t\t\t\t\t\tdata-fieldname=\"make_new\" placeholder=\"\" value=\"\">Make a new ${this.doctype}</button>\n\t\t\t\t\t</span>\n\t\t\t\t</div>`);\n\n\t\tthis.args = {};\n\n\t\tthis.bind_events();\n\t\tthis.get_results();\n\t\tthis.dialog.show();\n\t},\n\n\tbind_events: function() {\n\t\tlet me = this;\n\t\tthis.$results.on('click', '.list-item-container', function (e) {\n\t\t\tif (!$(e.target).is(':checkbox') && !$(e.target).is('a')) {\n\t\t\t\t$(this).find(':checkbox').trigger('click');\n\t\t\t}\n\t\t});\n\t\tthis.$results.on('click', '.list-item--head :checkbox', (e) => {\n\t\t\tthis.$results.find('.list-item-container .list-row-check')\n\t\t\t\t.prop(\"checked\", ($(e.target).is(':checked')));\n\t\t});\n\n\t\tthis.$parent.find('.input-with-feedback').on('change', (e) => {\n\t\t\tthis.get_results();\n\t\t});\n\n\t\tthis.$parent.find('[data-fieldname=\"date_range\"]').on('blur', (e) => {\n\t\t\tthis.get_results();\n\t\t});\n\n\t\tthis.$parent.find('[data-fieldname=\"search_term\"]').on('input', (e) => {\n\t\t\tvar $this = $(this);\n\t\t\tclearTimeout($this.data('timeout'));\n\t\t\t$this.data('timeout', setTimeout(function() {\n\t\t\t\tme.get_results();\n\t\t\t}, 300));\n\t\t});\n\n\t\tthis.$parent.on('click', '.btn[data-fieldname=\"make_new\"]', (e) => {\n\t\t\tfrappe.route_options = {};\n\t\t\tObject.keys(this.setters).forEach(function(setter) {\n\t\t\t\tfrappe.route_options[setter] = me.dialog.fields_dict[setter].get_value() || undefined;\n\t\t\t});\n\t\t\tfrappe.new_doc(this.doctype, true);\n\t\t});\n\t},\n\n\tget_checked_values: function() {\n\t\treturn this.$results.find('.list-item-container').map(function() {\n\t\t\tif ($(this).find('.list-row-check:checkbox:checked').length > 0 ) {\n\t\t\t\treturn $(this).attr('data-item-name');\n\t\t\t}\n\t\t}).get();\n\t},\n\n\tmake_list_row: function(result={}) {\n\t\tvar me = this;\n\t\t// Make a head row by default (if result not passed)\n\t\tlet head = Object.keys(result).length === 0;\n\n\t\tlet contents = ``;\n\t\tlet columns = ([\"name\"].concat(Object.keys(this.setters))).concat(\"Date\");\n\t\tcolumns.forEach(function(column) {\n\t\t\tcontents += `<div class=\"list-item__content ellipsis\">\n\t\t\t\t${\n\t\t\t\t\thead ? `<span class=\"ellipsis\">${__(frappe.model.unscrub(column))}</span>`\n\n\t\t\t\t\t: (column !== \"name\" ? `<span class=\"ellipsis\">${__(result[column])}</span>`\n\t\t\t\t\t\t: `<a href=\"${\"#Form/\"+ me.doctype + \"/\" + result[column]}\" class=\"list-id ellipsis\">\n\t\t\t\t\t\t\t${__(result[column])}</a>`)\n\t\t\t\t}\n\t\t\t</div>`;\n\t\t})\n\n\t\tlet $row = $(`<div class=\"list-item\">\n\t\t\t<div class=\"list-item__content\" style=\"flex: 0 0 10px;\">\n\t\t\t\t<input type=\"checkbox\" class=\"list-row-check\" ${result.checked ? 'checked' : ''}>\n\t\t\t</div>\n\t\t\t${contents}\n\t\t</div>`);\n\n\t\thead ? $row.addClass('list-item--head')\n\t\t\t: $row = $(`<div class=\"list-item-container\" data-item-name=\"${result.name}\"></div>`).append($row);\n\t\treturn $row;\n\t},\n\n\trender_result_list: function(results, more = 0) {\n\t\tvar me = this;\n\t\tthis.$results.empty();\n\t\tif(results.length === 0) {\n\t\t\tthis.$make_new_btn.addClass('hide');\n\t\t\tthis.$results.append(me.$placeholder);\n\t\t\treturn;\n\t\t}\n\t\tthis.$make_new_btn.removeClass('hide');\n\n\t\tthis.$results.append(this.make_list_row());\n\t\tresults.forEach((result) => {\n\t\t\tme.$results.append(me.make_list_row(result));\n\t\t})\n\t\tif (more) {\n\t\t\tlet message = __(\"Only {0} entries shown. Please filter for more specific results.\", [this.page_length]);\n\t\t\tme.$results.append($(`<div class=\"text-muted small\" style=\"text-align: center;\n\t\t\t\tmargin: 10px;\">${message}</div>`));\n\t\t}\n\t},\n\n\tget_results: function() {\n\t\tlet me = this;\n\n\t\tlet filters = this.get_query ? this.get_query().filters : {};\n\t\tObject.keys(this.setters).forEach(function(setter) {\n\t\t\tfilters[setter] = me.dialog.fields_dict[setter].get_value() || undefined;\n\t\t\tme.args[setter] = filters[setter];\n\t\t});\n\n\t\tlet date_val = this.dialog.fields_dict[\"date_range\"].get_value();\n\t\tif(date_val) {\n\t\t\tfilters[this.date_field] = ['between', date_val];\n\t\t}\n\n\t\tlet args = {\n\t\t\tdoctype: me.doctype,\n\t\t\ttxt: me.dialog.fields_dict[\"search_term\"].get_value(),\n\t\t\tfilters: filters,\n\t\t\tfilter_fields: Object.keys(me.setters).concat([me.date_field]),\n\t\t\tpage_length: this.page_length + 1,\n\t\t\tquery: this.get_query ? this.get_query().query : '',\n\t\t\tas_dict: 1\n\t\t}\n\t\tfrappe.call({\n\t\t\ttype: \"GET\",\n\t\t\tmethod:'frappe.desk.search.search_widget',\n\t\t\tno_spinner: true,\n\t\t\targs: args,\n\t\t\tcallback: function(r) {\n\t\t\t\tlet results = [], more = 0;\n\t\t\t\tif(r.values.length) {\n\t\t\t\t\tif(r.values.length > me.page_length){\n\t\t\t\t\t\tr.values.pop();\n\t\t\t\t\t\tmore = 1;\n\t\t\t\t\t}\n\t\t\t\t\tr.values.forEach(function(result) {\n\t\t\t\t\t\tif(me.date_field in result) {\n\t\t\t\t\t\t\tresult[\"Date\"] = result[me.date_field]\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult.checked = 0;\n\t\t\t\t\t\tresult.parsed_date = Date.parse(result[\"Date\"]);\n\t\t\t\t\t\tresults.push(result);\n\t\t\t\t\t});\n\t\t\t\t\tresults.map( (result) => {\n\t\t\t\t\t\tresult[\"Date\"] = frappe.format(result[\"Date\"], {\"fieldtype\":\"Date\"});\n\t\t\t\t\t})\n\n\t\t\t\t\tresults.sort((a, b) => {\n\t\t\t\t\t\treturn a.parsed_date - b.parsed_date;\n\t\t\t\t\t});\n\n\t\t\t\t\t// Preselect oldest entry\n\t\t\t\t\tresults[0].checked = 1\n\t\t\t\t}\n\t\t\t\tme.render_result_list(results, more);\n\t\t\t}\n\t\t});\n\t},\n\n});","// frappe.ui.Capture\n// Author - Achilles Rasquinha <achilles@frappe.io>\n\n/**\n * @description Converts a canvas, image or a video to a data URL string.\n * \n * @param \t{HTMLElement} element - canvas, img or video.\n * @returns {string} \t\t\t  - The data URL string.\n * \n * @example\n * frappe._.get_data_uri(video)\n * // returns \"data:image/pngbase64,...\"\n */\nfrappe._.get_data_uri = element =>\n{\n\tconst $element = $(element)\n\tconst width    = $element.width()\n\tconst height   = $element.height()\n\n\tconst $canvas     = $('<canvas/>')\n\t$canvas[0].width  = width\n\t$canvas[0].height = height\n\n\tconst context     = $canvas[0].getContext('2d')\n\tcontext.drawImage($element[0], 0, 0, width, height)\n\t\n\tconst data_uri = $canvas[0].toDataURL('image/png')\n\n\treturn data_uri\n}\n\n/**\n * @description Frappe's Capture object.\n * \n * @example\n * const capture = frappe.ui.Capture()\n * capture.show()\n * \n * capture.click((data_uri) => {\n * \t// do stuff\n * })\n * \n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Taking_still_photos\n */\nfrappe.ui.Capture = class\n{\n\tconstructor (options = { })\n\t{\n\t\tthis.options = frappe.ui.Capture.OPTIONS\n\t\tthis.set_options(options)\n\t}\n\t\n\tset_options (options)\n\t{\n\t\tthis.options = { ...frappe.ui.Capture.OPTIONS, ...options }\n\t\t\n\t\treturn this\n\t}\n\t\n\trender ( )\n\t{\n\t\treturn navigator.mediaDevices.getUserMedia({ video: true }).then(stream =>\n\t\t{\n\t\t\tthis.dialog \t = new frappe.ui.Dialog({\n\t\t\t\t  title: this.options.title,\n\t\t\t\tanimate: this.options.animate,\n\t\t\t\t action:\n\t\t\t\t{\n\t\t\t\t\tsecondary:\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"<b>&times</b>\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\n\t\t\tconst $e \t\t = $(frappe.ui.Capture.TEMPLATE)\n\t\t\t\n\t\t\tconst video      = $e.find('video')[0]\n\t\t\tvideo.srcObject  = stream\n\t\t\tvideo.play()\n\t\t\t\n\t\t\tconst $container = $(this.dialog.body)\n\t\t\t$container.html($e)\n\t\t\t\n\t\t\t$e.find('.fc-btf').hide()\n\n\t\t\t$e.find('.fc-bcp').click(() =>\n\t\t\t{\n\t\t\t\tconst data_url = frappe._.get_data_uri(video)\n\t\t\t\t$e.find('.fc-p').attr('src', data_url)\n\n\t\t\t\t$e.find('.fc-s').hide()\n\t\t\t\t$e.find('.fc-p').show()\n\n\t\t\t\t$e.find('.fc-btu').hide()\n\t\t\t\t$e.find('.fc-btf').show()\n\t\t\t})\n\n\t\t\t$e.find('.fc-br').click(() =>\n\t\t\t{\n\t\t\t\t$e.find('.fc-p').hide()\n\t\t\t\t$e.find('.fc-s').show()\n\n\t\t\t\t$e.find('.fc-btf').hide()\n\t\t\t\t$e.find('.fc-btu').show()\n\t\t\t})\n\n\t\t\t$e.find('.fc-bs').click(() =>\n\t\t\t{\n\t\t\t\tconst data_url = frappe._.get_data_uri(video)\n\t\t\t\tthis.hide()\n\t\t\t\t\n\t\t\t\tif (this.callback)\n\t\t\t\t\tthis.callback(data_url)\n\t\t\t})\n\t\t})\n\t}\n\n\tshow ( )\n\t{\n\t\tthis.render().then(() =>\n\t\t{\n\t\t\tthis.dialog.show()\n\t\t}).catch(err => {\n\t\t\tif ( this.options.error )\n\t\t\t{\n\t\t\t\tconst alert = `<span class=\"indicator red\"/> ${frappe.ui.Capture.ERR_MESSAGE}`\n\t\t\t\tfrappe.show_alert(alert, 3)\n\t\t\t}\n\n\t\t\tthrow err\n\t\t})\n\t}\n\n\thide ( )\n\t{\n\t\tif ( this.dialog )\n\t\t\tthis.dialog.hide()\n\t}\n\n\tsubmit (fn)\n\t{\n\t\tthis.callback = fn\n\t}\n}\nfrappe.ui.Capture.OPTIONS =\n{\n\t  title: __(`Camera`),\n\tanimate: false,\n\t  error: false,\n}\nfrappe.ui.Capture.ERR_MESSAGE = __(\"Unable to load camera.\")\nfrappe.ui.Capture.TEMPLATE \t  =\n`\n<div class=\"frappe-capture\">\n\t<div class=\"panel panel-default\">\n\t\t<img class=\"fc-p img-responsive\"/>\n\t\t<div class=\"fc-s  embed-responsive embed-responsive-16by9\">\n\t\t\t<video class=\"embed-responsive-item\">${frappe.ui.Capture.ERR_MESSAGE}</video>\n\t\t</div>\n\t</div>\n\t<div>\n\t\t<div class=\"fc-btf\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t\t<button class=\"btn btn-default fc-br\">\n\t\t\t\t\t\t\t<small>${__('Retake')}</small>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t\t<button class=\"btn btn-primary fc-bs\">\n\t\t\t\t\t\t\t<small>${__('Submit')}</small>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"fc-btu\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t${\n\t\t\t\t\t\t''\n\t\t\t\t\t\t// <div class=\"pull-left\">\n\t\t\t\t\t\t// \t<button class=\"btn btn-default\">\n\t\t\t\t\t\t// \t\t<small>${__('Take Video')}</small>\n\t\t\t\t\t\t// \t</button>\n\t\t\t\t\t\t// </div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t\t<button class=\"btn btn-default fc-bcp\">\n\t\t\t\t\t\t\t<small>${__('Take Photo')}</small>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n`","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n\nfrappe.provide(\"frappe.ui\");\nfrappe.ui.app_icon = {\n\tget_html: function(module, small) {\n\t\tvar icon = module.icon;\n\t\tvar color = module.color;\n\t\tif (icon\n\t\t\t&& icon.match(/([\\uE000-\\uF8FF]|\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF])/g)) {\n\t\t\tmodule.emoji = module.icon;\n\t\t}\n\t\tvar icon_style = \"\";\n\t\tif(module.reverse) {\n\t\t\ticon_style = \"color: #36414C;\";\n\t\t}\n\n\t\tif(!color) {\n\t\t\tcolor = '#4aa3df';\n\t\t}\n\n\t\t// first letter\n\t\tif(!icon || module.emoji) {\n\t\t\ticon = '<span class=\"inner\" ' +\n\t\t\t\t(module.reverse ? ('style=\"' + icon_style + '\"') : '')\n\t\t\t\t+ '>' + (module.emoji || module._label[0].toUpperCase()) + '</span>';\n\t\t} else if(icon.split(\".\").slice(-1)[0]===\"svg\") {\n\t\t\t$.ajax({\n\t\t\t\turl: frappe.urllib.get_full_url(icon),\n\t\t\t\tdataType: \"text\",\n\t\t\t\tasync: false,\n\t\t\t\tsuccess: function(data) {\n\t\t\t\t\ticon = data;\n\t\t\t\t}\n\t\t\t});\n\t\t\ticon = '<object class=\"app-icon-svg\">'+ icon+'</object>';\n\t\t} else {\n\t\t\ticon = '<i class=\"'+ icon+'\" title=\"' + module._label + '\" style=\"'+ icon_style + '\"></i>';\n\t\t}\n\n\t\treturn '<div class=\"app-icon'+ (small ? \" app-icon-small\" : \"\")\n\t\t\t+'\" style=\"background-color: '+ color +'\" title=\"'+ module._label +'\">'+icon+'</div>';\n\t}\n};\n","// DropZone\nfrappe.ui.DropZone = class \n{\n\tconstructor (selector, options) {\n\t\tthis.options    = Object.assign({ }, frappe.ui.DropZone.OPTIONS, options);\n\t\tthis.$container = $(selector);\n\t\tthis.$wrapper   = $(frappe.ui.DropZone.TEMPLATE);\n\n\t\tthis.make();\n\t}\n\n\tmake ( ) {\n\t\tconst me        = this;\n\t\tconst $dropzone = this.$wrapper.find('.panel-body');\n\t\tconst $title    = $dropzone.find('.dropzone-title');\n\t\t$title.html(this.options.title);\n\n\t\t$dropzone.on('dragover', function (e) {\n\t\t\te.preventDefault();\n\n\t\t\t$title.html('Drop');\n\t\t});\n\t\t$dropzone.on('dragleave', function (e) {\n\t\t\te.preventDefault();\n\n\t\t\t$title.html(me.options.title);\n\t\t});\n\t\t$dropzone.on('drop', function (e) {\n\t\t\te.preventDefault();\n\n\t\t\tconst files = e.originalEvent.dataTransfer.files;\n\t\t\tme.options.drop(files);\n\n\t\t\t$title.html(me.options.title);\n\t\t});\n\n\t\tthis.$container.html(this.$wrapper);\n\t}\n};\nfrappe.ui.DropZone.TEMPLATE =\n`\n<div class=\"panel panel-default\"\n\tstyle=\"\n\t\tborder: none !important;\n\t\tbox-shadow: none !important;\n\t\tmargin-bottom: 0 !important\n\t\">\n\t<div class=\"panel-body\">\n\t\t<div class=\"dropzone-title text-muted text-center\">\n\t\t</div>\n\t</div>\n</div>\n`;\nfrappe.ui.DropZone.OPTIONS  = \n{\n\ttitle: 'Drop Here'\n};","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.model');\n\n$.extend(frappe.model, {\n\tno_value_type: ['Section Break', 'Column Break', 'HTML', 'Table', 'Table MultiSelect',\n\t\t'Button', 'Image', 'Fold', 'Heading'],\n\n\tlayout_fields: ['Section Break', 'Column Break', 'Fold'],\n\n\tstd_fields_list: ['name', 'owner', 'creation', 'modified', 'modified_by',\n\t\t'_user_tags', '_comments', '_assign', '_liked_by', 'docstatus',\n\t\t'parent', 'parenttype', 'parentfield', 'idx'],\n\n\tcore_doctypes_list: ['DocType', 'DocField', 'DocPerm', 'User', 'Role', 'Has Role',\n\t\t'Page', 'Module Def', 'Print Format', 'Report', 'Customize Form',\n\t\t'Customize Form Field', 'Property Setter', 'Custom Field', 'Custom Script'],\n\n\tstd_fields: [\n\t\t{fieldname:'name', fieldtype:'Link', label:__('ID')},\n\t\t{fieldname:'owner', fieldtype:'Link', label:__('Created By'), options: 'User'},\n\t\t{fieldname:'idx', fieldtype:'Int', label:__('Index')},\n\t\t{fieldname:'creation', fieldtype:'Date', label:__('Created On')},\n\t\t{fieldname:'modified', fieldtype:'Date', label:__('Last Updated On')},\n\t\t{fieldname:'modified_by', fieldtype:'Data', label:__('Last Updated By')},\n\t\t{fieldname:'_user_tags', fieldtype:'Data', label:__('Tags')},\n\t\t{fieldname:'_liked_by', fieldtype:'Data', label:__('Liked By')},\n\t\t{fieldname:'_comments', fieldtype:'Text', label:__('Comments')},\n\t\t{fieldname:'_assign', fieldtype:'Text', label:__('Assigned To')},\n\t\t{fieldname:'docstatus', fieldtype:'Int', label:__('Document Status')},\n\t],\n\n\tnumeric_fieldtypes: [\"Int\", \"Float\", \"Currency\", \"Percent\"],\n\n\tstd_fields_table: [\n\t\t{fieldname:'parent', fieldtype:'Data', label:__('Parent')},\n\t],\n\n\ttable_fields: ['Table', 'Table MultiSelect'],\n\n\tnew_names: {},\n\tevents: {},\n\tuser_settings: {},\n\n\tinit: function() {\n\t\t// setup refresh if the document is updated somewhere else\n\t\tfrappe.realtime.on(\"doc_update\", function(data) {\n\t\t\t// set list dirty\n\t\t\tfrappe.views.ListView.trigger_list_update(data);\n\t\t\tvar doc = locals[data.doctype] && locals[data.doctype][data.name];\n\n\t\t\tif(doc) {\n\t\t\t\t// current document is dirty, show message if its not me\n\t\t\t\tif(frappe.get_route()[0]===\"Form\" && cur_frm.doc.doctype===doc.doctype && cur_frm.doc.name===doc.name) {\n\t\t\t\t\tif(!frappe.ui.form.is_saving && data.modified!=cur_frm.doc.modified) {\n\t\t\t\t\t\tdoc.__needs_refresh = true;\n\t\t\t\t\t\tcur_frm.show_if_needs_refresh();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(!doc.__unsaved) {\n\t\t\t\t\t\t// no local changes, remove from locals\n\t\t\t\t\t\tfrappe.model.remove_from_locals(doc.doctype, doc.name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// show message when user navigates back\n\t\t\t\t\t\tdoc.__needs_refresh = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfrappe.realtime.on(\"list_update\", function(data) {\n\t\t\tfrappe.views.ListView.trigger_list_update(data);\n\t\t});\n\n\t},\n\n\tis_value_type: function(fieldtype) {\n\t\tif (typeof fieldtype == 'object') {\n\t\t\tfieldtype = fieldtype.fieldtype;\n\t\t}\n\t\t// not in no-value type\n\t\treturn frappe.model.no_value_type.indexOf(fieldtype)===-1;\n\t},\n\n\tis_non_std_field: function(fieldname) {\n\t\treturn !frappe.model.std_fields_list.includes(fieldname);\n\t},\n\n\tget_std_field: function(fieldname, ignore=false) {\n\t\tvar docfield = $.map([].concat(frappe.model.std_fields).concat(frappe.model.std_fields_table),\n\t\t\tfunction(d) {\n\t\t\t\tif(d.fieldname==fieldname) return d;\n\t\t\t});\n\t\tif (!docfield.length) {\n\t\t\t//Standard fields are ignored in case of adding columns as a result of groupby\n\t\t\tif (ignore) {\n\t\t\t\treturn {fieldname: fieldname};\n\t\t\t} else {\n\t\t\t\tfrappe.msgprint(__(\"Unknown Column: {0}\", [fieldname]));\n\t\t\t}\n\t\t}\n\t\treturn docfield[0];\n\t},\n\n\twith_doctype: function(doctype, callback, async) {\n\t\tif(locals.DocType[doctype]) {\n\t\t\tcallback && callback();\n\t\t} else {\n\t\t\tlet cached_timestamp = null;\n\t\t\tlet cached_doc = null;\n\n\t\t\tif(localStorage[\"_doctype:\" + doctype]) {\n\t\t\t\tlet cached_docs = JSON.parse(localStorage[\"_doctype:\" + doctype]);\n\t\t\t\tcached_doc = cached_docs.filter(doc => doc.name === doctype)[0];\n\t\t\t\tif(cached_doc) {\n\t\t\t\t\tcached_timestamp = cached_doc.modified;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn frappe.call({\n\t\t\t\tmethod:'frappe.desk.form.load.getdoctype',\n\t\t\t\ttype: \"GET\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: doctype,\n\t\t\t\t\twith_parent: 1,\n\t\t\t\t\tcached_timestamp: cached_timestamp\n\t\t\t\t},\n\t\t\t\tasync: async,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(r.exc) {\n\t\t\t\t\t\tfrappe.msgprint(__(\"Unable to load: {0}\", [__(doctype)]));\n\t\t\t\t\t\tthrow \"No doctype\";\n\t\t\t\t\t}\n\t\t\t\t\tif(r.message==\"use_cache\") {\n\t\t\t\t\t\tfrappe.model.sync(cached_doc);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocalStorage[\"_doctype:\" + doctype] = JSON.stringify(r.docs);\n\t\t\t\t\t}\n\t\t\t\t\tfrappe.model.init_doctype(doctype);\n\n\t\t\t\t\tif(r.user_settings) {\n\t\t\t\t\t\t// remember filters and other settings from last view\n\t\t\t\t\t\tfrappe.model.user_settings[doctype] = JSON.parse(r.user_settings);\n\t\t\t\t\t\tfrappe.model.user_settings[doctype].updated_on = moment().toString();\n\t\t\t\t\t}\n\t\t\t\t\tcallback && callback(r);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tinit_doctype: function(doctype) {\n\t\tvar meta = locals.DocType[doctype];\n\t\tif(meta.__list_js) {\n\t\t\teval(meta.__list_js);\n\t\t}\n\t\tif(meta.__calendar_js) {\n\t\t\teval(meta.__calendar_js);\n\t\t}\n\t\tif(meta.__map_js) {\n\t\t\teval(meta.__map_js);\n\t\t}\n\t\tif(meta.__tree_js) {\n\t\t\teval(meta.__tree_js);\n\t\t}\n\t\tif(meta.__templates) {\n\t\t\t$.extend(frappe.templates, meta.__templates);\n\t\t}\n\t},\n\n\twith_doc: function(doctype, name, callback) {\n\t\treturn new Promise(resolve => {\n\t\t\tif(!name) name = doctype; // single type\n\t\t\tif(locals[doctype] && locals[doctype][name] && frappe.model.get_docinfo(doctype, name)) {\n\t\t\t\tcallback && callback(name);\n\t\t\t\tresolve(frappe.get_doc(doctype, name));\n\t\t\t} else {\n\t\t\t\treturn frappe.call({\n\t\t\t\t\tmethod: 'frappe.desk.form.load.getdoc',\n\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tdoctype: doctype,\n\t\t\t\t\t\tname: name\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tcallback && callback(name, r);\n\t\t\t\t\t\tresolve(frappe.get_doc(doctype, name));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tget_docinfo: function(doctype, name) {\n\t\treturn frappe.model.docinfo[doctype] && frappe.model.docinfo[doctype][name] || null;\n\t},\n\n\tset_docinfo: function(doctype, name, key, value) {\n\t\tif (frappe.model.docinfo[doctype] && frappe.model.docinfo[doctype][name]) {\n\t\t\tfrappe.model.docinfo[doctype][name][key] = value;\n\t\t}\n\t},\n\n\tget_shared: function(doctype, name) {\n\t\treturn frappe.model.get_docinfo(doctype, name).shared;\n\t},\n\n\tget_server_module_name: function(doctype) {\n\t\tvar dt = frappe.model.scrub(doctype);\n\t\tvar module = frappe.model.scrub(locals.DocType[doctype].module);\n\t\tvar app = frappe.boot.module_app[module];\n\t\treturn app + \".\" + module + '.doctype.' + dt + '.' + dt;\n\t},\n\n\tscrub: function(txt) {\n\t\treturn txt.replace(/ /g, \"_\").toLowerCase();  // use to slugify or create a slug, a \"code-friendly\" string\n\t},\n\n\tunscrub: function(txt) {\n\t\treturn __(txt || '').replace(/-|_/g, \" \").replace(/\\w*/g,\n            function(keywords){return keywords.charAt(0).toUpperCase() + keywords.substr(1).toLowerCase();});\n\t},\n\n\tcan_create: function(doctype) {\n\t\treturn frappe.boot.user.can_create.indexOf(doctype)!==-1;\n\t},\n\n\tcan_read: function(doctype) {\n\t\treturn frappe.boot.user.can_read.indexOf(doctype)!==-1;\n\t},\n\n\tcan_write: function(doctype) {\n\t\treturn frappe.boot.user.can_write.indexOf(doctype)!==-1;\n\t},\n\n\tcan_get_report: function(doctype) {\n\t\treturn frappe.boot.user.can_get_report.indexOf(doctype)!==-1;\n\t},\n\n\tcan_delete: function(doctype) {\n\t\tif(!doctype) return false;\n\t\treturn frappe.boot.user.can_delete.indexOf(doctype)!==-1;\n\t},\n\n\tcan_cancel: function(doctype) {\n\t\tif(!doctype) return false;\n\t\treturn frappe.boot.user.can_cancel.indexOf(doctype)!==-1;\n\t},\n\n\thas_workflow: function(doctype) {\n\t\treturn frappe.get_list('Workflow', {'document_type': doctype,\n\t\t\t'is_active': 1}).length;\n\t},\n\n\tis_submittable: function(doctype) {\n\t\tif(!doctype) return false;\n\t\treturn locals.DocType[doctype]\n\t\t\t&& locals.DocType[doctype].is_submittable;\n\t},\n\n\tis_table: function(doctype) {\n\t\tif(!doctype) return false;\n\t\treturn locals.DocType[doctype] && locals.DocType[doctype].istable;\n\t},\n\n\tis_single: function(doctype) {\n\t\tif(!doctype) return false;\n\t\treturn frappe.boot.single_types.indexOf(doctype) != -1;\n\t},\n\n\tcan_import: function(doctype, frm) {\n\t\t// system manager can always import\n\t\tif(frappe.user_roles.includes(\"System Manager\")) return true;\n\n\t\tif(frm) return frm.perm[0].import===1;\n\t\treturn frappe.boot.user.can_import.indexOf(doctype)!==-1;\n\t},\n\n\tcan_export: function(doctype, frm) {\n\t\t// system manager can always export\n\t\tif(frappe.user_roles.includes(\"System Manager\")) return true;\n\n\t\tif(frm) return frm.perm[0].export===1;\n\t\treturn frappe.boot.user.can_export.indexOf(doctype)!==-1;\n\t},\n\n\tcan_print: function(doctype, frm) {\n\t\tif(frm) return frm.perm[0].print===1;\n\t\treturn frappe.boot.user.can_print.indexOf(doctype)!==-1;\n\t},\n\n\tcan_email: function(doctype, frm) {\n\t\tif(frm) return frm.perm[0].email===1;\n\t\treturn frappe.boot.user.can_email.indexOf(doctype)!==-1;\n\t},\n\n\tcan_share: function(doctype, frm) {\n\t\tif(frm) {\n\t\t\treturn frm.perm[0].share===1;\n\t\t}\n\t\treturn frappe.boot.user.can_share.indexOf(doctype)!==-1;\n\t},\n\n\tcan_set_user_permissions: function(doctype, frm) {\n\t\t// system manager can always set user permissions\n\t\tif(frappe.user_roles.includes(\"System Manager\")) return true;\n\n\t\tif(frm) return frm.perm[0].set_user_permissions===1;\n\t\treturn frappe.boot.user.can_set_user_permissions.indexOf(doctype)!==-1;\n\t},\n\n\thas_value: function(dt, dn, fn) {\n\t\t// return true if property has value\n\t\tvar val = locals[dt] && locals[dt][dn] && locals[dt][dn][fn];\n\t\tvar df = frappe.meta.get_docfield(dt, fn, dn);\n\n\t\tif(frappe.model.table_fields.includes(df.fieldtype)) {\n\t\t\tvar ret = false;\n\t\t\t$.each(locals[df.options] || {}, function(k,d) {\n\t\t\t\tif(d.parent==dn && d.parenttype==dt && d.parentfield==df.fieldname) {\n\t\t\t\t\tret = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tvar ret = !is_null(val);\n\t\t}\n\t\treturn ret ? true : false;\n\t},\n\n\tget_list: function(doctype, filters) {\n\t\tvar docsdict = locals[doctype] || locals[\":\" + doctype] || {};\n\t\tif($.isEmptyObject(docsdict))\n\t\t\treturn [];\n\t\treturn frappe.utils.filter_dict(docsdict, filters);\n\t},\n\n\tget_value: function(doctype, filters, fieldname, callback) {\n\t\tif(callback) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\"frappe.client.get_value\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: doctype,\n\t\t\t\t\tfieldname: fieldname,\n\t\t\t\t\tfilters: filters\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tcallback(r.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif(typeof filters===\"string\" && locals[doctype] && locals[doctype][filters]) {\n\t\t\t\treturn locals[doctype][filters][fieldname];\n\t\t\t} else {\n\t\t\t\tvar l = frappe.get_list(doctype, filters);\n\t\t\t\treturn (l.length && l[0]) ? l[0][fieldname] : null;\n\t\t\t}\n\t\t}\n\t},\n\n\tset_value: function(doctype, docname, fieldname, value, fieldtype) {\n\t\t/* help: Set a value locally (if changed) and execute triggers */\n\n\t\tvar doc;\n\t\tif ($.isPlainObject(doctype)) {\n\t\t\t// first parameter is the doc, shift parameters to the left\n\t\t\tdoc = doctype; fieldname = docname; value = fieldname;\n\t\t} else {\n\t\t\tdoc = locals[doctype] && locals[doctype][docname];\n\t\t}\n\n\t\tlet to_update = fieldname;\n\t\tlet tasks = [];\n\t\tif(!$.isPlainObject(to_update)) {\n\t\t\tto_update = {};\n\t\t\tto_update[fieldname] = value;\n\t\t}\n\n\t\t$.each(to_update, (key, value) => {\n\t\t\tif (doc && doc[key] !== value) {\n\t\t\t\tif(doc.__unedited && !(!doc[key] && !value)) {\n\t\t\t\t\t// unset unedited flag for virgin rows\n\t\t\t\t\tdoc.__unedited = false;\n\t\t\t\t}\n\n\t\t\t\tdoc[key] = value;\n\t\t\t\ttasks.push(() => frappe.model.trigger(key, value, doc));\n\t\t\t} else {\n\t\t\t\t// execute link triggers (want to reselect to execute triggers)\n\t\t\t\tif(fieldtype==\"Link\" && doc) {\n\t\t\t\t\ttasks.push(() => frappe.model.trigger(key, value, doc));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn frappe.run_serially(tasks);\n\t},\n\n\ton: function(doctype, fieldname, fn) {\n\t\t/* help: Attach a trigger on change of a particular field.\n\t\tTo trigger on any change in a particular doctype, use fieldname as \"*\"\n\t\t*/\n\t\t/* example: frappe.model.on(\"Customer\", \"age\", function(fieldname, value, doc) {\n\t\t  if(doc.age < 16) {\n\t\t   \tfrappe.msgprint(\"Warning, Customer must atleast be 16 years old.\");\n\t\t    raise \"CustomerAgeError\";\n\t\t  }\n\t\t}) */\n\t\tfrappe.provide(\"frappe.model.events.\" + doctype);\n\t\tif(!frappe.model.events[doctype][fieldname]) {\n\t\t\tfrappe.model.events[doctype][fieldname] = [];\n\t\t}\n\t\tfrappe.model.events[doctype][fieldname].push(fn);\n\t},\n\n\ttrigger: function(fieldname, value, doc) {\n\t\tlet tasks = [];\n\t\tvar runner = function(events, event_doc) {\n\t\t\t$.each(events || [], function(i, fn) {\n\t\t\t\tif(fn) {\n\t\t\t\t\tlet _promise = fn(fieldname, value, event_doc || doc);\n\n\t\t\t\t\t// if the trigger returns a promise, return it,\n\t\t\t\t\t// or use the default promise frappe.after_ajax\n\t\t\t\t\tif (_promise && _promise.then) {\n\t\t\t\t\t\treturn _promise;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn frappe.after_server_call();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tif(frappe.model.events[doc.doctype]) {\n\t\t\ttasks.push(() => {\n\t\t\t\treturn runner(frappe.model.events[doc.doctype][fieldname]);\n\t\t\t});\n\n\t\t\ttasks.push(() => {\n\t\t\t\treturn runner(frappe.model.events[doc.doctype]['*']);\n\t\t\t});\n\t\t}\n\n\t\treturn frappe.run_serially(tasks);\n\t},\n\n\tget_doc: function(doctype, name) {\n\t\tif(!name) name = doctype;\n\t\tif($.isPlainObject(name)) {\n\t\t\tvar doc = frappe.get_list(doctype, name);\n\t\t\treturn doc && doc.length ? doc[0] : null;\n\t\t}\n\t\treturn locals[doctype] ? locals[doctype][name] : null;\n\t},\n\n\tget_children: function(doctype, parent, parentfield, filters) {\n\t\tif($.isPlainObject(doctype)) {\n\t\t\tvar doc = doctype;\n\t\t\tvar filters = parentfield\n\t\t\tvar parentfield = parent;\n\t\t} else {\n\t\t\tvar doc = frappe.get_doc(doctype, parent);\n\t\t}\n\n\t\tvar children = doc[parentfield] || [];\n\t\tif(filters) {\n\t\t\treturn frappe.utils.filter_dict(children, filters);\n\t\t} else {\n\t\t\treturn children;\n\t\t}\n\t},\n\n\tclear_table: function(doc, parentfield) {\n\t\tfor (var i=0, l=(doc[parentfield] || []).length; i<l; i++) {\n\t\t\tvar d = doc[parentfield][i];\n\t\t\tdelete locals[d.doctype][d.name];\n\t\t}\n\t\tdoc[parentfield] = [];\n\t},\n\n\tremove_from_locals: function(doctype, name) {\n\t\tthis.clear_doc(doctype, name);\n\t\tif(frappe.views.formview[doctype]) {\n\t\t\tdelete frappe.views.formview[doctype].frm.opendocs[name];\n\t\t}\n\t},\n\n\tclear_doc: function(doctype, name) {\n\t\tvar doc = locals[doctype] && locals[doctype][name];\n\t\tif(!doc) return;\n\n\t\tvar parent = null;\n\t\tif(doc.parenttype) {\n\t\t\tvar parent = doc.parent,\n\t\t\t\tparenttype = doc.parenttype,\n\t\t\t\tparentfield = doc.parentfield;\n\t\t}\n\t\tdelete locals[doctype][name];\n\t\tif(parent) {\n\t\t\tvar parent_doc = locals[parenttype][parent];\n\t\t\tvar newlist = [], idx = 1;\n\t\t\t$.each(parent_doc[parentfield], function(i, d) {\n\t\t\t\tif(d.name!=name) {\n\t\t\t\t\tnewlist.push(d);\n\t\t\t\t\td.idx = idx;\n\t\t\t\t\tidx++;\n\t\t\t\t}\n\t\t\t\tparent_doc[parentfield] = newlist;\n\t\t\t});\n\t\t}\n\t},\n\n\tget_no_copy_list: function(doctype) {\n\t\tvar no_copy_list = ['name','amended_from','amendment_date','cancel_reason'];\n\n\t\tvar docfields = frappe.get_doc(\"DocType\", doctype).fields || [];\n\t\tfor(var i=0, j=docfields.length; i<j; i++) {\n\t\t\tvar df = docfields[i];\n\t\t\tif(cint(df.no_copy)) no_copy_list.push(df.fieldname);\n\t\t}\n\n\t\treturn no_copy_list;\n\t},\n\n\tdelete_doc: function(doctype, docname, callback) {\n\t\tfrappe.confirm(__(\"Permanently delete {0}?\", [docname]), function() {\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: 'frappe.client.delete',\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: doctype,\n\t\t\t\t\tname: docname\n\t\t\t\t},\n\t\t\t\tcallback: function(r, rt) {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tfrappe.utils.play_sound(\"delete\");\n\t\t\t\t\t\tfrappe.model.clear_doc(doctype, docname);\n\t\t\t\t\t\tif(callback) callback(r,rt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t},\n\n\trename_doc: function(doctype, docname, callback) {\n\t\tvar d = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Rename {0}\", [__(docname)]),\n\t\t\tfields: [\n\t\t\t\t{label:__(\"New Name\"), fieldname: \"new_name\", fieldtype:\"Data\", reqd:1, \"default\": docname},\n\t\t\t\t{label:__(\"Merge with existing\"), fieldtype:\"Check\", fieldname:\"merge\"},\n\t\t\t]\n\t\t});\n\t\td.set_primary_action(__(\"Rename\"), function() {\n\t\t\tvar args = d.get_values();\n\t\t\tif(!args) return;\n\t\t\treturn frappe.call({\n\t\t\t\tmethod:\"frappe.model.rename_doc.rename_doc\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: doctype,\n\t\t\t\t\told: docname,\n\t\t\t\t\t\"new\": args.new_name,\n\t\t\t\t\t\"merge\": args.merge\n\t\t\t\t},\n\t\t\t\tbtn: d.get_primary_btn(),\n\t\t\t\tcallback: function(r,rt) {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\t$(document).trigger('rename', [doctype, docname,\n\t\t\t\t\t\t\tr.message || args.new_name]);\n\t\t\t\t\t\tif(locals[doctype] && locals[doctype][docname])\n\t\t\t\t\t\t\tdelete locals[doctype][docname];\n\t\t\t\t\t\td.hide();\n\t\t\t\t\t\tif(callback)\n\t\t\t\t\t\t\tcallback(r.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\td.show();\n\t},\n\n\tround_floats_in: function(doc, fieldnames) {\n\t\tif(!fieldnames) {\n\t\t\tfieldnames = frappe.meta.get_fieldnames(doc.doctype, doc.parent,\n\t\t\t\t{\"fieldtype\": [\"in\", [\"Currency\", \"Float\"]]});\n\t\t}\n\t\tfor(var i=0, j=fieldnames.length; i < j; i++) {\n\t\t\tvar fieldname = fieldnames[i];\n\t\t\tdoc[fieldname] = flt(doc[fieldname], precision(fieldname, doc));\n\t\t}\n\t},\n\n\tvalidate_missing: function(doc, fieldname) {\n\t\tif(!doc[fieldname]) {\n\t\t\tfrappe.throw(__(\"Please specify\") + \": \" +\n\t\t\t\t__(frappe.meta.get_label(doc.doctype, fieldname, doc.parent || doc.name)));\n\t\t}\n\t},\n\n\tget_all_docs: function(doc) {\n\t\tvar all = [doc];\n\t\tfor(var key in doc) {\n\t\t\tif($.isArray(doc[key])) {\n\t\t\t\tvar children = doc[key];\n\t\t\t\tfor (var i=0, l=children.length; i < l; i++) {\n\t\t\t\t\tall.push(children[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn all;\n\t},\n\n\tget_full_column_name: function(fieldname, doctype) {\n\t\tif (fieldname.includes('`tab')) return fieldname;\n\t\treturn '`tab' + doctype + '`.`' + fieldname + '`';\n\t},\n\n\tis_numeric_field: function(fieldtype) {\n\t\tif (!fieldtype) return;\n\t\tif (typeof fieldtype === 'object') {\n\t\t\tfieldtype = fieldtype.fieldtype;\n\t\t}\n\t\treturn frappe.model.numeric_fieldtypes.includes(fieldtype);\n\t}\n});\n\n// legacy\nfrappe.get_doc = frappe.model.get_doc;\nfrappe.get_children = frappe.model.get_children;\nfrappe.get_list = frappe.model.get_list;\n\nvar getchildren = function(doctype, parent, parentfield) {\n\tvar children = [];\n\t$.each(locals[doctype] || {}, function(i, d) {\n\t\tif(d.parent === parent && d.parentfield === parentfield) {\n\t\t\tchildren.push(d);\n\t\t}\n\t});\n\treturn children;\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.db = {\n\tget_list: function(doctype, args) {\n\t\tif (!args) {\n\t\t\targs = {};\n\t\t}\n\t\targs.doctype = doctype;\n\t\tif (!args.fields) {\n\t\t\targs.fields = ['name'];\n\t\t}\n\t\tif (!args.limit) {\n\t\t\targs.limit = 20;\n\t\t}\n\t\treturn new Promise ((resolve) => {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.model.db_query.get_list',\n\t\t\t\targs: args,\n\t\t\t\ttype: 'GET',\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tresolve(r.message);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\texists: function(doctype, name) {\n\t\treturn new Promise ((resolve) => {\n\t\t\tfrappe.db.get_value(doctype, {name: name}, 'name').then((r) => {\n\t\t\t\t(r.message && r.message.name) ? resolve(true) : resolve(false);\n\t\t\t});\n\t\t});\n\t},\n\tget_value: function(doctype, filters, fieldname, callback, parent_doc) {\n\t\treturn frappe.call({\n\t\t\tmethod: \"frappe.client.get_value\",\n\t\t\ttype: 'GET',\n\t\t\targs: {\n\t\t\t\tdoctype: doctype,\n\t\t\t\tfieldname: fieldname,\n\t\t\t\tfilters: filters,\n\t\t\t\tparent: parent_doc\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tcallback && callback(r.message);\n\t\t\t}\n\t\t});\n\t},\n\tget_single_value: (doctype, field) => {\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.client.get_single_value',\n\t\t\t\targs: { doctype, field },\n\t\t\t\ttype: 'GET',\n\t\t\t}).then(r => resolve(r ? r.message : null));\n\t\t});\n\t},\n\tset_value: function(doctype, docname, fieldname, value, callback) {\n\t\treturn frappe.call({\n\t\t\tmethod: \"frappe.client.set_value\",\n\t\t\targs: {\n\t\t\t\tdoctype: doctype,\n\t\t\t\tname: docname,\n\t\t\t\tfieldname: fieldname,\n\t\t\t\tvalue: value\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tcallback && callback(r.message);\n\t\t\t}\n\t\t});\n\t},\n\tget_doc: function(doctype, name, filters = null) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.client.get\",\n\t\t\t\ttype: 'GET',\n\t\t\t\targs: { doctype, name, filters },\n\t\t\t\tcallback: r => {\n\t\t\t\t\tfrappe.model.sync(r.message);\n\t\t\t\t\tresolve(r.message);\n\t\t\t\t}\n\t\t\t}).fail(reject);\n\t\t});\n\t},\n\tinsert: function(doc) {\n\t\treturn frappe.xcall('frappe.client.insert', { doc });\n\t},\n\tdelete_doc: function(doctype, name) {\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.call('frappe.client.delete', { doctype, name }, r => resolve(r.message));\n\t\t});\n\t},\n\tcount: function(doctype, args={}) {\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.client.get_count',\n\t\t\t\ttype: 'GET',\n\t\t\t\targs: Object.assign(args, { doctype })\n\t\t\t}).then(r => resolve(r.message));\n\t\t});\n\t}\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.meta.docfield_map');\nfrappe.provide('frappe.meta.docfield_copy');\nfrappe.provide('frappe.meta.docfield_list');\nfrappe.provide('frappe.meta.doctypes');\nfrappe.provide(\"frappe.meta.precision_map\");\n\nfrappe.get_meta = function(doctype) {\n\treturn locals[\"DocType\"][doctype];\n}\n\n$.extend(frappe.meta, {\n\tsync: function(doc) {\n\t\t$.each(doc.fields, function(i, df) {\n\t\t\tfrappe.meta.add_field(df);\n\t\t})\n\t\tfrappe.meta.sync_messages(doc);\n\t\tif(doc.__print_formats) frappe.model.sync(doc.__print_formats);\n\t\tif(doc.__workflow_docs) frappe.model.sync(doc.__workflow_docs);\n\t},\n\n\t// build docfield_map and docfield_list\n\tadd_field: function(df) {\n\t\tfrappe.provide('frappe.meta.docfield_map.' + df.parent);\n\t\tfrappe.meta.docfield_map[df.parent][df.fieldname || df.label] = df;\n\n\t\tif(!frappe.meta.docfield_list[df.parent])\n\t\t\tfrappe.meta.docfield_list[df.parent] = [];\n\n\t\t// check for repeat\n\t\tfor(var i in frappe.meta.docfield_list[df.parent]) {\n\t\t\tvar d = frappe.meta.docfield_list[df.parent][i];\n\t\t\tif(df.fieldname==d.fieldname)\n\t\t\t\treturn; // no repeat\n\t\t}\n\t\tfrappe.meta.docfield_list[df.parent].push(df);\n\t},\n\n\tmake_docfield_copy_for: function(doctype, docname) {\n\t\tvar c = frappe.meta.docfield_copy;\n\t\tif(!c[doctype])\n\t\t\tc[doctype] = {};\n\t\tif(!c[doctype][docname])\n\t\t\tc[doctype][docname] = {};\n\n\t\tvar docfield_list = frappe.meta.docfield_list[doctype] || [];\n\t\tfor(var i=0, j=docfield_list.length; i<j; i++) {\n\t\t\tvar df = docfield_list[i];\n\t\t\tc[doctype][docname][df.fieldname || df.label] = copy_dict(df);\n\t\t}\n\t},\n\n\tget_field: function(doctype, fieldname, name) {\n\t\tvar out = frappe.meta.get_docfield(doctype, fieldname, name);\n\n\t\t// search in standard fields\n\t\tif (!out) {\n\t\t\tfrappe.model.std_fields.every(function(d) {\n\t\t\t\tif(d.fieldname===fieldname) {\n\t\t\t\t\tout = d;\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn out;\n\t},\n\n\tget_docfield: function(doctype, fieldname, name) {\n\t\tvar fields_dict = frappe.meta.get_docfield_copy(doctype, name);\n\t\treturn fields_dict ? fields_dict[fieldname] : null;\n\t},\n\n\tset_formatter: function(doctype, fieldname, name, formatter) {\n\t\tfrappe.meta.get_docfield(doctype, fieldname, name).formatter = formatter;\n\t},\n\n\tset_indicator_formatter: function(doctype, fieldname, name, get_text, get_color) {\n\t\tfrappe.meta.get_docfield(doctype, fieldname, name).formatter =\n\t\t\tfunction(value, df, options, doc) {\n\t\t\t\treturn repl('<span class=\"indicator %(color)s\">%(name)s</span>', {\n\t\t\t\t\tcolor: get_color(),\n\t\t\t\t\tname: get_text()\n\t\t\t\t});\n\t\t\t};\n\t},\n\n\tget_docfields: function(doctype, name, filters) {\n\t\tvar docfield_map = frappe.meta.get_docfield_copy(doctype, name);\n\n\t\tvar docfields = frappe.meta.sort_docfields(docfield_map);\n\n\t\tif(filters) {\n\t\t\tdocfields = frappe.utils.filter_dict(docfields, filters);\n\t\t}\n\n\t\treturn docfields;\n\t},\n\n\tget_linked_fields: function(doctype) {\n\t\treturn $.map(frappe.get_meta(doctype).fields,\n\t\t\tfunction(d) { return d.fieldtype==\"Link\" ? d.options : null; });\n\t},\n\n\tget_fields_to_check_permissions: function(doctype) {\n\t\tvar fields = $.map(frappe.meta.get_docfields(doctype, name), function(df) {\n\t\t\treturn (df.fieldtype===\"Link\" && df.ignore_user_permissions!==1) ? df : null;\n\t\t});\n\t\tfields = fields.concat({label: \"Name\", fieldname: name, options: doctype});\n\t\treturn fields;\n\t},\n\n\tsort_docfields: function(docs) {\n\t\treturn $.map(docs, function(d) { return d; }).sort(function(a, b) { return a.idx - b.idx });\n\t},\n\n\tget_docfield_copy: function(doctype, name) {\n\t\tif(!name) return frappe.meta.docfield_map[doctype];\n\n\t\tif(!(frappe.meta.docfield_copy[doctype] && frappe.meta.docfield_copy[doctype][name])) {\n\t\t\tfrappe.meta.make_docfield_copy_for(doctype, name);\n\t\t}\n\n\t\treturn frappe.meta.docfield_copy[doctype][name];\n\t},\n\n\tget_fieldnames: function(doctype, name, filters) {\n\t\treturn $.map(frappe.utils.filter_dict(frappe.meta.docfield_map[doctype], filters),\n\t\t\tfunction(df) { return df.fieldname; });\n\t},\n\n\thas_field: function(dt, fn) {\n\t\tlet docfield_map = frappe.meta.docfield_map[dt];\n\t\treturn docfield_map && docfield_map[fn];\n\t},\n\n\tget_table_fields: function(dt) {\n\t\treturn $.map(frappe.meta.docfield_list[dt], function(d) {\n\t\t\treturn frappe.model.table_fields.includes(d.fieldtype) ? d : null});\n\t},\n\n\tget_doctype_for_field: function(doctype, key) {\n\t\tvar out = null;\n\t\tif(in_list(frappe.model.std_fields_list, key)) {\n\t\t\t// standard\n\t\t\tout = doctype;\n\t\t} else if(frappe.meta.has_field(doctype, key)) {\n\t\t\t// found in parent\n\t\t\tout = doctype;\n\t\t} else {\n\t\t\tfrappe.meta.get_table_fields(doctype).every(function(d) {\n\t\t\t\tif(frappe.meta.has_field(d.options, key)) {\n\t\t\t\t\tout = d.options;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\tif(!out) {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconsole.log(__('Warning: Unable to find {0} in any table related to {1}', [\n\t\t\t\t\tkey, __(doctype)]));\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t},\n\n\tget_parentfield: function(parent_dt, child_dt) {\n\t\tvar df = (frappe.get_doc(\"DocType\", parent_dt).fields || [])\n\t\t\t.filter(df => frappe.model.table_fields.includes(df.fieldtype) && df.options===child_dt)\n\t\tif(!df.length)\n\t\t\tthrow \"parentfield not found for \" + parent_dt + \", \" + child_dt;\n\t\treturn df[0].fieldname;\n\t},\n\n\tget_label: function(dt, fn, dn) {\n\t\tvar standard = {\n\t\t\t'owner': __('Owner'),\n\t\t\t'creation': __('Created On'),\n\t\t\t'modified': __('Last Modified On'),\n\t\t\t'idx': __('Idx'),\n\t\t\t'name': __('Name'),\n\t\t\t'modified_by': __('Last Modified By')\n\t\t}\n\t\tif(standard[fn]) {\n\t\t\treturn standard[fn];\n\t\t} else {\n\t\t\tvar df = this.get_docfield(dt, fn, dn);\n\t\t\treturn (df ? df.label : \"\") || fn;\n\t\t}\n\t},\n\n\tget_print_formats: function(doctype) {\n\t\tvar print_format_list = [\"Standard\"];\n\t\tvar default_print_format = locals.DocType[doctype].default_print_format;\n\t\tlet enable_raw_printing = frappe.model.get_doc(\":Print Settings\", \"Print Settings\").enable_raw_printing;\n\t\tvar print_formats = frappe.get_list(\"Print Format\", {doc_type: doctype})\n\t\t\t.sort(function(a, b) { return (a > b) ? 1 : -1; });\n\t\t$.each(print_formats, function(i, d) {\n\t\t\tif (\n\t\t\t\t!in_list(print_format_list, d.name)\n\t\t\t\t&& d.print_format_type !== 'JS'\n\t\t\t\t&& (cint(enable_raw_printing) || !d.raw_printing)\n\t\t\t) {\n\t\t\t\tprint_format_list.push(d.name);\n\t\t\t}\n\t\t});\n\n\t\tif(default_print_format && default_print_format != \"Standard\") {\n\t\t\tvar index = print_format_list.indexOf(default_print_format);\n\t\t\tprint_format_list.splice(index, 1).sort();\n\t\t\tprint_format_list.unshift(default_print_format);\n\t\t}\n\n\t\treturn print_format_list;\n\t},\n\n\tsync_messages: function(doc) {\n\t\tif(doc.__messages) {\n\t\t\t$.extend(frappe._messages, doc.__messages);\n\t\t}\n\t},\n\n\tget_field_currency: function(df, doc) {\n\t\tvar currency = frappe.boot.sysdefaults.currency;\n\t\tif(!doc && cur_frm)\n\t\t\tdoc = cur_frm.doc;\n\n\t\tif(df && df.options) {\n\t\t\tif(doc && df.options.indexOf(\":\")!=-1) {\n\t\t\t\tvar options = df.options.split(\":\");\n\t\t\t\tif(options.length==3) {\n\t\t\t\t\t// get reference record e.g. Company\n\t\t\t\t\tvar docname = doc[options[1]];\n\t\t\t\t\tif(!docname && cur_frm) {\n\t\t\t\t\t\tdocname = cur_frm.doc[options[1]];\n\t\t\t\t\t}\n\t\t\t\t\tcurrency = frappe.model.get_value(options[0], docname, options[2]) ||\n\t\t\t\t\t\tfrappe.model.get_value(\":\" + options[0], docname, options[2]) ||\n\t\t\t\t\t\tcurrency;\n\t\t\t\t}\n\t\t\t} else if(doc && doc[df.options]) {\n\t\t\t\tcurrency = doc[df.options];\n\t\t\t} else if(cur_frm && cur_frm.doc[df.options]) {\n\t\t\t\tcurrency = cur_frm.doc[df.options];\n\t\t\t}\n\t\t}\n\t\treturn currency;\n\t},\n\n\tget_field_precision: function(df, doc) {\n\t\tvar precision = null;\n\t\tif (df && cint(df.precision)) {\n\t\t\tprecision = cint(df.precision);\n\t\t} else if(df && df.fieldtype === \"Currency\") {\n\t\t\tprecision = cint(frappe.defaults.get_default(\"currency_precision\"));\n\t\t\tif(!precision) {\n\t\t\t\tvar number_format = get_number_format();\n\t\t\t\tvar number_format_info = get_number_format_info(number_format);\n\t\t\t\tprecision = number_format_info.precision;\n\t\t\t}\n\t\t} else {\n\t\t\tprecision = cint(frappe.defaults.get_default(\"float_precision\")) || 3;\n\t\t}\n\t\treturn precision;\n\t},\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n$.extend(frappe.model, {\n\tdocinfo: {},\n\tsync: function(r) {\n\t\t/* docs:\n\t\t\textract docs, docinfo (attachments, comments, assignments)\n\t\t\tfrom incoming request and set in `locals` and `frappe.model.docinfo`\n\t\t*/\n\t\tvar isPlain;\n\t\tif(!r.docs && !r.docinfo) r = {docs:r};\n\n\t\tisPlain = $.isPlainObject(r.docs);\n\t\tif(isPlain) r.docs = [r.docs];\n\n\t\tif(r.docs) {\n\n\t\t\tfor(var i=0, l=r.docs.length; i<l; i++) {\n\t\t\t\tvar d = r.docs[i];\n\n\t\t\t\tif (locals[d.doctype] && locals[d.doctype][d.name]) {\n\t\t\t\t\t// update values\n\t\t\t\t\tfrappe.model.update_in_locals(d);\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.model.add_to_locals(d);\n\t\t\t\t}\n\n\t\t\t\td.__last_sync_on = new Date();\n\n\t\t\t\tif(d.doctype===\"DocType\") {\n\t\t\t\t\tfrappe.meta.sync(d);\n\t\t\t\t}\n\n\t\t\t\tif(d.localname) {\n\t\t\t\t\tfrappe.model.new_names[d.localname] = d.name;\n\t\t\t\t\t$(document).trigger('rename', [d.doctype, d.localname, d.name]);\n\t\t\t\t\tdelete locals[d.doctype][d.localname];\n\n\t\t\t\t\t// update docinfo to new dict keys\n\t\t\t\t\tif(i===0) {\n\t\t\t\t\t\tfrappe.model.docinfo[d.doctype][d.name] = frappe.model.docinfo[d.doctype][d.localname];\n\t\t\t\t\t\tfrappe.model.docinfo[d.doctype][d.localname] = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\n\n\t\t}\n\n\t\t// set docinfo (comments, assign, attachments)\n\t\tif(r.docinfo) {\n\t\t\tvar doc;\n\t\t\tif(r.docs) {\n\t\t\t\tdoc = r.docs[0];\n\t\t\t} else {\n\t\t\t\tif(cur_frm) doc = cur_frm.doc;\n\t\t\t}\n\t\t\tif(doc) {\n\t\t\t\tif(!frappe.model.docinfo[doc.doctype])\n\t\t\t\t\tfrappe.model.docinfo[doc.doctype] = {};\n\t\t\t\tfrappe.model.docinfo[doc.doctype][doc.name] = r.docinfo;\n\t\t\t}\n\t\t}\n\n\t\treturn r.docs;\n\t},\n\tadd_to_locals: function(doc) {\n\t\tif(!locals[doc.doctype])\n\t\t\tlocals[doc.doctype] = {};\n\n\t\tif(!doc.name && doc.__islocal) { // get name (local if required)\n\t\t\tif(!doc.parentfield) frappe.model.clear_doc(doc);\n\n\t\t\tdoc.name = frappe.model.get_new_name(doc.doctype);\n\n\t\t\tif(!doc.parentfield) frappe.provide(\"frappe.model.docinfo.\" + doc.doctype + \".\" + doc.name);\n\t\t}\n\n\t\tlocals[doc.doctype][doc.name] = doc;\n\n\t\t// add child docs to locals\n\t\tif(!doc.parentfield) {\n\t\t\tfor(var i in doc) {\n\t\t\t\tvar value = doc[i];\n\n\t\t\t\tif($.isArray(value)) {\n\t\t\t\t\tfor (var x=0, y=value.length; x < y; x++) {\n\t\t\t\t\t\tvar d = value[x];\n\n\t\t\t\t\t\tif(typeof d=='object' && !d.parent)\n\t\t\t\t\t\t\td.parent = doc.name;\n\n\t\t\t\t\t\tfrappe.model.add_to_locals(d);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tupdate_in_locals: function(doc) {\n\t\t// update values in the existing local doc instead of replacing\n\t\tlet local_doc = locals[doc.doctype][doc.name];\n\t\tlet clear_keys = function(source, target) {\n\t\t\tObject.keys(target).map(key => {\n\t\t\t\tif (source[key] == undefined) delete target[key];\n\t\t\t});\n\t\t}\n\n\t\tfor (let fieldname in doc) {\n\t\t\tlet df = frappe.meta.get_field(doc.doctype, fieldname);\n\t\t\tif (df && frappe.model.table_fields.includes(df.fieldtype)) {\n\t\t\t\t// table\n\t\t\t\tif (!(doc[fieldname] instanceof Array)) {\n\t\t\t\t\tdoc[fieldname] = [];\n\t\t\t\t}\n\n\t\t\t\tif (!(local_doc[fieldname] instanceof Array)) {\n\t\t\t\t\tlocal_doc[fieldname] = [];\n\t\t\t\t}\n\n\t\t\t\t// child table, override each row and append new rows if required\n\t\t\t\tfor (let i=0; i < doc[fieldname].length; i++ ) {\n\t\t\t\t\tlet d = doc[fieldname][i];\n\t\t\t\t\tlet local_d = local_doc[fieldname][i];\n\t\t\t\t\tif (local_d) {\n\t\t\t\t\t\t// deleted and added again\n\t\t\t\t\t\tif (!locals[d.doctype]) locals[d.doctype] = {};\n\n\t\t\t\t\t\tif (!d.name) {\n\t\t\t\t\t\t\t// incoming row is new, find a new name\n\t\t\t\t\t\t\td.name = frappe.model.get_new_name(doc.doctype);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if incoming row is not registered, register it\n\t\t\t\t\t\tif (!locals[d.doctype][d.name]) {\n\t\t\t\t\t\t\t// detach old key\n\t\t\t\t\t\t\tdelete locals[d.doctype][local_d.name];\n\n\t\t\t\t\t\t\t// re-attach with new name\n\t\t\t\t\t\t\tlocals[d.doctype][d.name] = local_d;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// row exists, just copy the values\n\t\t\t\t\t\tObject.assign(local_d, d);\n\t\t\t\t\t\tclear_keys(d, local_d);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocal_doc[fieldname].push(d);\n\t\t\t\t\t\tif (!d.parent) d.parent = doc.name;\n\t\t\t\t\t\tfrappe.model.add_to_locals(d);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// remove extra rows\n\t\t\t\tif (local_doc[fieldname].length > doc[fieldname].length) {\n\t\t\t\t\tfor (let i = doc[fieldname].length; i < local_doc[fieldname].length; i++) {\n\n\t\t\t\t\t\t// clear from local\n\t\t\t\t\t\tlet d = local_doc[fieldname][i];\n\t\t\t\t\t\tif (locals[d.doctype] && locals[d.doctype][d.name]) {\n\t\t\t\t\t\t\tdelete locals[d.doctype][d.name];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlocal_doc[fieldname].length = doc[fieldname].length;\n\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// literal\n\t\t\t\tlocal_doc[fieldname] = doc[fieldname];\n\t\t\t}\n\t\t}\n\n\t\t// clear keys on parent\n\t\tclear_keys(doc, local_doc);\n\t}\n\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.model\");\n\n$.extend(frappe.model, {\n\tnew_names: {},\n\tnew_name_count: {},\n\n\tget_new_doc: function(doctype, parent_doc, parentfield, with_mandatory_children) {\n\t\tfrappe.provide(\"locals.\" + doctype);\n\t\tvar doc = {\n\t\t\tdocstatus: 0,\n\t\t\tdoctype: doctype,\n\t\t\tname: frappe.model.get_new_name(doctype),\n\t\t\t__islocal: 1,\n\t\t\t__unsaved: 1,\n\t\t\towner: frappe.session.user\n\t\t};\n\t\tfrappe.model.set_default_values(doc, parent_doc);\n\n\t\tif(parent_doc) {\n\t\t\t$.extend(doc, {\n\t\t\t\tparent: parent_doc.name,\n\t\t\t\tparentfield: parentfield,\n\t\t\t\tparenttype: parent_doc.doctype,\n\t\t\t});\n\t\t\tif(!parent_doc[parentfield]) parent_doc[parentfield] = [];\n\t\t\tdoc.idx = parent_doc[parentfield].length + 1;\n\t\t\tparent_doc[parentfield].push(doc);\n\t\t} else {\n\t\t\tfrappe.provide(\"frappe.model.docinfo.\" + doctype + \".\" + doc.name);\n\t\t}\n\n\t\tfrappe.model.add_to_locals(doc);\n\n\t\tif(with_mandatory_children) {\n\t\t\tfrappe.model.create_mandatory_children(doc);\n\t\t}\n\n\t\tif (!parent_doc) {\n\t\t\tdoc.__run_link_triggers = 1;\n\t\t}\n\n\t\t// set the name if called from a link field\n\t\tif(frappe.route_options && frappe.route_options.name_field) {\n\n\t\t\tvar meta = frappe.get_meta(doctype);\n\t\t\t// set title field / name as name\n\t\t\tif(meta.autoname && meta.autoname.indexOf(\"field:\")!==-1) {\n\t\t\t\tdoc[meta.autoname.substr(6)] = frappe.route_options.name_field;\n\t\t\t} else if(meta.title_field) {\n\t\t\t\tdoc[meta.title_field] = frappe.route_options.name_field;\n\t\t\t}\n\n\n\t\t\tdelete frappe.route_options.name_field;\n\t\t}\n\n\t\t// set route options\n\t\tif(frappe.route_options && !doc.parent) {\n\t\t\t$.each(frappe.route_options, function(fieldname, value) {\n\t\t\t\tvar df = frappe.meta.has_field(doctype, fieldname);\n\t\t\t\tif(df && in_list(['Link', 'Data', 'Select', 'Dynamic Link'], df.fieldtype) && !df.no_copy) {\n\t\t\t\t\tdoc[fieldname]=value;\n\t\t\t\t}\n\t\t\t});\n\t\t\tfrappe.route_options = null;\n\t\t}\n\n\t\treturn doc;\n\t},\n\n\tmake_new_doc_and_get_name: function(doctype, with_mandatory_children) {\n\t\treturn frappe.model.get_new_doc(doctype, null, null, with_mandatory_children).name;\n\t},\n\n\tget_new_name: function(doctype) {\n\t\tvar cnt = frappe.model.new_name_count\n\t\tif(!cnt[doctype])\n\t\t\tcnt[doctype] = 0;\n\t\tcnt[doctype]++;\n\t\treturn __('New') + ' '+ __(doctype) + ' ' + cnt[doctype];\n\t},\n\n\tset_default_values: function(doc, parent_doc) {\n\t\tvar doctype = doc.doctype;\n\t\tvar docfields = frappe.meta.get_docfields(doctype);\n\t\tvar updated = [];\n\t\tfor(var fid=0;fid<docfields.length;fid++) {\n\t\t\tvar f = docfields[fid];\n\t\t\tif(!in_list(frappe.model.no_value_type, f.fieldtype) && doc[f.fieldname]==null) {\n\t\t\t\tvar v = !f.depends_on || doc[f.depends_on] ? frappe.model.get_default_value(f, doc, parent_doc) : null;\n\t\t\t\tif(v) {\n\t\t\t\t\tif(in_list([\"Int\", \"Check\"], f.fieldtype))\n\t\t\t\t\t\tv = cint(v);\n\t\t\t\t\telse if(in_list([\"Currency\", \"Float\"], f.fieldtype))\n\t\t\t\t\t\tv = flt(v);\n\n\t\t\t\t\tdoc[f.fieldname] = v;\n\t\t\t\t\tupdated.push(f.fieldname);\n\t\t\t\t} else if(f.fieldtype == \"Select\" && f.options && typeof f.options === 'string'\n\t\t\t\t\t&& !in_list([\"[Select]\", \"Loading...\"], f.options)) {\n\n\t\t\t\t\tdoc[f.fieldname] = f.options.split(\"\\n\")[0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn updated;\n\t},\n\n\tcreate_mandatory_children: function(doc) {\n\t\tvar meta = frappe.get_meta(doc.doctype);\n\t\tif(meta && meta.istable) return;\n\n\t\t// create empty rows for mandatory table fields\n\t\tfrappe.meta.get_docfields(doc.doctype).forEach(function(df) {\n\t\t\tif(df.fieldtype==='Table' && df.reqd) {\n\t\t\t\tfrappe.model.add_child(doc, df.fieldname);\n\t\t\t}\n\t\t});\n\t},\n\n\tget_default_value: function(df, doc, parent_doc) {\n\t\tvar user_default = \"\";\n\t\tvar user_permissions = frappe.defaults.get_user_permissions();\n\t\tlet allowed_records = [];\n\t\tlet default_doc = null;\n\t\tif(user_permissions) {\n\t\t\t({allowed_records, default_doc} = frappe.perm.filter_allowed_docs_for_doctype(user_permissions[df.options], doc.doctype));\n\t\t}\n\t\tvar meta = frappe.get_meta(doc.doctype);\n\t\tvar has_user_permissions = (df.fieldtype===\"Link\"\n\t\t\t&& !$.isEmptyObject(user_permissions)\n\t\t\t&& df.ignore_user_permissions != 1\n\t\t\t&& allowed_records.length);\n\n\t\t// don't set defaults for \"User\" link field using User Permissions!\n\t\tif (df.fieldtype===\"Link\" && df.options!==\"User\") {\n\t\t\t// 1 - look in user permissions for document_type==\"Setup\".\n\t\t\t// We don't want to include permissions of transactions to be used for defaults.\n\t\t\tif (df.linked_document_type===\"Setup\"\n\t\t\t\t&& has_user_permissions && default_doc) {\n\t\t\t\treturn default_doc;\n\t\t\t}\n\n\t\t\tif(!df.ignore_user_permissions) {\n\t\t\t\t// 2 - look in user defaults\n\t\t\t\tvar user_defaults = frappe.defaults.get_user_defaults(df.options);\n\t\t\t\tif (user_defaults && user_defaults.length===1) {\n\t\t\t\t\t// Use User Permission value when only when it has a single value\n\t\t\t\t\tuser_default = user_defaults[0];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!user_default) {\n\t\t\t\tuser_default = frappe.defaults.get_user_default(df.fieldname);\n\t\t\t}\n\n\t\t\tif(!user_default && df.remember_last_selected_value && frappe.boot.user.last_selected_values) {\n\t\t\t\tuser_default = frappe.boot.user.last_selected_values[df.options];\n\t\t\t}\n\n\t\t\tvar is_allowed_user_default = user_default &&\n\t\t\t\t(!has_user_permissions || allowed_records.includes(user_default));\n\n\t\t\t// is this user default also allowed as per user permissions?\n\t\t\tif (is_allowed_user_default) {\n\t\t\t\treturn user_default;\n\t\t\t}\n\t\t}\n\n\t\t// 3 - look in default of docfield\n\t\tif (df['default']) {\n\n\t\t\tif (df[\"default\"] == \"__user\" || df[\"default\"].toLowerCase() == \"user\") {\n\t\t\t\treturn frappe.session.user;\n\n\t\t\t} else if (df[\"default\"] == \"user_fullname\") {\n\t\t\t\treturn frappe.session.user_fullname;\n\n\t\t\t} else if (df[\"default\"] == \"Today\") {\n\t\t\t\treturn frappe.datetime.get_today();\n\n\t\t\t} else if ((df[\"default\"] || \"\").toLowerCase() === \"now\") {\n\t\t\t\treturn frappe.datetime.now_datetime();\n\n\t\t\t} else if (df[\"default\"][0]===\":\") {\n\t\t\t\tvar boot_doc = frappe.model.get_default_from_boot_docs(df, doc, parent_doc);\n\t\t\t\tvar is_allowed_boot_doc = !has_user_permissions || allowed_records.includes(boot_doc);\n\n\t\t\t\tif (is_allowed_boot_doc) {\n\t\t\t\t\treturn boot_doc;\n\t\t\t\t}\n\t\t\t} else if (df.fieldname===meta.title_field) {\n\t\t\t\t// ignore defaults for title field\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\t// is this default value is also allowed as per user permissions?\n\t\t\tvar is_allowed_default = !has_user_permissions || allowed_records.includes(df.default);\n\t\t\tif (df.fieldtype!==\"Link\" || df.options===\"User\" || is_allowed_default) {\n\t\t\t\treturn df[\"default\"];\n\t\t\t}\n\n\t\t} else if (df.fieldtype==\"Time\") {\n\t\t\treturn frappe.datetime.now_time();\n\t\t}\n\t},\n\n\tget_default_from_boot_docs: function(df, doc, parent_doc) {\n\t\t// set default from partial docs passed during boot like \":User\"\n\t\tif(frappe.get_list(df[\"default\"]).length > 0) {\n\t\t\tvar ref_fieldname = df[\"default\"].slice(1).toLowerCase().replace(\" \", \"_\");\n\t\t\tvar ref_value = parent_doc ?\n\t\t\t\tparent_doc[ref_fieldname] :\n\t\t\t\tfrappe.defaults.get_user_default(ref_fieldname);\n\t\t\tvar ref_doc = ref_value ? frappe.get_doc(df[\"default\"], ref_value) : null;\n\n\t\t\tif(ref_doc && ref_doc[df.fieldname]) {\n\t\t\t\treturn ref_doc[df.fieldname];\n\t\t\t}\n\t\t}\n\t},\n\n\tadd_child: function(parent_doc, doctype, parentfield, idx) {\n\t\t// if given doc, fieldname only\n\t\tif(arguments.length===2) {\n\t\t\tparentfield = doctype;\n\t\t\tdoctype = frappe.meta.get_field(parent_doc.doctype, parentfield).options;\n\t\t}\n\n\t\t// create row doc\n\t\tidx = idx ? idx - 0.1 : (parent_doc[parentfield] || []).length + 1;\n\n\t\tvar child = frappe.model.get_new_doc(doctype, parent_doc, parentfield);\n\t\tchild.idx = idx;\n\n\t\t// renum for fraction\n\t\tif(idx !== cint(idx)) {\n\t\t\tvar sorted = parent_doc[parentfield].sort(function(a, b) { return a.idx - b.idx; });\n\t\t\tfor(var i=0, j=sorted.length; i<j; i++) {\n\t\t\t\tvar d = sorted[i];\n\t\t\t\td.idx = i + 1;\n\t\t\t}\n\t\t}\n\n\t\tif (cur_frm && cur_frm.doc == parent_doc) cur_frm.dirty();\n\n\t\treturn child;\n\t},\n\n\tcopy_doc: function(doc, from_amend, parent_doc, parentfield) {\n\t\tvar no_copy_list = ['name','amended_from','amendment_date','cancel_reason'];\n\t\tvar newdoc = frappe.model.get_new_doc(doc.doctype, parent_doc, parentfield);\n\n\t\tfor(var key in doc) {\n\t\t\t// dont copy name and blank fields\n\t\t\tvar df = frappe.meta.get_docfield(doc.doctype, key);\n\n\t\t\tif (df && key.substr(0, 2) != '__'\n\t\t\t\t&& !in_list(no_copy_list, key)\n\t\t\t\t&& !(df && (!from_amend && cint(df.no_copy) == 1))) {\n\n\t\t\t\tvar value = doc[key] || [];\n\t\t\t\tif (frappe.model.table_fields.includes(df.fieldtype)) {\n\t\t\t\t\tfor (var i = 0, j = value.length; i < j; i++) {\n\t\t\t\t\t\tvar d = value[i];\n\t\t\t\t\t\tfrappe.model.copy_doc(d, from_amend, newdoc, df.fieldname);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnewdoc[key] = doc[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar user = frappe.session.user;\n\n\t\tnewdoc.__islocal = 1;\n\t\tnewdoc.docstatus = 0;\n\t\tnewdoc.owner = user;\n\t\tnewdoc.creation = '';\n\t\tnewdoc.modified_by = user;\n\t\tnewdoc.modified = '';\n\n\t\treturn newdoc;\n\t},\n\n\topen_mapped_doc: function(opts) {\n\t\tif (opts.frm && opts.frm.doc.__unsaved) {\n\t\t\tfrappe.throw(__(\"You have unsaved changes in this form. Please save before you continue.\"));\n\n\t\t} else if (!opts.source_name && opts.frm) {\n\t\t\topts.source_name = opts.frm.doc.name;\n\n\t\t// Allow opening a mapped doc without a source document name\n\t\t} else if (!opts.frm) {\n\t\t\topts.source_name = null;\n\t\t}\n\n\t\treturn frappe.call({\n\t\t\ttype: \"POST\",\n\t\t\tmethod: 'frappe.model.mapper.make_mapped_doc',\n\t\t\targs: {\n\t\t\t\tmethod: opts.method,\n\t\t\t\tsource_name: opts.source_name,\n\t\t\t\targs: opts.args || null,\n\t\t\t\tselected_children: opts.frm ? opts.frm.get_selected() : null\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tfrappe.model.sync(r.message);\n\t\t\t\t\tif(opts.run_link_triggers) {\n\t\t\t\t\t\tfrappe.get_doc(r.message.doctype, r.message.name).__run_link_triggers = true;\n\t\t\t\t\t}\n\t\t\t\t\tfrappe.set_route(\"Form\", r.message.doctype, r.message.name);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n});\n\nfrappe.create_routes = {};\nfrappe.new_doc = function (doctype, opts, init_callback) {\n\treturn new Promise(resolve => {\n\t\tif(opts && $.isPlainObject(opts)) {\n\t\t\tfrappe.route_options = opts;\n\t\t}\n\t\tfrappe.model.with_doctype(doctype, function() {\n\t\t\tif(frappe.create_routes[doctype]) {\n\t\t\t\tfrappe.set_route(frappe.create_routes[doctype])\n\t\t\t\t\t.then(() => resolve());\n\t\t\t} else {\n\t\t\t\tfrappe.ui.form.make_quick_entry(doctype, null, init_callback)\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\t\t});\n\n\t});\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.perm\");\n\n// backward compatibilty\nObject.assign(window, {\n\tREAD: \"read\",\n\tWRITE: \"write\",\n\tCREATE: \"create\",\n\tDELETE: \"delete\",\n\tSUBMIT: \"submit\",\n\tCANCEL: \"cancel\",\n\tAMEND: \"amend\",\n});\n\n$.extend(frappe.perm, {\n\trights: [\"read\", \"write\", \"create\", \"delete\", \"submit\", \"cancel\", \"amend\",\n\t\t\"report\", \"import\", \"export\", \"print\", \"email\", \"share\", \"set_user_permissions\"],\n\n\tdoctype_perm: {},\n\n\thas_perm: (doctype, permlevel, ptype, doc) => {\n\t\tif (!permlevel) permlevel = 0;\n\t\tif (!frappe.perm.doctype_perm[doctype]) {\n\t\t\tfrappe.perm.doctype_perm[doctype] = frappe.perm.get_perm(doctype);\n\t\t}\n\n\t\tlet perms = frappe.perm.doctype_perm[doctype];\n\n\t\tif (!perms || !perms[permlevel]) return false;\n\n\t\tlet perm = !!perms[permlevel][ptype];\n\n\t\tif (permlevel === 0 && perm && doc) {\n\t\t\tlet docinfo = frappe.model.get_docinfo(doctype, doc.name);\n\t\t\tif (docinfo && !docinfo.permissions[ptype])\n\t\t\t\tperm = false;\n\t\t}\n\n\t\treturn perm;\n\t},\n\n\tget_perm: (doctype, doc) => {\n\t\tlet perm = [{ read: 0 }];\n\n\t\tlet meta = frappe.get_doc(\"DocType\", doctype);\n\t\tconst user  = frappe.session.user;\n\n\t\tif (user === \"Administrator\" || frappe.user_roles.includes(\"Administrator\")) {\n\t\t\tperm[0].read = 1;\n\t\t}\n\n\t\tif (!meta) return perm;\n\n\t\tfrappe.perm.build_role_permissions(perm, meta);\n\n\t\tif (doc) {\n\t\t\t// apply user permissions via docinfo (which is processed server-side)\n\t\t\tlet docinfo = frappe.model.get_docinfo(doctype, doc.name);\n\t\t\tif (docinfo && docinfo.permissions) {\n\t\t\t\tObject.keys(docinfo.permissions).forEach((ptype) => {\n\t\t\t\t\tperm[0][ptype] = docinfo.permissions[ptype];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// if owner\n\t\t\tif (!$.isEmptyObject(perm[0].if_owner)) {\n\t\t\t\tif (doc.owner === user) {\n\t\t\t\t\t$.extend(perm[0], perm[0].if_owner);\n\t\t\t\t} else {\n\t\t\t\t\t// not owner, remove permissions\n\t\t\t\t\t$.each(perm[0].if_owner, (ptype) => {\n\t\t\t\t\t\tif (perm[0].if_owner[ptype]) {\n\t\t\t\t\t\t\tperm[0][ptype] = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// apply permissions from shared\n\t\t\tif (docinfo && docinfo.shared) {\n\t\t\t\tfor (let i = 0; i < docinfo.shared.length; i++) {\n\t\t\t\t\tlet s = docinfo.shared[i];\n\t\t\t\t\tif (s.user === user) {\n\t\t\t\t\t\tperm[0][\"read\"] = perm[0][\"read\"] || s.read;\n\t\t\t\t\t\tperm[0][\"write\"] = perm[0][\"write\"] || s.write;\n\t\t\t\t\t\tperm[0][\"share\"] = perm[0][\"share\"] || s.share;\n\n\t\t\t\t\t\tif (s.read) {\n\t\t\t\t\t\t\t// also give print, email permissions if read\n\t\t\t\t\t\t\t// and these permissions exist at level [0]\n\t\t\t\t\t\t\tperm[0].email = frappe.boot.user.can_email.indexOf(doctype) !== -1 ? 1 : 0;\n\t\t\t\t\t\t\tperm[0].print = frappe.boot.user.can_print.indexOf(doctype) !== -1 ? 1 : 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif (frappe.model.can_read(doctype) && !perm[0].read) {\n\t\t\t// read via sharing\n\t\t\tperm[0].read = 1;\n\t\t}\n\n\t\treturn perm;\n\t},\n\n\tbuild_role_permissions: (perm, meta) => {\n\t\t// Returns a `dict` of evaluated Role Permissions\n\t\t$.each(meta.permissions || [], (i, p) => {\n\t\t\t// if user has this role\n\t\t\tif (frappe.user_roles.includes(p.role)) {\n\t\t\t\tlet permlevel = cint(p.permlevel);\n\t\t\t\tif (!perm[permlevel]) {\n\t\t\t\t\tperm[permlevel] = {};\n\t\t\t\t\tperm[permlevel][\"permlevel\"] = permlevel\n\t\t\t\t}\n\n\t\t\t\t$.each(frappe.perm.rights, (i, key) => {\n\t\t\t\t\tperm[permlevel][key] = perm[permlevel][key] || (p[key] || 0);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// remove values with 0\n\t\t$.each(perm[0], (key, val) => {\n\t\t\tif (!val) {\n\t\t\t\tdelete perm[0][key];\n\t\t\t}\n\t\t});\n\n\t\t$.each(perm, (i, v) => {\n\t\t\tif (v === undefined) {\n\t\t\t\tperm[i] = {};\n\t\t\t}\n\t\t});\n\t},\n\n\tget_match_rules: (doctype, ptype) => {\n\t\tlet match_rules = [];\n\n\t\tif (!ptype) ptype = \"read\";\n\n\t\tlet perm = frappe.perm.get_perm(doctype);\n\n\t\tlet user_permissions = frappe.defaults.get_user_permissions();\n\n\t\tif (user_permissions && !$.isEmptyObject(user_permissions)) {\n\t\t\tlet rules = {};\n\t\t\tlet fields_to_check = frappe.meta.get_fields_to_check_permissions(doctype);\n\t\t\t$.each(fields_to_check, (i, df) => {\n\t\t\t\tconst user_permissions_for_doctype = user_permissions[df.options] || [];\n\t\t\t\tconst allowed_records = frappe.perm.get_allowed_docs_for_doctype(user_permissions_for_doctype, doctype);\n\t\t\t\tif (allowed_records.length) {\n\t\t\t\t\trules[df.label] = allowed_records;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!$.isEmptyObject(rules)) {\n\t\t\t\tmatch_rules.push(rules);\n\t\t\t}\n\t\t}\n\n\t\tif (perm[0].if_owner && perm[0].read) {\n\t\t\tmatch_rules.push({ \"Owner\": frappe.session.user });\n\t\t}\n\t\treturn match_rules;\n\t},\n\n\tget_field_display_status: (df, doc, perm, explain) => {\n\t\t// returns the display status of a particular field\n\t\t// returns one of \"Read\", \"Write\" or \"None\"\n\t\tif (!perm && doc) {\n\t\t\tperm = frappe.perm.get_perm(doc.doctype, doc);\n\t\t}\n\n\t\tif (!perm) {\n\t\t\treturn (df && (cint(df.hidden) || cint(df.hidden_due_to_dependency))) ? \"None\" : \"Write\";\n\t\t}\n\n\t\tif (!df.permlevel) df.permlevel = 0;\n\t\tlet p = perm[df.permlevel];\n\t\tlet status = \"None\";\n\n\t\t// permission\n\t\tif (p) {\n\t\t\tif (p.write && !df.disabled) {\n\t\t\t\tstatus = \"Write\";\n\t\t\t} else if (p.read) {\n\t\t\t\tstatus = \"Read\";\n\t\t\t}\n\t\t}\n\t\tif (explain) console.log(\"By Permission:\" + status);\n\n\t\t// hidden\n\t\tif (cint(df.hidden)) status = \"None\";\n\t\tif (explain) console.log(\"By Hidden:\" + status);\n\n\t\t// hidden due to dependency\n\t\tif (cint(df.hidden_due_to_dependency)) status = \"None\";\n\t\tif (explain) console.log(\"By Hidden Due To Dependency:\" + status);\n\n\t\tif (!doc) {\n\t\t\treturn status;\n\t\t}\n\n\t\t// submit\n\t\tif (status === \"Write\" && cint(doc.docstatus) > 0) status = \"Read\";\n\t\tif (explain) console.log(\"By Submit:\" + status);\n\n\t\t// allow on submit\n\t\t// let allow_on_submit = df.fieldtype===\"Table\" ? 0 : cint(df.allow_on_submit);\n\t\tlet allow_on_submit = cint(df.allow_on_submit);\n\t\tif (status === \"Read\" && allow_on_submit && cint(doc.docstatus) === 1 && p.write) {\n\t\t\tstatus = \"Write\";\n\t\t}\n\t\tif (explain) console.log(\"By Allow on Submit:\" + status);\n\n\t\t// workflow state\n\t\tif (status === \"Read\" && cur_frm && cur_frm.state_fieldname) {\n\t\t\t// fields updated by workflow must be read-only\n\t\t\tif (cint(cur_frm.read_only) ||\n\t\t\t\tin_list(cur_frm.states.update_fields, df.fieldname) ||\n\t\t\t\tdf.fieldname == cur_frm.state_fieldname) {\n\t\t\t\tstatus = \"Read\";\n\t\t\t}\n\t\t}\n\t\tif (explain) console.log(\"By Workflow:\" + status);\n\n\t\t// read only field is checked\n\t\tif (status === \"Write\" && cint(df.read_only)) {\n\t\t\tstatus = \"Read\";\n\t\t}\n\t\tif (explain) console.log(\"By Read Only:\" + status);\n\n\t\tif (status === \"Write\" && df.set_only_once && !doc.__islocal) {\n\t\t\tstatus = \"Read\";\n\t\t}\n\t\tif (explain) console.log(\"By Set Only Once:\" + status);\n\n\t\treturn status;\n\t},\n\n\tis_visible: (df, doc, perm) => {\n\t\tif (typeof df === 'string') {\n\t\t\t// df is fieldname\n\t\t\tdf = frappe.meta.get_docfield(doc.doctype, df, doc.parent || doc.name);\n\t\t}\n\n\t\tlet status = frappe.perm.get_field_display_status(df, doc, perm);\n\n\t\treturn status === \"None\" ? false : true;\n\t},\n\n\tget_allowed_docs_for_doctype: (user_permissions, doctype) => {\n\t\t// returns docs from the list of user permissions that are allowed under provided doctype\n\t\treturn frappe.perm.filter_allowed_docs_for_doctype(user_permissions, doctype, false);\n\t},\n\n\tfilter_allowed_docs_for_doctype: (user_permissions, doctype, with_default_doc=true) => {\n\t\t// returns docs from the list of user permissions that are allowed under provided doctype\n\t\t// also returns default doc when with_default_doc is set\n\t\tconst filtered_perms = (user_permissions || []).filter(perm => {\n\t\t\treturn (perm.applicable_for === doctype || !perm.applicable_for);\n\t\t});\n\n\t\tconst allowed_docs = (filtered_perms).map(perm => perm.doc);\n\n\t\tif (with_default_doc) {\n\t\t\tconst default_doc = allowed_docs.length === 1 ? allowed_docs : filtered_perms\n\t\t\t\t.filter(perm => perm.is_default)\n\t\t\t\t.map(record => record.doc);\n\n\t\t\treturn {\n\t\t\t\tallowed_records: allowed_docs,\n\t\t\t\tdefault_doc: default_doc[0]\n\t\t\t};\n\t\t} else {\n\t\t\treturn allowed_docs;\n\t\t}\n\t}\n});","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.workflow\");\n\nfrappe.workflow = {\n\tstate_fields: {},\n\tworkflows: {},\n\tsetup: function(doctype) {\n\t\tvar wf = frappe.get_list(\"Workflow\", {document_type: doctype});\n\t\tif(wf.length) {\n\t\t\tfrappe.workflow.workflows[doctype] = wf[0];\n\t\t\tfrappe.workflow.state_fields[doctype] = wf[0].workflow_state_field;\n\t\t} else {\n\t\t\tfrappe.workflow.state_fields[doctype] = null;\n\t\t}\n\t},\n\tget_state_fieldname: function(doctype) {\n\t\tif(frappe.workflow.state_fields[doctype]===undefined) {\n\t\t\tfrappe.workflow.setup(doctype);\n\t\t}\n\t\treturn frappe.workflow.state_fields[doctype];\n\t},\n\tget_default_state: function(doctype, docstatus) {\n\t\tfrappe.workflow.setup(doctype);\n\t\tvar value = null;\n\t\t$.each(frappe.workflow.workflows[doctype].states, function(i, workflow_state) {\n\t\t\tif(cint(workflow_state.doc_status)===cint(docstatus)) {\n\t\t\t\tvalue = workflow_state.state;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn value;\n\t},\n\tget_transitions: function(doc) {\n\t\tfrappe.workflow.setup(doc.doctype);\n\t\treturn frappe.xcall('frappe.model.workflow.get_transitions', {doc: doc});\n\t},\n\tget_document_state: function(doctype, state) {\n\t\tfrappe.workflow.setup(doctype);\n\t\treturn frappe.get_children(frappe.workflow.workflows[doctype], \"states\", {state:state})[0];\n\t},\n\tis_self_approval_enabled: function(doctype) {\n\t\treturn frappe.workflow.workflows[doctype].allow_self_approval;\n\t},\n\tis_read_only: function(doctype, name) {\n\t\tvar state_fieldname = frappe.workflow.get_state_fieldname(doctype);\n\t\tif(state_fieldname) {\n\t\t\tvar doc = locals[doctype][name];\n\t\t\tif(!doc)\n\t\t\t\treturn false;\n\t\t\tif(doc.__islocal)\n\t\t\t\treturn false;\n\n\t\t\tvar state = doc[state_fieldname] ||\n\t\t\t\tfrappe.workflow.get_default_state(doctype, doc.docstatus);\n\n\t\t\tvar allow_edit = state ? frappe.workflow.get_document_state(doctype, state) && frappe.workflow.get_document_state(doctype, state).allow_edit : null;\n\n\t\t\tif(!frappe.user_roles.includes(allow_edit)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tget_update_fields: function(doctype) {\n\t\tvar update_fields = $.unique($.map(frappe.workflow.workflows[doctype].states || [],\n\t\t\tfunction(d) {\n\t\t\t\treturn d.update_field;\n\t\t\t}));\n\t\treturn update_fields;\n\t}\n};\n","frappe.provide('frappe.model.user_settings');\n\n$.extend(frappe.model.user_settings, {\n\tget: function(doctype) {\n\t\treturn frappe.call('frappe.model.utils.user_settings.get', { doctype })\n\t\t\t.then(r => JSON.parse(r.message || '{}'));\n\t},\n\tsave: function(doctype, key, value) {\n\t\tconst old_user_settings = frappe.model.user_settings[doctype] || {};\n\t\tconst new_user_settings = $.extend(true, {}, old_user_settings); // deep copy\n\n\t\tif ($.isPlainObject(value)) {\n\t\t\tnew_user_settings[key] = new_user_settings[key] || {};\n\t\t\t$.extend(new_user_settings[key], value);\n\t\t} else {\n\t\t\tnew_user_settings[key] = value;\n\t\t}\n\n\t\tconst a = JSON.stringify(old_user_settings);\n\t\tconst b = JSON.stringify(new_user_settings);\n\t\tif (a !== b) {\n\t\t\t// update if changed\n\t\t\treturn this.update(doctype, new_user_settings);\n\t\t}\n\t\treturn Promise.resolve();\n\t},\n\tremove: function(doctype, key) {\n\t\tvar user_settings = frappe.model.user_settings[doctype] || {};\n\t\tdelete user_settings[key];\n\n\t\treturn this.update(doctype, user_settings);\n\t},\n\tupdate: function(doctype, user_settings) {\n\t\treturn frappe.call({\n\t\t\tmethod: 'frappe.model.utils.user_settings.save',\n\t\t\targs: {\n\t\t\t\tdoctype: doctype,\n\t\t\t\tuser_settings: user_settings\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tfrappe.model.user_settings[doctype] = r.message;\n\t\t\t}\n\t\t});\n\t}\n});\n\nfrappe.get_user_settings = function(doctype, key) {\n\tvar settings = frappe.model.user_settings[doctype] || {};\n\tif(key) {\n\t\tsettings = settings[key] || {};\n\t}\n\treturn settings;\n}","!function(a){\"use strict\";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c=\"\";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d=\"0123456789abcdef\",e=\"\";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}\"function\"==typeof define&&define.amd?define(function(){return t}):a.md5=t}(this);","\n\nfrappe.user_info = function(uid) {\n\tif(!uid)\n\t\tuid = frappe.session.user;\n\n\tif(uid.toLowerCase()===\"bot\") {\n\t\treturn {\n\t\t\tfullname: __(\"Bot\"),\n\t\t\timage: \"/assets/frappe/images/ui/bot.png\",\n\t\t\tabbr: \"B\"\n\t\t};\n\t}\n\n\tif(!(frappe.boot.user_info && frappe.boot.user_info[uid])) {\n\t\tvar user_info = {\n\t\t\tfullname: frappe.utils.capitalize(uid.split(\"@\")[0]) || \"Unknown\"\n\t\t};\n\t} else {\n\t\tvar user_info = frappe.boot.user_info[uid];\n\t}\n\n\tuser_info.abbr = frappe.get_abbr(user_info.fullname);\n\tuser_info.color = frappe.get_palette(user_info.fullname);\n\n\treturn user_info;\n};\n\nfrappe.ui.set_user_background = function(src, selector, style) {\n\tif(!selector) selector = \"#page-desktop\";\n\tif(!style) style = \"Fill Screen\";\n\tif(src) {\n\t\tif (window.cordova && src.indexOf(\"http\") === -1) {\n\t\t\tsrc = frappe.base_url + src;\n\t\t}\n\t\tvar background = repl('background: url(\"%(src)s\") center center;', {src: src});\n\t} else {\n\t\tvar background = \"background-color: #4B4C9D;\";\n\t}\n\n\tfrappe.dom.set_style(repl('%(selector)s { \\\n\t\t%(background)s \\\n\t\tbackground-attachment: fixed; \\\n\t\t%(style)s \\\n\t}', {\n\t\tselector:selector,\n\t\tbackground:background,\n\t\tstyle: style===\"Fill Screen\" ? \"background-size: cover;\" : \"\"\n\t}));\n};\n\nfrappe.provide('frappe.user');\n\n$.extend(frappe.user, {\n\tname: 'Guest',\n\tfull_name: function(uid) {\n\t\treturn uid === frappe.session.user ?\n\t\t\t__(\"You\") :\n\t\t\tfrappe.user_info(uid).fullname;\n\t},\n\timage: function(uid) {\n\t\treturn frappe.user_info(uid).image;\n\t},\n\tabbr: function(uid) {\n\t\treturn frappe.user_info(uid).abbr;\n\t},\n\thas_role: function(rl) {\n\t\tif(typeof rl=='string')\n\t\t\trl = [rl];\n\t\tfor(var i in rl) {\n\t\t\tif((frappe.boot ? frappe.boot.user.roles : ['Guest']).indexOf(rl[i])!=-1)\n\t\t\t\treturn true;\n\t\t}\n\t},\n\tget_desktop_items: function() {\n\t\t// hide based on permission\n\t\tvar modules_list = $.map(frappe.boot.allowed_modules, function(icon) {\n\t\t\tvar m = icon.module_name;\n\t\t\tvar type = frappe.modules[m] && frappe.modules[m].type;\n\n\t\t\tif(frappe.boot.user.allow_modules.indexOf(m) === -1) return null;\n\n\t\t\tvar ret = null;\n\t\t\tif (type === \"module\") {\n\t\t\t\tif(frappe.boot.user.allow_modules.indexOf(m)!=-1 || frappe.modules[m].is_help)\n\t\t\t\t\tret = m;\n\t\t\t} else if (type === \"page\") {\n\t\t\t\tif(frappe.boot.allowed_pages.indexOf(frappe.modules[m].link)!=-1)\n\t\t\t\t\tret = m;\n\t\t\t} else if (type === \"list\") {\n\t\t\t\tif(frappe.model.can_read(frappe.modules[m]._doctype))\n\t\t\t\t\tret = m;\n\t\t\t} else if (type === \"view\") {\n\t\t\t\tret = m;\n\t\t\t} else if (type === \"setup\") {\n\t\t\t\tif(frappe.user.has_role(\"System Manager\") || frappe.user.has_role(\"Administrator\"))\n\t\t\t\t\tret = m;\n\t\t\t} else {\n\t\t\t\tret = m;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t});\n\n\t\treturn modules_list;\n\t},\n\n\tis_report_manager: function() {\n\t\treturn frappe.user.has_role(['Administrator', 'System Manager', 'Report Manager']);\n\t},\n\n\tget_formatted_email: function(email) {\n\t\tvar fullname = frappe.user.full_name(email);\n\n\t\tif (!fullname) {\n\t\t\treturn email;\n\t\t} else {\n\t\t\t// to quote or to not\n\t\t\tvar quote = '';\n\n\t\t\t// only if these special characters are found\n\t\t\t// why? To make the output same as that in python!\n\t\t\tif (fullname.search(/[\\[\\]\\\\()<>@,:;\".]/) !== -1) {\n\t\t\t\tquote = '\"';\n\t\t\t}\n\n\t\t\treturn repl('%(quote)s%(fullname)s%(quote)s <%(email)s>', {\n\t\t\t\tfullname: fullname,\n\t\t\t\temail: email,\n\t\t\t\tquote: quote\n\t\t\t});\n\t\t}\n\t},\n\n\tget_emails: ( ) => {\n\t\treturn Object.keys(frappe.boot.user_info).map(key => frappe.boot.user_info[key].email);\n\t},\n\n\t/* Normally frappe.user is an object\n\t * having properties and methods.\n\t * But in the following case\n\t *\n\t * if (frappe.user === 'Administrator')\n\t *\n\t * frappe.user will cast to a string\n\t * returning frappe.user.name\n\t */\n\ttoString: function() {\n\t\treturn this.name;\n\t}\n});\n\nfrappe.session_alive = true;\n$(document).bind('mousemove', function() {\n\tif(frappe.session_alive===false) {\n\t\t$(document).trigger(\"session_alive\");\n\t}\n\tfrappe.session_alive = true;\n\tif(frappe.session_alive_timeout)\n\t\tclearTimeout(frappe.session_alive_timeout);\n\tfrappe.session_alive_timeout = setTimeout('frappe.session_alive=false;', 30000);\n});","// common file between desk and website\n\nfrappe.avatar = function(user, css_class, title) {\n\tif(user) {\n\t\t// desk\n\t\tvar user_info = frappe.user_info(user);\n\t} else {\n\t\t// website\n\t\tuser_info = {\n\t\t\timage: frappe.get_cookie(\"user_image\"),\n\t\t\tfullname: frappe.get_cookie(\"full_name\"),\n\t\t\tabbr: frappe.get_abbr(frappe.get_cookie(\"full_name\")),\n\t\t\tcolor: frappe.get_palette(frappe.get_cookie(\"full_name\"))\n\t\t}\n\t}\n\n\tif(!title) {\n\t\ttitle = user_info.fullname;\n\t}\n\n\tif(!css_class) {\n\t\tcss_class = \"avatar-small\";\n\t}\n\n\tif(user_info.image) {\n\n\t\tvar image = (window.cordova && user_info.image.indexOf('http')===-1) ?\n\t\t\tfrappe.base_url + user_info.image : user_info.image;\n\n\t\treturn `<span class=\"avatar ${css_class}\" title=\"${title}\">\n\t\t\t\t<span class=\"avatar-frame\" style='background-image: url(\"${image}\")'\n\t\t\t\t\ttitle=\"${title}\"></span>\n\t\t\t</span>`;\n\t} else {\n\t\tvar abbr = user_info.abbr;\n\t\tif(css_class==='avatar-small' || css_class=='avatar-xs') {\n\t\t\tabbr = abbr.substr(0, 1);\n\t\t}\n\t\treturn `<span class=\"avatar ${css_class}\" title=\"${title}\">\n\t\t\t<div class=\"standard-image\" style=\"background-color: ${user_info.color};\">\n\t\t\t\t${abbr}</div>\n\t\t</span>`\n\t}\n}\n\nfrappe.ui.scroll = function(element, animate, additional_offset) {\n\tvar header_offset = $(\".navbar\").height() + $(\".page-head\").height();\n\tvar top = $(element).offset().top - header_offset - cint(additional_offset);\n\tif (animate) {\n\t\t$(\"html, body\").animate({ scrollTop: top });\n\t} else {\n\t\t$(window).scrollTop(top);\n\t}\n};\n\nfrappe.get_palette = function(txt) {\n\treturn '#fafbfc';\n\t// //return '#8D99A6';\n\t// if(txt==='Administrator') return '#36414C';\n\t// // get color palette selection from md5 hash\n\t// var idx = cint((parseInt(md5(txt).substr(4,2), 16) + 1) / 5.33);\n\t// if(idx > 47) idx = 47;\n\t// return frappe.palette[idx][0]\n}\n\nfrappe.get_abbr = function(txt, max_length) {\n\tif (!txt) return \"\";\n\tvar abbr = \"\";\n\t$.each(txt.split(\" \"), function(i, w) {\n\t\tif (abbr.length >= (max_length || 2)) {\n\t\t\t// break\n\t\t\treturn false;\n\n\t\t} else if (!w.trim().length) {\n\t\t\t// continue\n\t\t\treturn true;\n\t\t}\n87\n\t\tabbr += w.trim()[0];\n\t});\n\n\treturn abbr || \"?\";\n}\n\nfrappe.gravatars = {};\nfrappe.get_gravatar = function(email_id, size = 0) {\n\tvar param = size ? ('s=' + size) : 'd=retro';\n\tif(!frappe.gravatars[email_id]) {\n\t\t// TODO: check if gravatar exists\n\t\tfrappe.gravatars[email_id] = \"https://secure.gravatar.com/avatar/\" + md5(email_id) + \"?\" + param;\n\t}\n\treturn frappe.gravatars[email_id];\n}\n\n// string commons\n\nwindow.repl =function repl(s, dict) {\n\tif(s==null)return '';\n\tfor(var key in dict) {\n\t\ts = s.split(\"%(\"+key+\")s\").join(dict[key]);\n\t}\n\treturn s;\n}\n\nwindow.replace_all = function(s, t1, t2) {\n\treturn s.split(t1).join(t2);\n}\n\nwindow.strip_html = function(txt) {\n\treturn txt.replace(/<[^>]*>/g, \"\");\n}\n\nwindow.strip = function(s, chars) {\n\tif (s) {\n\t\tvar s= lstrip(s, chars)\n\t\ts = rstrip(s, chars);\n\t\treturn s;\n\t}\n}\n\nwindow.lstrip = function lstrip(s, chars) {\n\tif(!chars) chars = ['\\n', '\\t', ' '];\n\t// strip left\n\tvar first_char = s.substr(0,1);\n\twhile(in_list(chars, first_char)) {\n\t\tvar s = s.substr(1);\n\t\tfirst_char = s.substr(0,1);\n\t}\n\treturn s;\n}\n\nwindow.rstrip = function(s, chars) {\n\tif(!chars) chars = ['\\n', '\\t', ' '];\n\tvar last_char = s.substr(s.length-1);\n\twhile(in_list(chars, last_char)) {\n\t\tvar s = s.substr(0, s.length-1);\n\t\tlast_char = s.substr(s.length-1);\n\t}\n\treturn s;\n}\n\nfrappe.get_cookie = function getCookie(name) {\n\treturn frappe.get_cookies()[name];\n}\n\nfrappe.get_cookies = function getCookies() {\n\tvar c = document.cookie, v = 0, cookies = {};\n\tif (document.cookie.match(/^\\s*\\$Version=(?:\"1\"|1);\\s*(.*)/)) {\n\t\tc = RegExp.$1;\n\t\tv = 1;\n\t}\n\tif (v === 0) {\n\t\tc.split(/[,;]/).map(function(cookie) {\n\t\t\tvar parts = cookie.split(/=/, 2),\n\t\t\t\tname = decodeURIComponent(parts[0].trimLeft()),\n\t\t\t\tvalue = parts.length > 1 ? decodeURIComponent(parts[1].trimRight()) : null;\n\t\t\tif(value && value.charAt(0)==='\"') {\n\t\t\t\tvalue = value.substr(1, value.length-2);\n\t\t\t}\n\t\t\tcookies[name] = value;\n\t\t});\n\t} else {\n\t\tc.match(/(?:^|\\s+)([!#$%&'*+\\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\\-.0-9A-Z^`a-z|~]*|\"(?:[\\x20-\\x7E\\x80\\xFF]|\\\\[\\x00-\\x7F])*\")(?=\\s*[,;]|$)/g).map(function($0, $1) {\n\t\t\tvar name = $0,\n\t\t\t\tvalue = $1.charAt(0) === '\"'\n\t\t\t\t\t\t? $1.substr(1, -1).replace(/\\\\(.)/g, \"$1\")\n\t\t\t\t\t\t: $1;\n\t\t\tcookies[name] = value;\n\t\t});\n\t}\n\treturn cookies;\n}\n\nfrappe.palette = [\n\t['#FFC4C4', 0],\n\t['#FFE8CD', 0],\n\t['#FFD2C2', 0],\n\t['#FF8989', 0],\n\t['#FFD19C', 0],\n\t['#FFA685', 0],\n\t['#FF4D4D', 1],\n\t['#FFB868', 0],\n\t['#FF7846', 1],\n\t['#A83333', 1],\n\t['#A87945', 1],\n\t['#A84F2E', 1],\n\t['#D2D2FF', 0],\n\t['#F8D4F8', 0],\n\t['#DAC7FF', 0],\n\t['#A3A3FF', 0],\n\t['#F3AAF0', 0],\n\t['#B592FF', 0],\n\t['#7575FF', 0],\n\t['#EC7DEA', 0],\n\t['#8E58FF', 1],\n\t['#4D4DA8', 1],\n\t['#934F92', 1],\n\t['#5E3AA8', 1],\n\t['#EBF8CC', 0],\n\t['#FFD7D7', 0],\n\t['#D2F8ED', 0],\n\t['#D9F399', 0],\n\t['#FFB1B1', 0],\n\t['#A4F3DD', 0],\n\t['#C5EC63', 0],\n\t['#FF8989', 1],\n\t['#77ECCA', 0],\n\t['#7B933D', 1],\n\t['#A85B5B', 1],\n\t['#49937E', 1],\n\t['#FFFACD', 0],\n\t['#D2F1FF', 0],\n\t['#CEF6D1', 0],\n\t['#FFF69C', 0],\n\t['#A6E4FF', 0],\n\t['#9DECA2', 0],\n\t['#FFF168', 0],\n\t['#78D6FF', 0],\n\t['#6BE273', 0],\n\t['#A89F45', 1],\n\t['#4F8EA8', 1],\n\t['#428B46', 1]\n]\n\nfrappe.is_mobile = function() {\n\treturn $(document).width() < 768;\n}\n\nfrappe.utils.xss_sanitise = function (string, options) {\n\t// Reference - https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet\n\tlet sanitised = string; // un-sanitised string.\n\tconst DEFAULT_OPTIONS = {\n\t\tstrategies: ['html', 'js'] // use all strategies.\n\t}\n\tconst HTML_ESCAPE_MAP = {\n\t\t'<': '&lt',\n\t\t'>': '&gt',\n\t\t'\"': '&quot',\n\t\t\"'\": '&#x27',\n\t\t'/': '&#x2F'\n\t};\n\tconst REGEX_SCRIPT     = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi; // used in jQuery 1.7.2 src/ajax.js Line 14\n\toptions          \t   = Object.assign({ }, DEFAULT_OPTIONS, options); // don't deep copy, immutable beauty.\n\n\t// Rule 1\n\tif ( options.strategies.includes('html') ) {\n\t\tfor (let char in HTML_ESCAPE_MAP) {\n\t\t\tconst escape = HTML_ESCAPE_MAP[char];\n\t\t\tconst regex = new RegExp(char, \"g\");\n\t\t\tsanitised = sanitised.replace(regex, escape);\n\t\t}\n\t}\n\n\t// Rule 3 - TODO: Check event handlers?\n\tif ( options.strategies.includes('js') ) {\n\t\tsanitised = sanitised.replace(REGEX_SCRIPT, \"\");\n\t}\n\n\treturn sanitised;\n}","// for testing\nfrappe.click_button = function(text, idx) {\n\tlet container = '';\n\tif(typeof idx === 'string') {\n\t\tcontainer = idx + ' ';\n\t\tidx = 0;\n\t}\n\tlet element = $(`${container}.btn:contains(\"${text}\"):visible`);\n\tif(!element.length) {\n\t\tthrow `did not find any button containing ${text}`;\n\t}\n\telement.get(idx || 0).click();\n\treturn frappe.timeout(0.5);\n};\n\nfrappe.click_link = function(text, idx) {\n\tlet element = $(`a:contains(\"${text}\"):visible`);\n\tif(!element.length) {\n\t\tthrow `did not find any link containing ${text}`;\n\t}\n\telement.get(idx || 0).click();\n\treturn frappe.timeout(0.5);\n};\n\nfrappe.click_element = function(selector, idx) {\n\t// Selector by class name like $(`.cart-items`)\n\tlet element = $(`${selector}`);\n\tif(!element.length) {\n\t\tthrow `did not find any link containing ${selector}`;\n\t}\n\telement.get(idx || 0).click();\n\treturn frappe.timeout(0.5);\n};\n\nfrappe.set_control= function(fieldname, value) {\n\tlet control = $(`.form-control[data-fieldname=\"${fieldname}\"]:visible`);\n\tif(!control.length) {\n\t\tthrow `did not find any control with fieldname ${fieldname}`;\n\t}\n\tcontrol.val(value).trigger('change');\n\treturn frappe.timeout(0.5);\n};\n\nfrappe.click_check = function(label, idx) {\n\tlet check = $(`.checkbox:contains(\"${label}\") input`);\n\tif(!check.length) {\n\t\tthrow `did not find any checkbox with label ${label}`;\n\t}\n\tcheck.get(idx || 0).click();\n\treturn frappe.timeout(0.5);\n};",";/*! showdown v 1.9.0 - 10-11-2018 */\r\n(function(){\r\n/**\n * Created by Tivie on 13-07-2015.\n */\n\nfunction getDefaultOpts (simple) {\n  'use strict';\n\n  var defaultOptions = {\n    omitExtraWLInCodeBlocks: {\n      defaultValue: false,\n      describe: 'Omit the default extra whiteline added to code blocks',\n      type: 'boolean'\n    },\n    noHeaderId: {\n      defaultValue: false,\n      describe: 'Turn on/off generated header id',\n      type: 'boolean'\n    },\n    prefixHeaderId: {\n      defaultValue: false,\n      describe: 'Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic \\'section-\\' prefix',\n      type: 'string'\n    },\n    rawPrefixHeaderId: {\n      defaultValue: false,\n      describe: 'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the \" char is used in the prefix)',\n      type: 'boolean'\n    },\n    ghCompatibleHeaderId: {\n      defaultValue: false,\n      describe: 'Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)',\n      type: 'boolean'\n    },\n    rawHeaderId: {\n      defaultValue: false,\n      describe: 'Remove only spaces, \\' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids',\n      type: 'boolean'\n    },\n    headerLevelStart: {\n      defaultValue: false,\n      describe: 'The header blocks level start',\n      type: 'integer'\n    },\n    parseImgDimensions: {\n      defaultValue: false,\n      describe: 'Turn on/off image dimension parsing',\n      type: 'boolean'\n    },\n    simplifiedAutoLink: {\n      defaultValue: false,\n      describe: 'Turn on/off GFM autolink style',\n      type: 'boolean'\n    },\n    excludeTrailingPunctuationFromURLs: {\n      defaultValue: false,\n      describe: 'Excludes trailing punctuation from links generated with autoLinking',\n      type: 'boolean'\n    },\n    literalMidWordUnderscores: {\n      defaultValue: false,\n      describe: 'Parse midword underscores as literal underscores',\n      type: 'boolean'\n    },\n    literalMidWordAsterisks: {\n      defaultValue: false,\n      describe: 'Parse midword asterisks as literal asterisks',\n      type: 'boolean'\n    },\n    strikethrough: {\n      defaultValue: false,\n      describe: 'Turn on/off strikethrough support',\n      type: 'boolean'\n    },\n    tables: {\n      defaultValue: false,\n      describe: 'Turn on/off tables support',\n      type: 'boolean'\n    },\n    tablesHeaderId: {\n      defaultValue: false,\n      describe: 'Add an id to table headers',\n      type: 'boolean'\n    },\n    ghCodeBlocks: {\n      defaultValue: true,\n      describe: 'Turn on/off GFM fenced code blocks support',\n      type: 'boolean'\n    },\n    tasklists: {\n      defaultValue: false,\n      describe: 'Turn on/off GFM tasklist support',\n      type: 'boolean'\n    },\n    smoothLivePreview: {\n      defaultValue: false,\n      describe: 'Prevents weird effects in live previews due to incomplete input',\n      type: 'boolean'\n    },\n    smartIndentationFix: {\n      defaultValue: false,\n      description: 'Tries to smartly fix indentation in es6 strings',\n      type: 'boolean'\n    },\n    disableForced4SpacesIndentedSublists: {\n      defaultValue: false,\n      description: 'Disables the requirement of indenting nested sublists by 4 spaces',\n      type: 'boolean'\n    },\n    simpleLineBreaks: {\n      defaultValue: false,\n      description: 'Parses simple line breaks as <br> (GFM Style)',\n      type: 'boolean'\n    },\n    requireSpaceBeforeHeadingText: {\n      defaultValue: false,\n      description: 'Makes adding a space between `#` and the header text mandatory (GFM Style)',\n      type: 'boolean'\n    },\n    ghMentions: {\n      defaultValue: false,\n      description: 'Enables github @mentions',\n      type: 'boolean'\n    },\n    ghMentionsLink: {\n      defaultValue: 'https://github.com/{u}',\n      description: 'Changes the link generated by @mentions. Only applies if ghMentions option is enabled.',\n      type: 'string'\n    },\n    encodeEmails: {\n      defaultValue: true,\n      description: 'Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities',\n      type: 'boolean'\n    },\n    openLinksInNewWindow: {\n      defaultValue: false,\n      description: 'Open all links in new windows',\n      type: 'boolean'\n    },\n    backslashEscapesHTMLTags: {\n      defaultValue: false,\n      description: 'Support for HTML Tag escaping. ex: \\<div>foo\\</div>',\n      type: 'boolean'\n    },\n    emoji: {\n      defaultValue: false,\n      description: 'Enable emoji support. Ex: `this is a :smile: emoji`',\n      type: 'boolean'\n    },\n    underline: {\n      defaultValue: false,\n      description: 'Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`',\n      type: 'boolean'\n    },\n    completeHTMLDocument: {\n      defaultValue: false,\n      description: 'Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags',\n      type: 'boolean'\n    },\n    metadata: {\n      defaultValue: false,\n      description: 'Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).',\n      type: 'boolean'\n    },\n    splitAdjacentBlockquotes: {\n      defaultValue: false,\n      description: 'Split adjacent blockquote blocks',\n      type: 'boolean'\n    }\n  };\n  if (simple === false) {\n    return JSON.parse(JSON.stringify(defaultOptions));\n  }\n  var ret = {};\n  for (var opt in defaultOptions) {\n    if (defaultOptions.hasOwnProperty(opt)) {\n      ret[opt] = defaultOptions[opt].defaultValue;\n    }\n  }\n  return ret;\n}\n\nfunction allOptionsOn () {\n  'use strict';\n  var options = getDefaultOpts(true),\n      ret = {};\n  for (var opt in options) {\n    if (options.hasOwnProperty(opt)) {\n      ret[opt] = true;\n    }\n  }\n  return ret;\n}\n\r\n/**\n * Created by Tivie on 06-01-2015.\n */\n\n// Private properties\nvar showdown = {},\n    parsers = {},\n    extensions = {},\n    globalOptions = getDefaultOpts(true),\n    setFlavor = 'vanilla',\n    flavor = {\n      github: {\n        omitExtraWLInCodeBlocks:              true,\n        simplifiedAutoLink:                   true,\n        excludeTrailingPunctuationFromURLs:   true,\n        literalMidWordUnderscores:            true,\n        strikethrough:                        true,\n        tables:                               true,\n        tablesHeaderId:                       true,\n        ghCodeBlocks:                         true,\n        tasklists:                            true,\n        disableForced4SpacesIndentedSublists: true,\n        simpleLineBreaks:                     true,\n        requireSpaceBeforeHeadingText:        true,\n        ghCompatibleHeaderId:                 true,\n        ghMentions:                           true,\n        backslashEscapesHTMLTags:             true,\n        emoji:                                true,\n        splitAdjacentBlockquotes:             true\n      },\n      original: {\n        noHeaderId:                           true,\n        ghCodeBlocks:                         false\n      },\n      ghost: {\n        omitExtraWLInCodeBlocks:              true,\n        parseImgDimensions:                   true,\n        simplifiedAutoLink:                   true,\n        excludeTrailingPunctuationFromURLs:   true,\n        literalMidWordUnderscores:            true,\n        strikethrough:                        true,\n        tables:                               true,\n        tablesHeaderId:                       true,\n        ghCodeBlocks:                         true,\n        tasklists:                            true,\n        smoothLivePreview:                    true,\n        simpleLineBreaks:                     true,\n        requireSpaceBeforeHeadingText:        true,\n        ghMentions:                           false,\n        encodeEmails:                         true\n      },\n      vanilla: getDefaultOpts(true),\n      allOn: allOptionsOn()\n    };\n\n/**\n * helper namespace\n * @type {{}}\n */\nshowdown.helper = {};\n\n/**\n * TODO LEGACY SUPPORT CODE\n * @type {{}}\n */\nshowdown.extensions = {};\n\n/**\n * Set a global option\n * @static\n * @param {string} key\n * @param {*} value\n * @returns {showdown}\n */\nshowdown.setOption = function (key, value) {\n  'use strict';\n  globalOptions[key] = value;\n  return this;\n};\n\n/**\n * Get a global option\n * @static\n * @param {string} key\n * @returns {*}\n */\nshowdown.getOption = function (key) {\n  'use strict';\n  return globalOptions[key];\n};\n\n/**\n * Get the global options\n * @static\n * @returns {{}}\n */\nshowdown.getOptions = function () {\n  'use strict';\n  return globalOptions;\n};\n\n/**\n * Reset global options to the default values\n * @static\n */\nshowdown.resetOptions = function () {\n  'use strict';\n  globalOptions = getDefaultOpts(true);\n};\n\n/**\n * Set the flavor showdown should use as default\n * @param {string} name\n */\nshowdown.setFlavor = function (name) {\n  'use strict';\n  if (!flavor.hasOwnProperty(name)) {\n    throw Error(name + ' flavor was not found');\n  }\n  showdown.resetOptions();\n  var preset = flavor[name];\n  setFlavor = name;\n  for (var option in preset) {\n    if (preset.hasOwnProperty(option)) {\n      globalOptions[option] = preset[option];\n    }\n  }\n};\n\n/**\n * Get the currently set flavor\n * @returns {string}\n */\nshowdown.getFlavor = function () {\n  'use strict';\n  return setFlavor;\n};\n\n/**\n * Get the options of a specified flavor. Returns undefined if the flavor was not found\n * @param {string} name Name of the flavor\n * @returns {{}|undefined}\n */\nshowdown.getFlavorOptions = function (name) {\n  'use strict';\n  if (flavor.hasOwnProperty(name)) {\n    return flavor[name];\n  }\n};\n\n/**\n * Get the default options\n * @static\n * @param {boolean} [simple=true]\n * @returns {{}}\n */\nshowdown.getDefaultOptions = function (simple) {\n  'use strict';\n  return getDefaultOpts(simple);\n};\n\n/**\n * Get or set a subParser\n *\n * subParser(name)       - Get a registered subParser\n * subParser(name, func) - Register a subParser\n * @static\n * @param {string} name\n * @param {function} [func]\n * @returns {*}\n */\nshowdown.subParser = function (name, func) {\n  'use strict';\n  if (showdown.helper.isString(name)) {\n    if (typeof func !== 'undefined') {\n      parsers[name] = func;\n    } else {\n      if (parsers.hasOwnProperty(name)) {\n        return parsers[name];\n      } else {\n        throw Error('SubParser named ' + name + ' not registered!');\n      }\n    }\n  }\n};\n\n/**\n * Gets or registers an extension\n * @static\n * @param {string} name\n * @param {object|function=} ext\n * @returns {*}\n */\nshowdown.extension = function (name, ext) {\n  'use strict';\n\n  if (!showdown.helper.isString(name)) {\n    throw Error('Extension \\'name\\' must be a string');\n  }\n\n  name = showdown.helper.stdExtName(name);\n\n  // Getter\n  if (showdown.helper.isUndefined(ext)) {\n    if (!extensions.hasOwnProperty(name)) {\n      throw Error('Extension named ' + name + ' is not registered!');\n    }\n    return extensions[name];\n\n    // Setter\n  } else {\n    // Expand extension if it's wrapped in a function\n    if (typeof ext === 'function') {\n      ext = ext();\n    }\n\n    // Ensure extension is an array\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n\n    var validExtension = validate(ext, name);\n\n    if (validExtension.valid) {\n      extensions[name] = ext;\n    } else {\n      throw Error(validExtension.error);\n    }\n  }\n};\n\n/**\n * Gets all extensions registered\n * @returns {{}}\n */\nshowdown.getAllExtensions = function () {\n  'use strict';\n  return extensions;\n};\n\n/**\n * Remove an extension\n * @param {string} name\n */\nshowdown.removeExtension = function (name) {\n  'use strict';\n  delete extensions[name];\n};\n\n/**\n * Removes all extensions\n */\nshowdown.resetExtensions = function () {\n  'use strict';\n  extensions = {};\n};\n\n/**\n * Validate extension\n * @param {array} extension\n * @param {string} name\n * @returns {{valid: boolean, error: string}}\n */\nfunction validate (extension, name) {\n  'use strict';\n\n  var errMsg = (name) ? 'Error in ' + name + ' extension->' : 'Error in unnamed extension',\n      ret = {\n        valid: true,\n        error: ''\n      };\n\n  if (!showdown.helper.isArray(extension)) {\n    extension = [extension];\n  }\n\n  for (var i = 0; i < extension.length; ++i) {\n    var baseMsg = errMsg + ' sub-extension ' + i + ': ',\n        ext = extension[i];\n    if (typeof ext !== 'object') {\n      ret.valid = false;\n      ret.error = baseMsg + 'must be an object, but ' + typeof ext + ' given';\n      return ret;\n    }\n\n    if (!showdown.helper.isString(ext.type)) {\n      ret.valid = false;\n      ret.error = baseMsg + 'property \"type\" must be a string, but ' + typeof ext.type + ' given';\n      return ret;\n    }\n\n    var type = ext.type = ext.type.toLowerCase();\n\n    // normalize extension type\n    if (type === 'language') {\n      type = ext.type = 'lang';\n    }\n\n    if (type === 'html') {\n      type = ext.type = 'output';\n    }\n\n    if (type !== 'lang' && type !== 'output' && type !== 'listener') {\n      ret.valid = false;\n      ret.error = baseMsg + 'type ' + type + ' is not recognized. Valid values: \"lang/language\", \"output/html\" or \"listener\"';\n      return ret;\n    }\n\n    if (type === 'listener') {\n      if (showdown.helper.isUndefined(ext.listeners)) {\n        ret.valid = false;\n        ret.error = baseMsg + '. Extensions of type \"listener\" must have a property called \"listeners\"';\n        return ret;\n      }\n    } else {\n      if (showdown.helper.isUndefined(ext.filter) && showdown.helper.isUndefined(ext.regex)) {\n        ret.valid = false;\n        ret.error = baseMsg + type + ' extensions must define either a \"regex\" property or a \"filter\" method';\n        return ret;\n      }\n    }\n\n    if (ext.listeners) {\n      if (typeof ext.listeners !== 'object') {\n        ret.valid = false;\n        ret.error = baseMsg + '\"listeners\" property must be an object but ' + typeof ext.listeners + ' given';\n        return ret;\n      }\n      for (var ln in ext.listeners) {\n        if (ext.listeners.hasOwnProperty(ln)) {\n          if (typeof ext.listeners[ln] !== 'function') {\n            ret.valid = false;\n            ret.error = baseMsg + '\"listeners\" property must be an hash of [event name]: [callback]. listeners.' + ln +\n              ' must be a function but ' + typeof ext.listeners[ln] + ' given';\n            return ret;\n          }\n        }\n      }\n    }\n\n    if (ext.filter) {\n      if (typeof ext.filter !== 'function') {\n        ret.valid = false;\n        ret.error = baseMsg + '\"filter\" must be a function, but ' + typeof ext.filter + ' given';\n        return ret;\n      }\n    } else if (ext.regex) {\n      if (showdown.helper.isString(ext.regex)) {\n        ext.regex = new RegExp(ext.regex, 'g');\n      }\n      if (!(ext.regex instanceof RegExp)) {\n        ret.valid = false;\n        ret.error = baseMsg + '\"regex\" property must either be a string or a RegExp object, but ' + typeof ext.regex + ' given';\n        return ret;\n      }\n      if (showdown.helper.isUndefined(ext.replace)) {\n        ret.valid = false;\n        ret.error = baseMsg + '\"regex\" extensions must implement a replace string or function';\n        return ret;\n      }\n    }\n  }\n  return ret;\n}\n\n/**\n * Validate extension\n * @param {object} ext\n * @returns {boolean}\n */\nshowdown.validateExtension = function (ext) {\n  'use strict';\n\n  var validateExtension = validate(ext, null);\n  if (!validateExtension.valid) {\n    console.warn(validateExtension.error);\n    return false;\n  }\n  return true;\n};\n\r\n/**\n * showdownjs helper functions\n */\n\nif (!showdown.hasOwnProperty('helper')) {\n  showdown.helper = {};\n}\n\n/**\n * Check if var is string\n * @static\n * @param {string} a\n * @returns {boolean}\n */\nshowdown.helper.isString = function (a) {\n  'use strict';\n  return (typeof a === 'string' || a instanceof String);\n};\n\n/**\n * Check if var is a function\n * @static\n * @param {*} a\n * @returns {boolean}\n */\nshowdown.helper.isFunction = function (a) {\n  'use strict';\n  var getType = {};\n  return a && getType.toString.call(a) === '[object Function]';\n};\n\n/**\n * isArray helper function\n * @static\n * @param {*} a\n * @returns {boolean}\n */\nshowdown.helper.isArray = function (a) {\n  'use strict';\n  return Array.isArray(a);\n};\n\n/**\n * Check if value is undefined\n * @static\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n */\nshowdown.helper.isUndefined = function (value) {\n  'use strict';\n  return typeof value === 'undefined';\n};\n\n/**\n * ForEach helper function\n * Iterates over Arrays and Objects (own properties only)\n * @static\n * @param {*} obj\n * @param {function} callback Accepts 3 params: 1. value, 2. key, 3. the original array/object\n */\nshowdown.helper.forEach = function (obj, callback) {\n  'use strict';\n  // check if obj is defined\n  if (showdown.helper.isUndefined(obj)) {\n    throw new Error('obj param is required');\n  }\n\n  if (showdown.helper.isUndefined(callback)) {\n    throw new Error('callback param is required');\n  }\n\n  if (!showdown.helper.isFunction(callback)) {\n    throw new Error('callback param must be a function/closure');\n  }\n\n  if (typeof obj.forEach === 'function') {\n    obj.forEach(callback);\n  } else if (showdown.helper.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      callback(obj[i], i, obj);\n    }\n  } else if (typeof (obj) === 'object') {\n    for (var prop in obj) {\n      if (obj.hasOwnProperty(prop)) {\n        callback(obj[prop], prop, obj);\n      }\n    }\n  } else {\n    throw new Error('obj does not seem to be an array or an iterable object');\n  }\n};\n\n/**\n * Standardidize extension name\n * @static\n * @param {string} s extension name\n * @returns {string}\n */\nshowdown.helper.stdExtName = function (s) {\n  'use strict';\n  return s.replace(/[_?*+\\/\\\\.^-]/g, '').replace(/\\s/g, '').toLowerCase();\n};\n\nfunction escapeCharactersCallback (wholeMatch, m1) {\n  'use strict';\n  var charCodeToEscape = m1.charCodeAt(0);\n  return 'E' + charCodeToEscape + 'E';\n}\n\n/**\n * Callback used to escape characters when passing through String.replace\n * @static\n * @param {string} wholeMatch\n * @param {string} m1\n * @returns {string}\n */\nshowdown.helper.escapeCharactersCallback = escapeCharactersCallback;\n\n/**\n * Escape characters in a string\n * @static\n * @param {string} text\n * @param {string} charsToEscape\n * @param {boolean} afterBackslash\n * @returns {XML|string|void|*}\n */\nshowdown.helper.escapeCharacters = function (text, charsToEscape, afterBackslash) {\n  'use strict';\n  // First we have to escape the escape characters so that\n  // we can build a character class out of them\n  var regexString = '([' + charsToEscape.replace(/([\\[\\]\\\\])/g, '\\\\$1') + '])';\n\n  if (afterBackslash) {\n    regexString = '\\\\\\\\' + regexString;\n  }\n\n  var regex = new RegExp(regexString, 'g');\n  text = text.replace(regex, escapeCharactersCallback);\n\n  return text;\n};\n\n/**\n * Unescape HTML entities\n * @param txt\n * @returns {string}\n */\nshowdown.helper.unescapeHTMLEntities = function (txt) {\n  'use strict';\n\n  return txt\n    .replace(/&quot;/g, '\"')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n    .replace(/&amp;/g, '&');\n};\n\nvar rgxFindMatchPos = function (str, left, right, flags) {\n  'use strict';\n  var f = flags || '',\n      g = f.indexOf('g') > -1,\n      x = new RegExp(left + '|' + right, 'g' + f.replace(/g/g, '')),\n      l = new RegExp(left, f.replace(/g/g, '')),\n      pos = [],\n      t, s, m, start, end;\n\n  do {\n    t = 0;\n    while ((m = x.exec(str))) {\n      if (l.test(m[0])) {\n        if (!(t++)) {\n          s = x.lastIndex;\n          start = s - m[0].length;\n        }\n      } else if (t) {\n        if (!--t) {\n          end = m.index + m[0].length;\n          var obj = {\n            left: {start: start, end: s},\n            match: {start: s, end: m.index},\n            right: {start: m.index, end: end},\n            wholeMatch: {start: start, end: end}\n          };\n          pos.push(obj);\n          if (!g) {\n            return pos;\n          }\n        }\n      }\n    }\n  } while (t && (x.lastIndex = s));\n\n  return pos;\n};\n\n/**\n * matchRecursiveRegExp\n *\n * (c) 2007 Steven Levithan <stevenlevithan.com>\n * MIT License\n *\n * Accepts a string to search, a left and right format delimiter\n * as regex patterns, and optional regex flags. Returns an array\n * of matches, allowing nested instances of left/right delimiters.\n * Use the \"g\" flag to return all matches, otherwise only the\n * first is returned. Be careful to ensure that the left and\n * right format delimiters produce mutually exclusive matches.\n * Backreferences are not supported within the right delimiter\n * due to how it is internally combined with the left delimiter.\n * When matching strings whose format delimiters are unbalanced\n * to the left or right, the output is intentionally as a\n * conventional regex library with recursion support would\n * produce, e.g. \"<<x>\" and \"<x>>\" both produce [\"x\"] when using\n * \"<\" and \">\" as the delimiters (both strings contain a single,\n * balanced instance of \"<x>\").\n *\n * examples:\n * matchRecursiveRegExp(\"test\", \"\\\\(\", \"\\\\)\")\n * returns: []\n * matchRecursiveRegExp(\"<t<<e>><s>>t<>\", \"<\", \">\", \"g\")\n * returns: [\"t<<e>><s>\", \"\"]\n * matchRecursiveRegExp(\"<div id=\\\"x\\\">test</div>\", \"<div\\\\b[^>]*>\", \"</div>\", \"gi\")\n * returns: [\"test\"]\n */\nshowdown.helper.matchRecursiveRegExp = function (str, left, right, flags) {\n  'use strict';\n\n  var matchPos = rgxFindMatchPos (str, left, right, flags),\n      results = [];\n\n  for (var i = 0; i < matchPos.length; ++i) {\n    results.push([\n      str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\n      str.slice(matchPos[i].match.start, matchPos[i].match.end),\n      str.slice(matchPos[i].left.start, matchPos[i].left.end),\n      str.slice(matchPos[i].right.start, matchPos[i].right.end)\n    ]);\n  }\n  return results;\n};\n\n/**\n *\n * @param {string} str\n * @param {string|function} replacement\n * @param {string} left\n * @param {string} right\n * @param {string} flags\n * @returns {string}\n */\nshowdown.helper.replaceRecursiveRegExp = function (str, replacement, left, right, flags) {\n  'use strict';\n\n  if (!showdown.helper.isFunction(replacement)) {\n    var repStr = replacement;\n    replacement = function () {\n      return repStr;\n    };\n  }\n\n  var matchPos = rgxFindMatchPos(str, left, right, flags),\n      finalStr = str,\n      lng = matchPos.length;\n\n  if (lng > 0) {\n    var bits = [];\n    if (matchPos[0].wholeMatch.start !== 0) {\n      bits.push(str.slice(0, matchPos[0].wholeMatch.start));\n    }\n    for (var i = 0; i < lng; ++i) {\n      bits.push(\n        replacement(\n          str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\n          str.slice(matchPos[i].match.start, matchPos[i].match.end),\n          str.slice(matchPos[i].left.start, matchPos[i].left.end),\n          str.slice(matchPos[i].right.start, matchPos[i].right.end)\n        )\n      );\n      if (i < lng - 1) {\n        bits.push(str.slice(matchPos[i].wholeMatch.end, matchPos[i + 1].wholeMatch.start));\n      }\n    }\n    if (matchPos[lng - 1].wholeMatch.end < str.length) {\n      bits.push(str.slice(matchPos[lng - 1].wholeMatch.end));\n    }\n    finalStr = bits.join('');\n  }\n  return finalStr;\n};\n\n/**\n * Returns the index within the passed String object of the first occurrence of the specified regex,\n * starting the search at fromIndex. Returns -1 if the value is not found.\n *\n * @param {string} str string to search\n * @param {RegExp} regex Regular expression to search\n * @param {int} [fromIndex = 0] Index to start the search\n * @returns {Number}\n * @throws InvalidArgumentError\n */\nshowdown.helper.regexIndexOf = function (str, regex, fromIndex) {\n  'use strict';\n  if (!showdown.helper.isString(str)) {\n    throw 'InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string';\n  }\n  if (regex instanceof RegExp === false) {\n    throw 'InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp';\n  }\n  var indexOf = str.substring(fromIndex || 0).search(regex);\n  return (indexOf >= 0) ? (indexOf + (fromIndex || 0)) : indexOf;\n};\n\n/**\n * Splits the passed string object at the defined index, and returns an array composed of the two substrings\n * @param {string} str string to split\n * @param {int} index index to split string at\n * @returns {[string,string]}\n * @throws InvalidArgumentError\n */\nshowdown.helper.splitAtIndex = function (str, index) {\n  'use strict';\n  if (!showdown.helper.isString(str)) {\n    throw 'InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string';\n  }\n  return [str.substring(0, index), str.substring(index)];\n};\n\n/**\n * Obfuscate an e-mail address through the use of Character Entities,\n * transforming ASCII characters into their equivalent decimal or hex entities.\n *\n * Since it has a random component, subsequent calls to this function produce different results\n *\n * @param {string} mail\n * @returns {string}\n */\nshowdown.helper.encodeEmailAddress = function (mail) {\n  'use strict';\n  var encode = [\n    function (ch) {\n      return '&#' + ch.charCodeAt(0) + ';';\n    },\n    function (ch) {\n      return '&#x' + ch.charCodeAt(0).toString(16) + ';';\n    },\n    function (ch) {\n      return ch;\n    }\n  ];\n\n  mail = mail.replace(/./g, function (ch) {\n    if (ch === '@') {\n      // this *must* be encoded. I insist.\n      ch = encode[Math.floor(Math.random() * 2)](ch);\n    } else {\n      var r = Math.random();\n      // roughly 10% raw, 45% hex, 45% dec\n      ch = (\n        r > 0.9 ? encode[2](ch) : r > 0.45 ? encode[1](ch) : encode[0](ch)\n      );\n    }\n    return ch;\n  });\n\n  return mail;\n};\n\n/**\n *\n * @param str\n * @param targetLength\n * @param padString\n * @returns {string}\n */\nshowdown.helper.padEnd = function padEnd (str, targetLength, padString) {\n  'use strict';\n  /*jshint bitwise: false*/\n  // eslint-disable-next-line space-infix-ops\n  targetLength = targetLength>>0; //floor if number or convert non-number to 0;\n  /*jshint bitwise: true*/\n  padString = String(padString || ' ');\n  if (str.length > targetLength) {\n    return String(str);\n  } else {\n    targetLength = targetLength - str.length;\n    if (targetLength > padString.length) {\n      padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n    }\n    return String(str) + padString.slice(0,targetLength);\n  }\n};\n\n/**\n * POLYFILLS\n */\n// use this instead of builtin is undefined for IE8 compatibility\nif (typeof(console) === 'undefined') {\n  console = {\n    warn: function (msg) {\n      'use strict';\n      alert(msg);\n    },\n    log: function (msg) {\n      'use strict';\n      alert(msg);\n    },\n    error: function (msg) {\n      'use strict';\n      throw msg;\n    }\n  };\n}\n\n/**\n * Common regexes.\n * We declare some common regexes to improve performance\n */\nshowdown.helper.regexes = {\n  asteriskDashAndColon: /([*_:~])/g\n};\n\n/**\n * EMOJIS LIST\n */\nshowdown.helper.emojis = {\n  '+1':'\\ud83d\\udc4d',\n  '-1':'\\ud83d\\udc4e',\n  '100':'\\ud83d\\udcaf',\n  '1234':'\\ud83d\\udd22',\n  '1st_place_medal':'\\ud83e\\udd47',\n  '2nd_place_medal':'\\ud83e\\udd48',\n  '3rd_place_medal':'\\ud83e\\udd49',\n  '8ball':'\\ud83c\\udfb1',\n  'a':'\\ud83c\\udd70\\ufe0f',\n  'ab':'\\ud83c\\udd8e',\n  'abc':'\\ud83d\\udd24',\n  'abcd':'\\ud83d\\udd21',\n  'accept':'\\ud83c\\ude51',\n  'aerial_tramway':'\\ud83d\\udea1',\n  'airplane':'\\u2708\\ufe0f',\n  'alarm_clock':'\\u23f0',\n  'alembic':'\\u2697\\ufe0f',\n  'alien':'\\ud83d\\udc7d',\n  'ambulance':'\\ud83d\\ude91',\n  'amphora':'\\ud83c\\udffa',\n  'anchor':'\\u2693\\ufe0f',\n  'angel':'\\ud83d\\udc7c',\n  'anger':'\\ud83d\\udca2',\n  'angry':'\\ud83d\\ude20',\n  'anguished':'\\ud83d\\ude27',\n  'ant':'\\ud83d\\udc1c',\n  'apple':'\\ud83c\\udf4e',\n  'aquarius':'\\u2652\\ufe0f',\n  'aries':'\\u2648\\ufe0f',\n  'arrow_backward':'\\u25c0\\ufe0f',\n  'arrow_double_down':'\\u23ec',\n  'arrow_double_up':'\\u23eb',\n  'arrow_down':'\\u2b07\\ufe0f',\n  'arrow_down_small':'\\ud83d\\udd3d',\n  'arrow_forward':'\\u25b6\\ufe0f',\n  'arrow_heading_down':'\\u2935\\ufe0f',\n  'arrow_heading_up':'\\u2934\\ufe0f',\n  'arrow_left':'\\u2b05\\ufe0f',\n  'arrow_lower_left':'\\u2199\\ufe0f',\n  'arrow_lower_right':'\\u2198\\ufe0f',\n  'arrow_right':'\\u27a1\\ufe0f',\n  'arrow_right_hook':'\\u21aa\\ufe0f',\n  'arrow_up':'\\u2b06\\ufe0f',\n  'arrow_up_down':'\\u2195\\ufe0f',\n  'arrow_up_small':'\\ud83d\\udd3c',\n  'arrow_upper_left':'\\u2196\\ufe0f',\n  'arrow_upper_right':'\\u2197\\ufe0f',\n  'arrows_clockwise':'\\ud83d\\udd03',\n  'arrows_counterclockwise':'\\ud83d\\udd04',\n  'art':'\\ud83c\\udfa8',\n  'articulated_lorry':'\\ud83d\\ude9b',\n  'artificial_satellite':'\\ud83d\\udef0',\n  'astonished':'\\ud83d\\ude32',\n  'athletic_shoe':'\\ud83d\\udc5f',\n  'atm':'\\ud83c\\udfe7',\n  'atom_symbol':'\\u269b\\ufe0f',\n  'avocado':'\\ud83e\\udd51',\n  'b':'\\ud83c\\udd71\\ufe0f',\n  'baby':'\\ud83d\\udc76',\n  'baby_bottle':'\\ud83c\\udf7c',\n  'baby_chick':'\\ud83d\\udc24',\n  'baby_symbol':'\\ud83d\\udebc',\n  'back':'\\ud83d\\udd19',\n  'bacon':'\\ud83e\\udd53',\n  'badminton':'\\ud83c\\udff8',\n  'baggage_claim':'\\ud83d\\udec4',\n  'baguette_bread':'\\ud83e\\udd56',\n  'balance_scale':'\\u2696\\ufe0f',\n  'balloon':'\\ud83c\\udf88',\n  'ballot_box':'\\ud83d\\uddf3',\n  'ballot_box_with_check':'\\u2611\\ufe0f',\n  'bamboo':'\\ud83c\\udf8d',\n  'banana':'\\ud83c\\udf4c',\n  'bangbang':'\\u203c\\ufe0f',\n  'bank':'\\ud83c\\udfe6',\n  'bar_chart':'\\ud83d\\udcca',\n  'barber':'\\ud83d\\udc88',\n  'baseball':'\\u26be\\ufe0f',\n  'basketball':'\\ud83c\\udfc0',\n  'basketball_man':'\\u26f9\\ufe0f',\n  'basketball_woman':'\\u26f9\\ufe0f&zwj;\\u2640\\ufe0f',\n  'bat':'\\ud83e\\udd87',\n  'bath':'\\ud83d\\udec0',\n  'bathtub':'\\ud83d\\udec1',\n  'battery':'\\ud83d\\udd0b',\n  'beach_umbrella':'\\ud83c\\udfd6',\n  'bear':'\\ud83d\\udc3b',\n  'bed':'\\ud83d\\udecf',\n  'bee':'\\ud83d\\udc1d',\n  'beer':'\\ud83c\\udf7a',\n  'beers':'\\ud83c\\udf7b',\n  'beetle':'\\ud83d\\udc1e',\n  'beginner':'\\ud83d\\udd30',\n  'bell':'\\ud83d\\udd14',\n  'bellhop_bell':'\\ud83d\\udece',\n  'bento':'\\ud83c\\udf71',\n  'biking_man':'\\ud83d\\udeb4',\n  'bike':'\\ud83d\\udeb2',\n  'biking_woman':'\\ud83d\\udeb4&zwj;\\u2640\\ufe0f',\n  'bikini':'\\ud83d\\udc59',\n  'biohazard':'\\u2623\\ufe0f',\n  'bird':'\\ud83d\\udc26',\n  'birthday':'\\ud83c\\udf82',\n  'black_circle':'\\u26ab\\ufe0f',\n  'black_flag':'\\ud83c\\udff4',\n  'black_heart':'\\ud83d\\udda4',\n  'black_joker':'\\ud83c\\udccf',\n  'black_large_square':'\\u2b1b\\ufe0f',\n  'black_medium_small_square':'\\u25fe\\ufe0f',\n  'black_medium_square':'\\u25fc\\ufe0f',\n  'black_nib':'\\u2712\\ufe0f',\n  'black_small_square':'\\u25aa\\ufe0f',\n  'black_square_button':'\\ud83d\\udd32',\n  'blonde_man':'\\ud83d\\udc71',\n  'blonde_woman':'\\ud83d\\udc71&zwj;\\u2640\\ufe0f',\n  'blossom':'\\ud83c\\udf3c',\n  'blowfish':'\\ud83d\\udc21',\n  'blue_book':'\\ud83d\\udcd8',\n  'blue_car':'\\ud83d\\ude99',\n  'blue_heart':'\\ud83d\\udc99',\n  'blush':'\\ud83d\\ude0a',\n  'boar':'\\ud83d\\udc17',\n  'boat':'\\u26f5\\ufe0f',\n  'bomb':'\\ud83d\\udca3',\n  'book':'\\ud83d\\udcd6',\n  'bookmark':'\\ud83d\\udd16',\n  'bookmark_tabs':'\\ud83d\\udcd1',\n  'books':'\\ud83d\\udcda',\n  'boom':'\\ud83d\\udca5',\n  'boot':'\\ud83d\\udc62',\n  'bouquet':'\\ud83d\\udc90',\n  'bowing_man':'\\ud83d\\ude47',\n  'bow_and_arrow':'\\ud83c\\udff9',\n  'bowing_woman':'\\ud83d\\ude47&zwj;\\u2640\\ufe0f',\n  'bowling':'\\ud83c\\udfb3',\n  'boxing_glove':'\\ud83e\\udd4a',\n  'boy':'\\ud83d\\udc66',\n  'bread':'\\ud83c\\udf5e',\n  'bride_with_veil':'\\ud83d\\udc70',\n  'bridge_at_night':'\\ud83c\\udf09',\n  'briefcase':'\\ud83d\\udcbc',\n  'broken_heart':'\\ud83d\\udc94',\n  'bug':'\\ud83d\\udc1b',\n  'building_construction':'\\ud83c\\udfd7',\n  'bulb':'\\ud83d\\udca1',\n  'bullettrain_front':'\\ud83d\\ude85',\n  'bullettrain_side':'\\ud83d\\ude84',\n  'burrito':'\\ud83c\\udf2f',\n  'bus':'\\ud83d\\ude8c',\n  'business_suit_levitating':'\\ud83d\\udd74',\n  'busstop':'\\ud83d\\ude8f',\n  'bust_in_silhouette':'\\ud83d\\udc64',\n  'busts_in_silhouette':'\\ud83d\\udc65',\n  'butterfly':'\\ud83e\\udd8b',\n  'cactus':'\\ud83c\\udf35',\n  'cake':'\\ud83c\\udf70',\n  'calendar':'\\ud83d\\udcc6',\n  'call_me_hand':'\\ud83e\\udd19',\n  'calling':'\\ud83d\\udcf2',\n  'camel':'\\ud83d\\udc2b',\n  'camera':'\\ud83d\\udcf7',\n  'camera_flash':'\\ud83d\\udcf8',\n  'camping':'\\ud83c\\udfd5',\n  'cancer':'\\u264b\\ufe0f',\n  'candle':'\\ud83d\\udd6f',\n  'candy':'\\ud83c\\udf6c',\n  'canoe':'\\ud83d\\udef6',\n  'capital_abcd':'\\ud83d\\udd20',\n  'capricorn':'\\u2651\\ufe0f',\n  'car':'\\ud83d\\ude97',\n  'card_file_box':'\\ud83d\\uddc3',\n  'card_index':'\\ud83d\\udcc7',\n  'card_index_dividers':'\\ud83d\\uddc2',\n  'carousel_horse':'\\ud83c\\udfa0',\n  'carrot':'\\ud83e\\udd55',\n  'cat':'\\ud83d\\udc31',\n  'cat2':'\\ud83d\\udc08',\n  'cd':'\\ud83d\\udcbf',\n  'chains':'\\u26d3',\n  'champagne':'\\ud83c\\udf7e',\n  'chart':'\\ud83d\\udcb9',\n  'chart_with_downwards_trend':'\\ud83d\\udcc9',\n  'chart_with_upwards_trend':'\\ud83d\\udcc8',\n  'checkered_flag':'\\ud83c\\udfc1',\n  'cheese':'\\ud83e\\uddc0',\n  'cherries':'\\ud83c\\udf52',\n  'cherry_blossom':'\\ud83c\\udf38',\n  'chestnut':'\\ud83c\\udf30',\n  'chicken':'\\ud83d\\udc14',\n  'children_crossing':'\\ud83d\\udeb8',\n  'chipmunk':'\\ud83d\\udc3f',\n  'chocolate_bar':'\\ud83c\\udf6b',\n  'christmas_tree':'\\ud83c\\udf84',\n  'church':'\\u26ea\\ufe0f',\n  'cinema':'\\ud83c\\udfa6',\n  'circus_tent':'\\ud83c\\udfaa',\n  'city_sunrise':'\\ud83c\\udf07',\n  'city_sunset':'\\ud83c\\udf06',\n  'cityscape':'\\ud83c\\udfd9',\n  'cl':'\\ud83c\\udd91',\n  'clamp':'\\ud83d\\udddc',\n  'clap':'\\ud83d\\udc4f',\n  'clapper':'\\ud83c\\udfac',\n  'classical_building':'\\ud83c\\udfdb',\n  'clinking_glasses':'\\ud83e\\udd42',\n  'clipboard':'\\ud83d\\udccb',\n  'clock1':'\\ud83d\\udd50',\n  'clock10':'\\ud83d\\udd59',\n  'clock1030':'\\ud83d\\udd65',\n  'clock11':'\\ud83d\\udd5a',\n  'clock1130':'\\ud83d\\udd66',\n  'clock12':'\\ud83d\\udd5b',\n  'clock1230':'\\ud83d\\udd67',\n  'clock130':'\\ud83d\\udd5c',\n  'clock2':'\\ud83d\\udd51',\n  'clock230':'\\ud83d\\udd5d',\n  'clock3':'\\ud83d\\udd52',\n  'clock330':'\\ud83d\\udd5e',\n  'clock4':'\\ud83d\\udd53',\n  'clock430':'\\ud83d\\udd5f',\n  'clock5':'\\ud83d\\udd54',\n  'clock530':'\\ud83d\\udd60',\n  'clock6':'\\ud83d\\udd55',\n  'clock630':'\\ud83d\\udd61',\n  'clock7':'\\ud83d\\udd56',\n  'clock730':'\\ud83d\\udd62',\n  'clock8':'\\ud83d\\udd57',\n  'clock830':'\\ud83d\\udd63',\n  'clock9':'\\ud83d\\udd58',\n  'clock930':'\\ud83d\\udd64',\n  'closed_book':'\\ud83d\\udcd5',\n  'closed_lock_with_key':'\\ud83d\\udd10',\n  'closed_umbrella':'\\ud83c\\udf02',\n  'cloud':'\\u2601\\ufe0f',\n  'cloud_with_lightning':'\\ud83c\\udf29',\n  'cloud_with_lightning_and_rain':'\\u26c8',\n  'cloud_with_rain':'\\ud83c\\udf27',\n  'cloud_with_snow':'\\ud83c\\udf28',\n  'clown_face':'\\ud83e\\udd21',\n  'clubs':'\\u2663\\ufe0f',\n  'cocktail':'\\ud83c\\udf78',\n  'coffee':'\\u2615\\ufe0f',\n  'coffin':'\\u26b0\\ufe0f',\n  'cold_sweat':'\\ud83d\\ude30',\n  'comet':'\\u2604\\ufe0f',\n  'computer':'\\ud83d\\udcbb',\n  'computer_mouse':'\\ud83d\\uddb1',\n  'confetti_ball':'\\ud83c\\udf8a',\n  'confounded':'\\ud83d\\ude16',\n  'confused':'\\ud83d\\ude15',\n  'congratulations':'\\u3297\\ufe0f',\n  'construction':'\\ud83d\\udea7',\n  'construction_worker_man':'\\ud83d\\udc77',\n  'construction_worker_woman':'\\ud83d\\udc77&zwj;\\u2640\\ufe0f',\n  'control_knobs':'\\ud83c\\udf9b',\n  'convenience_store':'\\ud83c\\udfea',\n  'cookie':'\\ud83c\\udf6a',\n  'cool':'\\ud83c\\udd92',\n  'policeman':'\\ud83d\\udc6e',\n  'copyright':'\\u00a9\\ufe0f',\n  'corn':'\\ud83c\\udf3d',\n  'couch_and_lamp':'\\ud83d\\udecb',\n  'couple':'\\ud83d\\udc6b',\n  'couple_with_heart_woman_man':'\\ud83d\\udc91',\n  'couple_with_heart_man_man':'\\ud83d\\udc68&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc68',\n  'couple_with_heart_woman_woman':'\\ud83d\\udc69&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc69',\n  'couplekiss_man_man':'\\ud83d\\udc68&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc8b&zwj;\\ud83d\\udc68',\n  'couplekiss_man_woman':'\\ud83d\\udc8f',\n  'couplekiss_woman_woman':'\\ud83d\\udc69&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc8b&zwj;\\ud83d\\udc69',\n  'cow':'\\ud83d\\udc2e',\n  'cow2':'\\ud83d\\udc04',\n  'cowboy_hat_face':'\\ud83e\\udd20',\n  'crab':'\\ud83e\\udd80',\n  'crayon':'\\ud83d\\udd8d',\n  'credit_card':'\\ud83d\\udcb3',\n  'crescent_moon':'\\ud83c\\udf19',\n  'cricket':'\\ud83c\\udfcf',\n  'crocodile':'\\ud83d\\udc0a',\n  'croissant':'\\ud83e\\udd50',\n  'crossed_fingers':'\\ud83e\\udd1e',\n  'crossed_flags':'\\ud83c\\udf8c',\n  'crossed_swords':'\\u2694\\ufe0f',\n  'crown':'\\ud83d\\udc51',\n  'cry':'\\ud83d\\ude22',\n  'crying_cat_face':'\\ud83d\\ude3f',\n  'crystal_ball':'\\ud83d\\udd2e',\n  'cucumber':'\\ud83e\\udd52',\n  'cupid':'\\ud83d\\udc98',\n  'curly_loop':'\\u27b0',\n  'currency_exchange':'\\ud83d\\udcb1',\n  'curry':'\\ud83c\\udf5b',\n  'custard':'\\ud83c\\udf6e',\n  'customs':'\\ud83d\\udec3',\n  'cyclone':'\\ud83c\\udf00',\n  'dagger':'\\ud83d\\udde1',\n  'dancer':'\\ud83d\\udc83',\n  'dancing_women':'\\ud83d\\udc6f',\n  'dancing_men':'\\ud83d\\udc6f&zwj;\\u2642\\ufe0f',\n  'dango':'\\ud83c\\udf61',\n  'dark_sunglasses':'\\ud83d\\udd76',\n  'dart':'\\ud83c\\udfaf',\n  'dash':'\\ud83d\\udca8',\n  'date':'\\ud83d\\udcc5',\n  'deciduous_tree':'\\ud83c\\udf33',\n  'deer':'\\ud83e\\udd8c',\n  'department_store':'\\ud83c\\udfec',\n  'derelict_house':'\\ud83c\\udfda',\n  'desert':'\\ud83c\\udfdc',\n  'desert_island':'\\ud83c\\udfdd',\n  'desktop_computer':'\\ud83d\\udda5',\n  'male_detective':'\\ud83d\\udd75\\ufe0f',\n  'diamond_shape_with_a_dot_inside':'\\ud83d\\udca0',\n  'diamonds':'\\u2666\\ufe0f',\n  'disappointed':'\\ud83d\\ude1e',\n  'disappointed_relieved':'\\ud83d\\ude25',\n  'dizzy':'\\ud83d\\udcab',\n  'dizzy_face':'\\ud83d\\ude35',\n  'do_not_litter':'\\ud83d\\udeaf',\n  'dog':'\\ud83d\\udc36',\n  'dog2':'\\ud83d\\udc15',\n  'dollar':'\\ud83d\\udcb5',\n  'dolls':'\\ud83c\\udf8e',\n  'dolphin':'\\ud83d\\udc2c',\n  'door':'\\ud83d\\udeaa',\n  'doughnut':'\\ud83c\\udf69',\n  'dove':'\\ud83d\\udd4a',\n  'dragon':'\\ud83d\\udc09',\n  'dragon_face':'\\ud83d\\udc32',\n  'dress':'\\ud83d\\udc57',\n  'dromedary_camel':'\\ud83d\\udc2a',\n  'drooling_face':'\\ud83e\\udd24',\n  'droplet':'\\ud83d\\udca7',\n  'drum':'\\ud83e\\udd41',\n  'duck':'\\ud83e\\udd86',\n  'dvd':'\\ud83d\\udcc0',\n  'e-mail':'\\ud83d\\udce7',\n  'eagle':'\\ud83e\\udd85',\n  'ear':'\\ud83d\\udc42',\n  'ear_of_rice':'\\ud83c\\udf3e',\n  'earth_africa':'\\ud83c\\udf0d',\n  'earth_americas':'\\ud83c\\udf0e',\n  'earth_asia':'\\ud83c\\udf0f',\n  'egg':'\\ud83e\\udd5a',\n  'eggplant':'\\ud83c\\udf46',\n  'eight_pointed_black_star':'\\u2734\\ufe0f',\n  'eight_spoked_asterisk':'\\u2733\\ufe0f',\n  'electric_plug':'\\ud83d\\udd0c',\n  'elephant':'\\ud83d\\udc18',\n  'email':'\\u2709\\ufe0f',\n  'end':'\\ud83d\\udd1a',\n  'envelope_with_arrow':'\\ud83d\\udce9',\n  'euro':'\\ud83d\\udcb6',\n  'european_castle':'\\ud83c\\udff0',\n  'european_post_office':'\\ud83c\\udfe4',\n  'evergreen_tree':'\\ud83c\\udf32',\n  'exclamation':'\\u2757\\ufe0f',\n  'expressionless':'\\ud83d\\ude11',\n  'eye':'\\ud83d\\udc41',\n  'eye_speech_bubble':'\\ud83d\\udc41&zwj;\\ud83d\\udde8',\n  'eyeglasses':'\\ud83d\\udc53',\n  'eyes':'\\ud83d\\udc40',\n  'face_with_head_bandage':'\\ud83e\\udd15',\n  'face_with_thermometer':'\\ud83e\\udd12',\n  'fist_oncoming':'\\ud83d\\udc4a',\n  'factory':'\\ud83c\\udfed',\n  'fallen_leaf':'\\ud83c\\udf42',\n  'family_man_woman_boy':'\\ud83d\\udc6a',\n  'family_man_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc66',\n  'family_man_boy_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_man_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc67',\n  'family_man_girl_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_man_girl_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_man_man_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc66',\n  'family_man_man_boy_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_man_man_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc67',\n  'family_man_man_girl_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_man_man_girl_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_man_woman_boy_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_man_woman_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67',\n  'family_man_woman_girl_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_man_woman_girl_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_woman_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc66',\n  'family_woman_boy_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_woman_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc67',\n  'family_woman_girl_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_woman_girl_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_woman_woman_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc66',\n  'family_woman_woman_boy_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_woman_woman_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67',\n  'family_woman_woman_girl_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_woman_woman_girl_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'fast_forward':'\\u23e9',\n  'fax':'\\ud83d\\udce0',\n  'fearful':'\\ud83d\\ude28',\n  'feet':'\\ud83d\\udc3e',\n  'female_detective':'\\ud83d\\udd75\\ufe0f&zwj;\\u2640\\ufe0f',\n  'ferris_wheel':'\\ud83c\\udfa1',\n  'ferry':'\\u26f4',\n  'field_hockey':'\\ud83c\\udfd1',\n  'file_cabinet':'\\ud83d\\uddc4',\n  'file_folder':'\\ud83d\\udcc1',\n  'film_projector':'\\ud83d\\udcfd',\n  'film_strip':'\\ud83c\\udf9e',\n  'fire':'\\ud83d\\udd25',\n  'fire_engine':'\\ud83d\\ude92',\n  'fireworks':'\\ud83c\\udf86',\n  'first_quarter_moon':'\\ud83c\\udf13',\n  'first_quarter_moon_with_face':'\\ud83c\\udf1b',\n  'fish':'\\ud83d\\udc1f',\n  'fish_cake':'\\ud83c\\udf65',\n  'fishing_pole_and_fish':'\\ud83c\\udfa3',\n  'fist_raised':'\\u270a',\n  'fist_left':'\\ud83e\\udd1b',\n  'fist_right':'\\ud83e\\udd1c',\n  'flags':'\\ud83c\\udf8f',\n  'flashlight':'\\ud83d\\udd26',\n  'fleur_de_lis':'\\u269c\\ufe0f',\n  'flight_arrival':'\\ud83d\\udeec',\n  'flight_departure':'\\ud83d\\udeeb',\n  'floppy_disk':'\\ud83d\\udcbe',\n  'flower_playing_cards':'\\ud83c\\udfb4',\n  'flushed':'\\ud83d\\ude33',\n  'fog':'\\ud83c\\udf2b',\n  'foggy':'\\ud83c\\udf01',\n  'football':'\\ud83c\\udfc8',\n  'footprints':'\\ud83d\\udc63',\n  'fork_and_knife':'\\ud83c\\udf74',\n  'fountain':'\\u26f2\\ufe0f',\n  'fountain_pen':'\\ud83d\\udd8b',\n  'four_leaf_clover':'\\ud83c\\udf40',\n  'fox_face':'\\ud83e\\udd8a',\n  'framed_picture':'\\ud83d\\uddbc',\n  'free':'\\ud83c\\udd93',\n  'fried_egg':'\\ud83c\\udf73',\n  'fried_shrimp':'\\ud83c\\udf64',\n  'fries':'\\ud83c\\udf5f',\n  'frog':'\\ud83d\\udc38',\n  'frowning':'\\ud83d\\ude26',\n  'frowning_face':'\\u2639\\ufe0f',\n  'frowning_man':'\\ud83d\\ude4d&zwj;\\u2642\\ufe0f',\n  'frowning_woman':'\\ud83d\\ude4d',\n  'middle_finger':'\\ud83d\\udd95',\n  'fuelpump':'\\u26fd\\ufe0f',\n  'full_moon':'\\ud83c\\udf15',\n  'full_moon_with_face':'\\ud83c\\udf1d',\n  'funeral_urn':'\\u26b1\\ufe0f',\n  'game_die':'\\ud83c\\udfb2',\n  'gear':'\\u2699\\ufe0f',\n  'gem':'\\ud83d\\udc8e',\n  'gemini':'\\u264a\\ufe0f',\n  'ghost':'\\ud83d\\udc7b',\n  'gift':'\\ud83c\\udf81',\n  'gift_heart':'\\ud83d\\udc9d',\n  'girl':'\\ud83d\\udc67',\n  'globe_with_meridians':'\\ud83c\\udf10',\n  'goal_net':'\\ud83e\\udd45',\n  'goat':'\\ud83d\\udc10',\n  'golf':'\\u26f3\\ufe0f',\n  'golfing_man':'\\ud83c\\udfcc\\ufe0f',\n  'golfing_woman':'\\ud83c\\udfcc\\ufe0f&zwj;\\u2640\\ufe0f',\n  'gorilla':'\\ud83e\\udd8d',\n  'grapes':'\\ud83c\\udf47',\n  'green_apple':'\\ud83c\\udf4f',\n  'green_book':'\\ud83d\\udcd7',\n  'green_heart':'\\ud83d\\udc9a',\n  'green_salad':'\\ud83e\\udd57',\n  'grey_exclamation':'\\u2755',\n  'grey_question':'\\u2754',\n  'grimacing':'\\ud83d\\ude2c',\n  'grin':'\\ud83d\\ude01',\n  'grinning':'\\ud83d\\ude00',\n  'guardsman':'\\ud83d\\udc82',\n  'guardswoman':'\\ud83d\\udc82&zwj;\\u2640\\ufe0f',\n  'guitar':'\\ud83c\\udfb8',\n  'gun':'\\ud83d\\udd2b',\n  'haircut_woman':'\\ud83d\\udc87',\n  'haircut_man':'\\ud83d\\udc87&zwj;\\u2642\\ufe0f',\n  'hamburger':'\\ud83c\\udf54',\n  'hammer':'\\ud83d\\udd28',\n  'hammer_and_pick':'\\u2692',\n  'hammer_and_wrench':'\\ud83d\\udee0',\n  'hamster':'\\ud83d\\udc39',\n  'hand':'\\u270b',\n  'handbag':'\\ud83d\\udc5c',\n  'handshake':'\\ud83e\\udd1d',\n  'hankey':'\\ud83d\\udca9',\n  'hatched_chick':'\\ud83d\\udc25',\n  'hatching_chick':'\\ud83d\\udc23',\n  'headphones':'\\ud83c\\udfa7',\n  'hear_no_evil':'\\ud83d\\ude49',\n  'heart':'\\u2764\\ufe0f',\n  'heart_decoration':'\\ud83d\\udc9f',\n  'heart_eyes':'\\ud83d\\ude0d',\n  'heart_eyes_cat':'\\ud83d\\ude3b',\n  'heartbeat':'\\ud83d\\udc93',\n  'heartpulse':'\\ud83d\\udc97',\n  'hearts':'\\u2665\\ufe0f',\n  'heavy_check_mark':'\\u2714\\ufe0f',\n  'heavy_division_sign':'\\u2797',\n  'heavy_dollar_sign':'\\ud83d\\udcb2',\n  'heavy_heart_exclamation':'\\u2763\\ufe0f',\n  'heavy_minus_sign':'\\u2796',\n  'heavy_multiplication_x':'\\u2716\\ufe0f',\n  'heavy_plus_sign':'\\u2795',\n  'helicopter':'\\ud83d\\ude81',\n  'herb':'\\ud83c\\udf3f',\n  'hibiscus':'\\ud83c\\udf3a',\n  'high_brightness':'\\ud83d\\udd06',\n  'high_heel':'\\ud83d\\udc60',\n  'hocho':'\\ud83d\\udd2a',\n  'hole':'\\ud83d\\udd73',\n  'honey_pot':'\\ud83c\\udf6f',\n  'horse':'\\ud83d\\udc34',\n  'horse_racing':'\\ud83c\\udfc7',\n  'hospital':'\\ud83c\\udfe5',\n  'hot_pepper':'\\ud83c\\udf36',\n  'hotdog':'\\ud83c\\udf2d',\n  'hotel':'\\ud83c\\udfe8',\n  'hotsprings':'\\u2668\\ufe0f',\n  'hourglass':'\\u231b\\ufe0f',\n  'hourglass_flowing_sand':'\\u23f3',\n  'house':'\\ud83c\\udfe0',\n  'house_with_garden':'\\ud83c\\udfe1',\n  'houses':'\\ud83c\\udfd8',\n  'hugs':'\\ud83e\\udd17',\n  'hushed':'\\ud83d\\ude2f',\n  'ice_cream':'\\ud83c\\udf68',\n  'ice_hockey':'\\ud83c\\udfd2',\n  'ice_skate':'\\u26f8',\n  'icecream':'\\ud83c\\udf66',\n  'id':'\\ud83c\\udd94',\n  'ideograph_advantage':'\\ud83c\\ude50',\n  'imp':'\\ud83d\\udc7f',\n  'inbox_tray':'\\ud83d\\udce5',\n  'incoming_envelope':'\\ud83d\\udce8',\n  'tipping_hand_woman':'\\ud83d\\udc81',\n  'information_source':'\\u2139\\ufe0f',\n  'innocent':'\\ud83d\\ude07',\n  'interrobang':'\\u2049\\ufe0f',\n  'iphone':'\\ud83d\\udcf1',\n  'izakaya_lantern':'\\ud83c\\udfee',\n  'jack_o_lantern':'\\ud83c\\udf83',\n  'japan':'\\ud83d\\uddfe',\n  'japanese_castle':'\\ud83c\\udfef',\n  'japanese_goblin':'\\ud83d\\udc7a',\n  'japanese_ogre':'\\ud83d\\udc79',\n  'jeans':'\\ud83d\\udc56',\n  'joy':'\\ud83d\\ude02',\n  'joy_cat':'\\ud83d\\ude39',\n  'joystick':'\\ud83d\\udd79',\n  'kaaba':'\\ud83d\\udd4b',\n  'key':'\\ud83d\\udd11',\n  'keyboard':'\\u2328\\ufe0f',\n  'keycap_ten':'\\ud83d\\udd1f',\n  'kick_scooter':'\\ud83d\\udef4',\n  'kimono':'\\ud83d\\udc58',\n  'kiss':'\\ud83d\\udc8b',\n  'kissing':'\\ud83d\\ude17',\n  'kissing_cat':'\\ud83d\\ude3d',\n  'kissing_closed_eyes':'\\ud83d\\ude1a',\n  'kissing_heart':'\\ud83d\\ude18',\n  'kissing_smiling_eyes':'\\ud83d\\ude19',\n  'kiwi_fruit':'\\ud83e\\udd5d',\n  'koala':'\\ud83d\\udc28',\n  'koko':'\\ud83c\\ude01',\n  'label':'\\ud83c\\udff7',\n  'large_blue_circle':'\\ud83d\\udd35',\n  'large_blue_diamond':'\\ud83d\\udd37',\n  'large_orange_diamond':'\\ud83d\\udd36',\n  'last_quarter_moon':'\\ud83c\\udf17',\n  'last_quarter_moon_with_face':'\\ud83c\\udf1c',\n  'latin_cross':'\\u271d\\ufe0f',\n  'laughing':'\\ud83d\\ude06',\n  'leaves':'\\ud83c\\udf43',\n  'ledger':'\\ud83d\\udcd2',\n  'left_luggage':'\\ud83d\\udec5',\n  'left_right_arrow':'\\u2194\\ufe0f',\n  'leftwards_arrow_with_hook':'\\u21a9\\ufe0f',\n  'lemon':'\\ud83c\\udf4b',\n  'leo':'\\u264c\\ufe0f',\n  'leopard':'\\ud83d\\udc06',\n  'level_slider':'\\ud83c\\udf9a',\n  'libra':'\\u264e\\ufe0f',\n  'light_rail':'\\ud83d\\ude88',\n  'link':'\\ud83d\\udd17',\n  'lion':'\\ud83e\\udd81',\n  'lips':'\\ud83d\\udc44',\n  'lipstick':'\\ud83d\\udc84',\n  'lizard':'\\ud83e\\udd8e',\n  'lock':'\\ud83d\\udd12',\n  'lock_with_ink_pen':'\\ud83d\\udd0f',\n  'lollipop':'\\ud83c\\udf6d',\n  'loop':'\\u27bf',\n  'loud_sound':'\\ud83d\\udd0a',\n  'loudspeaker':'\\ud83d\\udce2',\n  'love_hotel':'\\ud83c\\udfe9',\n  'love_letter':'\\ud83d\\udc8c',\n  'low_brightness':'\\ud83d\\udd05',\n  'lying_face':'\\ud83e\\udd25',\n  'm':'\\u24c2\\ufe0f',\n  'mag':'\\ud83d\\udd0d',\n  'mag_right':'\\ud83d\\udd0e',\n  'mahjong':'\\ud83c\\udc04\\ufe0f',\n  'mailbox':'\\ud83d\\udceb',\n  'mailbox_closed':'\\ud83d\\udcea',\n  'mailbox_with_mail':'\\ud83d\\udcec',\n  'mailbox_with_no_mail':'\\ud83d\\udced',\n  'man':'\\ud83d\\udc68',\n  'man_artist':'\\ud83d\\udc68&zwj;\\ud83c\\udfa8',\n  'man_astronaut':'\\ud83d\\udc68&zwj;\\ud83d\\ude80',\n  'man_cartwheeling':'\\ud83e\\udd38&zwj;\\u2642\\ufe0f',\n  'man_cook':'\\ud83d\\udc68&zwj;\\ud83c\\udf73',\n  'man_dancing':'\\ud83d\\udd7a',\n  'man_facepalming':'\\ud83e\\udd26&zwj;\\u2642\\ufe0f',\n  'man_factory_worker':'\\ud83d\\udc68&zwj;\\ud83c\\udfed',\n  'man_farmer':'\\ud83d\\udc68&zwj;\\ud83c\\udf3e',\n  'man_firefighter':'\\ud83d\\udc68&zwj;\\ud83d\\ude92',\n  'man_health_worker':'\\ud83d\\udc68&zwj;\\u2695\\ufe0f',\n  'man_in_tuxedo':'\\ud83e\\udd35',\n  'man_judge':'\\ud83d\\udc68&zwj;\\u2696\\ufe0f',\n  'man_juggling':'\\ud83e\\udd39&zwj;\\u2642\\ufe0f',\n  'man_mechanic':'\\ud83d\\udc68&zwj;\\ud83d\\udd27',\n  'man_office_worker':'\\ud83d\\udc68&zwj;\\ud83d\\udcbc',\n  'man_pilot':'\\ud83d\\udc68&zwj;\\u2708\\ufe0f',\n  'man_playing_handball':'\\ud83e\\udd3e&zwj;\\u2642\\ufe0f',\n  'man_playing_water_polo':'\\ud83e\\udd3d&zwj;\\u2642\\ufe0f',\n  'man_scientist':'\\ud83d\\udc68&zwj;\\ud83d\\udd2c',\n  'man_shrugging':'\\ud83e\\udd37&zwj;\\u2642\\ufe0f',\n  'man_singer':'\\ud83d\\udc68&zwj;\\ud83c\\udfa4',\n  'man_student':'\\ud83d\\udc68&zwj;\\ud83c\\udf93',\n  'man_teacher':'\\ud83d\\udc68&zwj;\\ud83c\\udfeb',\n  'man_technologist':'\\ud83d\\udc68&zwj;\\ud83d\\udcbb',\n  'man_with_gua_pi_mao':'\\ud83d\\udc72',\n  'man_with_turban':'\\ud83d\\udc73',\n  'tangerine':'\\ud83c\\udf4a',\n  'mans_shoe':'\\ud83d\\udc5e',\n  'mantelpiece_clock':'\\ud83d\\udd70',\n  'maple_leaf':'\\ud83c\\udf41',\n  'martial_arts_uniform':'\\ud83e\\udd4b',\n  'mask':'\\ud83d\\ude37',\n  'massage_woman':'\\ud83d\\udc86',\n  'massage_man':'\\ud83d\\udc86&zwj;\\u2642\\ufe0f',\n  'meat_on_bone':'\\ud83c\\udf56',\n  'medal_military':'\\ud83c\\udf96',\n  'medal_sports':'\\ud83c\\udfc5',\n  'mega':'\\ud83d\\udce3',\n  'melon':'\\ud83c\\udf48',\n  'memo':'\\ud83d\\udcdd',\n  'men_wrestling':'\\ud83e\\udd3c&zwj;\\u2642\\ufe0f',\n  'menorah':'\\ud83d\\udd4e',\n  'mens':'\\ud83d\\udeb9',\n  'metal':'\\ud83e\\udd18',\n  'metro':'\\ud83d\\ude87',\n  'microphone':'\\ud83c\\udfa4',\n  'microscope':'\\ud83d\\udd2c',\n  'milk_glass':'\\ud83e\\udd5b',\n  'milky_way':'\\ud83c\\udf0c',\n  'minibus':'\\ud83d\\ude90',\n  'minidisc':'\\ud83d\\udcbd',\n  'mobile_phone_off':'\\ud83d\\udcf4',\n  'money_mouth_face':'\\ud83e\\udd11',\n  'money_with_wings':'\\ud83d\\udcb8',\n  'moneybag':'\\ud83d\\udcb0',\n  'monkey':'\\ud83d\\udc12',\n  'monkey_face':'\\ud83d\\udc35',\n  'monorail':'\\ud83d\\ude9d',\n  'moon':'\\ud83c\\udf14',\n  'mortar_board':'\\ud83c\\udf93',\n  'mosque':'\\ud83d\\udd4c',\n  'motor_boat':'\\ud83d\\udee5',\n  'motor_scooter':'\\ud83d\\udef5',\n  'motorcycle':'\\ud83c\\udfcd',\n  'motorway':'\\ud83d\\udee3',\n  'mount_fuji':'\\ud83d\\uddfb',\n  'mountain':'\\u26f0',\n  'mountain_biking_man':'\\ud83d\\udeb5',\n  'mountain_biking_woman':'\\ud83d\\udeb5&zwj;\\u2640\\ufe0f',\n  'mountain_cableway':'\\ud83d\\udea0',\n  'mountain_railway':'\\ud83d\\ude9e',\n  'mountain_snow':'\\ud83c\\udfd4',\n  'mouse':'\\ud83d\\udc2d',\n  'mouse2':'\\ud83d\\udc01',\n  'movie_camera':'\\ud83c\\udfa5',\n  'moyai':'\\ud83d\\uddff',\n  'mrs_claus':'\\ud83e\\udd36',\n  'muscle':'\\ud83d\\udcaa',\n  'mushroom':'\\ud83c\\udf44',\n  'musical_keyboard':'\\ud83c\\udfb9',\n  'musical_note':'\\ud83c\\udfb5',\n  'musical_score':'\\ud83c\\udfbc',\n  'mute':'\\ud83d\\udd07',\n  'nail_care':'\\ud83d\\udc85',\n  'name_badge':'\\ud83d\\udcdb',\n  'national_park':'\\ud83c\\udfde',\n  'nauseated_face':'\\ud83e\\udd22',\n  'necktie':'\\ud83d\\udc54',\n  'negative_squared_cross_mark':'\\u274e',\n  'nerd_face':'\\ud83e\\udd13',\n  'neutral_face':'\\ud83d\\ude10',\n  'new':'\\ud83c\\udd95',\n  'new_moon':'\\ud83c\\udf11',\n  'new_moon_with_face':'\\ud83c\\udf1a',\n  'newspaper':'\\ud83d\\udcf0',\n  'newspaper_roll':'\\ud83d\\uddde',\n  'next_track_button':'\\u23ed',\n  'ng':'\\ud83c\\udd96',\n  'no_good_man':'\\ud83d\\ude45&zwj;\\u2642\\ufe0f',\n  'no_good_woman':'\\ud83d\\ude45',\n  'night_with_stars':'\\ud83c\\udf03',\n  'no_bell':'\\ud83d\\udd15',\n  'no_bicycles':'\\ud83d\\udeb3',\n  'no_entry':'\\u26d4\\ufe0f',\n  'no_entry_sign':'\\ud83d\\udeab',\n  'no_mobile_phones':'\\ud83d\\udcf5',\n  'no_mouth':'\\ud83d\\ude36',\n  'no_pedestrians':'\\ud83d\\udeb7',\n  'no_smoking':'\\ud83d\\udead',\n  'non-potable_water':'\\ud83d\\udeb1',\n  'nose':'\\ud83d\\udc43',\n  'notebook':'\\ud83d\\udcd3',\n  'notebook_with_decorative_cover':'\\ud83d\\udcd4',\n  'notes':'\\ud83c\\udfb6',\n  'nut_and_bolt':'\\ud83d\\udd29',\n  'o':'\\u2b55\\ufe0f',\n  'o2':'\\ud83c\\udd7e\\ufe0f',\n  'ocean':'\\ud83c\\udf0a',\n  'octopus':'\\ud83d\\udc19',\n  'oden':'\\ud83c\\udf62',\n  'office':'\\ud83c\\udfe2',\n  'oil_drum':'\\ud83d\\udee2',\n  'ok':'\\ud83c\\udd97',\n  'ok_hand':'\\ud83d\\udc4c',\n  'ok_man':'\\ud83d\\ude46&zwj;\\u2642\\ufe0f',\n  'ok_woman':'\\ud83d\\ude46',\n  'old_key':'\\ud83d\\udddd',\n  'older_man':'\\ud83d\\udc74',\n  'older_woman':'\\ud83d\\udc75',\n  'om':'\\ud83d\\udd49',\n  'on':'\\ud83d\\udd1b',\n  'oncoming_automobile':'\\ud83d\\ude98',\n  'oncoming_bus':'\\ud83d\\ude8d',\n  'oncoming_police_car':'\\ud83d\\ude94',\n  'oncoming_taxi':'\\ud83d\\ude96',\n  'open_file_folder':'\\ud83d\\udcc2',\n  'open_hands':'\\ud83d\\udc50',\n  'open_mouth':'\\ud83d\\ude2e',\n  'open_umbrella':'\\u2602\\ufe0f',\n  'ophiuchus':'\\u26ce',\n  'orange_book':'\\ud83d\\udcd9',\n  'orthodox_cross':'\\u2626\\ufe0f',\n  'outbox_tray':'\\ud83d\\udce4',\n  'owl':'\\ud83e\\udd89',\n  'ox':'\\ud83d\\udc02',\n  'package':'\\ud83d\\udce6',\n  'page_facing_up':'\\ud83d\\udcc4',\n  'page_with_curl':'\\ud83d\\udcc3',\n  'pager':'\\ud83d\\udcdf',\n  'paintbrush':'\\ud83d\\udd8c',\n  'palm_tree':'\\ud83c\\udf34',\n  'pancakes':'\\ud83e\\udd5e',\n  'panda_face':'\\ud83d\\udc3c',\n  'paperclip':'\\ud83d\\udcce',\n  'paperclips':'\\ud83d\\udd87',\n  'parasol_on_ground':'\\u26f1',\n  'parking':'\\ud83c\\udd7f\\ufe0f',\n  'part_alternation_mark':'\\u303d\\ufe0f',\n  'partly_sunny':'\\u26c5\\ufe0f',\n  'passenger_ship':'\\ud83d\\udef3',\n  'passport_control':'\\ud83d\\udec2',\n  'pause_button':'\\u23f8',\n  'peace_symbol':'\\u262e\\ufe0f',\n  'peach':'\\ud83c\\udf51',\n  'peanuts':'\\ud83e\\udd5c',\n  'pear':'\\ud83c\\udf50',\n  'pen':'\\ud83d\\udd8a',\n  'pencil2':'\\u270f\\ufe0f',\n  'penguin':'\\ud83d\\udc27',\n  'pensive':'\\ud83d\\ude14',\n  'performing_arts':'\\ud83c\\udfad',\n  'persevere':'\\ud83d\\ude23',\n  'person_fencing':'\\ud83e\\udd3a',\n  'pouting_woman':'\\ud83d\\ude4e',\n  'phone':'\\u260e\\ufe0f',\n  'pick':'\\u26cf',\n  'pig':'\\ud83d\\udc37',\n  'pig2':'\\ud83d\\udc16',\n  'pig_nose':'\\ud83d\\udc3d',\n  'pill':'\\ud83d\\udc8a',\n  'pineapple':'\\ud83c\\udf4d',\n  'ping_pong':'\\ud83c\\udfd3',\n  'pisces':'\\u2653\\ufe0f',\n  'pizza':'\\ud83c\\udf55',\n  'place_of_worship':'\\ud83d\\uded0',\n  'plate_with_cutlery':'\\ud83c\\udf7d',\n  'play_or_pause_button':'\\u23ef',\n  'point_down':'\\ud83d\\udc47',\n  'point_left':'\\ud83d\\udc48',\n  'point_right':'\\ud83d\\udc49',\n  'point_up':'\\u261d\\ufe0f',\n  'point_up_2':'\\ud83d\\udc46',\n  'police_car':'\\ud83d\\ude93',\n  'policewoman':'\\ud83d\\udc6e&zwj;\\u2640\\ufe0f',\n  'poodle':'\\ud83d\\udc29',\n  'popcorn':'\\ud83c\\udf7f',\n  'post_office':'\\ud83c\\udfe3',\n  'postal_horn':'\\ud83d\\udcef',\n  'postbox':'\\ud83d\\udcee',\n  'potable_water':'\\ud83d\\udeb0',\n  'potato':'\\ud83e\\udd54',\n  'pouch':'\\ud83d\\udc5d',\n  'poultry_leg':'\\ud83c\\udf57',\n  'pound':'\\ud83d\\udcb7',\n  'rage':'\\ud83d\\ude21',\n  'pouting_cat':'\\ud83d\\ude3e',\n  'pouting_man':'\\ud83d\\ude4e&zwj;\\u2642\\ufe0f',\n  'pray':'\\ud83d\\ude4f',\n  'prayer_beads':'\\ud83d\\udcff',\n  'pregnant_woman':'\\ud83e\\udd30',\n  'previous_track_button':'\\u23ee',\n  'prince':'\\ud83e\\udd34',\n  'princess':'\\ud83d\\udc78',\n  'printer':'\\ud83d\\udda8',\n  'purple_heart':'\\ud83d\\udc9c',\n  'purse':'\\ud83d\\udc5b',\n  'pushpin':'\\ud83d\\udccc',\n  'put_litter_in_its_place':'\\ud83d\\udeae',\n  'question':'\\u2753',\n  'rabbit':'\\ud83d\\udc30',\n  'rabbit2':'\\ud83d\\udc07',\n  'racehorse':'\\ud83d\\udc0e',\n  'racing_car':'\\ud83c\\udfce',\n  'radio':'\\ud83d\\udcfb',\n  'radio_button':'\\ud83d\\udd18',\n  'radioactive':'\\u2622\\ufe0f',\n  'railway_car':'\\ud83d\\ude83',\n  'railway_track':'\\ud83d\\udee4',\n  'rainbow':'\\ud83c\\udf08',\n  'rainbow_flag':'\\ud83c\\udff3\\ufe0f&zwj;\\ud83c\\udf08',\n  'raised_back_of_hand':'\\ud83e\\udd1a',\n  'raised_hand_with_fingers_splayed':'\\ud83d\\udd90',\n  'raised_hands':'\\ud83d\\ude4c',\n  'raising_hand_woman':'\\ud83d\\ude4b',\n  'raising_hand_man':'\\ud83d\\ude4b&zwj;\\u2642\\ufe0f',\n  'ram':'\\ud83d\\udc0f',\n  'ramen':'\\ud83c\\udf5c',\n  'rat':'\\ud83d\\udc00',\n  'record_button':'\\u23fa',\n  'recycle':'\\u267b\\ufe0f',\n  'red_circle':'\\ud83d\\udd34',\n  'registered':'\\u00ae\\ufe0f',\n  'relaxed':'\\u263a\\ufe0f',\n  'relieved':'\\ud83d\\ude0c',\n  'reminder_ribbon':'\\ud83c\\udf97',\n  'repeat':'\\ud83d\\udd01',\n  'repeat_one':'\\ud83d\\udd02',\n  'rescue_worker_helmet':'\\u26d1',\n  'restroom':'\\ud83d\\udebb',\n  'revolving_hearts':'\\ud83d\\udc9e',\n  'rewind':'\\u23ea',\n  'rhinoceros':'\\ud83e\\udd8f',\n  'ribbon':'\\ud83c\\udf80',\n  'rice':'\\ud83c\\udf5a',\n  'rice_ball':'\\ud83c\\udf59',\n  'rice_cracker':'\\ud83c\\udf58',\n  'rice_scene':'\\ud83c\\udf91',\n  'right_anger_bubble':'\\ud83d\\uddef',\n  'ring':'\\ud83d\\udc8d',\n  'robot':'\\ud83e\\udd16',\n  'rocket':'\\ud83d\\ude80',\n  'rofl':'\\ud83e\\udd23',\n  'roll_eyes':'\\ud83d\\ude44',\n  'roller_coaster':'\\ud83c\\udfa2',\n  'rooster':'\\ud83d\\udc13',\n  'rose':'\\ud83c\\udf39',\n  'rosette':'\\ud83c\\udff5',\n  'rotating_light':'\\ud83d\\udea8',\n  'round_pushpin':'\\ud83d\\udccd',\n  'rowing_man':'\\ud83d\\udea3',\n  'rowing_woman':'\\ud83d\\udea3&zwj;\\u2640\\ufe0f',\n  'rugby_football':'\\ud83c\\udfc9',\n  'running_man':'\\ud83c\\udfc3',\n  'running_shirt_with_sash':'\\ud83c\\udfbd',\n  'running_woman':'\\ud83c\\udfc3&zwj;\\u2640\\ufe0f',\n  'sa':'\\ud83c\\ude02\\ufe0f',\n  'sagittarius':'\\u2650\\ufe0f',\n  'sake':'\\ud83c\\udf76',\n  'sandal':'\\ud83d\\udc61',\n  'santa':'\\ud83c\\udf85',\n  'satellite':'\\ud83d\\udce1',\n  'saxophone':'\\ud83c\\udfb7',\n  'school':'\\ud83c\\udfeb',\n  'school_satchel':'\\ud83c\\udf92',\n  'scissors':'\\u2702\\ufe0f',\n  'scorpion':'\\ud83e\\udd82',\n  'scorpius':'\\u264f\\ufe0f',\n  'scream':'\\ud83d\\ude31',\n  'scream_cat':'\\ud83d\\ude40',\n  'scroll':'\\ud83d\\udcdc',\n  'seat':'\\ud83d\\udcba',\n  'secret':'\\u3299\\ufe0f',\n  'see_no_evil':'\\ud83d\\ude48',\n  'seedling':'\\ud83c\\udf31',\n  'selfie':'\\ud83e\\udd33',\n  'shallow_pan_of_food':'\\ud83e\\udd58',\n  'shamrock':'\\u2618\\ufe0f',\n  'shark':'\\ud83e\\udd88',\n  'shaved_ice':'\\ud83c\\udf67',\n  'sheep':'\\ud83d\\udc11',\n  'shell':'\\ud83d\\udc1a',\n  'shield':'\\ud83d\\udee1',\n  'shinto_shrine':'\\u26e9',\n  'ship':'\\ud83d\\udea2',\n  'shirt':'\\ud83d\\udc55',\n  'shopping':'\\ud83d\\udecd',\n  'shopping_cart':'\\ud83d\\uded2',\n  'shower':'\\ud83d\\udebf',\n  'shrimp':'\\ud83e\\udd90',\n  'signal_strength':'\\ud83d\\udcf6',\n  'six_pointed_star':'\\ud83d\\udd2f',\n  'ski':'\\ud83c\\udfbf',\n  'skier':'\\u26f7',\n  'skull':'\\ud83d\\udc80',\n  'skull_and_crossbones':'\\u2620\\ufe0f',\n  'sleeping':'\\ud83d\\ude34',\n  'sleeping_bed':'\\ud83d\\udecc',\n  'sleepy':'\\ud83d\\ude2a',\n  'slightly_frowning_face':'\\ud83d\\ude41',\n  'slightly_smiling_face':'\\ud83d\\ude42',\n  'slot_machine':'\\ud83c\\udfb0',\n  'small_airplane':'\\ud83d\\udee9',\n  'small_blue_diamond':'\\ud83d\\udd39',\n  'small_orange_diamond':'\\ud83d\\udd38',\n  'small_red_triangle':'\\ud83d\\udd3a',\n  'small_red_triangle_down':'\\ud83d\\udd3b',\n  'smile':'\\ud83d\\ude04',\n  'smile_cat':'\\ud83d\\ude38',\n  'smiley':'\\ud83d\\ude03',\n  'smiley_cat':'\\ud83d\\ude3a',\n  'smiling_imp':'\\ud83d\\ude08',\n  'smirk':'\\ud83d\\ude0f',\n  'smirk_cat':'\\ud83d\\ude3c',\n  'smoking':'\\ud83d\\udeac',\n  'snail':'\\ud83d\\udc0c',\n  'snake':'\\ud83d\\udc0d',\n  'sneezing_face':'\\ud83e\\udd27',\n  'snowboarder':'\\ud83c\\udfc2',\n  'snowflake':'\\u2744\\ufe0f',\n  'snowman':'\\u26c4\\ufe0f',\n  'snowman_with_snow':'\\u2603\\ufe0f',\n  'sob':'\\ud83d\\ude2d',\n  'soccer':'\\u26bd\\ufe0f',\n  'soon':'\\ud83d\\udd1c',\n  'sos':'\\ud83c\\udd98',\n  'sound':'\\ud83d\\udd09',\n  'space_invader':'\\ud83d\\udc7e',\n  'spades':'\\u2660\\ufe0f',\n  'spaghetti':'\\ud83c\\udf5d',\n  'sparkle':'\\u2747\\ufe0f',\n  'sparkler':'\\ud83c\\udf87',\n  'sparkles':'\\u2728',\n  'sparkling_heart':'\\ud83d\\udc96',\n  'speak_no_evil':'\\ud83d\\ude4a',\n  'speaker':'\\ud83d\\udd08',\n  'speaking_head':'\\ud83d\\udde3',\n  'speech_balloon':'\\ud83d\\udcac',\n  'speedboat':'\\ud83d\\udea4',\n  'spider':'\\ud83d\\udd77',\n  'spider_web':'\\ud83d\\udd78',\n  'spiral_calendar':'\\ud83d\\uddd3',\n  'spiral_notepad':'\\ud83d\\uddd2',\n  'spoon':'\\ud83e\\udd44',\n  'squid':'\\ud83e\\udd91',\n  'stadium':'\\ud83c\\udfdf',\n  'star':'\\u2b50\\ufe0f',\n  'star2':'\\ud83c\\udf1f',\n  'star_and_crescent':'\\u262a\\ufe0f',\n  'star_of_david':'\\u2721\\ufe0f',\n  'stars':'\\ud83c\\udf20',\n  'station':'\\ud83d\\ude89',\n  'statue_of_liberty':'\\ud83d\\uddfd',\n  'steam_locomotive':'\\ud83d\\ude82',\n  'stew':'\\ud83c\\udf72',\n  'stop_button':'\\u23f9',\n  'stop_sign':'\\ud83d\\uded1',\n  'stopwatch':'\\u23f1',\n  'straight_ruler':'\\ud83d\\udccf',\n  'strawberry':'\\ud83c\\udf53',\n  'stuck_out_tongue':'\\ud83d\\ude1b',\n  'stuck_out_tongue_closed_eyes':'\\ud83d\\ude1d',\n  'stuck_out_tongue_winking_eye':'\\ud83d\\ude1c',\n  'studio_microphone':'\\ud83c\\udf99',\n  'stuffed_flatbread':'\\ud83e\\udd59',\n  'sun_behind_large_cloud':'\\ud83c\\udf25',\n  'sun_behind_rain_cloud':'\\ud83c\\udf26',\n  'sun_behind_small_cloud':'\\ud83c\\udf24',\n  'sun_with_face':'\\ud83c\\udf1e',\n  'sunflower':'\\ud83c\\udf3b',\n  'sunglasses':'\\ud83d\\ude0e',\n  'sunny':'\\u2600\\ufe0f',\n  'sunrise':'\\ud83c\\udf05',\n  'sunrise_over_mountains':'\\ud83c\\udf04',\n  'surfing_man':'\\ud83c\\udfc4',\n  'surfing_woman':'\\ud83c\\udfc4&zwj;\\u2640\\ufe0f',\n  'sushi':'\\ud83c\\udf63',\n  'suspension_railway':'\\ud83d\\ude9f',\n  'sweat':'\\ud83d\\ude13',\n  'sweat_drops':'\\ud83d\\udca6',\n  'sweat_smile':'\\ud83d\\ude05',\n  'sweet_potato':'\\ud83c\\udf60',\n  'swimming_man':'\\ud83c\\udfca',\n  'swimming_woman':'\\ud83c\\udfca&zwj;\\u2640\\ufe0f',\n  'symbols':'\\ud83d\\udd23',\n  'synagogue':'\\ud83d\\udd4d',\n  'syringe':'\\ud83d\\udc89',\n  'taco':'\\ud83c\\udf2e',\n  'tada':'\\ud83c\\udf89',\n  'tanabata_tree':'\\ud83c\\udf8b',\n  'taurus':'\\u2649\\ufe0f',\n  'taxi':'\\ud83d\\ude95',\n  'tea':'\\ud83c\\udf75',\n  'telephone_receiver':'\\ud83d\\udcde',\n  'telescope':'\\ud83d\\udd2d',\n  'tennis':'\\ud83c\\udfbe',\n  'tent':'\\u26fa\\ufe0f',\n  'thermometer':'\\ud83c\\udf21',\n  'thinking':'\\ud83e\\udd14',\n  'thought_balloon':'\\ud83d\\udcad',\n  'ticket':'\\ud83c\\udfab',\n  'tickets':'\\ud83c\\udf9f',\n  'tiger':'\\ud83d\\udc2f',\n  'tiger2':'\\ud83d\\udc05',\n  'timer_clock':'\\u23f2',\n  'tipping_hand_man':'\\ud83d\\udc81&zwj;\\u2642\\ufe0f',\n  'tired_face':'\\ud83d\\ude2b',\n  'tm':'\\u2122\\ufe0f',\n  'toilet':'\\ud83d\\udebd',\n  'tokyo_tower':'\\ud83d\\uddfc',\n  'tomato':'\\ud83c\\udf45',\n  'tongue':'\\ud83d\\udc45',\n  'top':'\\ud83d\\udd1d',\n  'tophat':'\\ud83c\\udfa9',\n  'tornado':'\\ud83c\\udf2a',\n  'trackball':'\\ud83d\\uddb2',\n  'tractor':'\\ud83d\\ude9c',\n  'traffic_light':'\\ud83d\\udea5',\n  'train':'\\ud83d\\ude8b',\n  'train2':'\\ud83d\\ude86',\n  'tram':'\\ud83d\\ude8a',\n  'triangular_flag_on_post':'\\ud83d\\udea9',\n  'triangular_ruler':'\\ud83d\\udcd0',\n  'trident':'\\ud83d\\udd31',\n  'triumph':'\\ud83d\\ude24',\n  'trolleybus':'\\ud83d\\ude8e',\n  'trophy':'\\ud83c\\udfc6',\n  'tropical_drink':'\\ud83c\\udf79',\n  'tropical_fish':'\\ud83d\\udc20',\n  'truck':'\\ud83d\\ude9a',\n  'trumpet':'\\ud83c\\udfba',\n  'tulip':'\\ud83c\\udf37',\n  'tumbler_glass':'\\ud83e\\udd43',\n  'turkey':'\\ud83e\\udd83',\n  'turtle':'\\ud83d\\udc22',\n  'tv':'\\ud83d\\udcfa',\n  'twisted_rightwards_arrows':'\\ud83d\\udd00',\n  'two_hearts':'\\ud83d\\udc95',\n  'two_men_holding_hands':'\\ud83d\\udc6c',\n  'two_women_holding_hands':'\\ud83d\\udc6d',\n  'u5272':'\\ud83c\\ude39',\n  'u5408':'\\ud83c\\ude34',\n  'u55b6':'\\ud83c\\ude3a',\n  'u6307':'\\ud83c\\ude2f\\ufe0f',\n  'u6708':'\\ud83c\\ude37\\ufe0f',\n  'u6709':'\\ud83c\\ude36',\n  'u6e80':'\\ud83c\\ude35',\n  'u7121':'\\ud83c\\ude1a\\ufe0f',\n  'u7533':'\\ud83c\\ude38',\n  'u7981':'\\ud83c\\ude32',\n  'u7a7a':'\\ud83c\\ude33',\n  'umbrella':'\\u2614\\ufe0f',\n  'unamused':'\\ud83d\\ude12',\n  'underage':'\\ud83d\\udd1e',\n  'unicorn':'\\ud83e\\udd84',\n  'unlock':'\\ud83d\\udd13',\n  'up':'\\ud83c\\udd99',\n  'upside_down_face':'\\ud83d\\ude43',\n  'v':'\\u270c\\ufe0f',\n  'vertical_traffic_light':'\\ud83d\\udea6',\n  'vhs':'\\ud83d\\udcfc',\n  'vibration_mode':'\\ud83d\\udcf3',\n  'video_camera':'\\ud83d\\udcf9',\n  'video_game':'\\ud83c\\udfae',\n  'violin':'\\ud83c\\udfbb',\n  'virgo':'\\u264d\\ufe0f',\n  'volcano':'\\ud83c\\udf0b',\n  'volleyball':'\\ud83c\\udfd0',\n  'vs':'\\ud83c\\udd9a',\n  'vulcan_salute':'\\ud83d\\udd96',\n  'walking_man':'\\ud83d\\udeb6',\n  'walking_woman':'\\ud83d\\udeb6&zwj;\\u2640\\ufe0f',\n  'waning_crescent_moon':'\\ud83c\\udf18',\n  'waning_gibbous_moon':'\\ud83c\\udf16',\n  'warning':'\\u26a0\\ufe0f',\n  'wastebasket':'\\ud83d\\uddd1',\n  'watch':'\\u231a\\ufe0f',\n  'water_buffalo':'\\ud83d\\udc03',\n  'watermelon':'\\ud83c\\udf49',\n  'wave':'\\ud83d\\udc4b',\n  'wavy_dash':'\\u3030\\ufe0f',\n  'waxing_crescent_moon':'\\ud83c\\udf12',\n  'wc':'\\ud83d\\udebe',\n  'weary':'\\ud83d\\ude29',\n  'wedding':'\\ud83d\\udc92',\n  'weight_lifting_man':'\\ud83c\\udfcb\\ufe0f',\n  'weight_lifting_woman':'\\ud83c\\udfcb\\ufe0f&zwj;\\u2640\\ufe0f',\n  'whale':'\\ud83d\\udc33',\n  'whale2':'\\ud83d\\udc0b',\n  'wheel_of_dharma':'\\u2638\\ufe0f',\n  'wheelchair':'\\u267f\\ufe0f',\n  'white_check_mark':'\\u2705',\n  'white_circle':'\\u26aa\\ufe0f',\n  'white_flag':'\\ud83c\\udff3\\ufe0f',\n  'white_flower':'\\ud83d\\udcae',\n  'white_large_square':'\\u2b1c\\ufe0f',\n  'white_medium_small_square':'\\u25fd\\ufe0f',\n  'white_medium_square':'\\u25fb\\ufe0f',\n  'white_small_square':'\\u25ab\\ufe0f',\n  'white_square_button':'\\ud83d\\udd33',\n  'wilted_flower':'\\ud83e\\udd40',\n  'wind_chime':'\\ud83c\\udf90',\n  'wind_face':'\\ud83c\\udf2c',\n  'wine_glass':'\\ud83c\\udf77',\n  'wink':'\\ud83d\\ude09',\n  'wolf':'\\ud83d\\udc3a',\n  'woman':'\\ud83d\\udc69',\n  'woman_artist':'\\ud83d\\udc69&zwj;\\ud83c\\udfa8',\n  'woman_astronaut':'\\ud83d\\udc69&zwj;\\ud83d\\ude80',\n  'woman_cartwheeling':'\\ud83e\\udd38&zwj;\\u2640\\ufe0f',\n  'woman_cook':'\\ud83d\\udc69&zwj;\\ud83c\\udf73',\n  'woman_facepalming':'\\ud83e\\udd26&zwj;\\u2640\\ufe0f',\n  'woman_factory_worker':'\\ud83d\\udc69&zwj;\\ud83c\\udfed',\n  'woman_farmer':'\\ud83d\\udc69&zwj;\\ud83c\\udf3e',\n  'woman_firefighter':'\\ud83d\\udc69&zwj;\\ud83d\\ude92',\n  'woman_health_worker':'\\ud83d\\udc69&zwj;\\u2695\\ufe0f',\n  'woman_judge':'\\ud83d\\udc69&zwj;\\u2696\\ufe0f',\n  'woman_juggling':'\\ud83e\\udd39&zwj;\\u2640\\ufe0f',\n  'woman_mechanic':'\\ud83d\\udc69&zwj;\\ud83d\\udd27',\n  'woman_office_worker':'\\ud83d\\udc69&zwj;\\ud83d\\udcbc',\n  'woman_pilot':'\\ud83d\\udc69&zwj;\\u2708\\ufe0f',\n  'woman_playing_handball':'\\ud83e\\udd3e&zwj;\\u2640\\ufe0f',\n  'woman_playing_water_polo':'\\ud83e\\udd3d&zwj;\\u2640\\ufe0f',\n  'woman_scientist':'\\ud83d\\udc69&zwj;\\ud83d\\udd2c',\n  'woman_shrugging':'\\ud83e\\udd37&zwj;\\u2640\\ufe0f',\n  'woman_singer':'\\ud83d\\udc69&zwj;\\ud83c\\udfa4',\n  'woman_student':'\\ud83d\\udc69&zwj;\\ud83c\\udf93',\n  'woman_teacher':'\\ud83d\\udc69&zwj;\\ud83c\\udfeb',\n  'woman_technologist':'\\ud83d\\udc69&zwj;\\ud83d\\udcbb',\n  'woman_with_turban':'\\ud83d\\udc73&zwj;\\u2640\\ufe0f',\n  'womans_clothes':'\\ud83d\\udc5a',\n  'womans_hat':'\\ud83d\\udc52',\n  'women_wrestling':'\\ud83e\\udd3c&zwj;\\u2640\\ufe0f',\n  'womens':'\\ud83d\\udeba',\n  'world_map':'\\ud83d\\uddfa',\n  'worried':'\\ud83d\\ude1f',\n  'wrench':'\\ud83d\\udd27',\n  'writing_hand':'\\u270d\\ufe0f',\n  'x':'\\u274c',\n  'yellow_heart':'\\ud83d\\udc9b',\n  'yen':'\\ud83d\\udcb4',\n  'yin_yang':'\\u262f\\ufe0f',\n  'yum':'\\ud83d\\ude0b',\n  'zap':'\\u26a1\\ufe0f',\n  'zipper_mouth_face':'\\ud83e\\udd10',\n  'zzz':'\\ud83d\\udca4',\n\n  /* special emojis :P */\n  'octocat':  '<img alt=\":octocat:\" height=\"20\" width=\"20\" align=\"absmiddle\" src=\"https://assets-cdn.github.com/images/icons/emoji/octocat.png\">',\n  'showdown': '<span style=\"font-family: \\'Anonymous Pro\\', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>'\n};\n\r\n/**\n * Created by Estevao on 31-05-2015.\n */\n\n/**\n * Showdown Converter class\n * @class\n * @param {object} [converterOptions]\n * @returns {Converter}\n */\nshowdown.Converter = function (converterOptions) {\n  'use strict';\n\n  var\n      /**\n       * Options used by this converter\n       * @private\n       * @type {{}}\n       */\n      options = {},\n\n      /**\n       * Language extensions used by this converter\n       * @private\n       * @type {Array}\n       */\n      langExtensions = [],\n\n      /**\n       * Output modifiers extensions used by this converter\n       * @private\n       * @type {Array}\n       */\n      outputModifiers = [],\n\n      /**\n       * Event listeners\n       * @private\n       * @type {{}}\n       */\n      listeners = {},\n\n      /**\n       * The flavor set in this converter\n       */\n      setConvFlavor = setFlavor,\n\n    /**\n     * Metadata of the document\n     * @type {{parsed: {}, raw: string, format: string}}\n     */\n      metadata = {\n        parsed: {},\n        raw: '',\n        format: ''\n      };\n\n  _constructor();\n\n  /**\n   * Converter constructor\n   * @private\n   */\n  function _constructor () {\n    converterOptions = converterOptions || {};\n\n    for (var gOpt in globalOptions) {\n      if (globalOptions.hasOwnProperty(gOpt)) {\n        options[gOpt] = globalOptions[gOpt];\n      }\n    }\n\n    // Merge options\n    if (typeof converterOptions === 'object') {\n      for (var opt in converterOptions) {\n        if (converterOptions.hasOwnProperty(opt)) {\n          options[opt] = converterOptions[opt];\n        }\n      }\n    } else {\n      throw Error('Converter expects the passed parameter to be an object, but ' + typeof converterOptions +\n      ' was passed instead.');\n    }\n\n    if (options.extensions) {\n      showdown.helper.forEach(options.extensions, _parseExtension);\n    }\n  }\n\n  /**\n   * Parse extension\n   * @param {*} ext\n   * @param {string} [name='']\n   * @private\n   */\n  function _parseExtension (ext, name) {\n\n    name = name || null;\n    // If it's a string, the extension was previously loaded\n    if (showdown.helper.isString(ext)) {\n      ext = showdown.helper.stdExtName(ext);\n      name = ext;\n\n      // LEGACY_SUPPORT CODE\n      if (showdown.extensions[ext]) {\n        console.warn('DEPRECATION WARNING: ' + ext + ' is an old extension that uses a deprecated loading method.' +\n          'Please inform the developer that the extension should be updated!');\n        legacyExtensionLoading(showdown.extensions[ext], ext);\n        return;\n      // END LEGACY SUPPORT CODE\n\n      } else if (!showdown.helper.isUndefined(extensions[ext])) {\n        ext = extensions[ext];\n\n      } else {\n        throw Error('Extension \"' + ext + '\" could not be loaded. It was either not found or is not a valid extension.');\n      }\n    }\n\n    if (typeof ext === 'function') {\n      ext = ext();\n    }\n\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n\n    var validExt = validate(ext, name);\n    if (!validExt.valid) {\n      throw Error(validExt.error);\n    }\n\n    for (var i = 0; i < ext.length; ++i) {\n      switch (ext[i].type) {\n\n        case 'lang':\n          langExtensions.push(ext[i]);\n          break;\n\n        case 'output':\n          outputModifiers.push(ext[i]);\n          break;\n      }\n      if (ext[i].hasOwnProperty('listeners')) {\n        for (var ln in ext[i].listeners) {\n          if (ext[i].listeners.hasOwnProperty(ln)) {\n            listen(ln, ext[i].listeners[ln]);\n          }\n        }\n      }\n    }\n\n  }\n\n  /**\n   * LEGACY_SUPPORT\n   * @param {*} ext\n   * @param {string} name\n   */\n  function legacyExtensionLoading (ext, name) {\n    if (typeof ext === 'function') {\n      ext = ext(new showdown.Converter());\n    }\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n    var valid = validate(ext, name);\n\n    if (!valid.valid) {\n      throw Error(valid.error);\n    }\n\n    for (var i = 0; i < ext.length; ++i) {\n      switch (ext[i].type) {\n        case 'lang':\n          langExtensions.push(ext[i]);\n          break;\n        case 'output':\n          outputModifiers.push(ext[i]);\n          break;\n        default:// should never reach here\n          throw Error('Extension loader error: Type unrecognized!!!');\n      }\n    }\n  }\n\n  /**\n   * Listen to an event\n   * @param {string} name\n   * @param {function} callback\n   */\n  function listen (name, callback) {\n    if (!showdown.helper.isString(name)) {\n      throw Error('Invalid argument in converter.listen() method: name must be a string, but ' + typeof name + ' given');\n    }\n\n    if (typeof callback !== 'function') {\n      throw Error('Invalid argument in converter.listen() method: callback must be a function, but ' + typeof callback + ' given');\n    }\n\n    if (!listeners.hasOwnProperty(name)) {\n      listeners[name] = [];\n    }\n    listeners[name].push(callback);\n  }\n\n  function rTrimInputText (text) {\n    var rsp = text.match(/^\\s*/)[0].length,\n        rgx = new RegExp('^\\\\s{0,' + rsp + '}', 'gm');\n    return text.replace(rgx, '');\n  }\n\n  /**\n   * Dispatch an event\n   * @private\n   * @param {string} evtName Event name\n   * @param {string} text Text\n   * @param {{}} options Converter Options\n   * @param {{}} globals\n   * @returns {string}\n   */\n  this._dispatch = function dispatch (evtName, text, options, globals) {\n    if (listeners.hasOwnProperty(evtName)) {\n      for (var ei = 0; ei < listeners[evtName].length; ++ei) {\n        var nText = listeners[evtName][ei](evtName, text, this, options, globals);\n        if (nText && typeof nText !== 'undefined') {\n          text = nText;\n        }\n      }\n    }\n    return text;\n  };\n\n  /**\n   * Listen to an event\n   * @param {string} name\n   * @param {function} callback\n   * @returns {showdown.Converter}\n   */\n  this.listen = function (name, callback) {\n    listen(name, callback);\n    return this;\n  };\n\n  /**\n   * Converts a markdown string into HTML\n   * @param {string} text\n   * @returns {*}\n   */\n  this.makeHtml = function (text) {\n    //check if text is not falsy\n    if (!text) {\n      return text;\n    }\n\n    var globals = {\n      gHtmlBlocks:     [],\n      gHtmlMdBlocks:   [],\n      gHtmlSpans:      [],\n      gUrls:           {},\n      gTitles:         {},\n      gDimensions:     {},\n      gListLevel:      0,\n      hashLinkCounts:  {},\n      langExtensions:  langExtensions,\n      outputModifiers: outputModifiers,\n      converter:       this,\n      ghCodeBlocks:    [],\n      metadata: {\n        parsed: {},\n        raw: '',\n        format: ''\n      }\n    };\n\n    // This lets us use  trema as an escape char to avoid md5 hashes\n    // The choice of character is arbitrary; anything that isn't\n    // magic in Markdown will work.\n    text = text.replace(//g, 'T');\n\n    // Replace $ with D\n    // RegExp interprets $ as a special character\n    // when it's in a replacement string\n    text = text.replace(/\\$/g, 'D');\n\n    // Standardize line endings\n    text = text.replace(/\\r\\n/g, '\\n'); // DOS to Unix\n    text = text.replace(/\\r/g, '\\n'); // Mac to Unix\n\n    // Stardardize line spaces\n    text = text.replace(/\\u00A0/g, '&nbsp;');\n\n    if (options.smartIndentationFix) {\n      text = rTrimInputText(text);\n    }\n\n    // Make sure text begins and ends with a couple of newlines:\n    text = '\\n\\n' + text + '\\n\\n';\n\n    // detab\n    text = showdown.subParser('detab')(text, options, globals);\n\n    /**\n     * Strip any lines consisting only of spaces and tabs.\n     * This makes subsequent regexs easier to write, because we can\n     * match consecutive blank lines with /\\n+/ instead of something\n     * contorted like /[ \\t]*\\n+/\n     */\n    text = text.replace(/^[ \\t]+$/mg, '');\n\n    //run languageExtensions\n    showdown.helper.forEach(langExtensions, function (ext) {\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\n    });\n\n    // run the sub parsers\n    text = showdown.subParser('metadata')(text, options, globals);\n    text = showdown.subParser('hashPreCodeTags')(text, options, globals);\n    text = showdown.subParser('githubCodeBlocks')(text, options, globals);\n    text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\n    text = showdown.subParser('hashCodeTags')(text, options, globals);\n    text = showdown.subParser('stripLinkDefinitions')(text, options, globals);\n    text = showdown.subParser('blockGamut')(text, options, globals);\n    text = showdown.subParser('unhashHTMLSpans')(text, options, globals);\n    text = showdown.subParser('unescapeSpecialChars')(text, options, globals);\n\n    // attacklab: Restore dollar signs\n    text = text.replace(/D/g, '$$');\n\n    // attacklab: Restore tremas\n    text = text.replace(/T/g, '');\n\n    // render a complete html document instead of a partial if the option is enabled\n    text = showdown.subParser('completeHTMLDocument')(text, options, globals);\n\n    // Run output modifiers\n    showdown.helper.forEach(outputModifiers, function (ext) {\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\n    });\n\n    // update metadata\n    metadata = globals.metadata;\n    return text;\n  };\n\n  /**\n   * Converts an HTML string into a markdown string\n   * @param src\n   * @param [HTMLParser] A WHATWG DOM and HTML parser, such as JSDOM. If none is supplied, window.document will be used.\n   * @returns {string}\n   */\n  this.makeMarkdown = this.makeMd = function (src, HTMLParser) {\n\n    // replace \\r\\n with \\n\n    src = src.replace(/\\r\\n/g, '\\n');\n    src = src.replace(/\\r/g, '\\n'); // old macs\n\n    // due to an edge case, we need to find this: > <\n    // to prevent removing of non silent white spaces\n    // ex: <em>this is</em> <strong>sparta</strong>\n    src = src.replace(/>[ \\t]+</, '>NBSP;<');\n\n    if (!HTMLParser) {\n      if (window && window.document) {\n        HTMLParser = window.document;\n      } else {\n        throw new Error('HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM');\n      }\n    }\n\n    var doc = HTMLParser.createElement('div');\n    doc.innerHTML = src;\n\n    var globals = {\n      preList: substitutePreCodeTags(doc)\n    };\n\n    // remove all newlines and collapse spaces\n    clean(doc);\n\n    // some stuff, like accidental reference links must now be escaped\n    // TODO\n    // doc.innerHTML = doc.innerHTML.replace(/\\[[\\S\\t ]]/);\n\n    var nodes = doc.childNodes,\n        mdDoc = '';\n\n    for (var i = 0; i < nodes.length; i++) {\n      mdDoc += showdown.subParser('makeMarkdown.node')(nodes[i], globals);\n    }\n\n    function clean (node) {\n      for (var n = 0; n < node.childNodes.length; ++n) {\n        var child = node.childNodes[n];\n        if (child.nodeType === 3) {\n          if (!/\\S/.test(child.nodeValue)) {\n            node.removeChild(child);\n            --n;\n          } else {\n            child.nodeValue = child.nodeValue.split('\\n').join(' ');\n            child.nodeValue = child.nodeValue.replace(/(\\s)+/g, '$1');\n          }\n        } else if (child.nodeType === 1) {\n          clean(child);\n        }\n      }\n    }\n\n    // find all pre tags and replace contents with placeholder\n    // we need this so that we can remove all indentation from html\n    // to ease up parsing\n    function substitutePreCodeTags (doc) {\n\n      var pres = doc.querySelectorAll('pre'),\n          presPH = [];\n\n      for (var i = 0; i < pres.length; ++i) {\n\n        if (pres[i].childElementCount === 1 && pres[i].firstChild.tagName.toLowerCase() === 'code') {\n          var content = pres[i].firstChild.innerHTML.trim(),\n              language = pres[i].firstChild.getAttribute('data-language') || '';\n\n          // if data-language attribute is not defined, then we look for class language-*\n          if (language === '') {\n            var classes = pres[i].firstChild.className.split(' ');\n            for (var c = 0; c < classes.length; ++c) {\n              var matches = classes[c].match(/^language-(.+)$/);\n              if (matches !== null) {\n                language = matches[1];\n                break;\n              }\n            }\n          }\n\n          // unescape html entities in content\n          content = showdown.helper.unescapeHTMLEntities(content);\n\n          presPH.push(content);\n          pres[i].outerHTML = '<precode language=\"' + language + '\" precodenum=\"' + i.toString() + '\"></precode>';\n        } else {\n          presPH.push(pres[i].innerHTML);\n          pres[i].innerHTML = '';\n          pres[i].setAttribute('prenum', i.toString());\n        }\n      }\n      return presPH;\n    }\n\n    return mdDoc;\n  };\n\n  /**\n   * Set an option of this Converter instance\n   * @param {string} key\n   * @param {*} value\n   */\n  this.setOption = function (key, value) {\n    options[key] = value;\n  };\n\n  /**\n   * Get the option of this Converter instance\n   * @param {string} key\n   * @returns {*}\n   */\n  this.getOption = function (key) {\n    return options[key];\n  };\n\n  /**\n   * Get the options of this Converter instance\n   * @returns {{}}\n   */\n  this.getOptions = function () {\n    return options;\n  };\n\n  /**\n   * Add extension to THIS converter\n   * @param {{}} extension\n   * @param {string} [name=null]\n   */\n  this.addExtension = function (extension, name) {\n    name = name || null;\n    _parseExtension(extension, name);\n  };\n\n  /**\n   * Use a global registered extension with THIS converter\n   * @param {string} extensionName Name of the previously registered extension\n   */\n  this.useExtension = function (extensionName) {\n    _parseExtension(extensionName);\n  };\n\n  /**\n   * Set the flavor THIS converter should use\n   * @param {string} name\n   */\n  this.setFlavor = function (name) {\n    if (!flavor.hasOwnProperty(name)) {\n      throw Error(name + ' flavor was not found');\n    }\n    var preset = flavor[name];\n    setConvFlavor = name;\n    for (var option in preset) {\n      if (preset.hasOwnProperty(option)) {\n        options[option] = preset[option];\n      }\n    }\n  };\n\n  /**\n   * Get the currently set flavor of this converter\n   * @returns {string}\n   */\n  this.getFlavor = function () {\n    return setConvFlavor;\n  };\n\n  /**\n   * Remove an extension from THIS converter.\n   * Note: This is a costly operation. It's better to initialize a new converter\n   * and specify the extensions you wish to use\n   * @param {Array} extension\n   */\n  this.removeExtension = function (extension) {\n    if (!showdown.helper.isArray(extension)) {\n      extension = [extension];\n    }\n    for (var a = 0; a < extension.length; ++a) {\n      var ext = extension[a];\n      for (var i = 0; i < langExtensions.length; ++i) {\n        if (langExtensions[i] === ext) {\n          langExtensions[i].splice(i, 1);\n        }\n      }\n      for (var ii = 0; ii < outputModifiers.length; ++i) {\n        if (outputModifiers[ii] === ext) {\n          outputModifiers[ii].splice(i, 1);\n        }\n      }\n    }\n  };\n\n  /**\n   * Get all extension of THIS converter\n   * @returns {{language: Array, output: Array}}\n   */\n  this.getAllExtensions = function () {\n    return {\n      language: langExtensions,\n      output: outputModifiers\n    };\n  };\n\n  /**\n   * Get the metadata of the previously parsed document\n   * @param raw\n   * @returns {string|{}}\n   */\n  this.getMetadata = function (raw) {\n    if (raw) {\n      return metadata.raw;\n    } else {\n      return metadata.parsed;\n    }\n  };\n\n  /**\n   * Get the metadata format of the previously parsed document\n   * @returns {string}\n   */\n  this.getMetadataFormat = function () {\n    return metadata.format;\n  };\n\n  /**\n   * Private: set a single key, value metadata pair\n   * @param {string} key\n   * @param {string} value\n   */\n  this._setMetadataPair = function (key, value) {\n    metadata.parsed[key] = value;\n  };\n\n  /**\n   * Private: set metadata format\n   * @param {string} format\n   */\n  this._setMetadataFormat = function (format) {\n    metadata.format = format;\n  };\n\n  /**\n   * Private: set metadata raw text\n   * @param {string} raw\n   */\n  this._setMetadataRaw = function (raw) {\n    metadata.raw = raw;\n  };\n};\n\r\n/**\n * Turn Markdown link shortcuts into XHTML <a> tags.\n */\nshowdown.subParser('anchors', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('anchors.before', text, options, globals);\n\n  var writeAnchorTag = function (wholeMatch, linkText, linkId, url, m5, m6, title) {\n    if (showdown.helper.isUndefined(title)) {\n      title = '';\n    }\n    linkId = linkId.toLowerCase();\n\n    // Special case for explicit empty url\n    if (wholeMatch.search(/\\(<?\\s*>? ?(['\"].*['\"])?\\)$/m) > -1) {\n      url = '';\n    } else if (!url) {\n      if (!linkId) {\n        // lower-case and turn embedded newlines into spaces\n        linkId = linkText.toLowerCase().replace(/ ?\\n/g, ' ');\n      }\n      url = '#' + linkId;\n\n      if (!showdown.helper.isUndefined(globals.gUrls[linkId])) {\n        url = globals.gUrls[linkId];\n        if (!showdown.helper.isUndefined(globals.gTitles[linkId])) {\n          title = globals.gTitles[linkId];\n        }\n      } else {\n        return wholeMatch;\n      }\n    }\n\n    //url = showdown.helper.escapeCharacters(url, '*_', false); // replaced line to improve performance\n    url = url.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n\n    var result = '<a href=\"' + url + '\"';\n\n    if (title !== '' && title !== null) {\n      title = title.replace(/\"/g, '&quot;');\n      //title = showdown.helper.escapeCharacters(title, '*_', false); // replaced line to improve performance\n      title = title.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n      result += ' title=\"' + title + '\"';\n    }\n\n    // optionLinksInNewWindow only applies\n    // to external links. Hash links (#) open in same page\n    if (options.openLinksInNewWindow && !/^#/.test(url)) {\n      // escaped _\n      result += ' target=\"E95Eblank\"';\n    }\n\n    result += '>' + linkText + '</a>';\n\n    return result;\n  };\n\n  // First, handle reference-style links: [link text] [id]\n  text = text.replace(/\\[((?:\\[[^\\]]*]|[^\\[\\]])*)] ?(?:\\n *)?\\[(.*?)]()()()()/g, writeAnchorTag);\n\n  // Next, inline-style links: [link text](url \"optional title\")\n  // cases with crazy urls like ./image/cat1).png\n  text = text.replace(/\\[((?:\\[[^\\]]*]|[^\\[\\]])*)]()[ \\t]*\\([ \\t]?<([^>]*)>(?:[ \\t]*(([\"'])([^\"]*?)\\5))?[ \\t]?\\)/g,\n    writeAnchorTag);\n\n  // normal cases\n  text = text.replace(/\\[((?:\\[[^\\]]*]|[^\\[\\]])*)]()[ \\t]*\\([ \\t]?<?([\\S]+?(?:\\([\\S]*?\\)[\\S]*?)?)>?(?:[ \\t]*(([\"'])([^\"]*?)\\5))?[ \\t]?\\)/g,\n                      writeAnchorTag);\n\n  // handle reference-style shortcuts: [link text]\n  // These must come last in case you've also got [link test][1]\n  // or [link test](/foo)\n  text = text.replace(/\\[([^\\[\\]]+)]()()()()()/g, writeAnchorTag);\n\n  // Lastly handle GithubMentions if option is enabled\n  if (options.ghMentions) {\n    text = text.replace(/(^|\\s)(\\\\)?(@([a-z\\d]+(?:[a-z\\d.-]+?[a-z\\d]+)*))/gmi, function (wm, st, escape, mentions, username) {\n      if (escape === '\\\\') {\n        return st + mentions;\n      }\n\n      //check if options.ghMentionsLink is a string\n      if (!showdown.helper.isString(options.ghMentionsLink)) {\n        throw new Error('ghMentionsLink option must be a string');\n      }\n      var lnk = options.ghMentionsLink.replace(/\\{u}/g, username),\n          target = '';\n      if (options.openLinksInNewWindow) {\n        target = ' target=\"E95Eblank\"';\n      }\n      return st + '<a href=\"' + lnk + '\"' + target + '>' + mentions + '</a>';\n    });\n  }\n\n  text = globals.converter._dispatch('anchors.after', text, options, globals);\n  return text;\n});\n\r\n// url allowed chars [a-z\\d_.~:/?#[]@!$&'()*+,;=-]\n\nvar simpleURLRegex  = /([*~_]+|\\b)(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+?\\.[^'\">\\s]+?)()(\\1)?(?=\\s|$)(?![\"<>])/gi,\n    simpleURLRegex2 = /([*~_]+|\\b)(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+\\.[^'\">\\s]+?)([.!?,()\\[\\]])?(\\1)?(?=\\s|$)(?![\"<>])/gi,\n    delimUrlRegex   = /()<(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+)()>()/gi,\n    simpleMailRegex = /(^|\\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)(?=$|\\s)/gmi,\n    delimMailRegex  = /<()(?:mailto:)?([-.\\w]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)>/gi,\n\n    replaceLink = function (options) {\n      'use strict';\n      return function (wm, leadingMagicChars, link, m2, m3, trailingPunctuation, trailingMagicChars) {\n        link = link.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n        var lnkTxt = link,\n            append = '',\n            target = '',\n            lmc    = leadingMagicChars || '',\n            tmc    = trailingMagicChars || '';\n        if (/^www\\./i.test(link)) {\n          link = link.replace(/^www\\./i, 'http://www.');\n        }\n        if (options.excludeTrailingPunctuationFromURLs && trailingPunctuation) {\n          append = trailingPunctuation;\n        }\n        if (options.openLinksInNewWindow) {\n          target = ' target=\"E95Eblank\"';\n        }\n        return lmc + '<a href=\"' + link + '\"' + target + '>' + lnkTxt + '</a>' + append + tmc;\n      };\n    },\n\n    replaceMail = function (options, globals) {\n      'use strict';\n      return function (wholeMatch, b, mail) {\n        var href = 'mailto:';\n        b = b || '';\n        mail = showdown.subParser('unescapeSpecialChars')(mail, options, globals);\n        if (options.encodeEmails) {\n          href = showdown.helper.encodeEmailAddress(href + mail);\n          mail = showdown.helper.encodeEmailAddress(mail);\n        } else {\n          href = href + mail;\n        }\n        return b + '<a href=\"' + href + '\">' + mail + '</a>';\n      };\n    };\n\nshowdown.subParser('autoLinks', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('autoLinks.before', text, options, globals);\n\n  text = text.replace(delimUrlRegex, replaceLink(options));\n  text = text.replace(delimMailRegex, replaceMail(options, globals));\n\n  text = globals.converter._dispatch('autoLinks.after', text, options, globals);\n\n  return text;\n});\n\nshowdown.subParser('simplifiedAutoLinks', function (text, options, globals) {\n  'use strict';\n\n  if (!options.simplifiedAutoLink) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('simplifiedAutoLinks.before', text, options, globals);\n\n  if (options.excludeTrailingPunctuationFromURLs) {\n    text = text.replace(simpleURLRegex2, replaceLink(options));\n  } else {\n    text = text.replace(simpleURLRegex, replaceLink(options));\n  }\n  text = text.replace(simpleMailRegex, replaceMail(options, globals));\n\n  text = globals.converter._dispatch('simplifiedAutoLinks.after', text, options, globals);\n\n  return text;\n});\n\r\n/**\n * These are all the transformations that form block-level\n * tags like paragraphs, headers, and list items.\n */\nshowdown.subParser('blockGamut', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('blockGamut.before', text, options, globals);\n\n  // we parse blockquotes first so that we can have headings and hrs\n  // inside blockquotes\n  text = showdown.subParser('blockQuotes')(text, options, globals);\n  text = showdown.subParser('headers')(text, options, globals);\n\n  // Do Horizontal Rules:\n  text = showdown.subParser('horizontalRule')(text, options, globals);\n\n  text = showdown.subParser('lists')(text, options, globals);\n  text = showdown.subParser('codeBlocks')(text, options, globals);\n  text = showdown.subParser('tables')(text, options, globals);\n\n  // We already ran _HashHTMLBlocks() before, in Markdown(), but that\n  // was to escape raw HTML in the original Markdown source. This time,\n  // we're escaping the markup we've just created, so that we don't wrap\n  // <p> tags around block-level tags.\n  text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\n  text = showdown.subParser('paragraphs')(text, options, globals);\n\n  text = globals.converter._dispatch('blockGamut.after', text, options, globals);\n\n  return text;\n});\n\r\nshowdown.subParser('blockQuotes', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('blockQuotes.before', text, options, globals);\n\n  // add a couple extra lines after the text and endtext mark\n  text = text + '\\n\\n';\n\n  var rgx = /(^ {0,3}>[ \\t]?.+\\n(.+\\n)*\\n*)+/gm;\n\n  if (options.splitAdjacentBlockquotes) {\n    rgx = /^ {0,3}>[\\s\\S]*?(?:\\n\\n)/gm;\n  }\n\n  text = text.replace(rgx, function (bq) {\n    // attacklab: hack around Konqueror 3.5.4 bug:\n    // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\n    bq = bq.replace(/^[ \\t]*>[ \\t]?/gm, ''); // trim one level of quoting\n\n    // attacklab: clean up hack\n    bq = bq.replace(/0/g, '');\n\n    bq = bq.replace(/^[ \\t]+$/gm, ''); // trim whitespace-only lines\n    bq = showdown.subParser('githubCodeBlocks')(bq, options, globals);\n    bq = showdown.subParser('blockGamut')(bq, options, globals); // recurse\n\n    bq = bq.replace(/(^|\\n)/g, '$1  ');\n    // These leading spaces screw with <pre> content, so we need to fix that:\n    bq = bq.replace(/(\\s*<pre>[^\\r]+?<\\/pre>)/gm, function (wholeMatch, m1) {\n      var pre = m1;\n      // attacklab: hack around Konqueror 3.5.4 bug:\n      pre = pre.replace(/^  /mg, '0');\n      pre = pre.replace(/0/g, '');\n      return pre;\n    });\n\n    return showdown.subParser('hashBlock')('<blockquote>\\n' + bq + '\\n</blockquote>', options, globals);\n  });\n\n  text = globals.converter._dispatch('blockQuotes.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Process Markdown `<pre><code>` blocks.\n */\nshowdown.subParser('codeBlocks', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('codeBlocks.before', text, options, globals);\n\n  // sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\n  text += '0';\n\n  var pattern = /(?:\\n\\n|^)((?:(?:[ ]{4}|\\t).*\\n+)+)(\\n*[ ]{0,3}[^ \\t\\n]|(?=0))/g;\n  text = text.replace(pattern, function (wholeMatch, m1, m2) {\n    var codeblock = m1,\n        nextChar = m2,\n        end = '\\n';\n\n    codeblock = showdown.subParser('outdent')(codeblock, options, globals);\n    codeblock = showdown.subParser('encodeCode')(codeblock, options, globals);\n    codeblock = showdown.subParser('detab')(codeblock, options, globals);\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing newlines\n\n    if (options.omitExtraWLInCodeBlocks) {\n      end = '';\n    }\n\n    codeblock = '<pre><code>' + codeblock + end + '</code></pre>';\n\n    return showdown.subParser('hashBlock')(codeblock, options, globals) + nextChar;\n  });\n\n  // strip sentinel\n  text = text.replace(/0/, '');\n\n  text = globals.converter._dispatch('codeBlocks.after', text, options, globals);\n  return text;\n});\n\r\n/**\n *\n *   *  Backtick quotes are used for <code></code> spans.\n *\n *   *  You can use multiple backticks as the delimiters if you want to\n *     include literal backticks in the code span. So, this input:\n *\n *         Just type ``foo `bar` baz`` at the prompt.\n *\n *       Will translate to:\n *\n *         <p>Just type <code>foo `bar` baz</code> at the prompt.</p>\n *\n *    There's no arbitrary limit to the number of backticks you\n *    can use as delimters. If you need three consecutive backticks\n *    in your code, use four for delimiters, etc.\n *\n *  *  You can use spaces to get literal backticks at the edges:\n *\n *         ... type `` `bar` `` ...\n *\n *       Turns to:\n *\n *         ... type <code>`bar`</code> ...\n */\nshowdown.subParser('codeSpans', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('codeSpans.before', text, options, globals);\n\n  if (typeof(text) === 'undefined') {\n    text = '';\n  }\n  text = text.replace(/(^|[^\\\\])(`+)([^\\r]*?[^`])\\2(?!`)/gm,\n    function (wholeMatch, m1, m2, m3) {\n      var c = m3;\n      c = c.replace(/^([ \\t]*)/g, '');\t// leading whitespace\n      c = c.replace(/[ \\t]*$/g, '');\t// trailing whitespace\n      c = showdown.subParser('encodeCode')(c, options, globals);\n      c = m1 + '<code>' + c + '</code>';\n      c = showdown.subParser('hashHTMLSpans')(c, options, globals);\n      return c;\n    }\n  );\n\n  text = globals.converter._dispatch('codeSpans.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Create a full HTML document from the processed markdown\n */\nshowdown.subParser('completeHTMLDocument', function (text, options, globals) {\n  'use strict';\n\n  if (!options.completeHTMLDocument) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('completeHTMLDocument.before', text, options, globals);\n\n  var doctype = 'html',\n      doctypeParsed = '<!DOCTYPE HTML>\\n',\n      title = '',\n      charset = '<meta charset=\"utf-8\">\\n',\n      lang = '',\n      metadata = '';\n\n  if (typeof globals.metadata.parsed.doctype !== 'undefined') {\n    doctypeParsed = '<!DOCTYPE ' +  globals.metadata.parsed.doctype + '>\\n';\n    doctype = globals.metadata.parsed.doctype.toString().toLowerCase();\n    if (doctype === 'html' || doctype === 'html5') {\n      charset = '<meta charset=\"utf-8\">';\n    }\n  }\n\n  for (var meta in globals.metadata.parsed) {\n    if (globals.metadata.parsed.hasOwnProperty(meta)) {\n      switch (meta.toLowerCase()) {\n        case 'doctype':\n          break;\n\n        case 'title':\n          title = '<title>' +  globals.metadata.parsed.title + '</title>\\n';\n          break;\n\n        case 'charset':\n          if (doctype === 'html' || doctype === 'html5') {\n            charset = '<meta charset=\"' + globals.metadata.parsed.charset + '\">\\n';\n          } else {\n            charset = '<meta name=\"charset\" content=\"' + globals.metadata.parsed.charset + '\">\\n';\n          }\n          break;\n\n        case 'language':\n        case 'lang':\n          lang = ' lang=\"' + globals.metadata.parsed[meta] + '\"';\n          metadata += '<meta name=\"' + meta + '\" content=\"' + globals.metadata.parsed[meta] + '\">\\n';\n          break;\n\n        default:\n          metadata += '<meta name=\"' + meta + '\" content=\"' + globals.metadata.parsed[meta] + '\">\\n';\n      }\n    }\n  }\n\n  text = doctypeParsed + '<html' + lang + '>\\n<head>\\n' + title + charset + metadata + '</head>\\n<body>\\n' + text.trim() + '\\n</body>\\n</html>';\n\n  text = globals.converter._dispatch('completeHTMLDocument.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Convert all tabs to spaces\n */\nshowdown.subParser('detab', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('detab.before', text, options, globals);\n\n  // expand first n-1 tabs\n  text = text.replace(/\\t(?=\\t)/g, '    '); // g_tab_width\n\n  // replace the nth with two sentinels\n  text = text.replace(/\\t/g, 'AB');\n\n  // use the sentinel to anchor our regex so it doesn't explode\n  text = text.replace(/B(.+?)A/g, function (wholeMatch, m1) {\n    var leadingText = m1,\n        numSpaces = 4 - leadingText.length % 4;  // g_tab_width\n\n    // there *must* be a better way to do this:\n    for (var i = 0; i < numSpaces; i++) {\n      leadingText += ' ';\n    }\n\n    return leadingText;\n  });\n\n  // clean up sentinels\n  text = text.replace(/A/g, '    ');  // g_tab_width\n  text = text.replace(/B/g, '');\n\n  text = globals.converter._dispatch('detab.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('ellipsis', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('ellipsis.before', text, options, globals);\n\n  text = text.replace(/\\.\\.\\./g, '');\n\n  text = globals.converter._dispatch('ellipsis.after', text, options, globals);\n\n  return text;\n});\n\r\n/**\n * Turn emoji codes into emojis\n *\n * List of supported emojis: https://github.com/showdownjs/showdown/wiki/Emojis\n */\nshowdown.subParser('emoji', function (text, options, globals) {\n  'use strict';\n\n  if (!options.emoji) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('emoji.before', text, options, globals);\n\n  var emojiRgx = /:([\\S]+?):/g;\n\n  text = text.replace(emojiRgx, function (wm, emojiCode) {\n    if (showdown.helper.emojis.hasOwnProperty(emojiCode)) {\n      return showdown.helper.emojis[emojiCode];\n    }\n    return wm;\n  });\n\n  text = globals.converter._dispatch('emoji.after', text, options, globals);\n\n  return text;\n});\n\r\n/**\n * Smart processing for ampersands and angle brackets that need to be encoded.\n */\nshowdown.subParser('encodeAmpsAndAngles', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('encodeAmpsAndAngles.before', text, options, globals);\n\n  // Ampersand-encoding based entirely on Nat Irons's Amputator MT plugin:\n  // http://bumppo.net/projects/amputator/\n  text = text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\\w+);)/g, '&amp;');\n\n  // Encode naked <'s\n  text = text.replace(/<(?![a-z\\/?$!])/gi, '&lt;');\n\n  // Encode <\n  text = text.replace(/</g, '&lt;');\n\n  // Encode >\n  text = text.replace(/>/g, '&gt;');\n\n  text = globals.converter._dispatch('encodeAmpsAndAngles.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Returns the string, with after processing the following backslash escape sequences.\n *\n * attacklab: The polite way to do this is with the new escapeCharacters() function:\n *\n *    text = escapeCharacters(text,\"\\\\\",true);\n *    text = escapeCharacters(text,\"`*_{}[]()>#+-.!\",true);\n *\n * ...but we're sidestepping its use of the (slow) RegExp constructor\n * as an optimization for Firefox.  This function gets called a LOT.\n */\nshowdown.subParser('encodeBackslashEscapes', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('encodeBackslashEscapes.before', text, options, globals);\n\n  text = text.replace(/\\\\(\\\\)/g, showdown.helper.escapeCharactersCallback);\n  text = text.replace(/\\\\([`*_{}\\[\\]()>#+.!~=|-])/g, showdown.helper.escapeCharactersCallback);\n\n  text = globals.converter._dispatch('encodeBackslashEscapes.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Encode/escape certain characters inside Markdown code runs.\n * The point is that in code, these characters are literals,\n * and lose their special Markdown meanings.\n */\nshowdown.subParser('encodeCode', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('encodeCode.before', text, options, globals);\n\n  // Encode all ampersands; HTML entities are not\n  // entities within a Markdown code span.\n  text = text\n    .replace(/&/g, '&amp;')\n  // Do the angle bracket song and dance:\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n  // Now, escape characters that are magic in Markdown:\n    .replace(/([*_{}\\[\\]\\\\=~-])/g, showdown.helper.escapeCharactersCallback);\n\n  text = globals.converter._dispatch('encodeCode.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Within tags -- meaning between < and > -- encode [\\ ` * _ ~ =] so they\n * don't conflict with their use in Markdown for code, italics and strong.\n */\nshowdown.subParser('escapeSpecialCharsWithinTagAttributes', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('escapeSpecialCharsWithinTagAttributes.before', text, options, globals);\n\n  // Build a regex to find HTML tags.\n  var tags     = /<\\/?[a-z\\d_:-]+(?:[\\s]+[\\s\\S]+?)?>/gi,\n      comments = /<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;\n\n  text = text.replace(tags, function (wholeMatch) {\n    return wholeMatch\n      .replace(/(.)<\\/?code>(?=.)/g, '$1`')\n      .replace(/([\\\\`*_~=|])/g, showdown.helper.escapeCharactersCallback);\n  });\n\n  text = text.replace(comments, function (wholeMatch) {\n    return wholeMatch\n      .replace(/([\\\\`*_~=|])/g, showdown.helper.escapeCharactersCallback);\n  });\n\n  text = globals.converter._dispatch('escapeSpecialCharsWithinTagAttributes.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Handle github codeblocks prior to running HashHTML so that\n * HTML contained within the codeblock gets escaped properly\n * Example:\n * ```ruby\n *     def hello_world(x)\n *       puts \"Hello, #{x}\"\n *     end\n * ```\n */\nshowdown.subParser('githubCodeBlocks', function (text, options, globals) {\n  'use strict';\n\n  // early exit if option is not enabled\n  if (!options.ghCodeBlocks) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('githubCodeBlocks.before', text, options, globals);\n\n  text += '0';\n\n  text = text.replace(/(?:^|\\n)(?: {0,3})(```+|~~~+)(?: *)([^\\s`~]*)\\n([\\s\\S]*?)\\n(?: {0,3})\\1/g, function (wholeMatch, delim, language, codeblock) {\n    var end = (options.omitExtraWLInCodeBlocks) ? '' : '\\n';\n\n    // First parse the github code block\n    codeblock = showdown.subParser('encodeCode')(codeblock, options, globals);\n    codeblock = showdown.subParser('detab')(codeblock, options, globals);\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing whitespace\n\n    codeblock = '<pre><code' + (language ? ' class=\"' + language + ' language-' + language + '\"' : '') + '>' + codeblock + end + '</code></pre>';\n\n    codeblock = showdown.subParser('hashBlock')(codeblock, options, globals);\n\n    // Since GHCodeblocks can be false positives, we need to\n    // store the primitive text and the parsed text in a global var,\n    // and then return a token\n    return '\\n\\nG' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\n  });\n\n  // attacklab: strip sentinel\n  text = text.replace(/0/, '');\n\n  return globals.converter._dispatch('githubCodeBlocks.after', text, options, globals);\n});\n\r\nshowdown.subParser('hashBlock', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashBlock.before', text, options, globals);\n  text = text.replace(/(^\\n+|\\n+$)/g, '');\n  text = '\\n\\nK' + (globals.gHtmlBlocks.push(text) - 1) + 'K\\n\\n';\n  text = globals.converter._dispatch('hashBlock.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Hash and escape <code> elements that should not be parsed as markdown\n */\nshowdown.subParser('hashCodeTags', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashCodeTags.before', text, options, globals);\n\n  var repFunc = function (wholeMatch, match, left, right) {\n    var codeblock = left + showdown.subParser('encodeCode')(match, options, globals) + right;\n    return 'C' + (globals.gHtmlSpans.push(codeblock) - 1) + 'C';\n  };\n\n  // Hash naked <code>\n  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '<code\\\\b[^>]*>', '</code>', 'gim');\n\n  text = globals.converter._dispatch('hashCodeTags.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('hashElement', function (text, options, globals) {\n  'use strict';\n\n  return function (wholeMatch, m1) {\n    var blockText = m1;\n\n    // Undo double lines\n    blockText = blockText.replace(/\\n\\n/g, '\\n');\n    blockText = blockText.replace(/^\\n/, '');\n\n    // strip trailing blank lines\n    blockText = blockText.replace(/\\n+$/g, '');\n\n    // Replace the element text with a marker (\"KxK\" where x is its key)\n    blockText = '\\n\\nK' + (globals.gHtmlBlocks.push(blockText) - 1) + 'K\\n\\n';\n\n    return blockText;\n  };\n});\n\r\nshowdown.subParser('hashHTMLBlocks', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashHTMLBlocks.before', text, options, globals);\n\n  var blockTags = [\n        'pre',\n        'div',\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6',\n        'blockquote',\n        'table',\n        'dl',\n        'ol',\n        'ul',\n        'script',\n        'noscript',\n        'form',\n        'fieldset',\n        'iframe',\n        'math',\n        'style',\n        'section',\n        'header',\n        'footer',\n        'nav',\n        'article',\n        'aside',\n        'address',\n        'audio',\n        'canvas',\n        'figure',\n        'hgroup',\n        'output',\n        'video',\n        'p'\n      ],\n      repFunc = function (wholeMatch, match, left, right) {\n        var txt = wholeMatch;\n        // check if this html element is marked as markdown\n        // if so, it's contents should be parsed as markdown\n        if (left.search(/\\bmarkdown\\b/) !== -1) {\n          txt = left + globals.converter.makeHtml(match) + right;\n        }\n        return '\\n\\nK' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\\n\\n';\n      };\n\n  if (options.backslashEscapesHTMLTags) {\n    // encode backslash escaped HTML tags\n    text = text.replace(/\\\\<(\\/?[^>]+?)>/g, function (wm, inside) {\n      return '&lt;' + inside + '&gt;';\n    });\n  }\n\n  // hash HTML Blocks\n  for (var i = 0; i < blockTags.length; ++i) {\n\n    var opTagPos,\n        rgx1     = new RegExp('^ {0,3}(<' + blockTags[i] + '\\\\b[^>]*>)', 'im'),\n        patLeft  = '<' + blockTags[i] + '\\\\b[^>]*>',\n        patRight = '</' + blockTags[i] + '>';\n    // 1. Look for the first position of the first opening HTML tag in the text\n    while ((opTagPos = showdown.helper.regexIndexOf(text, rgx1)) !== -1) {\n\n      // if the HTML tag is \\ escaped, we need to escape it and break\n\n\n      //2. Split the text in that position\n      var subTexts = showdown.helper.splitAtIndex(text, opTagPos),\n      //3. Match recursively\n          newSubText1 = showdown.helper.replaceRecursiveRegExp(subTexts[1], repFunc, patLeft, patRight, 'im');\n\n      // prevent an infinite loop\n      if (newSubText1 === subTexts[1]) {\n        break;\n      }\n      text = subTexts[0].concat(newSubText1);\n    }\n  }\n  // HR SPECIAL CASE\n  text = text.replace(/(\\n {0,3}(<(hr)\\b([^<>])*?\\/?>)[ \\t]*(?=\\n{2,}))/g,\n    showdown.subParser('hashElement')(text, options, globals));\n\n  // Special case for standalone HTML comments\n  text = showdown.helper.replaceRecursiveRegExp(text, function (txt) {\n    return '\\n\\nK' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\\n\\n';\n  }, '^ {0,3}<!--', '-->', 'gm');\n\n  // PHP and ASP-style processor instructions (<?...?> and <%...%>)\n  text = text.replace(/(?:\\n\\n)( {0,3}(?:<([?%])[^\\r]*?\\2>)[ \\t]*(?=\\n{2,}))/g,\n    showdown.subParser('hashElement')(text, options, globals));\n\n  text = globals.converter._dispatch('hashHTMLBlocks.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Hash span elements that should not be parsed as markdown\n */\nshowdown.subParser('hashHTMLSpans', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashHTMLSpans.before', text, options, globals);\n\n  function hashHTMLSpan (html) {\n    return 'C' + (globals.gHtmlSpans.push(html) - 1) + 'C';\n  }\n\n  // Hash Self Closing tags\n  text = text.replace(/<[^>]+?\\/>/gi, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  // Hash tags without properties\n  text = text.replace(/<([^>]+?)>[\\s\\S]*?<\\/\\1>/g, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  // Hash tags with properties\n  text = text.replace(/<([^>]+?)\\s[^>]+?>[\\s\\S]*?<\\/\\1>/g, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  // Hash self closing tags without />\n  text = text.replace(/<[^>]+?>/gi, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  /*showdown.helper.matchRecursiveRegExp(text, '<code\\\\b[^>]*>', '</code>', 'gi');*/\n\n  text = globals.converter._dispatch('hashHTMLSpans.after', text, options, globals);\n  return text;\n});\n\n/**\n * Unhash HTML spans\n */\nshowdown.subParser('unhashHTMLSpans', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('unhashHTMLSpans.before', text, options, globals);\n\n  for (var i = 0; i < globals.gHtmlSpans.length; ++i) {\n    var repText = globals.gHtmlSpans[i],\n        // limiter to prevent infinite loop (assume 10 as limit for recurse)\n        limit = 0;\n\n    while (/C(\\d+)C/.test(repText)) {\n      var num = RegExp.$1;\n      repText = repText.replace('C' + num + 'C', globals.gHtmlSpans[num]);\n      if (limit === 10) {\n        console.error('maximum nesting of 10 spans reached!!!');\n        break;\n      }\n      ++limit;\n    }\n    text = text.replace('C' + i + 'C', repText);\n  }\n\n  text = globals.converter._dispatch('unhashHTMLSpans.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Hash and escape <pre><code> elements that should not be parsed as markdown\n */\nshowdown.subParser('hashPreCodeTags', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashPreCodeTags.before', text, options, globals);\n\n  var repFunc = function (wholeMatch, match, left, right) {\n    // encode html entities\n    var codeblock = left + showdown.subParser('encodeCode')(match, options, globals) + right;\n    return '\\n\\nG' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\n  };\n\n  // Hash <pre><code>\n  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '^ {0,3}<pre\\\\b[^>]*>\\\\s*<code\\\\b[^>]*>', '^ {0,3}</code>\\\\s*</pre>', 'gim');\n\n  text = globals.converter._dispatch('hashPreCodeTags.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('headers', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('headers.before', text, options, globals);\n\n  var headerLevelStart = (isNaN(parseInt(options.headerLevelStart))) ? 1 : parseInt(options.headerLevelStart),\n\n  // Set text-style headers:\n  //\tHeader 1\n  //\t========\n  //\n  //\tHeader 2\n  //\t--------\n  //\n      setextRegexH1 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n={2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n=+[ \\t]*\\n+/gm,\n      setextRegexH2 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n-{2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n-+[ \\t]*\\n+/gm;\n\n  text = text.replace(setextRegexH1, function (wholeMatch, m1) {\n\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\n        hLevel = headerLevelStart,\n        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\n  });\n\n  text = text.replace(setextRegexH2, function (matchFound, m1) {\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\n        hLevel = headerLevelStart + 1,\n        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\n  });\n\n  // atx-style headers:\n  //  # Header 1\n  //  ## Header 2\n  //  ## Header 2 with closing hashes ##\n  //  ...\n  //  ###### Header 6\n  //\n  var atxStyle = (options.requireSpaceBeforeHeadingText) ? /^(#{1,6})[ \\t]+(.+?)[ \\t]*#*\\n+/gm : /^(#{1,6})[ \\t]*(.+?)[ \\t]*#*\\n+/gm;\n\n  text = text.replace(atxStyle, function (wholeMatch, m1, m2) {\n    var hText = m2;\n    if (options.customizedHeaderId) {\n      hText = m2.replace(/\\s?\\{([^{]+?)}\\s*$/, '');\n    }\n\n    var span = showdown.subParser('spanGamut')(hText, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m2) + '\"',\n        hLevel = headerLevelStart - 1 + m1.length,\n        header = '<h' + hLevel + hID + '>' + span + '</h' + hLevel + '>';\n\n    return showdown.subParser('hashBlock')(header, options, globals);\n  });\n\n  function headerId (m) {\n    var title,\n        prefix;\n\n    // It is separate from other options to allow combining prefix and customized\n    if (options.customizedHeaderId) {\n      var match = m.match(/\\{([^{]+?)}\\s*$/);\n      if (match && match[1]) {\n        m = match[1];\n      }\n    }\n\n    title = m;\n\n    // Prefix id to prevent causing inadvertent pre-existing style matches.\n    if (showdown.helper.isString(options.prefixHeaderId)) {\n      prefix = options.prefixHeaderId;\n    } else if (options.prefixHeaderId === true) {\n      prefix = 'section-';\n    } else {\n      prefix = '';\n    }\n\n    if (!options.rawPrefixHeaderId) {\n      title = prefix + title;\n    }\n\n    if (options.ghCompatibleHeaderId) {\n      title = title\n        .replace(/ /g, '-')\n        // replace previously escaped chars (&,  and $)\n        .replace(/&amp;/g, '')\n        .replace(/T/g, '')\n        .replace(/D/g, '')\n        // replace rest of the chars (&~$ are repeated as they might have been escaped)\n        // borrowed from github's redcarpet (some they should produce similar results)\n        .replace(/[&+$,\\/:;=?@\"#{}|^~\\[\\]`\\\\*)(%.!'<>]/g, '')\n        .toLowerCase();\n    } else if (options.rawHeaderId) {\n      title = title\n        .replace(/ /g, '-')\n        // replace previously escaped chars (&,  and $)\n        .replace(/&amp;/g, '&')\n        .replace(/T/g, '')\n        .replace(/D/g, '$')\n        // replace \" and '\n        .replace(/[\"']/g, '-')\n        .toLowerCase();\n    } else {\n      title = title\n        .replace(/[^\\w]/g, '')\n        .toLowerCase();\n    }\n\n    if (options.rawPrefixHeaderId) {\n      title = prefix + title;\n    }\n\n    if (globals.hashLinkCounts[title]) {\n      title = title + '-' + (globals.hashLinkCounts[title]++);\n    } else {\n      globals.hashLinkCounts[title] = 1;\n    }\n    return title;\n  }\n\n  text = globals.converter._dispatch('headers.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Turn Markdown link shortcuts into XHTML <a> tags.\n */\nshowdown.subParser('horizontalRule', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('horizontalRule.before', text, options, globals);\n\n  var key = showdown.subParser('hashBlock')('<hr />', options, globals);\n  text = text.replace(/^ {0,2}( ?-){3,}[ \\t]*$/gm, key);\n  text = text.replace(/^ {0,2}( ?\\*){3,}[ \\t]*$/gm, key);\n  text = text.replace(/^ {0,2}( ?_){3,}[ \\t]*$/gm, key);\n\n  text = globals.converter._dispatch('horizontalRule.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Turn Markdown image shortcuts into <img> tags.\n */\nshowdown.subParser('images', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('images.before', text, options, globals);\n\n  var inlineRegExp      = /!\\[([^\\]]*?)][ \\t]*()\\([ \\t]?<?([\\S]+?(?:\\([\\S]*?\\)[\\S]*?)?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:([\"'])([^\"]*?)\\6)?[ \\t]?\\)/g,\n      crazyRegExp       = /!\\[([^\\]]*?)][ \\t]*()\\([ \\t]?<([^>]*)>(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:(?:([\"'])([^\"]*?)\\6))?[ \\t]?\\)/g,\n      base64RegExp      = /!\\[([^\\]]*?)][ \\t]*()\\([ \\t]?<?(data:.+?\\/.+?;base64,[A-Za-z0-9+/=\\n]+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:([\"'])([^\"]*?)\\6)?[ \\t]?\\)/g,\n      referenceRegExp   = /!\\[([^\\]]*?)] ?(?:\\n *)?\\[([\\s\\S]*?)]()()()()()/g,\n      refShortcutRegExp = /!\\[([^\\[\\]]+)]()()()()()/g;\n\n  function writeImageTagBase64 (wholeMatch, altText, linkId, url, width, height, m5, title) {\n    url = url.replace(/\\s/g, '');\n    return writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title);\n  }\n\n  function writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title) {\n\n    var gUrls   = globals.gUrls,\n        gTitles = globals.gTitles,\n        gDims   = globals.gDimensions;\n\n    linkId = linkId.toLowerCase();\n\n    if (!title) {\n      title = '';\n    }\n    // Special case for explicit empty url\n    if (wholeMatch.search(/\\(<?\\s*>? ?(['\"].*['\"])?\\)$/m) > -1) {\n      url = '';\n\n    } else if (url === '' || url === null) {\n      if (linkId === '' || linkId === null) {\n        // lower-case and turn embedded newlines into spaces\n        linkId = altText.toLowerCase().replace(/ ?\\n/g, ' ');\n      }\n      url = '#' + linkId;\n\n      if (!showdown.helper.isUndefined(gUrls[linkId])) {\n        url = gUrls[linkId];\n        if (!showdown.helper.isUndefined(gTitles[linkId])) {\n          title = gTitles[linkId];\n        }\n        if (!showdown.helper.isUndefined(gDims[linkId])) {\n          width = gDims[linkId].width;\n          height = gDims[linkId].height;\n        }\n      } else {\n        return wholeMatch;\n      }\n    }\n\n    altText = altText\n      .replace(/\"/g, '&quot;')\n    //altText = showdown.helper.escapeCharacters(altText, '*_', false);\n      .replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n    //url = showdown.helper.escapeCharacters(url, '*_', false);\n    url = url.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n    var result = '<img src=\"' + url + '\" alt=\"' + altText + '\"';\n\n    if (title && showdown.helper.isString(title)) {\n      title = title\n        .replace(/\"/g, '&quot;')\n      //title = showdown.helper.escapeCharacters(title, '*_', false);\n        .replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n      result += ' title=\"' + title + '\"';\n    }\n\n    if (width && height) {\n      width  = (width === '*') ? 'auto' : width;\n      height = (height === '*') ? 'auto' : height;\n\n      result += ' width=\"' + width + '\"';\n      result += ' height=\"' + height + '\"';\n    }\n\n    result += ' />';\n\n    return result;\n  }\n\n  // First, handle reference-style labeled images: ![alt text][id]\n  text = text.replace(referenceRegExp, writeImageTag);\n\n  // Next, handle inline images:  ![alt text](url =<width>x<height> \"optional title\")\n\n  // base64 encoded images\n  text = text.replace(base64RegExp, writeImageTagBase64);\n\n  // cases with crazy urls like ./image/cat1).png\n  text = text.replace(crazyRegExp, writeImageTag);\n\n  // normal cases\n  text = text.replace(inlineRegExp, writeImageTag);\n\n  // handle reference-style shortcuts: ![img text]\n  text = text.replace(refShortcutRegExp, writeImageTag);\n\n  text = globals.converter._dispatch('images.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('italicsAndBold', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('italicsAndBold.before', text, options, globals);\n\n  // it's faster to have 3 separate regexes for each case than have just one\n  // because of backtracing, in some cases, it could lead to an exponential effect\n  // called \"catastrophic backtrace\". Ominous!\n\n  function parseInside (txt, left, right) {\n    /*\n    if (options.simplifiedAutoLink) {\n      txt = showdown.subParser('simplifiedAutoLinks')(txt, options, globals);\n    }\n    */\n    return left + txt + right;\n  }\n\n  // Parse underscores\n  if (options.literalMidWordUnderscores) {\n    text = text.replace(/\\b___(\\S[\\s\\S]*?)___\\b/g, function (wm, txt) {\n      return parseInside (txt, '<strong><em>', '</em></strong>');\n    });\n    text = text.replace(/\\b__(\\S[\\s\\S]*?)__\\b/g, function (wm, txt) {\n      return parseInside (txt, '<strong>', '</strong>');\n    });\n    text = text.replace(/\\b_(\\S[\\s\\S]*?)_\\b/g, function (wm, txt) {\n      return parseInside (txt, '<em>', '</em>');\n    });\n  } else {\n    text = text.replace(/___(\\S[\\s\\S]*?)___/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong><em>', '</em></strong>') : wm;\n    });\n    text = text.replace(/__(\\S[\\s\\S]*?)__/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong>', '</strong>') : wm;\n    });\n    text = text.replace(/_([^\\s_][\\s\\S]*?)_/g, function (wm, m) {\n      // !/^_[^_]/.test(m) - test if it doesn't start with __ (since it seems redundant, we removed it)\n      return (/\\S$/.test(m)) ? parseInside (m, '<em>', '</em>') : wm;\n    });\n  }\n\n  // Now parse asterisks\n  if (options.literalMidWordAsterisks) {\n    text = text.replace(/([^*]|^)\\B\\*\\*\\*(\\S[\\s\\S]*?)\\*\\*\\*\\B(?!\\*)/g, function (wm, lead, txt) {\n      return parseInside (txt, lead + '<strong><em>', '</em></strong>');\n    });\n    text = text.replace(/([^*]|^)\\B\\*\\*(\\S[\\s\\S]*?)\\*\\*\\B(?!\\*)/g, function (wm, lead, txt) {\n      return parseInside (txt, lead + '<strong>', '</strong>');\n    });\n    text = text.replace(/([^*]|^)\\B\\*(\\S[\\s\\S]*?)\\*\\B(?!\\*)/g, function (wm, lead, txt) {\n      return parseInside (txt, lead + '<em>', '</em>');\n    });\n  } else {\n    text = text.replace(/\\*\\*\\*(\\S[\\s\\S]*?)\\*\\*\\*/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong><em>', '</em></strong>') : wm;\n    });\n    text = text.replace(/\\*\\*(\\S[\\s\\S]*?)\\*\\*/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong>', '</strong>') : wm;\n    });\n    text = text.replace(/\\*([^\\s*][\\s\\S]*?)\\*/g, function (wm, m) {\n      // !/^\\*[^*]/.test(m) - test if it doesn't start with ** (since it seems redundant, we removed it)\n      return (/\\S$/.test(m)) ? parseInside (m, '<em>', '</em>') : wm;\n    });\n  }\n\n\n  text = globals.converter._dispatch('italicsAndBold.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Form HTML ordered (numbered) and unordered (bulleted) lists.\n */\nshowdown.subParser('lists', function (text, options, globals) {\n  'use strict';\n\n  /**\n   * Process the contents of a single ordered or unordered list, splitting it\n   * into individual list items.\n   * @param {string} listStr\n   * @param {boolean} trimTrailing\n   * @returns {string}\n   */\n  function processListItems (listStr, trimTrailing) {\n    // The $g_list_level global keeps track of when we're inside a list.\n    // Each time we enter a list, we increment it; when we leave a list,\n    // we decrement. If it's zero, we're not in a list anymore.\n    //\n    // We do this because when we're not inside a list, we want to treat\n    // something like this:\n    //\n    //    I recommend upgrading to version\n    //    8. Oops, now this line is treated\n    //    as a sub-list.\n    //\n    // As a single paragraph, despite the fact that the second line starts\n    // with a digit-period-space sequence.\n    //\n    // Whereas when we're inside a list (or sub-list), that line will be\n    // treated as the start of a sub-list. What a kludge, huh? This is\n    // an aspect of Markdown's syntax that's hard to parse perfectly\n    // without resorting to mind-reading. Perhaps the solution is to\n    // change the syntax rules such that sub-lists must start with a\n    // starting cardinal number; e.g. \"1.\" or \"a.\".\n    globals.gListLevel++;\n\n    // trim trailing blank lines:\n    listStr = listStr.replace(/\\n{2,}$/, '\\n');\n\n    // attacklab: add sentinel to emulate \\z\n    listStr += '0';\n\n    var rgx = /(\\n)?(^ {0,3})([*+-]|\\d+[.])[ \\t]+((\\[(x|X| )?])?[ \\t]*[^\\r]+?(\\n{1,2}))(?=\\n*(0| {0,3}([*+-]|\\d+[.])[ \\t]+))/gm,\n        isParagraphed = (/\\n[ \\t]*\\n(?!0)/.test(listStr));\n\n    // Since version 1.5, nesting sublists requires 4 spaces (or 1 tab) indentation,\n    // which is a syntax breaking change\n    // activating this option reverts to old behavior\n    if (options.disableForced4SpacesIndentedSublists) {\n      rgx = /(\\n)?(^ {0,3})([*+-]|\\d+[.])[ \\t]+((\\[(x|X| )?])?[ \\t]*[^\\r]+?(\\n{1,2}))(?=\\n*(0|\\2([*+-]|\\d+[.])[ \\t]+))/gm;\n    }\n\n    listStr = listStr.replace(rgx, function (wholeMatch, m1, m2, m3, m4, taskbtn, checked) {\n      checked = (checked && checked.trim() !== '');\n\n      var item = showdown.subParser('outdent')(m4, options, globals),\n          bulletStyle = '';\n\n      // Support for github tasklists\n      if (taskbtn && options.tasklists) {\n        bulletStyle = ' class=\"task-list-item\" style=\"list-style-type: none;\"';\n        item = item.replace(/^[ \\t]*\\[(x|X| )?]/m, function () {\n          var otp = '<input type=\"checkbox\" disabled style=\"margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;\"';\n          if (checked) {\n            otp += ' checked';\n          }\n          otp += '>';\n          return otp;\n        });\n      }\n\n      // ISSUE #312\n      // This input: - - - a\n      // causes trouble to the parser, since it interprets it as:\n      // <ul><li><li><li>a</li></li></li></ul>\n      // instead of:\n      // <ul><li>- - a</li></ul>\n      // So, to prevent it, we will put a marker (A)in the beginning of the line\n      // Kind of hackish/monkey patching, but seems more effective than overcomplicating the list parser\n      item = item.replace(/^([-*+]|\\d\\.)[ \\t]+[\\S\\n ]*/g, function (wm2) {\n        return 'A' + wm2;\n      });\n\n      // m1 - Leading line or\n      // Has a double return (multi paragraph) or\n      // Has sublist\n      if (m1 || (item.search(/\\n{2,}/) > -1)) {\n        item = showdown.subParser('githubCodeBlocks')(item, options, globals);\n        item = showdown.subParser('blockGamut')(item, options, globals);\n      } else {\n        // Recursion for sub-lists:\n        item = showdown.subParser('lists')(item, options, globals);\n        item = item.replace(/\\n$/, ''); // chomp(item)\n        item = showdown.subParser('hashHTMLBlocks')(item, options, globals);\n\n        // Colapse double linebreaks\n        item = item.replace(/\\n\\n+/g, '\\n\\n');\n        if (isParagraphed) {\n          item = showdown.subParser('paragraphs')(item, options, globals);\n        } else {\n          item = showdown.subParser('spanGamut')(item, options, globals);\n        }\n      }\n\n      // now we need to remove the marker (A)\n      item = item.replace('A', '');\n      // we can finally wrap the line in list item tags\n      item =  '<li' + bulletStyle + '>' + item + '</li>\\n';\n\n      return item;\n    });\n\n    // attacklab: strip sentinel\n    listStr = listStr.replace(/0/g, '');\n\n    globals.gListLevel--;\n\n    if (trimTrailing) {\n      listStr = listStr.replace(/\\s+$/, '');\n    }\n\n    return listStr;\n  }\n\n  function styleStartNumber (list, listType) {\n    // check if ol and starts by a number different than 1\n    if (listType === 'ol') {\n      var res = list.match(/^ *(\\d+)\\./);\n      if (res && res[1] !== '1') {\n        return ' start=\"' + res[1] + '\"';\n      }\n    }\n    return '';\n  }\n\n  /**\n   * Check and parse consecutive lists (better fix for issue #142)\n   * @param {string} list\n   * @param {string} listType\n   * @param {boolean} trimTrailing\n   * @returns {string}\n   */\n  function parseConsecutiveLists (list, listType, trimTrailing) {\n    // check if we caught 2 or more consecutive lists by mistake\n    // we use the counterRgx, meaning if listType is UL we look for OL and vice versa\n    var olRgx = (options.disableForced4SpacesIndentedSublists) ? /^ ?\\d+\\.[ \\t]/gm : /^ {0,3}\\d+\\.[ \\t]/gm,\n        ulRgx = (options.disableForced4SpacesIndentedSublists) ? /^ ?[*+-][ \\t]/gm : /^ {0,3}[*+-][ \\t]/gm,\n        counterRxg = (listType === 'ul') ? olRgx : ulRgx,\n        result = '';\n\n    if (list.search(counterRxg) !== -1) {\n      (function parseCL (txt) {\n        var pos = txt.search(counterRxg),\n            style = styleStartNumber(list, listType);\n        if (pos !== -1) {\n          // slice\n          result += '\\n\\n<' + listType + style + '>\\n' + processListItems(txt.slice(0, pos), !!trimTrailing) + '</' + listType + '>\\n';\n\n          // invert counterType and listType\n          listType = (listType === 'ul') ? 'ol' : 'ul';\n          counterRxg = (listType === 'ul') ? olRgx : ulRgx;\n\n          //recurse\n          parseCL(txt.slice(pos));\n        } else {\n          result += '\\n\\n<' + listType + style + '>\\n' + processListItems(txt, !!trimTrailing) + '</' + listType + '>\\n';\n        }\n      })(list);\n    } else {\n      var style = styleStartNumber(list, listType);\n      result = '\\n\\n<' + listType + style + '>\\n' + processListItems(list, !!trimTrailing) + '</' + listType + '>\\n';\n    }\n\n    return result;\n  }\n\n  /** Start of list parsing **/\n  text = globals.converter._dispatch('lists.before', text, options, globals);\n  // add sentinel to hack around khtml/safari bug:\n  // http://bugs.webkit.org/show_bug.cgi?id=11231\n  text += '0';\n\n  if (globals.gListLevel) {\n    text = text.replace(/^(( {0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm,\n      function (wholeMatch, list, m2) {\n        var listType = (m2.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\n        return parseConsecutiveLists(list, listType, true);\n      }\n    );\n  } else {\n    text = text.replace(/(\\n\\n|^\\n?)(( {0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm,\n      function (wholeMatch, m1, list, m3) {\n        var listType = (m3.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\n        return parseConsecutiveLists(list, listType, false);\n      }\n    );\n  }\n\n  // strip sentinel\n  text = text.replace(/0/, '');\n  text = globals.converter._dispatch('lists.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Parse metadata at the top of the document\n */\nshowdown.subParser('metadata', function (text, options, globals) {\n  'use strict';\n\n  if (!options.metadata) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('metadata.before', text, options, globals);\n\n  function parseMetadataContents (content) {\n    // raw is raw so it's not changed in any way\n    globals.metadata.raw = content;\n\n    // escape chars forbidden in html attributes\n    // double quotes\n    content = content\n      // ampersand first\n      .replace(/&/g, '&amp;')\n      // double quotes\n      .replace(/\"/g, '&quot;');\n\n    content = content.replace(/\\n {4}/g, ' ');\n    content.replace(/^([\\S ]+): +([\\s\\S]+?)$/gm, function (wm, key, value) {\n      globals.metadata.parsed[key] = value;\n      return '';\n    });\n  }\n\n  text = text.replace(/^\\s*+(\\S*?)\\n([\\s\\S]+?)\\n+\\n/, function (wholematch, format, content) {\n    parseMetadataContents(content);\n    return 'M';\n  });\n\n  text = text.replace(/^\\s*---+(\\S*?)\\n([\\s\\S]+?)\\n---+\\n/, function (wholematch, format, content) {\n    if (format) {\n      globals.metadata.format = format;\n    }\n    parseMetadataContents(content);\n    return 'M';\n  });\n\n  text = text.replace(/M/g, '');\n\n  text = globals.converter._dispatch('metadata.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Remove one level of line-leading tabs or spaces\n */\nshowdown.subParser('outdent', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('outdent.before', text, options, globals);\n\n  // attacklab: hack around Konqueror 3.5.4 bug:\n  // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\n  text = text.replace(/^(\\t|[ ]{1,4})/gm, '0'); // attacklab: g_tab_width\n\n  // attacklab: clean up hack\n  text = text.replace(/0/g, '');\n\n  text = globals.converter._dispatch('outdent.after', text, options, globals);\n  return text;\n});\n\r\n/**\n *\n */\nshowdown.subParser('paragraphs', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('paragraphs.before', text, options, globals);\n  // Strip leading and trailing lines:\n  text = text.replace(/^\\n+/g, '');\n  text = text.replace(/\\n+$/g, '');\n\n  var grafs = text.split(/\\n{2,}/g),\n      grafsOut = [],\n      end = grafs.length; // Wrap <p> tags\n\n  for (var i = 0; i < end; i++) {\n    var str = grafs[i];\n    // if this is an HTML marker, copy it\n    if (str.search(/(K|G)(\\d+)\\1/g) >= 0) {\n      grafsOut.push(str);\n\n    // test for presence of characters to prevent empty lines being parsed\n    // as paragraphs (resulting in undesired extra empty paragraphs)\n    } else if (str.search(/\\S/) >= 0) {\n      str = showdown.subParser('spanGamut')(str, options, globals);\n      str = str.replace(/^([ \\t]*)/g, '<p>');\n      str += '</p>';\n      grafsOut.push(str);\n    }\n  }\n\n  /** Unhashify HTML blocks */\n  end = grafsOut.length;\n  for (i = 0; i < end; i++) {\n    var blockText = '',\n        grafsOutIt = grafsOut[i],\n        codeFlag = false;\n    // if this is a marker for an html block...\n    // use RegExp.test instead of string.search because of QML bug\n    while (/(K|G)(\\d+)\\1/.test(grafsOutIt)) {\n      var delim = RegExp.$1,\n          num   = RegExp.$2;\n\n      if (delim === 'K') {\n        blockText = globals.gHtmlBlocks[num];\n      } else {\n        // we need to check if ghBlock is a false positive\n        if (codeFlag) {\n          // use encoded version of all text\n          blockText = showdown.subParser('encodeCode')(globals.ghCodeBlocks[num].text, options, globals);\n        } else {\n          blockText = globals.ghCodeBlocks[num].codeblock;\n        }\n      }\n      blockText = blockText.replace(/\\$/g, '$$$$'); // Escape any dollar signs\n\n      grafsOutIt = grafsOutIt.replace(/(\\n\\n)?(K|G)\\d+\\2(\\n\\n)?/, blockText);\n      // Check if grafsOutIt is a pre->code\n      if (/^<pre\\b[^>]*>\\s*<code\\b[^>]*>/.test(grafsOutIt)) {\n        codeFlag = true;\n      }\n    }\n    grafsOut[i] = grafsOutIt;\n  }\n  text = grafsOut.join('\\n');\n  // Strip leading and trailing lines:\n  text = text.replace(/^\\n+/g, '');\n  text = text.replace(/\\n+$/g, '');\n  return globals.converter._dispatch('paragraphs.after', text, options, globals);\n});\n\r\n/**\n * Run extension\n */\nshowdown.subParser('runExtension', function (ext, text, options, globals) {\n  'use strict';\n\n  if (ext.filter) {\n    text = ext.filter(text, globals.converter, options);\n\n  } else if (ext.regex) {\n    // TODO remove this when old extension loading mechanism is deprecated\n    var re = ext.regex;\n    if (!(re instanceof RegExp)) {\n      re = new RegExp(re, 'g');\n    }\n    text = text.replace(re, ext.replace);\n  }\n\n  return text;\n});\n\r\n/**\n * These are all the transformations that occur *within* block-level\n * tags like paragraphs, headers, and list items.\n */\nshowdown.subParser('spanGamut', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('spanGamut.before', text, options, globals);\n  text = showdown.subParser('codeSpans')(text, options, globals);\n  text = showdown.subParser('escapeSpecialCharsWithinTagAttributes')(text, options, globals);\n  text = showdown.subParser('encodeBackslashEscapes')(text, options, globals);\n\n  // Process anchor and image tags. Images must come first,\n  // because ![foo][f] looks like an anchor.\n  text = showdown.subParser('images')(text, options, globals);\n  text = showdown.subParser('anchors')(text, options, globals);\n\n  // Make links out of things like `<http://example.com/>`\n  // Must come after anchors, because you can use < and >\n  // delimiters in inline links like [this](<url>).\n  text = showdown.subParser('autoLinks')(text, options, globals);\n  text = showdown.subParser('simplifiedAutoLinks')(text, options, globals);\n  text = showdown.subParser('emoji')(text, options, globals);\n  text = showdown.subParser('underline')(text, options, globals);\n  text = showdown.subParser('italicsAndBold')(text, options, globals);\n  text = showdown.subParser('strikethrough')(text, options, globals);\n  text = showdown.subParser('ellipsis')(text, options, globals);\n\n  // we need to hash HTML tags inside spans\n  text = showdown.subParser('hashHTMLSpans')(text, options, globals);\n\n  // now we encode amps and angles\n  text = showdown.subParser('encodeAmpsAndAngles')(text, options, globals);\n\n  // Do hard breaks\n  if (options.simpleLineBreaks) {\n    // GFM style hard breaks\n    // only add line breaks if the text does not contain a block (special case for lists)\n    if (!/\\n\\nK/.test(text)) {\n      text = text.replace(/\\n+/g, '<br />\\n');\n    }\n  } else {\n    // Vanilla hard breaks\n    text = text.replace(/  +\\n/g, '<br />\\n');\n  }\n\n  text = globals.converter._dispatch('spanGamut.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('strikethrough', function (text, options, globals) {\n  'use strict';\n\n  function parseInside (txt) {\n    if (options.simplifiedAutoLink) {\n      txt = showdown.subParser('simplifiedAutoLinks')(txt, options, globals);\n    }\n    return '<del>' + txt + '</del>';\n  }\n\n  if (options.strikethrough) {\n    text = globals.converter._dispatch('strikethrough.before', text, options, globals);\n    text = text.replace(/(?:~){2}([\\s\\S]+?)(?:~){2}/g, function (wm, txt) { return parseInside(txt); });\n    text = globals.converter._dispatch('strikethrough.after', text, options, globals);\n  }\n\n  return text;\n});\n\r\n/**\n * Strips link definitions from text, stores the URLs and titles in\n * hash references.\n * Link defs are in the form: ^[id]: url \"optional title\"\n */\nshowdown.subParser('stripLinkDefinitions', function (text, options, globals) {\n  'use strict';\n\n  var regex       = /^ {0,3}\\[(.+)]:[ \\t]*\\n?[ \\t]*<?([^>\\s]+)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"|'(](.+?)[\"|')][ \\t]*)?(?:\\n+|(?=0))/gm,\n      base64Regex = /^ {0,3}\\[(.+)]:[ \\t]*\\n?[ \\t]*<?(data:.+?\\/.+?;base64,[A-Za-z0-9+/=\\n]+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"|'(](.+?)[\"|')][ \\t]*)?(?:\\n\\n|(?=0)|(?=\\n\\[))/gm;\n\n  // attacklab: sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\n  text += '0';\n\n  var replaceFunc = function (wholeMatch, linkId, url, width, height, blankLines, title) {\n    linkId = linkId.toLowerCase();\n    if (url.match(/^data:.+?\\/.+?;base64,/)) {\n      // remove newlines\n      globals.gUrls[linkId] = url.replace(/\\s/g, '');\n    } else {\n      globals.gUrls[linkId] = showdown.subParser('encodeAmpsAndAngles')(url, options, globals);  // Link IDs are case-insensitive\n    }\n\n    if (blankLines) {\n      // Oops, found blank lines, so it's not a title.\n      // Put back the parenthetical statement we stole.\n      return blankLines + title;\n\n    } else {\n      if (title) {\n        globals.gTitles[linkId] = title.replace(/\"|'/g, '&quot;');\n      }\n      if (options.parseImgDimensions && width && height) {\n        globals.gDimensions[linkId] = {\n          width:  width,\n          height: height\n        };\n      }\n    }\n    // Completely remove the definition from the text\n    return '';\n  };\n\n  // first we try to find base64 link references\n  text = text.replace(base64Regex, replaceFunc);\n\n  text = text.replace(regex, replaceFunc);\n\n  // attacklab: strip sentinel\n  text = text.replace(/0/, '');\n\n  return text;\n});\n\r\nshowdown.subParser('tables', function (text, options, globals) {\n  'use strict';\n\n  if (!options.tables) {\n    return text;\n  }\n\n  var tableRgx       = /^ {0,3}\\|?.+\\|.+\\n {0,3}\\|?[ \\t]*:?[ \\t]*(?:[-=]){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*:?[ \\t]*(?:[-=]){2,}[\\s\\S]+?(?:\\n\\n|0)/gm,\n    //singeColTblRgx = /^ {0,3}\\|.+\\|\\n {0,3}\\|[ \\t]*:?[ \\t]*(?:[-=]){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*\\n(?: {0,3}\\|.+\\|\\n)+(?:\\n\\n|0)/gm;\n      singeColTblRgx = /^ {0,3}\\|.+\\|[ \\t]*\\n {0,3}\\|[ \\t]*:?[ \\t]*(?:[-=]){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*\\n( {0,3}\\|.+\\|[ \\t]*\\n)*(?:\\n|0)/gm;\n\n  function parseStyles (sLine) {\n    if (/^:[ \\t]*--*$/.test(sLine)) {\n      return ' style=\"text-align:left;\"';\n    } else if (/^--*[ \\t]*:[ \\t]*$/.test(sLine)) {\n      return ' style=\"text-align:right;\"';\n    } else if (/^:[ \\t]*--*[ \\t]*:$/.test(sLine)) {\n      return ' style=\"text-align:center;\"';\n    } else {\n      return '';\n    }\n  }\n\n  function parseHeaders (header, style) {\n    var id = '';\n    header = header.trim();\n    // support both tablesHeaderId and tableHeaderId due to error in documentation so we don't break backwards compatibility\n    if (options.tablesHeaderId || options.tableHeaderId) {\n      id = ' id=\"' + header.replace(/ /g, '_').toLowerCase() + '\"';\n    }\n    header = showdown.subParser('spanGamut')(header, options, globals);\n\n    return '<th' + id + style + '>' + header + '</th>\\n';\n  }\n\n  function parseCells (cell, style) {\n    var subText = showdown.subParser('spanGamut')(cell, options, globals);\n    return '<td' + style + '>' + subText + '</td>\\n';\n  }\n\n  function buildTable (headers, cells) {\n    var tb = '<table>\\n<thead>\\n<tr>\\n',\n        tblLgn = headers.length;\n\n    for (var i = 0; i < tblLgn; ++i) {\n      tb += headers[i];\n    }\n    tb += '</tr>\\n</thead>\\n<tbody>\\n';\n\n    for (i = 0; i < cells.length; ++i) {\n      tb += '<tr>\\n';\n      for (var ii = 0; ii < tblLgn; ++ii) {\n        tb += cells[i][ii];\n      }\n      tb += '</tr>\\n';\n    }\n    tb += '</tbody>\\n</table>\\n';\n    return tb;\n  }\n\n  function parseTable (rawTable) {\n    var i, tableLines = rawTable.split('\\n');\n\n    for (i = 0; i < tableLines.length; ++i) {\n      // strip wrong first and last column if wrapped tables are used\n      if (/^ {0,3}\\|/.test(tableLines[i])) {\n        tableLines[i] = tableLines[i].replace(/^ {0,3}\\|/, '');\n      }\n      if (/\\|[ \\t]*$/.test(tableLines[i])) {\n        tableLines[i] = tableLines[i].replace(/\\|[ \\t]*$/, '');\n      }\n      // parse code spans first, but we only support one line code spans\n      tableLines[i] = showdown.subParser('codeSpans')(tableLines[i], options, globals);\n    }\n\n    var rawHeaders = tableLines[0].split('|').map(function (s) { return s.trim();}),\n        rawStyles = tableLines[1].split('|').map(function (s) { return s.trim();}),\n        rawCells = [],\n        headers = [],\n        styles = [],\n        cells = [];\n\n    tableLines.shift();\n    tableLines.shift();\n\n    for (i = 0; i < tableLines.length; ++i) {\n      if (tableLines[i].trim() === '') {\n        continue;\n      }\n      rawCells.push(\n        tableLines[i]\n          .split('|')\n          .map(function (s) {\n            return s.trim();\n          })\n      );\n    }\n\n    if (rawHeaders.length < rawStyles.length) {\n      return rawTable;\n    }\n\n    for (i = 0; i < rawStyles.length; ++i) {\n      styles.push(parseStyles(rawStyles[i]));\n    }\n\n    for (i = 0; i < rawHeaders.length; ++i) {\n      if (showdown.helper.isUndefined(styles[i])) {\n        styles[i] = '';\n      }\n      headers.push(parseHeaders(rawHeaders[i], styles[i]));\n    }\n\n    for (i = 0; i < rawCells.length; ++i) {\n      var row = [];\n      for (var ii = 0; ii < headers.length; ++ii) {\n        if (showdown.helper.isUndefined(rawCells[i][ii])) {\n\n        }\n        row.push(parseCells(rawCells[i][ii], styles[ii]));\n      }\n      cells.push(row);\n    }\n\n    return buildTable(headers, cells);\n  }\n\n  text = globals.converter._dispatch('tables.before', text, options, globals);\n\n  // find escaped pipe characters\n  text = text.replace(/\\\\(\\|)/g, showdown.helper.escapeCharactersCallback);\n\n  // parse multi column tables\n  text = text.replace(tableRgx, parseTable);\n\n  // parse one column tables\n  text = text.replace(singeColTblRgx, parseTable);\n\n  text = globals.converter._dispatch('tables.after', text, options, globals);\n\n  return text;\n});\n\r\nshowdown.subParser('underline', function (text, options, globals) {\n  'use strict';\n\n  if (!options.underline) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('underline.before', text, options, globals);\n\n  if (options.literalMidWordUnderscores) {\n    text = text.replace(/\\b___(\\S[\\s\\S]*?)___\\b/g, function (wm, txt) {\n      return '<u>' + txt + '</u>';\n    });\n    text = text.replace(/\\b__(\\S[\\s\\S]*?)__\\b/g, function (wm, txt) {\n      return '<u>' + txt + '</u>';\n    });\n  } else {\n    text = text.replace(/___(\\S[\\s\\S]*?)___/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? '<u>' + m + '</u>' : wm;\n    });\n    text = text.replace(/__(\\S[\\s\\S]*?)__/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? '<u>' + m + '</u>' : wm;\n    });\n  }\n\n  // escape remaining underscores to prevent them being parsed by italic and bold\n  text = text.replace(/(_)/g, showdown.helper.escapeCharactersCallback);\n\n  text = globals.converter._dispatch('underline.after', text, options, globals);\n\n  return text;\n});\n\r\n/**\n * Swap back in all the special characters we've hidden.\n */\nshowdown.subParser('unescapeSpecialChars', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('unescapeSpecialChars.before', text, options, globals);\n\n  text = text.replace(/E(\\d+)E/g, function (wholeMatch, m1) {\n    var charCodeToReplace = parseInt(m1);\n    return String.fromCharCode(charCodeToReplace);\n  });\n\n  text = globals.converter._dispatch('unescapeSpecialChars.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('makeMarkdown.blockquote', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    var children = node.childNodes,\n        childrenLength = children.length;\n\n    for (var i = 0; i < childrenLength; ++i) {\n      var innerTxt = showdown.subParser('makeMarkdown.node')(children[i], globals);\n\n      if (innerTxt === '') {\n        continue;\n      }\n      txt += innerTxt;\n    }\n  }\n  // cleanup\n  txt = txt.trim();\n  txt = '> ' + txt.split('\\n').join('\\n> ');\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.codeBlock', function (node, globals) {\n  'use strict';\n\n  var lang = node.getAttribute('language'),\n      num  = node.getAttribute('precodenum');\n  return '```' + lang + '\\n' + globals.preList[num] + '\\n```';\n});\n\r\nshowdown.subParser('makeMarkdown.codeSpan', function (node) {\n  'use strict';\n\n  return '`' + node.innerHTML + '`';\n});\n\r\nshowdown.subParser('makeMarkdown.emphasis', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    txt += '*';\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '*';\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.header', function (node, globals, headerLevel) {\n  'use strict';\n\n  var headerMark = new Array(headerLevel + 1).join('#'),\n      txt = '';\n\n  if (node.hasChildNodes()) {\n    txt = headerMark + ' ';\n    var children = node.childNodes,\n        childrenLength = children.length;\n\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.hr', function () {\n  'use strict';\n\n  return '---';\n});\n\r\nshowdown.subParser('makeMarkdown.image', function (node) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasAttribute('src')) {\n    txt += '![' + node.getAttribute('alt') + '](';\n    txt += '<' + node.getAttribute('src') + '>';\n    if (node.hasAttribute('width') && node.hasAttribute('height')) {\n      txt += ' =' + node.getAttribute('width') + 'x' + node.getAttribute('height');\n    }\n\n    if (node.hasAttribute('title')) {\n      txt += ' \"' + node.getAttribute('title') + '\"';\n    }\n    txt += ')';\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.links', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes() && node.hasAttribute('href')) {\n    var children = node.childNodes,\n        childrenLength = children.length;\n    txt = '[';\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '](';\n    txt += '<' + node.getAttribute('href') + '>';\n    if (node.hasAttribute('title')) {\n      txt += ' \"' + node.getAttribute('title') + '\"';\n    }\n    txt += ')';\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.list', function (node, globals, type) {\n  'use strict';\n\n  var txt = '';\n  if (!node.hasChildNodes()) {\n    return '';\n  }\n  var listItems       = node.childNodes,\n      listItemsLenght = listItems.length,\n      listNum = node.getAttribute('start') || 1;\n\n  for (var i = 0; i < listItemsLenght; ++i) {\n    if (typeof listItems[i].tagName === 'undefined' || listItems[i].tagName.toLowerCase() !== 'li') {\n      continue;\n    }\n\n    // define the bullet to use in list\n    var bullet = '';\n    if (type === 'ol') {\n      bullet = listNum.toString() + '. ';\n    } else {\n      bullet = '- ';\n    }\n\n    // parse list item\n    txt += bullet + showdown.subParser('makeMarkdown.listItem')(listItems[i], globals);\n    ++listNum;\n  }\n\n  // add comment at the end to prevent consecutive lists to be parsed as one\n  txt += '\\n<!-- -->\\n';\n  return txt.trim();\n});\n\r\nshowdown.subParser('makeMarkdown.listItem', function (node, globals) {\n  'use strict';\n\n  var listItemTxt = '';\n\n  var children = node.childNodes,\n      childrenLenght = children.length;\n\n  for (var i = 0; i < childrenLenght; ++i) {\n    listItemTxt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n  }\n  // if it's only one liner, we need to add a newline at the end\n  if (!/\\n$/.test(listItemTxt)) {\n    listItemTxt += '\\n';\n  } else {\n    // it's multiparagraph, so we need to indent\n    listItemTxt = listItemTxt\n      .split('\\n')\n      .join('\\n    ')\n      .replace(/^ {4}$/gm, '')\n      .replace(/\\n\\n+/g, '\\n\\n');\n  }\n\n  return listItemTxt;\n});\n\r\n\n\nshowdown.subParser('makeMarkdown.node', function (node, globals, spansOnly) {\n  'use strict';\n\n  spansOnly = spansOnly || false;\n\n  var txt = '';\n\n  // edge case of text without wrapper paragraph\n  if (node.nodeType === 3) {\n    return showdown.subParser('makeMarkdown.txt')(node, globals);\n  }\n\n  // HTML comment\n  if (node.nodeType === 8) {\n    return '<!--' + node.data + '-->\\n\\n';\n  }\n\n  // process only node elements\n  if (node.nodeType !== 1) {\n    return '';\n  }\n\n  var tagName = node.tagName.toLowerCase();\n\n  switch (tagName) {\n\n    //\n    // BLOCKS\n    //\n    case 'h1':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 1) + '\\n\\n'; }\n      break;\n    case 'h2':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 2) + '\\n\\n'; }\n      break;\n    case 'h3':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 3) + '\\n\\n'; }\n      break;\n    case 'h4':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 4) + '\\n\\n'; }\n      break;\n    case 'h5':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 5) + '\\n\\n'; }\n      break;\n    case 'h6':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 6) + '\\n\\n'; }\n      break;\n\n    case 'p':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.paragraph')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'blockquote':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.blockquote')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'hr':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.hr')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'ol':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.list')(node, globals, 'ol') + '\\n\\n'; }\n      break;\n\n    case 'ul':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.list')(node, globals, 'ul') + '\\n\\n'; }\n      break;\n\n    case 'precode':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.codeBlock')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'pre':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.pre')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'table':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.table')(node, globals) + '\\n\\n'; }\n      break;\n\n    //\n    // SPANS\n    //\n    case 'code':\n      txt = showdown.subParser('makeMarkdown.codeSpan')(node, globals);\n      break;\n\n    case 'em':\n    case 'i':\n      txt = showdown.subParser('makeMarkdown.emphasis')(node, globals);\n      break;\n\n    case 'strong':\n    case 'b':\n      txt = showdown.subParser('makeMarkdown.strong')(node, globals);\n      break;\n\n    case 'del':\n      txt = showdown.subParser('makeMarkdown.strikethrough')(node, globals);\n      break;\n\n    case 'a':\n      txt = showdown.subParser('makeMarkdown.links')(node, globals);\n      break;\n\n    case 'img':\n      txt = showdown.subParser('makeMarkdown.image')(node, globals);\n      break;\n\n    default:\n      txt = node.outerHTML + '\\n\\n';\n  }\n\n  // common normalization\n  // TODO eventually\n\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.paragraph', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n  }\n\n  // some text normalization\n  txt = txt.trim();\n\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.pre', function (node, globals) {\n  'use strict';\n\n  var num  = node.getAttribute('prenum');\n  return '<pre>' + globals.preList[num] + '</pre>';\n});\n\r\nshowdown.subParser('makeMarkdown.strikethrough', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    txt += '~~';\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '~~';\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.strong', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    txt += '**';\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '**';\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.table', function (node, globals) {\n  'use strict';\n\n  var txt = '',\n      tableArray = [[], []],\n      headings   = node.querySelectorAll('thead>tr>th'),\n      rows       = node.querySelectorAll('tbody>tr'),\n      i, ii;\n  for (i = 0; i < headings.length; ++i) {\n    var headContent = showdown.subParser('makeMarkdown.tableCell')(headings[i], globals),\n        allign = '---';\n\n    if (headings[i].hasAttribute('style')) {\n      var style = headings[i].getAttribute('style').toLowerCase().replace(/\\s/g, '');\n      switch (style) {\n        case 'text-align:left;':\n          allign = ':---';\n          break;\n        case 'text-align:right;':\n          allign = '---:';\n          break;\n        case 'text-align:center;':\n          allign = ':---:';\n          break;\n      }\n    }\n    tableArray[0][i] = headContent.trim();\n    tableArray[1][i] = allign;\n  }\n\n  for (i = 0; i < rows.length; ++i) {\n    var r = tableArray.push([]) - 1,\n        cols = rows[i].getElementsByTagName('td');\n\n    for (ii = 0; ii < headings.length; ++ii) {\n      var cellContent = ' ';\n      if (typeof cols[ii] !== 'undefined') {\n        cellContent = showdown.subParser('makeMarkdown.tableCell')(cols[ii], globals);\n      }\n      tableArray[r].push(cellContent);\n    }\n  }\n\n  var cellSpacesCount = 3;\n  for (i = 0; i < tableArray.length; ++i) {\n    for (ii = 0; ii < tableArray[i].length; ++ii) {\n      var strLen = tableArray[i][ii].length;\n      if (strLen > cellSpacesCount) {\n        cellSpacesCount = strLen;\n      }\n    }\n  }\n\n  for (i = 0; i < tableArray.length; ++i) {\n    for (ii = 0; ii < tableArray[i].length; ++ii) {\n      if (i === 1) {\n        if (tableArray[i][ii].slice(-1) === ':') {\n          tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii].slice(-1), cellSpacesCount - 1, '-') + ':';\n        } else {\n          tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii], cellSpacesCount, '-');\n        }\n      } else {\n        tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii], cellSpacesCount);\n      }\n    }\n    txt += '| ' + tableArray[i].join(' | ') + ' |\\n';\n  }\n\n  return txt.trim();\n});\n\r\nshowdown.subParser('makeMarkdown.tableCell', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (!node.hasChildNodes()) {\n    return '';\n  }\n  var children = node.childNodes,\n      childrenLength = children.length;\n\n  for (var i = 0; i < childrenLength; ++i) {\n    txt += showdown.subParser('makeMarkdown.node')(children[i], globals, true);\n  }\n  return txt.trim();\n});\n\r\nshowdown.subParser('makeMarkdown.txt', function (node) {\n  'use strict';\n\n  var txt = node.nodeValue;\n\n  // multiple spaces are collapsed\n  txt = txt.replace(/ +/g, ' ');\n\n  // replace the custom NBSP; with a space\n  txt = txt.replace(/NBSP;/g, ' ');\n\n  // \", <, > and & should replace escaped html entities\n  txt = showdown.helper.unescapeHTMLEntities(txt);\n\n  // escape markdown magic characters\n  // emphasis, strong and strikethrough - can appear everywhere\n  // we also escape pipe (|) because of tables\n  // and escape ` because of code blocks and spans\n  txt = txt.replace(/([*_~|`])/g, '\\\\$1');\n\n  // escape > because of blockquotes\n  txt = txt.replace(/^(\\s*)>/g, '\\\\$1>');\n\n  // hash character, only troublesome at the beginning of a line because of headers\n  txt = txt.replace(/^#/gm, '\\\\#');\n\n  // horizontal rules\n  txt = txt.replace(/^(\\s*)([-=]{3,})(\\s*)$/, '$1\\\\$2$3');\n\n  // dot, because of ordered lists, only troublesome at the beginning of a line when preceded by an integer\n  txt = txt.replace(/^( {0,3}\\d+)\\./gm, '$1\\\\.');\n\n  // +, * and -, at the beginning of a line becomes a list, so we need to escape them also (asterisk was already escaped)\n  txt = txt.replace(/^( {0,3})([+-])/gm, '$1\\\\$2');\n\n  // images and links, ] followed by ( is problematic, so we escape it\n  txt = txt.replace(/]([\\s]*)\\(/g, '\\\\]$1\\\\(');\n\n  // reference URIs must also be escaped\n  txt = txt.replace(/^ {0,3}\\[([\\S \\t]*?)]:/gm, '\\\\[$1]:');\n\n  return txt;\n});\n\r\nvar root = this;\n\n// AMD Loader\nif (typeof define === 'function' && define.amd) {\n  define(function () {\n    'use strict';\n    return showdown;\n  });\n\n// CommonJS/nodeJS Loader\n} else if (typeof module !== 'undefined' && module.exports) {\n  module.exports = showdown;\n\n// Regular Browser loader\n} else {\n  root.showdown = showdown;\n}\n}).call(this);\r\n\n//# sourceMappingURL=showdown.js.map\r\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nif (!window.frappe) window.frappe = {};\n\nfunction flt(v, decimals, number_format) {\n\tif (v == null || v == '') return 0;\n\n\tif (typeof v !== \"number\") {\n\t\tv = v + \"\";\n\n\t\t// strip currency symbol if exists\n\t\tif (v.indexOf(\" \") != -1) {\n\t\t\t// using slice(1).join(\" \") because space could also be a group separator\n\t\t\tvar parts = v.split(\" \");\n\t\t\tv = isNaN(parseFloat(parts[0])) ? parts.slice(parts.length - 1).join(\" \") : v;\n\t\t}\n\n\t\tv = strip_number_groups(v, number_format);\n\n\t\tv = parseFloat(v);\n\t\tif (isNaN(v))\n\t\t\tv = 0;\n\t}\n\n\tif (decimals != null)\n\t\treturn _round(v, decimals);\n\treturn v;\n}\n\nfunction cint(v, def) {\n\tif (v === true)\n\t\treturn 1;\n\tif (v === false)\n\t\treturn 0;\n\tv = v + '';\n\tif (v !== \"0\") v = lstrip(v, ['0']);\n\tv = parseInt(v);\n\tif (isNaN(v)) v = def === undefined ? 0 : def;\n\treturn v;\n}\n\nfunction strip_number_groups(v, number_format) {\n\tif (!number_format) number_format = get_number_format();\n\tvar info = get_number_format_info(number_format);\n\n\t// strip groups (,)\n\tvar group_regex = new RegExp(info.group_sep === \".\" ? \"\\\\.\" : info.group_sep, \"g\");\n\tv = v.replace(group_regex, \"\");\n\n\t// replace decimal separator with (.)\n\tif (info.decimal_str !== \".\" && info.decimal_str !== \"\") {\n\t\tvar decimal_regex = new RegExp(info.decimal_str, \"g\");\n\t\tv = v.replace(decimal_regex, \".\");\n\t}\n\n\treturn v;\n}\n\n\nfrappe.number_format_info = {\n\t\"#,###.##\": { decimal_str: \".\", group_sep: \",\" },\n\t\"#.###,##\": { decimal_str: \",\", group_sep: \".\" },\n\t\"# ###.##\": { decimal_str: \".\", group_sep: \" \" },\n\t\"# ###,##\": { decimal_str: \",\", group_sep: \" \" },\n\t\"#'###.##\": { decimal_str: \".\", group_sep: \"'\" },\n\t\"#, ###.##\": { decimal_str: \".\", group_sep: \", \" },\n\t\"#,##,###.##\": { decimal_str: \".\", group_sep: \",\" },\n\t\"#,###.###\": { decimal_str: \".\", group_sep: \",\" },\n\t\"#.###\": { decimal_str: \"\", group_sep: \".\" },\n\t\"#,###\": { decimal_str: \"\", group_sep: \",\" },\n}\n\nwindow.format_number = function (v, format, decimals) {\n\tif (!format) {\n\t\tformat = get_number_format();\n\t\tif (decimals == null) decimals = cint(frappe.defaults.get_default(\"float_precision\")) || 3;\n\t}\n\n\tvar info = get_number_format_info(format);\n\n\t// Fix the decimal first, toFixed will auto fill trailing zero.\n\tif (decimals == null) decimals = info.precision;\n\n\tv = flt(v, decimals, format);\n\n\tlet is_negative = false;\n\tif (v < 0) is_negative = true;\n\tv = Math.abs(v);\n\n\tv = v.toFixed(decimals);\n\n\tvar part = v.split('.');\n\n\t// get group position and parts\n\tvar group_position = info.group_sep ? 3 : 0;\n\n\tif (group_position) {\n\t\tvar integer = part[0];\n\t\tvar str = '';\n\t\tvar offset = integer.length % group_position;\n\t\tfor (var i = integer.length; i >= 0; i--) {\n\t\t\tvar l = replace_all(str, info.group_sep, \"\").length;\n\t\t\tif (format == \"#,##,###.##\" && str.indexOf(\",\") != -1) { // INR\n\t\t\t\tgroup_position = 2;\n\t\t\t\tl += 1;\n\t\t\t}\n\n\t\t\tstr += integer.charAt(i);\n\n\t\t\tif (l && !((l + 1) % group_position) && i != 0) {\n\t\t\t\tstr += info.group_sep;\n\t\t\t}\n\t\t}\n\t\tpart[0] = str.split(\"\").reverse().join(\"\");\n\t}\n\tif (part[0] + \"\" == \"\") {\n\t\tpart[0] = \"0\";\n\t}\n\n\t// join decimal\n\tpart[1] = (part[1] && info.decimal_str) ? (info.decimal_str + part[1]) : \"\";\n\n\t// join\n\treturn (is_negative ? \"-\" : \"\") + part[0] + part[1];\n};\n\nfunction format_currency(v, currency, decimals) {\n\tvar format = get_number_format(currency);\n\tvar symbol = get_currency_symbol(currency);\n\tif(decimals === undefined) {\n\t\tdecimals = frappe.boot.sysdefaults.currency_precision || null;\n\t}\n\n\tif (symbol)\n\t\treturn symbol + \" \" + format_number(v, format, decimals);\n\telse\n\t\treturn format_number(v, format, decimals);\n}\n\nfunction get_currency_symbol(currency) {\n\tif (frappe.boot) {\n\t\tif (frappe.boot.sysdefaults.hide_currency_symbol == \"Yes\")\n\t\t\treturn null;\n\n\t\tif (!currency)\n\t\t\tcurrency = frappe.boot.sysdefaults.currency;\n\n\t\treturn frappe.model.get_value(\":Currency\", currency, \"symbol\") || currency;\n\t} else {\n\t\t// load in template\n\t\treturn frappe.currency_symbols[currency];\n\t}\n}\n\nfunction get_number_format(currency) {\n\treturn (frappe.boot && frappe.boot.sysdefaults && frappe.boot.sysdefaults.number_format) || \"#,###.##\";\n}\n\nfunction get_number_format_info(format) {\n\tvar info = frappe.number_format_info[format];\n\n\tif (!info) {\n\t\tinfo = { decimal_str: \".\", group_sep: \",\" };\n\t}\n\n\t// get the precision from the number format\n\tinfo.precision = format.split(info.decimal_str).slice(1)[0].length;\n\n\treturn info;\n}\n\nfunction _round(num, precision) {\n\tvar is_negative = num < 0 ? true : false;\n\tvar d = cint(precision);\n\tvar m = Math.pow(10, d);\n\tvar n = +(d ? Math.abs(num) * m : Math.abs(num)).toFixed(8); // Avoid rounding errors\n\tvar i = Math.floor(n), f = n - i;\n\tvar r = ((!precision && f == 0.5) ? ((i % 2 == 0) ? i : i + 1) : Math.round(n));\n\tr = d ? r / m : r;\n\treturn is_negative ? -r : r;\n\n}\n\nfunction roundNumber(num, precision) {\n\t// backward compatibility\n\treturn _round(num, precision);\n}\n\nfunction precision(fieldname, doc) {\n\tif (cur_frm) {\n\t\tif (!doc) doc = cur_frm.doc;\n\t\tvar df = frappe.meta.get_docfield(doc.doctype, fieldname, doc.parent || doc.name);\n\t\tif (!df) console.log(fieldname + \": could not find docfield in method precision()\");\n\t\treturn frappe.meta.get_field_precision(df, doc);\n\t} else {\n\t\treturn frappe.boot.sysdefaults.float_precision\n\t}\n}\n\nfunction in_list(list, item) {\n\tif (!list) return false;\n\tfor (var i = 0, j = list.length; i < j; i++)\n\t\tif (list[i] == item) return true;\n\treturn false;\n}\n\n// Proxy for in_list\nObject.defineProperty(window, 'inList', {\n\tget: function() {\n\t\tconsole.warn('Please use `in_list` instead of `inList`. It will be deprecated soon.');\n\t\treturn in_list;\n\t}\n});\n\nfunction remainder(numerator, denominator, precision) {\n\tprecision = cint(precision);\n\tvar multiplier = Math.pow(10, precision);\n\tif (precision) {\n\t\tvar _remainder = ((numerator * multiplier) % (denominator * multiplier)) / multiplier;\n\t} else {\n\t\tvar _remainder = numerator % denominator;\n\t}\n\n\treturn flt(_remainder, precision);\n}\n\nfunction round_based_on_smallest_currency_fraction(value, currency, precision) {\n\tvar smallest_currency_fraction_value = flt(frappe.model.get_value(\":Currency\",\n\t\tcurrency, \"smallest_currency_fraction_value\"))\n\n\tif (smallest_currency_fraction_value) {\n\t\tvar remainder_val = remainder(value, smallest_currency_fraction_value, precision);\n\t\tif (remainder_val > (smallest_currency_fraction_value / 2)) {\n\t\t\tvalue += (smallest_currency_fraction_value - remainder_val);\n\t\t} else {\n\t\t\tvalue -= remainder_val;\n\t\t}\n\t} else {\n\t\tvalue = _round(value);\n\t}\n\treturn value;\n}\n\nObject.assign(window, {\n\tflt,\n\tcint,\n\tstrip_number_groups,\n\tformat_currency,\n\tget_currency_symbol,\n\tget_number_format,\n\tget_number_format_info,\n\t_round,\n\troundNumber,\n\tprecision,\n\tremainder,\n\tround_based_on_smallest_currency_fraction,\n\tin_list\n});","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nimport showdown from 'showdown';\n\nfrappe.provide(\"frappe.tools\");\n\nfrappe.tools.downloadify = function(data, roles, title) {\n\tif(roles && roles.length && !has_common(roles, roles)) {\n\t\tfrappe.msgprint(__(\"Export not allowed. You need {0} role to export.\", [frappe.utils.comma_or(roles)]));\n\t\treturn;\n\t}\n\n\tvar filename = title + \".csv\";\n\tvar csv_data = frappe.tools.to_csv(data);\n\tvar a = document.createElement('a');\n\n\tif (\"download\" in a) {\n\t\t// Used Blob object, because it can handle large files\n\t\tvar blob_object = new Blob([csv_data], { type: 'text/csv;charset=UTF-8' });\n\t\ta.href = URL.createObjectURL(blob_object);\n\t\ta.download = filename;\n\n\t} else {\n\t\t// use old method\n\t\ta.href = 'data:attachment/csv,' + encodeURIComponent(csv_data);\n\t\ta.download = filename;\n\t\ta.target = \"_blank\";\n\t}\n\n\tdocument.body.appendChild(a);\n\ta.click();\n\n\tdocument.body.removeChild(a);\n};\n\nfrappe.markdown = function(txt) {\n\tif(!frappe.md2html) {\n\t\tfrappe.md2html = new showdown.Converter();\n\t}\n\n\twhile(txt.substr(0,1)===\"\\n\") {\n\t\ttxt = txt.substr(1);\n\t}\n\n\t// remove leading tab (if they exist in the first line)\n\tvar whitespace_len = 0,\n\t\tfirst_line = txt.split(\"\\n\")[0];\n\n\twhile([\"\\n\", \"\\t\"].indexOf(first_line.substr(0,1))!== -1) {\n\t\twhitespace_len++;\n\t\tfirst_line = first_line.substr(1);\n\t}\n\n\tif(whitespace_len && whitespace_len != first_line.length) {\n\t\tvar txt1 = [];\n\t\t$.each(txt.split(\"\\n\"), function(i, t) {\n\t\t\ttxt1.push(t.substr(whitespace_len));\n\t\t})\n\t\ttxt = txt1.join(\"\\n\");\n\t}\n\n\treturn frappe.md2html.makeHtml(txt);\n}\n\n\nfrappe.tools.to_csv = function(data) {\n\tvar res = [];\n\t$.each(data, function(i, row) {\n\t\trow = $.map(row, function(col) {\n\t\t\tif (col === null || col === undefined) col = '';\n\t\t\treturn typeof col === \"string\" ? ('\"' + $('<i>').html(col.replace(/\"/g, '\"\"')).text() + '\"') : col;\n\t\t});\n\t\tres.push(row.join(\",\"));\n\t});\n\treturn res.join(\"\\n\");\n};\n\nfrappe.slickgrid_tools = {\n\tget_filtered_items: function(dataView) {\n\t\tvar data = [];\n\t\tfor (var i=0, len=dataView.getLength(); i<len; i++) {\n\t\t\t// remove single quotes at start and end of total labels when print/pdf\n\t\t\tvar obj = dataView.getItem(i);\n\t\t\tfor (var item in obj) {\n\t\t\t\tif(obj.hasOwnProperty(item) && typeof(obj[item]) == \"string\"\n\t\t\t\t\t&& obj[item].charAt(0) == \"'\" && obj[item].charAt(obj[item].length -1) == \"'\") {\n\t\t\t\t\tdataView.getItem(i)[item] = obj[item].substr(1, obj[item].length-2);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata.push(dataView.getItem(i));\n\t\t}\n\t\treturn data;\n\t},\n\tget_view_data: function(columns, dataView, filter) {\n\t\tvar col_row = $.map(columns, function(v) { return v.name; });\n\t\tvar res = [];\n\t\tvar col_map = $.map(columns, function(v) { return v.field; });\n\n\t\tfor (var i=0, len=dataView.length; i<len; i++) {\n\t\t\tvar d = dataView[i];\n\t\t\tvar row = [];\n\t\t\t$.each(col_map, function(i, col) {\n\t\t\t\tvar val = d[col];\n\t\t\t\tif(val===null || val===undefined) {\n\t\t\t\t\tval = \"\";\n\t\t\t\t}\n\t\t\t\tif(typeof(val) == \"string\") {\n\t\t\t\t\t// export to csv and get first or second column of the grid indented if it is. e.g: account_name\n\t\t\t\t\tif((i<3) && d['indent'] > 0 && (isNaN((new Date(val)).valueOf()))) {\n\t\t\t\t\t\tval = \" \".repeat(d['indent'] * 8) + val;\n\t\t\t\t\t}\n\t\t\t\t\t// remove single quotes at start and end of total labels when export to csv\n\t\t\t\t\tif(val.charAt(0) == \"'\" && val.charAt(val.length -1) == \"'\") {\n\t\t\t\t\t\tval = val.substr(1, val.length-2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trow.push(val);\n\t\t\t});\n\n\t\t\tif(!filter || filter(row, d)) {\n\t\t\t\tres.push(row);\n\t\t\t}\n\t\t}\n\t\treturn [col_row].concat(res);\n\t},\n\tadd_property_setter_on_resize: function(grid) {\n\t\tgrid.onColumnsResized.subscribe(function(e, args) {\n\t\t\t$.each(grid.getColumns(), function(i, col) {\n\t\t\t\tif(col.docfield && col.previousWidth != col.width &&\n\t\t\t\t\t!in_list(frappe.model.std_fields_list, col.docfield.fieldname) ) {\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\tmethod:\"frappe.client.make_width_property_setter\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tdoc: {\n\t\t\t\t\t\t\t\tdoctype:'Property Setter',\n\t\t\t\t\t\t\t\tdoctype_or_field: 'DocField',\n\t\t\t\t\t\t\t\tdoc_type: col.docfield.parent,\n\t\t\t\t\t\t\t\tfield_name: col.docfield.fieldname,\n\t\t\t\t\t\t\t\tproperty: 'width',\n\t\t\t\t\t\t\t\tvalue: col.width,\n\t\t\t\t\t\t\t\t\"__islocal\": 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tcol.previousWidth = col.width;\n\t\t\t\t\tcol.docfield.width = col.width;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.datetime');\n\nfrappe.defaultDateFormat = \"YYYY-MM-DD\";\nfrappe.defaultTimeFormat = \"HH:mm:ss\";\nfrappe.defaultDatetimeFormat = frappe.defaultDateFormat + \" \" + frappe.defaultTimeFormat;\nmoment.defaultFormat = frappe.defaultDateFormat;\n\nfrappe.provide(\"frappe.datetime\");\n\n$.extend(frappe.datetime, {\n\tconvert_to_user_tz: function(date, format) {\n\t\t// format defaults to true\n\t\tif(frappe.sys_defaults.time_zone) {\n\t\t\tvar date_obj = moment.tz(date, frappe.sys_defaults.time_zone).local();\n\t\t} else {\n\t\t\tvar date_obj = moment(date);\n\t\t}\n\n\t\treturn (format===false) ? date_obj : date_obj.format(frappe.defaultDatetimeFormat);\n\t},\n\n\tconvert_to_system_tz: function(date, format) {\n\t\t// format defaults to true\n\n\t\tif(frappe.sys_defaults.time_zone) {\n\t\t\tvar date_obj = moment(date).tz(frappe.sys_defaults.time_zone);\n\t\t} else {\n\t\t\tvar date_obj = moment(date);\n\t\t}\n\n\t\treturn (format===false) ? date_obj : date_obj.format(frappe.defaultDatetimeFormat);\n\t},\n\n\tis_timezone_same: function() {\n\t\tif(frappe.sys_defaults.time_zone) {\n\t\t\treturn moment().tz(frappe.sys_defaults.time_zone).utcOffset() === moment().utcOffset();\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t},\n\n\tstr_to_obj: function(d) {\n\t\treturn moment(d, frappe.defaultDatetimeFormat)._d;\n\t},\n\n\tobj_to_str: function(d) {\n\t\treturn moment(d).locale(\"en\").format();\n\t},\n\n\tobj_to_user: function(d) {\n\t\treturn moment(d).format(frappe.datetime.get_user_fmt().toUpperCase());\n\t},\n\n\tget_diff: function(d1, d2) {\n\t\treturn moment(d1).diff(d2, \"days\");\n\t},\n\n\tget_hour_diff: function(d1, d2) {\n\t\treturn moment(d1).diff(d2, \"hours\");\n\t},\n\n\tget_day_diff: function(d1, d2) {\n\t\treturn moment(d1).diff(d2, \"days\");\n\t},\n\n\tadd_days: function(d, days) {\n\t\treturn moment(d).add(days, \"days\").format();\n\t},\n\n\tadd_months: function(d, months) {\n\t\treturn moment(d).add(months, \"months\").format();\n\t},\n\n\tweek_start: function() {\n\t\treturn moment().startOf(\"week\").format();\n\t},\n\n\tweek_end: function() {\n\t\treturn moment().endOf(\"week\").format();\n\t},\n\n\tmonth_start: function() {\n\t\treturn moment().startOf(\"month\").format();\n\t},\n\n\tmonth_end: function() {\n\t\treturn moment().endOf(\"month\").format();\n\t},\n\n\tyear_start: function(){\n\t\treturn moment().startOf(\"year\").format();\n\t},\n\n\tyear_end: function(){\n\t\treturn moment().endOf(\"year\").format();\n\t},\n\n\tget_user_fmt: function() {\n\t\treturn frappe.sys_defaults && frappe.sys_defaults.date_format || \"yyyy-mm-dd\";\n\t},\n\n\tstr_to_user: function(val, only_time = false) {\n\t\tif(!val) return \"\";\n\n\t\tif(only_time) {\n\t\t\treturn moment(val, frappe.defaultTimeFormat)\n\t\t\t\t.format(frappe.defaultTimeFormat);\n\t\t}\n\n\t\tvar user_fmt = frappe.datetime.get_user_fmt().toUpperCase();\n\t\tif(typeof val !== \"string\" || val.indexOf(\" \")===-1) {\n\t\t\treturn moment(val).format(user_fmt);\n\t\t} else {\n\t\t\treturn moment(val, \"YYYY-MM-DD HH:mm:ss\").format(user_fmt + \" HH:mm:ss\");\n\t\t}\n\t},\n\n\tget_datetime_as_string: function(d) {\n\t\treturn moment(d).format(\"YYYY-MM-DD HH:mm:ss\");\n\t},\n\n\tuser_to_str: function(val, only_time = false) {\n\n\t\tif(only_time) {\n\t\t\treturn moment(val, frappe.defaultTimeFormat)\n\t\t\t\t.format(frappe.defaultTimeFormat);\n\t\t}\n\n\t\tvar user_fmt = frappe.datetime.get_user_fmt().toUpperCase();\n\t\tvar system_fmt = \"YYYY-MM-DD\";\n\n\t\tif(val.indexOf(\" \")!==-1) {\n\t\t\tuser_fmt += \" HH:mm:ss\";\n\t\t\tsystem_fmt += \" HH:mm:ss\";\n\t\t}\n\n\t\t// user_fmt.replace(\"YYYY\", \"YY\")? user might only input 2 digits of the year, which should also be parsed\n\t\treturn moment(val, [user_fmt.replace(\"YYYY\", \"YY\"),\n\t\t\tuser_fmt]).locale(\"en\").format(system_fmt);\n\t},\n\n\tuser_to_obj: function(d) {\n\t\treturn frappe.datetime.str_to_obj(frappe.datetime.user_to_str(d));\n\t},\n\n\tglobal_date_format: function(d) {\n\t\tvar m = moment(d);\n\t\tif(m._f && m._f.indexOf(\"HH\")!== -1) {\n\t\t\treturn m.format(\"Do MMMM YYYY, h:mma\")\n\t\t} else {\n\t\t\treturn m.format('Do MMMM YYYY');\n\t\t}\n\t},\n\n\tnow_date: function(as_obj = false) {\n\t\treturn frappe.datetime._date(frappe.defaultDateFormat, as_obj);\n\t},\n\n\tnow_time: function(as_obj = false) {\n\t\treturn frappe.datetime._date(frappe.defaultTimeFormat, as_obj);\n\t},\n\n\tnow_datetime: function(as_obj = false) {\n\t\treturn frappe.datetime._date(frappe.defaultDatetimeFormat, as_obj);\n\t},\n\n\t_date: function(format, as_obj = false) {\n\t\tconst time_zone = frappe.sys_defaults && frappe.sys_defaults.time_zone;\n\t\tlet date;\n\t\tif (time_zone) {\n\t\t\tdate = moment.tz(time_zone);\n\t\t} else {\n\t\t\tdate = moment();\n\t\t}\n\t\tif (as_obj) {\n\t\t\treturn frappe.datetime.moment_to_date_obj(date);\n\t\t} else {\n\t\t\treturn date.format(format);\n\t\t}\n\t},\n\n\tmoment_to_date_obj: function(moment) {\n\t\tconst date_obj = new Date();\n\t\tconst date_array = moment.toArray();\n\t\tdate_obj.setFullYear(date_array[0]);\n\t\tdate_obj.setMonth(date_array[1]);\n\t\tdate_obj.setDate(date_array[2]);\n\t\tdate_obj.setHours(date_array[3]);\n\t\tdate_obj.setMinutes(date_array[4]);\n\t\tdate_obj.setSeconds(date_array[5]);\n\t\tdate_obj.setMilliseconds(date_array[6]);\n\t\treturn date_obj;\n\t},\n\n\tnowdate: function() {\n\t\treturn frappe.datetime.now_date();\n\t},\n\n\tget_today: function() {\n\t\treturn frappe.datetime.now_date();\n\t},\n\n\tget_time: (timestamp) => {\n\t\t// return time with AM/PM\n\t\treturn moment(timestamp).format('hh:mm A');\n\t},\n\n\tvalidate: function(d) {\n\t\treturn moment(d, [\n\t\t\tfrappe.defaultDateFormat,\n\t\t\tfrappe.defaultDatetimeFormat,\n\t\t\tfrappe.defaultTimeFormat\n\t\t], true).isValid();\n\t},\n\n});\n\n// Proxy for dateutil and get_today\nObject.defineProperties(window, {\n\t'dateutil': {\n\t\tget: function() {\n\t\t\tconsole.warn('Please use `frappe.datetime` instead of `dateutil`. It will be deprecated soon.');\n\t\t\treturn frappe.datetime;\n\t\t}\n\t},\n\t'date': {\n\t\tget: function() {\n\t\t\tconsole.warn('Please use `frappe.datetime` instead of `date`. It will be deprecated soon.');\n\t\t\treturn frappe.datetime;\n\t\t}\n\t},\n\t'get_today': {\n\t\tget: function() {\n\t\t\tconsole.warn('Please use `frappe.datetime.get_today` instead of `get_today`. It will be deprecated soon.');\n\t\t\treturn frappe.datetime.get_today;\n\t\t}\n\t}\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.help\");\n\nfrappe.help.youtube_id = {};\n\nfrappe.help.has_help = function(doctype) {\n\treturn frappe.help.youtube_id[doctype];\n}\n\nfrappe.help.show = function(doctype) {\n\tif(frappe.help.youtube_id[doctype]) {\n\t\tfrappe.help.show_video(frappe.help.youtube_id[doctype]);\n\t}\n}\n\nfrappe.help.show_video = function(youtube_id, title) {\n\tif($(\"body\").width() > 768) {\n\t\tvar size = [670, 377];\n\t} else {\n\t\tvar size = [560, 315];\n\t}\n\tvar dialog = frappe.msgprint({\n\t\tmessage: `<iframe width=\"${size[0]}\" height=\"${size[1]}\"\n\t\t\tsrc=\"https://www.youtube.com/embed/${youtube_id}\"\n\t\t\tframeborder=\"0\" allowfullscreen></iframe>` + (frappe.help_feedback_link || \"\"),\n\t\ttitle: title || __(\"Help\"),\n\t\twide: true\n\t});\n\n\tdialog.$wrapper.addClass(\"video-modal\");\n}\n\n$(\"body\").on(\"click\", \"a.help-link\", function() {\n\tvar doctype = $(this).attr(\"data-doctype\");\n\tdoctype && frappe.help.show(doctype);\n});\n","frappe.provide('frappe.help.help_links');\n\nfrappe.help.help_links['data-import-tool'] = [\n\t{ label: 'Importing and Exporting Data', url: 'https://frappe.github.io/erpnext/user/manual/en/setting-up/data/data-import-tool.html' },\n]\n\nfrappe.help.help_links['modules/Setup'] = [\n\t{ label: 'Users and Permissions', url: 'http://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/' },\n\t{ label: 'Settings', url: 'http://frappe.github.io/erpnext/user/manual/en/setting-up/settings/' },\n\t{ label: 'Data Management', url: 'http://frappe.github.io/erpnext/user/manual/en/setting-up/data/' },\n\t{ label: 'Email', url: 'http://frappe.github.io/erpnext/user/manual/en/setting-up/email/' },\n\t{ label: 'Printing', url: 'http://frappe.github.io/erpnext/user/manual/en/setting-up/print/' },\n]\n\nfrappe.help.help_links['List/User'] = [\n\t{ label: 'Adding Users', url: 'https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/adding-users' },\n\t{ label: 'Rename User', url: 'https://frappe.github.io/erpnext/user/manual/en/setting-up/articles/rename-user' },\n]\n\nfrappe.help.help_links['permission-manager'] = [\n\t{ label: 'Role Permissions Manager', url: 'https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/role-based-permissions' },\n]\n\nfrappe.help.help_links['user-permissions'] = [\n\t{ label: 'User Permissions', url: 'https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/user-permissions' },\n]\n\nfrappe.help.help_links['Form/System Settings'] = [\n\t{ label: 'System Settings', url: 'https://frappe.github.io/erpnext/user/manual/en/setting-up/settings/system-settings' },\n]\n\nfrappe.help.help_links['List/Email Account'] = [\n\t{ label: 'Email Account', url: 'https://frappe.github.io/erpnext/user/manual/en/setting-up/email/email-account' },\n]\n\nfrappe.help.help_links['List/Notification'] = [\n\t{ label: 'Notification', url: 'https://frappe.github.io/erpnext/user/manual/en/setting-up/email/email-alerts' },\n]\n\nfrappe.help.help_links['Form/Print Settings'] = [\n\t{ label: 'Print Settings', url: 'https://frappe.github.io/erpnext/user/manual/en/setting-up/print/print-settings' },\n]\n\nfrappe.help.help_links['print-format-builder'] = [\n\t{ label: 'Print Format Builder', url: 'https://frappe.github.io/erpnext/user/manual/en/setting-up/print/print-format-builder' },\n]\n\n","frappe.provide('frappe.contacts')\n\n$.extend(frappe.contacts, {\n\tclear_address_and_contact: function(frm) {\n\t\t$(frm.fields_dict['address_html'].wrapper).html(\"\");\n\t\tfrm.fields_dict['contact_html'] && $(frm.fields_dict['contact_html'].wrapper).html(\"\");\n\t},\n\n\trender_address_and_contact: function(frm) {\n\t\t// render address\n\t\tif(frm.fields_dict['address_html'] && \"addr_list\" in frm.doc.__onload) {\n\t\t\t$(frm.fields_dict['address_html'].wrapper)\n\t\t\t\t.html(frappe.render_template(\"address_list\",\n\t\t\t\t\tfrm.doc.__onload))\n\t\t\t\t.find(\".btn-address\").on(\"click\", function() {\n\t\t\t\t\tfrappe.new_doc(\"Address\");\n\t\t\t\t});\n\t\t}\n\n\t\t// render contact\n\t\tif(frm.fields_dict['contact_html'] && \"contact_list\" in frm.doc.__onload) {\n\t\t\t$(frm.fields_dict['contact_html'].wrapper)\n\t\t\t\t.html(frappe.render_template(\"contact_list\",\n\t\t\t\t\tfrm.doc.__onload))\n\t\t\t\t.find(\".btn-contact\").on(\"click\", function() {\n\t\t\t\t\tfrappe.new_doc(\"Contact\");\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\tget_last_doc: function(frm) {\n\t\tconst reverse_routes = frappe.route_history.reverse();\n\t\tconst last_route = reverse_routes.find(route => {\n\t\t\treturn route[0] === 'Form' && route[1] !== frm.doctype\n\t\t})\n\t\tlet doctype = last_route && last_route[1];\n\t\tlet docname = last_route && last_route[2];\n\n\t\tif (last_route && last_route.length > 3)\n\t\t\tdocname = last_route.slice(2).join(\"/\");\n\n\t\treturn {\n\t\t\tdoctype,\n\t\t\tdocname\n\t\t}\n\t}\n})","frappe.preview_email = function(template, args, header) {\n\tfrappe.call({\n\t\tmethod: 'frappe.email.email_body.get_email_html',\n\t\targs: {\n\t\t\tsubject: 'Test',\n\t\t\ttemplate,\n\t\t\targs,\n\t\t\theader\n\t\t}\n\t}).then((r) => {\n\t\tvar html = r.message;\n\t\thtml = html.replace(/embed=/, 'src=');\n\t\tvar d = frappe.msgprint(html);\n\t\td.$wrapper.find('.modal-dialog').css('width', '70%');\n\t});\n};\n","frappe.provide('frappe.file_manager');\n\nfrappe.file_manager = function() {\n\tlet files_to_move = [];\n\tlet\told_folder = null;\n\tlet new_folder = null;\n\n\tfunction cut(files, old_folder_) {\n\t\tfiles_to_move = files;\n\t\told_folder = old_folder_;\n\t}\n\n\tfunction paste(new_folder_) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (files_to_move.length === 0 || !old_folder) {\n\t\t\t\treset();\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnew_folder = new_folder_;\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\"frappe.core.doctype.file.file.move_file\",\n\t\t\t\targs: {\n\t\t\t\t\tfile_list: files_to_move,\n\t\t\t\t\tnew_parent: new_folder,\n\t\t\t\t\told_parent: old_folder\n\t\t\t\t},\n\t\t\t\tcallback: r => {\n\t\t\t\t\treset();\n\t\t\t\t\tresolve(r);\n\t\t\t\t}\n\t\t\t}).fail(reject);\n\t\t});\n\t}\n\n\tfunction reset() {\n\t\tfiles_to_move = [];\n\t\told_folder = null;\n\t\tnew_folder = null;\n\t}\n\n\treturn {\n\t\tcut,\n\t\tpaste,\n\t\tget can_paste() {\n\t\t\treturn Boolean(files_to_move.length > 0 && old_folder);\n\t\t},\n\t\tget old_folder() {\n\t\t\treturn old_folder;\n\t\t},\n\t\tget files_to_move() {\n\t\t\treturn files_to_move;\n\t\t}\n\t};\n}();\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname: 'FilePreview',\n\tprops: ['file'],\n\tdata() {\n\t\treturn {\n\t\t\tsrc: null\n\t\t}\n\t},\n\tmounted() {\n\t\tif (this.is_image) {\n\t\t\tif (window.FileReader) {\n\t\t\t\tlet fr = new FileReader();\n\t\t\t\tfr.onload = () => this.src = fr.result;\n\t\t\t\tfr.readAsDataURL(this.file.file_obj);\n\t\t\t}\n\t\t}\n\t},\n\tfilters: {\n\t\tfile_size(value) {\n\t\t\treturn frappe.form.formatters.FileSize(value);\n\t\t},\n\t\tfile_name(value) {\n\t\t\treturn frappe.utils.file_name_ellipsis(value, 9);\n\t\t}\n\t},\n\tcomputed: {\n\t\tuploaded() {\n\t\t\treturn this.file.total && this.file.total === this.file.progress && !this.file.failed;\n\t\t},\n\t\tis_image() {\n\t\t\treturn this.file.file_obj.type.startsWith('image');\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname: 'TreeNode',\n\tprops: ['node', 'selected_node'],\n\tcomponents: {\n\t\tTreeNode: () => frappe.ui.components.TreeNode\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport TreeNode from \"./TreeNode.vue\";\n\nexport default {\n\tname: 'FileBrowser',\n\tcomponents: {\n\t\tTreeNode\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tnode: {\n\t\t\t\tlabel: __('Home'),\n\t\t\t\tvalue: 'Home',\n\t\t\t\tchildren: [],\n\t\t\t\tis_leaf: false,\n\t\t\t\tfetching: false,\n\t\t\t\tfetched: false,\n\t\t\t\topen: false,\n\t\t\t\tfiltered: true\n\t\t\t},\n\t\t\tselected_node: {},\n\t\t\tfilter_text: ''\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.toggle_node(this.node);\n\t},\n\tmethods: {\n\t\ttoggle_node(node) {\n\t\t\tif (!node.fetched && !node.is_leaf) {\n\t\t\t\tnode.fetching = true;\n\t\t\t\tthis.get_files_in_folder(node.value)\n\t\t\t\t\t.then(files => {\n\t\t\t\t\t\tnode.open = true;\n\t\t\t\t\t\tnode.children = files;\n\t\t\t\t\t\tnode.fetched = true;\n\t\t\t\t\t\tnode.fetching = false;\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tnode.open = !node.open;\n\t\t\t\tthis.select_node(node);\n\t\t\t}\n\t\t},\n\t\tselect_node(node) {\n\t\t\tif (node.is_leaf) {\n\t\t\t\tthis.selected_node = node;\n\t\t\t}\n\t\t},\n\t\tget_files_in_folder(folder) {\n\t\t\treturn frappe.call('frappe.core.doctype.file.file.get_files_in_folder', { folder })\n\t\t\t\t.then(r => {\n\t\t\t\t\tlet files = r.message || [];\n\t\t\t\t\tfiles.sort((a, b) => {\n\t\t\t\t\t\tif (a.is_folder && b.is_folder) {\n\t\t\t\t\t\t\treturn a.modified < b.modified ? -1 : 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (a.is_folder) {\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (b.is_folder) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\treturn files.map(file => {\n\t\t\t\t\t\tlet filename = file.file_name || file.name;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel: frappe.utils.file_name_ellipsis(filename, 40),\n\t\t\t\t\t\t\tfilename: filename,\n\t\t\t\t\t\t\tfile_url: file.file_url,\n\t\t\t\t\t\t\tvalue: file.name,\n\t\t\t\t\t\t\tis_leaf: !file.is_folder,\n\t\t\t\t\t\t\tfetched: !file.is_folder, // fetched if node is leaf\n\t\t\t\t\t\t\tchildren: [],\n\t\t\t\t\t\t\topen: false,\n\t\t\t\t\t\t\tfetching: false,\n\t\t\t\t\t\t\tfiltered: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tapply_filter: frappe.utils.debounce(function() {\n\t\t\tlet filter_text = this.filter_text.toLowerCase();\n\t\t\tlet apply_filter = (node) => {\n\t\t\t\tlet search_string = node.filename.toLowerCase();\n\t\t\t\tif (node.is_leaf) {\n\t\t\t\t\tnode.filtered = search_string.includes(filter_text);\n\t\t\t\t} else {\n\t\t\t\t\tnode.children.forEach(apply_filter);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.node.children.forEach(apply_filter);\n\t\t}, 300)\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname: 'WebLink',\n\tdata() {\n\t\treturn {\n\t\t\turl: '',\n\t\t}\n\t}\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport FilePreview from './FilePreview.vue';\nimport FileBrowser from './FileBrowser.vue';\nimport WebLink from './WebLink.vue';\n\nexport default {\n\tname: 'FileUploader',\n\tprops: {\n\t\tshow_upload_button: {\n\t\t\tdefault: true\n\t\t},\n\t\tallow_multiple: {\n\t\t\tdefault: true\n\t\t},\n\t\tas_dataurl: {\n\t\t\tdefault: false\n\t\t},\n\t\tdoctype: {\n\t\t\tdefault: null\n\t\t},\n\t\tdocname: {\n\t\t\tdefault: null\n\t\t},\n\t\tfolder: {\n\t\t\tdefault: 'Home'\n\t\t},\n\t\tmethod: {\n\t\t\tdefault: null\n\t\t},\n\t\ton_success: {\n\t\t\tdefault: null\n\t\t},\n\t\trestrictions: {\n\t\t\tdefault: () => ({\n\t\t\t\tmax_file_size: null, // 2048 -> 2KB\n\t\t\t\tmax_number_of_files: null,\n\t\t\t\tallowed_file_types: [] // ['image/*', 'video/*', '.jpg', '.gif', '.pdf']\n\t\t\t})\n\t\t},\n\t\tupload_notes: {\n\t\t\tdefault: null // \"Images or video, upto 2MB\"\n\t\t}\n\t},\n\tcomponents: {\n\t\tFilePreview,\n\t\tFileBrowser,\n\t\tWebLink\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tfiles: [],\n\t\t\tis_dragging: false,\n\t\t\tcurrently_uploading: -1,\n\t\t\tshow_file_browser: false,\n\t\t\tshow_web_link: false,\n\t\t}\n\t},\n\twatch: {\n\t\tfiles(newvalue, oldvalue) {\n\t\t\tif (!this.allow_multiple && newvalue.length > 1) {\n\t\t\t\tthis.files = [newvalue[newvalue.length - 1]];\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tupload_complete() {\n\t\t\treturn this.files.length > 0\n\t\t\t\t&& this.files.every(\n\t\t\t\t\tfile => file.total !== 0 && file.progress === file.total);\n\t\t},\n\t},\n\tmethods: {\n\t\tdragover() {\n\t\t\tthis.is_dragging = true;\n\t\t},\n\t\tdragleave() {\n\t\t\tthis.is_dragging = false;\n\t\t},\n\t\tdropfiles(e) {\n\t\t\tthis.is_dragging = false;\n\t\t\tthis.add_files(e.dataTransfer.files);\n\t\t},\n\t\tbrowse_files() {\n\t\t\tthis.$refs.file_input.click();\n\t\t},\n\t\ton_file_input(e) {\n\t\t\tthis.add_files(this.$refs.file_input.files);\n\t\t},\n\t\tremove_file(i) {\n\t\t\tthis.files = this.files.filter((file, j) => i !== j);\n\t\t},\n\t\ttoggle_private(i) {\n\t\t\tthis.files[i].private = !this.files[i].private;\n\t\t},\n\t\ttoggle_all_private(flag) {\n\t\t\tthis.files = this.files.map(file => {\n\t\t\t\tfile.private = flag;\n\t\t\t\treturn file;\n\t\t\t});\n\t\t},\n\t\tadd_files(file_array) {\n\t\t\tlet files = Array.from(file_array)\n\t\t\t\t.filter(this.check_restrictions)\n\t\t\t\t.map(file => {\n\t\t\t\t\tlet is_image = file.type.startsWith('image');\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfile_obj: file,\n\t\t\t\t\t\tname: file.name,\n\t\t\t\t\t\tdoc: null,\n\t\t\t\t\t\tprogress: 0,\n\t\t\t\t\t\ttotal: 0,\n\t\t\t\t\t\tfailed: false,\n\t\t\t\t\t\tuploading: false,\n\t\t\t\t\t\tprivate: !is_image\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.files = this.files.concat(files);\n\t\t},\n\t\tcheck_restrictions(file) {\n\t\t\tlet { max_file_size, allowed_file_types } = this.restrictions;\n\n\t\t\tlet mime_type = file.type;\n\t\t\tlet extension = '.' + file.name.split('.').pop();\n\n\t\t\tlet is_correct_type = true;\n\t\t\tlet valid_file_size = true;\n\n\t\t\tif (allowed_file_types.length) {\n\t\t\t\tis_correct_type = allowed_file_types.some((type) => {\n\t\t\t\t\t// is this is a mime-type\n\t\t\t\t\tif (type.includes('/')) {\n\t\t\t\t\t\tif (!file.type) return false;\n\t\t\t\t\t\treturn file.type.match(type);\n\t\t\t\t\t}\n\n\t\t\t\t\t// otherwise this is likely an extension\n\t\t\t\t\tif (type[0] === '.') {\n\t\t\t\t\t\treturn file.name.endsWith(type);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (max_file_size && file.size != null) {\n\t\t\t\tvalid_file_size = file.size < max_file_size;\n\t\t\t}\n\n\t\t\tif (!is_correct_type) {\n\t\t\t\tconsole.warn('File skipped because of invalid file type', file);\n\t\t\t}\n\t\t\tif (!valid_file_size) {\n\t\t\t\tconsole.warn('File skipped because of invalid file size', file.size, file);\n\t\t\t}\n\n\t\t\treturn is_correct_type && valid_file_size;\n\t\t},\n\t\tupload_files() {\n\t\t\tif (this.show_file_browser) {\n\t\t\t\treturn this.upload_via_file_browser();\n\t\t\t}\n\t\t\tif (this.show_web_link) {\n\t\t\t\treturn this.upload_via_web_link();\n\t\t\t}\n\t\t\tif (this.as_dataurl) {\n\t\t\t\treturn this.return_as_dataurl();\n\t\t\t}\n\t\t\treturn frappe.run_serially(\n\t\t\t\tthis.files.map(\n\t\t\t\t\t(file, i) =>\n\t\t\t\t\t\t() => this.upload_file(file, i)\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\tupload_via_file_browser() {\n\t\t\tlet selected_file = this.$refs.file_browser.selected_node;\n\t\t\tif (!selected_file.value) {\n\t\t\t\tfrappe.msgprint(__('Click on a file to select it.'));\n\t\t\t\treturn Promise.reject();\n\t\t\t}\n\n\t\t\treturn this.upload_file({\n\t\t\t\tfile_url: selected_file.file_url\n\t\t\t});\n\t\t},\n\t\tupload_via_web_link() {\n\t\t\tlet file_url = this.$refs.web_link.url;\n\t\t\tif (!file_url) {\n\t\t\t\tfrappe.msgprint(__('Invalid URL'));\n\t\t\t\treturn Promise.reject();\n\t\t\t}\n\n\t\t\treturn this.upload_file({\n\t\t\t\tfile_url\n\t\t\t});\n\t\t},\n\t\treturn_as_dataurl() {\n\t\t\tlet promises = this.files.map(file =>\n\t\t\t\tfrappe.dom.file_to_base64(file.file_obj)\n\t\t\t\t\t.then(dataurl => {\n\t\t\t\t\t\tfile.dataurl = dataurl;\n\t\t\t\t\t\tthis.on_success && this.on_success(file);\n\t\t\t\t\t})\n\t\t\t);\n\t\t\treturn Promise.all(promises);\n\t\t},\n\t\tupload_file(file, i) {\n\t\t\tthis.currently_uploading = i;\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet xhr = new XMLHttpRequest();\n\t\t\t\txhr.upload.addEventListener('loadstart', (e) => {\n\t\t\t\t\tfile.uploading = true;\n\t\t\t\t})\n\t\t\t\txhr.upload.addEventListener('progress', (e) => {\n\t\t\t\t\tif (e.lengthComputable) {\n\t\t\t\t\t\tfile.progress = e.loaded;\n\t\t\t\t\t\tfile.total = e.total;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\txhr.upload.addEventListener('load', (e) => {\n\t\t\t\t\tfile.uploading = false;\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t\txhr.addEventListener('error', (e) => {\n\t\t\t\t\tfile.failed = true;\n\t\t\t\t\treject();\n\t\t\t\t})\n\t\t\t\txhr.onreadystatechange = () => {\n\t\t\t\t\tif (xhr.readyState == XMLHttpRequest.DONE) {\n\t\t\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\t\t\tlet r = null;\n\t\t\t\t\t\t\tlet file_doc = null;\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tr = JSON.parse(xhr.responseText);\n\t\t\t\t\t\t\t\tif (r.message.doctype === 'File') {\n\t\t\t\t\t\t\t\t\tfile_doc = r.message;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t\tr = xhr.responseText;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfile.doc = file_doc;\n\n\t\t\t\t\t\t\tif (this.on_success) {\n\t\t\t\t\t\t\t\tthis.on_success(file_doc, r);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfile.failed = true;\n\t\t\t\t\t\t\tlet error = null;\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\terror = JSON.parse(xhr.responseText);\n\t\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t\t// pass\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfrappe.request.cleanup({}, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\txhr.open('POST', '/api/method/upload_file', true);\n\t\t\t\txhr.setRequestHeader('Accept', 'application/json');\n\t\t\t\txhr.setRequestHeader('X-Frappe-CSRF-Token', frappe.csrf_token);\n\n\t\t\t\tlet form_data = new FormData();\n\t\t\t\tif (file.file_obj) {\n\t\t\t\t\tform_data.append('file', file.file_obj, file.name);\n\t\t\t\t}\n\t\t\t\tform_data.append('is_private', +file.private);\n\t\t\t\tform_data.append('folder', this.folder);\n\n\t\t\t\tif (file.file_url) {\n\t\t\t\t\tform_data.append('file_url', file.file_url);\n\t\t\t\t}\n\n\t\t\t\tif (this.doctype && this.docname) {\n\t\t\t\t\tform_data.append('doctype', this.doctype);\n\t\t\t\t\tform_data.append('docname', this.docname);\n\t\t\t\t}\n\n\t\t\t\tif (this.method) {\n\t\t\t\t\tform_data.append('method', this.method);\n\t\t\t\t}\n\n\t\t\t\txhr.send(form_data);\n\t\t\t});\n\t\t}\n\t}\n}\n","import FileUploaderComponent from './FileUploader.vue';\n\nexport default class FileUploader {\n\tconstructor({\n\t\twrapper,\n\t\tmethod,\n\t\ton_success,\n\t\tdoctype,\n\t\tdocname,\n\t\tfiles,\n\t\tfolder,\n\t\trestrictions,\n\t\tupload_notes,\n\t\tallow_multiple,\n\t\tas_dataurl\n\t} = {}) {\n\t\tif (!wrapper) {\n\t\t\tthis.make_dialog();\n\t\t} else {\n\t\t\tthis.wrapper = wrapper.get ? wrapper.get(0) : wrapper;\n\t\t}\n\n\t\tthis.$fileuploader = new Vue({\n\t\t\tel: this.wrapper,\n\t\t\trender: h => h(FileUploaderComponent, {\n\t\t\t\tprops: {\n\t\t\t\t\tshow_upload_button: !Boolean(this.dialog),\n\t\t\t\t\tdoctype,\n\t\t\t\t\tdocname,\n\t\t\t\t\tmethod,\n\t\t\t\t\tfolder,\n\t\t\t\t\ton_success,\n\t\t\t\t\trestrictions,\n\t\t\t\t\tupload_notes,\n\t\t\t\t\tallow_multiple,\n\t\t\t\t\tas_dataurl\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\n\t\tthis.uploader = this.$fileuploader.$children[0];\n\n\t\tif (files && files.length) {\n\t\t\tthis.uploader.add_files(files);\n\t\t}\n\t}\n\n\tupload_files() {\n\t\tthis.dialog && this.dialog.get_primary_btn().prop('disabled', true);\n\t\treturn this.uploader.upload_files()\n\t\t\t.then(() => {\n\t\t\t\tthis.dialog && this.dialog.hide();\n\t\t\t});\n\t}\n\n\tmake_dialog() {\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: 'Upload',\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t\tfieldname: 'upload_area'\n\t\t\t\t}\n\t\t\t],\n\t\t\tprimary_action_label: __('Upload'),\n\t\t\tprimary_action: () => this.upload_files()\n\t\t});\n\n\t\tthis.wrapper = this.dialog.fields_dict.upload_area.$wrapper[0];\n\t\tthis.dialog.show();\n\t\tthis.dialog.$wrapper.on('hidden.bs.modal', function() {\n\t\t\t$(this).data('bs.modal', null);\n\t\t\t$(this).remove();\n\t\t});\n\t}\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nimport FileUploader from './file_uploader';\n\nfrappe.provide('frappe.ui');\nfrappe.ui.FileUploader = FileUploader;\n","frappe.provide(\"frappe.integration_service\");\n\nfrappe.integration_service.gsuite = {\n\tcreate_gsuite_file: function(args, opts) {\n\t\treturn frappe.call({\n\t\t\ttype:'POST',\n\t\t\tmethod: 'frappe.integrations.doctype.gsuite_templates.gsuite_templates.create_gsuite_doc',\n\t\t\targs: args,\n\t\t\tcallback: function(r) {\n\t\t\t\tvar attachment = r.message;\n\t\t\t\topts.callback && opts.callback(attachment, r);\n\t\t\t}\n\t\t});\n\t}\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.ui');\n\nfrappe.ui.Tree = class {\n\tconstructor({\n\t\tparent, label, icon_set, toolbar, expandable, with_skeleton=1, \t// eslint-disable-line\n\n\t\targs, method, get_label, on_render, on_click \t\t// eslint-disable-line\n\t}) {\n\t\t$.extend(this, arguments[0]);\n\t\tthis.setup_treenode_class();\n\t\tthis.nodes = {};\n\t\tthis.wrapper = $('<div class=\"tree\">').appendTo(this.parent);\n\t\tif(with_skeleton) this.wrapper.addClass('with-skeleton');\n\n\t\tif(!icon_set) {\n\t\t\tthis.icon_set = {\n\t\t\t\topen: 'fa fa-fw fa-folder-open',\n\t\t\t\tclosed: 'fa fa-fw fa-folder',\n\t\t\t\tleaf: 'octicon octicon-primitive-dot'\n\t\t\t};\n\t\t}\n\n\t\tthis.setup_root_node();\n\t}\n\n\tget_nodes(value, is_root) {\n\t\tvar args = Object.assign({}, this.args);\n\t\targs.parent = value;\n\t\targs.is_root = is_root;\n\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: this.method,\n\t\t\t\targs: args,\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tresolve(r.message);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tget_all_nodes(value, is_root) {\n\t\tvar args = Object.assign({}, this.args);\n\t\targs.parent = value;\n\t\targs.is_root = is_root;\n\n\t\targs.tree_method = this.method;\n\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.desk.treeview.get_all_nodes',\n\t\t\t\targs: args,\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tresolve(r.message);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tsetup_treenode_class() {\n\t\tlet tree = this;\n\t\tthis.TreeNode = class {\n\t\t\tconstructor({\n\t\t\t\tparent, label, parent_label, expandable, is_root, data // eslint-disable-line\n\t\t\t}) {\n\t\t\t\t$.extend(this, arguments[0]);\n\t\t\t\tthis.loaded = 0;\n\t\t\t\tthis.expanded = 0;\n\t\t\t\tif(this.parent_label){\n\t\t\t\t\tthis.parent_node = tree.nodes[this.parent_label];\n\t\t\t\t}\n\n\t\t\t\ttree.nodes[this.label] = this;\n\t\t\t\ttree.make_node_element(this);\n\t\t\t\ttree.on_render && tree.on_render(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetup_root_node() {\n\t\tthis.root_node = new this.TreeNode({\n\t\t\tparent: this.wrapper,\n\t\t\tlabel: this.label,\n\t\t\tparent_label: null,\n\t\t\texpandable: true,\n\t\t\tis_root: true,\n\t\t\tdata: {\n\t\t\t\tvalue: this.label\n\t\t\t}\n\t\t});\n\t\tthis.expand_node(this.root_node, false);\n\t}\n\n\trefresh() {\n\t\tthis.selected_node.parent_node &&\n\t\t\tthis.load_children(this.selected_node.parent_node, true);\n\t}\n\n\tmake_node_element(node) {\n\t\tnode.$tree_link = $('<span class=\"tree-link\">')\n\t\t\t.attr('data-label', node.label)\n\t\t\t.data('node', node)\n\t\t\t.appendTo(node.parent);\n\n\t\tnode.$ul = $('<ul class=\"tree-children\">')\n\t\t\t.hide().appendTo(node.parent);\n\n\t\tthis.make_icon_and_label(node);\n\t\tif(this.toolbar) {\n\t\t\tnode.$toolbar = this.get_toolbar(node).insertAfter(node.$tree_link);\n\t\t}\n\t}\n\n\tadd_node(node, data) {\n\t\tvar $li = $('<li class=\"tree-node\">');\n\n\t\treturn new this.TreeNode({\n\t\t\tparent: $li.appendTo(node.$ul),\n\t\t\tparent_label: node.label,\n\t\t\tlabel: data.value,\n\t\t\ttitle: data.title,\n\t\t\texpandable: data.expandable,\n\t\t\tdata: data\n\t\t});\n\t}\n\n\treload_node(node) {\n\t\tthis.load_children(node);\n\t}\n\n\ttoggle() {\n\t\tthis.get_selected_node().toggle();\n\t}\n\n\tget_selected_node() {\n\t\treturn this.selected_node;\n\t}\n\n\tset_selected_node(node) {\n\t\tthis.selected_node = node;\n\t}\n\n\tload_children(node, deep=false) {\n\t\tlet value = node.data.value, is_root = node.is_root;\n\n\t\tif(!deep) {\n\t\t\tfrappe.run_serially([\n\t\t\t\t() => {return this.get_nodes(value, is_root);},\n\t\t\t\t(data_set) => { this.render_node_children(node, data_set); },\n\t\t\t\t() => { this.set_selected_node(node); }\n\t\t\t]);\n\t\t} else {\n\t\t\tfrappe.run_serially([\n\t\t\t\t() => {return this.get_all_nodes(value, is_root);},\n\t\t\t\t(data_list) => { this.render_children_of_all_nodes(data_list); },\n\t\t\t\t() => { this.set_selected_node(node); }\n\t\t\t]);\n\t\t}\n\t}\n\n\trender_children_of_all_nodes(data_list) {\n\t\tdata_list.map(d => { this.render_node_children(this.nodes[d.parent], d.data); });\n\t}\n\n\trender_node_children(node, data_set) {\n\t\tnode.$ul.empty();\n\t\tif (data_set) {\n\t\t\t$.each(data_set, (i, data) => {\n\t\t\t\tvar child_node = this.add_node(node, data);\n\t\t\t\tchild_node.$tree_link\n\t\t\t\t\t.data('node-data', data)\n\t\t\t\t\t.data('node', child_node);\n\t\t\t});\n\t\t}\n\n\t\tnode.expanded = false;\n\n\t\t// As children loaded\n\t\tnode.loaded = true;\n\t\tthis.expand_node(node);\n\t}\n\n\ton_node_click(node) {\n\t\tthis.expand_node(node);\n\t\tfrappe.dom.activate(this.wrapper, node.$tree_link, 'tree-link');\n\t\tif(node.$toolbar) this.show_toolbar(node);\n\t}\n\n\texpand_node(node, click = true) {\n\t\tthis.set_selected_node(node);\n\n\t\tif(click) {\n\t\t\tthis.on_click && this.on_click(node);\n\t\t}\n\n\t\tif(node.expandable) {\n\t\t\tthis.toggle_node(node);\n\t\t}\n\t\tthis.select_link(node);\n\n\t\tnode.expanded = !node.expanded;\n\t\tnode.parent.toggleClass('opened', node.expanded);\n\t}\n\n\ttoggle_node(node) {\n\t\tif(node.expandable && this.get_nodes && !node.loaded) {\n\t\t\treturn this.load_children(node);\n\t\t}\n\n\t\t// expand children\n\t\tif(node.$ul) {\n\t\t\tif(node.$ul.children().length) {\n\t\t\t\tnode.$ul.toggle(!node.expanded);\n\t\t\t}\n\n\t\t\t// open close icon\n\t\t\tif(this.icon_set) {\n\t\t\t\tnode.$tree_link.find('i').removeClass();\n\t\t\t\tif(!node.expanded) {\n\t\t\t\t\tnode.$tree_link.find('i').addClass(`${this.icon_set.open} node-parent`);\n\t\t\t\t} else {\n\t\t\t\t\tnode.$tree_link.find('i').addClass(`${this.icon_set.closed} node-parent`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tselect_link(node) {\n\t\tthis.wrapper.find('.selected')\n\t\t\t.removeClass('selected');\n\t\tnode.$tree_link.toggleClass('selected');\n\t}\n\n\tshow_toolbar(node) {\n\t\tif(this.cur_toolbar)\n\t\t\t$(this.cur_toolbar).hide();\n\t\tthis.cur_toolbar = node.$toolbar;\n\t\tnode.$toolbar.show();\n\t}\n\n\tget_node_label(node) {\n\t\tif(this.get_label) {\n\t\t\treturn this.get_label(node);\n\t\t}\n\t\tif (node.title && node.title != node.label) {\n\t\t\treturn __(node.title) + ` <span class='text-muted'>(${node.label})</span>`;\n\t\t} else {\n\t\t\treturn __(node.title || node.label);\n\t\t}\n\t}\n\n\tmake_icon_and_label(node) {\n\t\tlet icon_html = '';\n\t\tif(this.icon_set) {\n\t\t\tif(node.expandable) {\n\t\t\t\ticon_html = `<i class=\"${this.icon_set.closed} node-parent\"></i>`;\n\t\t\t} else {\n\t\t\t\ticon_html = `<i class=\"${this.icon_set.leaf} node-leaf\"></i>`;\n\t\t\t}\n\t\t}\n\n\t\t$(icon_html).appendTo(node.$tree_link);\n\t\t$(`<a class=\"tree-label grey h6\"> ${this.get_node_label(node)}</a>`).appendTo(node.$tree_link);\n\n\t\tnode.$tree_link.on('click', () => {\n\t\t\tsetTimeout(() => {this.on_node_click(node);}, 100);\n\t\t});\n\t}\n\n\tget_toolbar(node) {\n\t\tlet $toolbar = $('<span class=\"tree-node-toolbar btn-group\"></span>').hide();\n\n\t\tObject.keys(this.toolbar).map(key => {\n\t\t\tlet obj = this.toolbar[key];\n\t\t\tif(!obj.label) return;\n\t\t\tif(obj.condition && !obj.condition(node)) return;\n\n\t\t\tvar label = obj.get_label ? obj.get_label() : obj.label;\n\t\t\tvar $link = $(\"<button class='btn btn-default btn-xs'></button>\")\n\t\t\t\t.html(label)\n\t\t\t\t.addClass('tree-toolbar-button ' + (obj.btnClass || ''))\n\t\t\t\t.appendTo($toolbar);\n\t\t\t$link.on('click', () => {\n\t\t\t\tobj.click(node);\n\t\t\t\tthis.refresh();\n\t\t\t});\n\t\t});\n\n\t\treturn $toolbar;\n\t}\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n// page container\nfrappe.provide('frappe.pages');\nfrappe.provide('frappe.views');\n\nwindow.cur_page = null;\nfrappe.views.Container = Class.extend({\n\t_intro: \"Container contains pages inside `#container` and manages \\\n\t\t\tpage creation, switching\",\n\tinit: function() {\n\t\tthis.container = $('#body_div').get(0);\n\t\tthis.page = null; // current page\n\t\tthis.pagewidth = $(this.container).width();\n\t\tthis.pagemargin = 50;\n\n\t\tvar me = this;\n\n\t\t$(document).on(\"page-change\", function() {\n\t\t\t// set data-route in body\n\t\t\tvar route_str = frappe.get_route_str();\n\t\t\t$(\"body\").attr(\"data-route\", route_str);\n\t\t\t$(\"body\").attr(\"data-sidebar\", me.has_sidebar() ? 1 : 0);\n\t\t});\n\n\t\t$(document).bind('rename', function(event, dt, old_name, new_name) {\n\t\t\tfrappe.breadcrumbs.rename(dt, old_name, new_name);\n\t\t});\n\t},\n\tadd_page: function(label) {\n\t\tvar page = $('<div class=\"content page-container\"></div>')\n\t\t\t.attr('id', \"page-\" + label)\n\t\t\t.attr(\"data-page-route\", label)\n\t\t\t.hide()\n\t\t\t.appendTo(this.container).get(0);\n\t\tpage.label = label;\n\t\tfrappe.pages[label] = page;\n\n\t\treturn page;\n\t},\n\tchange_to: function(label) {\n\t\tcur_page = this;\n\t\tif(this.page && this.page.label === label) {\n\t\t\t$(this.page).trigger('show');\n\t\t\treturn;\n\t\t}\n\n\t\tvar me = this;\n\t\tif(label.tagName) {\n\t\t\t// if sent the div, get the table\n\t\t\tvar page = label;\n\t\t} else {\n\t\t\tvar page = frappe.pages[label];\n\t\t}\n\t\tif(!page) {\n\t\t\tconsole.log(__('Page not found')+ ': ' + label);\n\t\t\treturn;\n\t\t}\n\n\t\t// hide dialog\n\t\tif(window.cur_dialog && cur_dialog.display && !cur_dialog.keep_open) {\n\t\t\tcur_dialog.hide();\n\t\t}\n\n\t\t// hide current\n\t\tif(this.page && this.page != page) {\n\t\t\t$(this.page).hide();\n\t\t\t$(this.page).trigger('hide');\n\t\t}\n\n\t\t// show new\n\t\tif(!this.page || this.page != page) {\n\t\t\tthis.page = page;\n\t\t\t// $(this.page).fadeIn(300);\n\t\t\t$(this.page).show();\n\t\t}\n\n\t\t$(document).trigger(\"page-change\");\n\n\t\tthis.page._route = window.location.hash;\n\t\t$(this.page).trigger('show');\n\t\tfrappe.utils.scroll_to(0);\n\t\tfrappe.breadcrumbs.update();\n\n\t\treturn this.page;\n\t},\n\thas_sidebar: function() {\n\t\tvar flag = 0;\n\t\tvar route_str = frappe.get_route_str();\n\t\t// check in frappe.ui.pages\n\t\tflag = frappe.ui.pages[route_str] && !frappe.ui.pages[route_str].single_column;\n\n\t\t// sometimes frappe.ui.pages is updated later,\n\t\t// so check the dom directly\n\t\tif(!flag) {\n\t\t\tvar page_route = route_str.split('/').slice(0, 2).join('/');\n\t\t\tflag = $(`.page-container[data-page-route=\"${page_route}\"] .layout-side-section`).length ? 1 : 0;\n\t\t}\n\n\t\treturn flag;\n\t},\n});\n\n\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.breadcrumbs = {\n\tall: {},\n\n\tpreferred: {\n\t\t\"File\": \"\",\n\t\t\"Dashboard\": \"Customization\",\n\t\t\"Dashboard Chart\": \"Customization\",\n\t\t\"Dashboard Chart Source\": \"Customization\",\n\t},\n\n\tset_doctype_module: function(doctype, module) {\n\t\tlocalStorage[\"preferred_breadcrumbs:\" + doctype] = module;\n\t},\n\n\tget_doctype_module: function(doctype) {\n\t\treturn localStorage[\"preferred_breadcrumbs:\" + doctype];\n\t},\n\n\tadd: function(module, doctype, type) {\n\t\tlet obj;\n\t\tif (typeof module === 'object') {\n\t\t\tobj = module;\n\t\t} else {\n\t\t\tobj = {\n\t\t\t\tmodule:module,\n\t\t\t\tdoctype:doctype,\n\t\t\t\ttype:type\n\t\t\t}\n\t\t}\n\n\t\tfrappe.breadcrumbs.all[frappe.breadcrumbs.current_page()] = obj;\n\t\tfrappe.breadcrumbs.update();\n\t},\n\n\tcurrent_page: function() {\n\t\treturn frappe.get_route_str();\n\t},\n\n\tupdate: function() {\n\t\tvar breadcrumbs = frappe.breadcrumbs.all[frappe.breadcrumbs.current_page()];\n\n\t\tif(!frappe.visible_modules) {\n\t\t\tfrappe.visible_modules = $.map(frappe.boot.allowed_modules, (m) => {\n\t\t\t\treturn m.module_name;\n\t\t\t});\n\t\t}\n\n\t\tvar $breadcrumbs = $(\"#navbar-breadcrumbs\").empty();\n\n\t\tif(!breadcrumbs) {\n\t\t\t$(\"body\").addClass(\"no-breadcrumbs\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (breadcrumbs.type === 'Custom') {\n\t\t\tconst html = `<li><a href=\"${breadcrumbs.route}\">${breadcrumbs.label}</a></li>`;\n\t\t\t$breadcrumbs.append(html);\n\t\t\t$(\"body\").removeClass(\"no-breadcrumbs\");\n\t\t\treturn;\n\t\t}\n\n\t\t// get preferred module for breadcrumbs, based on sent via module\n\t\tvar from_module = frappe.breadcrumbs.get_doctype_module(breadcrumbs.doctype);\n\n\t\tif(from_module) {\n\t\t\tbreadcrumbs.module = from_module;\n\t\t} else if(frappe.breadcrumbs.preferred[breadcrumbs.doctype]!==undefined) {\n\t\t\t// get preferred module for breadcrumbs\n\t\t\tbreadcrumbs.module = frappe.breadcrumbs.preferred[breadcrumbs.doctype];\n\t\t}\n\n\t\tif(breadcrumbs.module) {\n\t\t\tif(in_list([\"Core\", \"Email\", \"Custom\", \"Workflow\", \"Print\"], breadcrumbs.module)) {\n\t\t\t\tbreadcrumbs.module = \"Setup\";\n\t\t\t}\n\n\t\t\tif(frappe.get_module(breadcrumbs.module)) {\n\t\t\t\t// if module access exists\n\t\t\t\tvar module_info = frappe.get_module(breadcrumbs.module),\n\t\t\t\t\ticon = module_info && module_info.icon,\n\t\t\t\t\tlabel = module_info ? module_info.label : breadcrumbs.module;\n\n\n\t\t\t\tif(module_info && !module_info.blocked && frappe.visible_modules.includes(module_info.module_name)) {\n\t\t\t\t\t$(repl('<li><a href=\"#modules/%(module)s\">%(label)s</a></li>',\n\t\t\t\t\t\t{ module: breadcrumbs.module, label: __(label) }))\n\t\t\t\t\t\t.appendTo($breadcrumbs);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(breadcrumbs.doctype && frappe.get_route()[0]===\"Form\") {\n\t\t\tif(breadcrumbs.doctype===\"User\"\n\t\t\t\t|| frappe.get_doc('DocType', breadcrumbs.doctype).issingle) {\n\t\t\t\t// no user listview for non-system managers and single doctypes\n\t\t\t} else {\n\t\t\t\tvar route;\n\t\t\t\tif(frappe.boot.treeviews.indexOf(breadcrumbs.doctype) !== -1) {\n\t\t\t\t\tvar view = frappe.model.user_settings[breadcrumbs.doctype].last_view || 'Tree';\n\t\t\t\t\troute = view + '/' + breadcrumbs.doctype;\n\t\t\t\t} else {\n\t\t\t\t\troute = 'List/' + breadcrumbs.doctype;\n\t\t\t\t}\n\t\t\t\t$(repl('<li><a href=\"#%(route)s\">%(label)s</a></li>',\n\t\t\t\t\t{route: route, label: __(breadcrumbs.doctype)}))\n\t\t\t\t\t.appendTo($breadcrumbs);\n\t\t\t}\n\t\t}\n\n\t\t$(\"body\").removeClass(\"no-breadcrumbs\");\n\t},\n\n\trename: function(doctype, old_name, new_name) {\n\t\tvar old_route_str = [\"Form\", doctype, old_name].join(\"/\");\n\t\tvar new_route_str = [\"Form\", doctype, new_name].join(\"/\");\n\t\tfrappe.breadcrumbs.all[new_route_str] = frappe.breadcrumbs.all[old_route_str];\n\t\tdelete frappe.breadcrumbs.all[old_route_str];\n\t}\n\n}\n\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.pages');\nfrappe.provide('frappe.views');\n\nfrappe.views.Factory = class Factory {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t}\n\n\tshow() {\n\t\tvar page_name = frappe.get_route_str(),\n\t\t\tme = this;\n\n\t\tif(frappe.pages[page_name] && !page_name.includes(\"Form/\")) {\n\t\t\tfrappe.container.change_to(page_name);\n\t\t\tif(me.on_show) {\n\t\t\t\tme.on_show();\n\t\t\t}\n\t\t} else {\n\t\t\tvar route = frappe.get_route();\n\t\t\tif(route[1]) {\n\t\t\t\tme.make(route);\n\t\t\t} else {\n\t\t\t\tfrappe.show_not_found(route);\n\t\t\t}\n\t\t}\n\t}\n\n\tmake_page(double_column, page_name) {\n\t\treturn frappe.make_page(double_column, page_name);\n\t}\n}\n\nfrappe.make_page = function(double_column, page_name) {\n\tif(!page_name) {\n\t\tvar page_name = frappe.get_route_str();\n\t}\n\tvar page = frappe.container.add_page(page_name);\n\n\tfrappe.ui.make_app_page({\n\t\tparent: page,\n\t\tsingle_column: !double_column\n\t});\n\tfrappe.container.change_to(page_name);\n\treturn page;\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet instances = [];\n\nfunction onDocumentClick(e, el, fn) {\n  let target = e.target;\n  if (el !== target && !el.contains(target)) {\n    fn(e);\n  }\n}\n\nexport default {\n  name: \"Popover\",\n  props: {\n    align: {\n      default: \"left\"\n    },\n    fullwidth: {\n      default: false\n    }\n  },\n  data() {\n    return {\n      isOpen: false\n    };\n  },\n  directives: {\n    outside: {\n      bind(el, binding) {\n        el.dataset.outsideClickIndex = instances.length;\n\n        const fn = binding.value;\n        const click = function(e) {\n          onDocumentClick(e, el, fn);\n        };\n\n        document.addEventListener(\"click\", click);\n        instances.push(click);\n      },\n      unbind(el) {\n        const index = el.dataset.outsideClickIndex;\n        const handler = instances[index];\n        document.addEventListener(\"click\", handler);\n        instances.splice(index, 1);\n      }\n    }\n  },\n  computed: {\n    popoverClasses() {\n      return {\n        \"pin-r\": this.align === \"right\",\n        \"pin-l\": this.align === \"left\",\n        \"w-full\": this.fullwidth === true\n      };\n    }\n  },\n  methods: {\n    togglePopover() {\n      this.isOpen = !this.isOpen;\n    },\n    closePopover() {\n      this.isOpen = false;\n    }\n  }\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Popover from \"./Popover.vue\";\n\nexport default {\n  name: \"Dropdown\",\n  components: {\n    Popover\n  },\n  props: {\n    items: {\n      type: Array,\n      default: () => []\n    },\n    label: {\n      type: String,\n      default: \"Dropdown\"\n    },\n    align: {\n      type: String,\n      default: \"right\"\n    }\n  },\n  data() {\n    return {\n      isOpen: false\n    };\n  },\n  computed: {\n    dropdownItems() {\n      return (this.items || []).map(item => {\n        if (typeof item === \"string\") {\n          return {\n            label: item,\n            action: console.log\n          };\n        }\n        if (!item.action && item.route) {\n          item.action = this.setRoute.bind(this, item.route);\n        }\n        return item;\n      });\n    }\n  },\n  methods: {\n    setRoute(route) {\n      this.$router.push(route);\n    }\n  }\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Dropdown from \"./Dropdown.vue\";\n\nexport default {\n  props: [\n    \"index\",\n    \"name\",\n    \"label\",\n    \"category\",\n    \"type\",\n    \"module_name\",\n    \"link\",\n    \"count\",\n    \"onboard_present\",\n    \"links\",\n    \"description\",\n    \"hidden\",\n    \"icon\"\n  ],\n  components: {\n    Dropdown\n  },\n  data() {\n    return {\n      hovered: 0\n    };\n  },\n  computed: {\n    iconClass() {\n      if (this.icon) {\n        return this.icon;\n      } else {\n        return \"octicon octicon-file-text\";\n      }\n\t},\n\tdropdown_links() {\n\t\treturn this.links.length > 0 ? this.links\n\t\t\t.filter(link => !link.hidden)\n\t\t\t.concat([\n\t\t\t\t{ label: __('Customize'), action: () => this.$emit('customize'), class: 'border-top' }\n\t\t\t]) : [];\n\t}\n  },\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport DeskModuleBox from \"./DeskModuleBox.vue\";\n\nexport default {\n\tprops: ['category', 'modules'],\n\tcomponents: {\n\t\tDeskModuleBox\n\t},\n\tmethods: {\n\t\tshow_module_card_customize_dialog(module) {\n\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Customize Shortcuts'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __('Shortcuts'),\n\t\t\t\t\t\tfieldname: 'links',\n\t\t\t\t\t\tfieldtype: 'MultiSelectPills',\n\t\t\t\t\t\tget_data() {\n\t\t\t\t\t\t\treturn frappe.call('frappe.desk.moduleview.get_links', {\n\t\t\t\t\t\t\t\tapp: module.app,\n\t\t\t\t\t\t\t\tmodule: module.module_name,\n\t\t\t\t\t\t\t}).then(r => r.message);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault: module.links.filter(l => !l.hidden).map(l => l.name)\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action_label: __('Save'),\n\t\t\t\tprimary_action: ({ links }) => {\n\t\t\t\t\tfrappe.call('frappe.desk.moduleview.update_links_for_module', {\n\t\t\t\t\t\tmodule_name: module.module_name,\n\t\t\t\t\t\tlinks\n\t\t\t\t\t}).then(r => {\n\t\t\t\t\t\tthis.$emit('update_home_settings', r.message);\n\t\t\t\t\t});\n\t\t\t\t\td.hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\td.show();\n\t\t},\n\t}\n}\n","function generate_route(item) {\n\tif(item.type===\"doctype\") {\n\t\titem.doctype = item.name;\n\t}\n\tlet route = '';\n\tif(!item.route) {\n\t\tif(item.link) {\n\t\t\troute=strip(item.link, \"#\");\n\t\t} else if(item.type===\"doctype\") {\n\t\t\tif(frappe.model.is_single(item.doctype)) {\n\t\t\t\troute = 'Form/' + item.doctype;\n\t\t\t} else {\n\t\t\t\tif (item.filters) {\n\t\t\t\t\tfrappe.route_options=item.filters;\n\t\t\t\t}\n\t\t\t\troute=\"List/\" + item.doctype;\n\t\t\t}\n\t\t} else if(item.type===\"report\" && item.is_query_report) {\n\t\t\troute=\"query-report/\" + item.name;\n\t\t} else if(item.type===\"report\") {\n\t\t\troute=\"List/\" + item.doctype + \"/Report/\" + item.name;\n\t\t} else if(item.type===\"page\") {\n\t\t\troute=item.name;\n\t\t}\n\n\t\troute = '#' + route;\n\t} else {\n\t\troute = item.route;\n\t}\n\n\tif(item.route_options) {\n\t\troute += \"?\" + $.map(item.route_options, function(value, key) {\n\t\t\treturn encodeURIComponent(key) + \"=\" + encodeURIComponent(value); }).join('&');\n\t}\n\n\t// if(item.type===\"page\" || item.type===\"help\" || item.type===\"report\" ||\n\t// (item.doctype && frappe.model.can_read(item.doctype))) {\n\t//     item.shown = true;\n\t// }\n\treturn route;\n}\n\nexport {\n\tgenerate_route\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport DeskSection from './DeskSection.vue';\nimport { generate_route } from './utils';\n\nexport default {\n\tcomponents: {\n\t\tDeskSection\n\t},\n\tdata() {\n\t\tlet modules_list = frappe.boot.allowed_modules\n\t\t\t.filter(d => (d.type==='module' || d.category==='Places') && !d.blocked)\n\t\t\t.map(d => {\n\t\t\t\td.links = (d.links || []).map(link => {\n\t\t\t\t\tlink.route = generate_route(link);\n\t\t\t\t\treturn link;\n\t\t\t\t});\n\t\t\t\treturn d;\n\t\t\t});\n\n\t\treturn {\n\t\t\tmodule_categories: ['Modules', 'Domains', 'Places', 'Administration'],\n\t\t\tmodules: modules_list,\n\t\t\thome_settings_fetched: false\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.fetch_home_settings();\n\t},\n\tmethods: {\n\t\tfetch_home_settings() {\n\t\t\treturn frappe.db.get_value('User', user, 'home_settings')\n\t\t\t\t.then(r => {\n\t\t\t\t\tlet home_settings = JSON.parse(r.message.home_settings || '{}');\n\t\t\t\t\tthis.update_modules_with_home_settings(home_settings);\n\t\t\t\t\tthis.home_settings_fetched = true;\n\t\t\t\t});\n\t\t},\n\t\tupdate_modules_with_home_settings(home_settings) {\n\t\t\tthis.modules = this.modules.map(m => {\n\t\t\t\tlet hidden_modules = home_settings.hidden_modules || [];\n\t\t\t\tm.hidden = hidden_modules.includes(m.module_name);\n\n\t\t\t\tlet links = home_settings.links && home_settings.links[m.module_name];\n\n\t\t\t\tif (links) {\n\t\t\t\t\tlinks = JSON.parse(links);\n\n\t\t\t\t\tlet default_links = m.links.map(link => link.name);\n\t\t\t\t\tm.links = m.links.map(link => {\n\t\t\t\t\t\tlink.hidden = !links.includes(link.name);\n\t\t\t\t\t\treturn link;\n\t\t\t\t\t});\n\t\t\t\t\tlet new_links = links\n\t\t\t\t\t\t.filter(link => !default_links.includes(link))\n\t\t\t\t\t\t.filter(Boolean)\n\t\t\t\t\t\t.map(link => {\n\t\t\t\t\t\t\tlet new_link = { name: link, label: link, type: 'doctype' };\n\t\t\t\t\t\t\tnew_link.route = generate_route(new_link);\n\t\t\t\t\t\t\treturn new_link;\n\t\t\t\t\t\t});\n\t\t\t\t\tm.links = m.links.concat(new_links);\n\t\t\t\t}\n\n\t\t\t\treturn m;\n\t\t\t});\n\t\t},\n\t\tget_modules_for_category(category) {\n\t\t\treturn this.modules.filter(m => m.category === category && !m.hidden);\n\t\t},\n\t\tshow_hide_cards_dialog() {\n\t\t\tlet fields = this.module_categories.map(category => {\n\t\t\t\tlet modules = this.modules.filter(m => m.category === category);\n\t\t\t\tlet options = modules.map(\n\t\t\t\t\tm => ({ label: m.label, value: m.module_name, checked: !m.hidden })\n\t\t\t\t);\n\t\t\t\treturn {\n\t\t\t\t\tlabel: category,\n\t\t\t\t\tfieldname: category,\n\t\t\t\t\tfieldtype: 'MultiCheck',\n\t\t\t\t\toptions,\n\t\t\t\t\tcolumns: 2\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Show / Hide Cards'),\n\t\t\t\tfields: fields.filter(f => f.options.length > 0),\n\t\t\t\tprimary_action_label: __('Save'),\n\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\tlet all_modules = this.modules.map(m => m.module_name);\n\t\t\t\t\tlet modules_to_show = Object.keys(values).map(k => values[k]).flatMap(m => m);\n\t\t\t\t\tlet modules_to_hide = all_modules.filter(m => !modules_to_show.includes(m));\n\t\t\t\t\td.hide();\n\n\t\t\t\t\tfrappe.call('frappe.desk.moduleview.hide_modules_from_desktop', {\n\t\t\t\t\t\tmodules: modules_to_hide\n\t\t\t\t\t})\n\t\t\t\t\t.then(r => r.message)\n\t\t\t\t\t.then(hs => this.update_modules_with_home_settings(hs));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\td.show();\n\t\t}\n\t}\n}\n","frappe.provide('frappe.utils');\n\nfunction get_url_arg(name) {\n\treturn get_query_params()[name] || \"\";\n}\n\nfunction get_query_string(url) {\n\tif(url.includes(\"?\")) {\n\t\treturn url.slice(url.indexOf(\"?\")+1);\n\t}else {\n\t\treturn \"\";\n\t}\n}\n\nfunction get_query_params(query_string) {\n\tvar query_params = {};\n\tif (!query_string) {\n\t\tquery_string = location.search.substring(1);\n\t}\n\n\tvar query_list = query_string.split(\"&\");\n\tfor (var i=0, l=query_list.length; i < l; i++ ){\n\t\tvar pair = query_list[i].split(/=(.+)/);\n\t\tvar key = pair[0];\n\t\tif (!key) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar value = pair[1];\n\t\tif (typeof value === \"string\") {\n\t\t\tvalue = value.replace(/\\+/g, \"%20\");\n\t\t\ttry {\n\t\t\t\tvalue = decodeURIComponent(value);\n\t\t\t} catch(e) {\n\t\t\t\t// if value contains %, it fails\n\t\t\t}\n\t\t}\n\n\t\tif (key in query_params) {\n\t\t\tif (typeof query_params[key] === \"undefined\") {\n\t\t\t\tquery_params[key] = [];\n\t\t\t} else if (typeof query_params[key] === \"string\") {\n\t\t\t\tquery_params[key] = [query_params[key]];\n\t\t\t}\n\t\t\tquery_params[key].push(value);\n\t\t} else {\n\t\t\tquery_params[key] = value;\n\t\t}\n\t}\n\treturn query_params;\n}\n\nfunction make_query_string(obj, encode=true) {\n\tlet query_params = [];\n\tfor (let key in obj) {\n\t\tlet value = obj[key];\n\t\tif (value === undefined || value === '' || value === null) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (typeof value === 'object') {\n\t\t\tvalue = JSON.stringify(value);\n\t\t}\n\n\t\tif (encode) {\n\t\t\tkey = encodeURIComponent(key);\n\t\t\tvalue = encodeURIComponent(value);\n\t\t}\n\n\t\tquery_params.push(`${key}=${value}`);\n\t}\n\treturn '?' + query_params.join('&');\n}\n\nObject.assign(frappe.utils, {\n\tget_url_arg,\n\tget_query_string,\n\tget_query_params,\n\tmake_query_string\n});","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nimport Desktop from './components/Desktop.vue';\n\nfrappe.provide('frappe.views.pageview');\nfrappe.provide(\"frappe.standard_pages\");\n\nfrappe.views.pageview = {\n\twith_page: function(name, callback) {\n\t\tif(in_list(Object.keys(frappe.standard_pages), name)) {\n\t\t\tif(!frappe.pages[name]) {\n\t\t\t\tfrappe.standard_pages[name]();\n\t\t\t}\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\n\t\tif((locals.Page && locals.Page[name] && locals.Page[name].script) || name==window.page_name) {\n\t\t\t// already loaded\n\t\t\tcallback();\n\t\t} else if(localStorage[\"_page:\" + name] && frappe.boot.developer_mode!=1) {\n\t\t\t// cached in local storage\n\t\t\tfrappe.model.sync(JSON.parse(localStorage[\"_page:\" + name]));\n\t\t\tcallback();\n\t\t} else {\n\t\t\t// get fresh\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: 'frappe.desk.desk_page.getpage',\n\t\t\t\targs: {'name':name },\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!r.docs._dynamic_page) {\n\t\t\t\t\t\tlocalStorage[\"_page:\" + name] = JSON.stringify(r.docs);\n\t\t\t\t\t}\n\t\t\t\t\tcallback();\n\t\t\t\t},\n\t\t\t\tfreeze: true,\n\t\t\t});\n\t\t}\n\t},\n\tshow: function(name) {\n\t\tif(!name) {\n\t\t\tname = (frappe.boot ? frappe.boot.home_page : window.page_name);\n\n\t\t\tif(name === \"desktop\") {\n\t\t\t\tif(!frappe.pages.desktop) {\n\t\t\t\t\tlet page = frappe.container.add_page('desktop');\n\t\t\t\t\tlet container = $('<div class=\"container\"></div>').appendTo(page);\n\t\t\t\t\tcontainer = $('<div></div>').appendTo(container);\n\n\t\t\t\t\tnew Vue({\n\t\t\t\t\t\tel: container[0],\n\t\t\t\t\t\trender: h => h(Desktop)\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfrappe.container.change_to('desktop');\n\t\t\t\tfrappe.utils.set_title(__('Home'));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tfrappe.model.with_doctype(\"Page\", function() {\n\t\t\tfrappe.views.pageview.with_page(name, function(r) {\n\t\t\t\tif(r && r.exc) {\n\t\t\t\t\tif(!r['403'])\n\t\t\t\t\t\tfrappe.show_not_found(name);\n\t\t\t\t} else if(!frappe.pages[name]) {\n\t\t\t\t\tnew frappe.views.Page(name);\n\t\t\t\t}\n\t\t\t\tfrappe.container.change_to(name);\n\t\t\t});\n\t\t});\n\t}\n};\n\nfrappe.views.Page = Class.extend({\n\tinit: function(name) {\n\t\tthis.name = name;\n\t\tvar me = this;\n\t\t// web home page\n\t\tif(name==window.page_name) {\n\t\t\tthis.wrapper = document.getElementById('page-' + name);\n\t\t\tthis.wrapper.label = document.title || window.page_name;\n\t\t\tthis.wrapper.page_name = window.page_name;\n\t\t\tfrappe.pages[window.page_name] = this.wrapper;\n\t\t} else {\n\t\t\tthis.pagedoc = locals.Page[this.name];\n\t\t\tif(!this.pagedoc) {\n\t\t\t\tfrappe.show_not_found(name);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.wrapper = frappe.container.add_page(this.name);\n\t\t\tthis.wrapper.label = this.pagedoc.title || this.pagedoc.name;\n\t\t\tthis.wrapper.page_name = this.pagedoc.name;\n\n\t\t\t// set content, script and style\n\t\t\tif(this.pagedoc.content)\n\t\t\t\tthis.wrapper.innerHTML = this.pagedoc.content;\n\t\t\tfrappe.dom.eval(this.pagedoc.__script || this.pagedoc.script || '');\n\t\t\tfrappe.dom.set_style(this.pagedoc.style || '');\n\t\t}\n\n\t\tthis.trigger_page_event('on_page_load');\n\t\t// set events\n\t\t$(this.wrapper).on('show', function() {\n\t\t\twindow.cur_frm = null;\n\t\t\tme.trigger_page_event('on_page_show');\n\t\t\tme.trigger_page_event('refresh');\n\t\t});\n\t},\n\ttrigger_page_event: function(eventname) {\n\t\tvar me = this;\n\t\tif(me.wrapper[eventname]) {\n\t\t\tme.wrapper[eventname](me.wrapper);\n\t\t}\n\t}\n});\n\nfrappe.show_not_found = function(page_name) {\n\tfrappe.show_message_page({\n\t\tpage_name: page_name,\n\t\tmessage: __(\"Sorry! I could not find what you were looking for.\"),\n\t\timg: \"/assets/frappe/images/ui/bubble-tea-sorry.svg\"\n\t});\n};\n\nfrappe.show_not_permitted = function(page_name) {\n\tfrappe.show_message_page({\n\t\tpage_name: page_name,\n\t\tmessage: __(\"Sorry! You are not permitted to view this page.\"),\n\t\timg: \"/assets/frappe/images/ui/bubble-tea-sorry.svg\",\n\t\t// icon: \"octicon octicon-circle-slash\"\n\t});\n};\n\nfrappe.show_message_page = function(opts) {\n\t// opts can include `page_name`, `message`, `icon` or `img`\n\tif(!opts.page_name) {\n\t\topts.page_name = frappe.get_route_str();\n\t}\n\n\tif(opts.icon) {\n\t\topts.img = repl('<span class=\"%(icon)s message-page-icon\"></span> ', opts);\n\t} else if (opts.img) {\n\t\topts.img = repl('<img src=\"%(img)s\" class=\"message-page-image\">', opts);\n\t}\n\n\tvar page = frappe.pages[opts.page_name] || frappe.container.add_page(opts.page_name);\n\t$(page).html(\n\t\trepl('<div class=\"page message-page\">\\\n\t\t\t<div class=\"text-center message-page-content\">\\\n\t\t\t\t%(img)s\\\n\t\t\t\t<p class=\"lead\">%(message)s</p>\\\n\t\t\t\t<a class=\"btn btn-default btn-sm btn-home\" href=\"#\">%(home)s</a>\\\n\t\t\t</div>\\\n\t\t</div>', {\n\t\t\t\timg: opts.img || \"\",\n\t\t\t\tmessage: opts.message || \"\",\n\t\t\t\thome: __(\"Home\")\n\t\t\t})\n\t);\n\n\tfrappe.container.change_to(opts.page_name);\n};\n\nfrappe.views.ModulesFactory = class ModulesFactory extends frappe.views.Factory {\n\tshow() {\n\t\tif (frappe.pages.modules) {\n\t\t\tfrappe.container.change_to('modules');\n\t\t} else {\n\t\t\tthis.make('modules');\n\t\t}\n\t}\n\n\tmake(page_name) {\n\t\tconst assets = [\n\t\t\t'/assets/js/modules.min.js'\n\t\t];\n\n\t\tfrappe.require(assets, () => {\n\t\t\tfrappe.modules.home = new frappe.modules.Home({\n\t\t\t\tparent: this.make_page(true, page_name)\n\t\t\t});\n\t\t});\n\t}\n};\n\n\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\nfrappe.provide('frappe.search');\n\nfrappe.search.AwesomeBar = Class.extend({\n\tsetup: function(element) {\n\t\tvar me = this;\n\n\t\tvar $input = $(element);\n\t\tvar input = $input.get(0);\n\n\t\tthis.options = [];\n\t\tthis.global_results = [];\n\n\t\tvar awesomplete = new Awesomplete(input, {\n\t\t\tminChars: 0,\n\t\t\tmaxItems: 99,\n\t\t\tautoFirst: true,\n\t\t\tlist: [],\n\t\t\tfilter: function(text, term) {\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdata: function(item, input) {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: (item.index || \"\"),\n\t\t\t\t\tvalue: item.value\n\t\t\t\t};\n\t\t\t},\n\t\t\titem: function(item, term) {\n\t\t\t\tvar d = this.get_item(item.value);\n\t\t\t\tvar name = __(d.label || d.value);\n\t\t\t\tvar html = '<span>' + name + '</span>';\n\t\t\t\tif(d.description && d.value!==d.description) {\n\t\t\t\t\thtml += '<br><span class=\"text-muted ellipsis\">' + __(d.description) + '</span>';\n\t\t\t\t}\n\t\t\t\treturn $('<li></li>')\n\t\t\t\t\t.data('item.autocomplete', d)\n\t\t\t\t\t.html('<a style=\"font-weight:normal\"><p>' + html + '</p></a>')\n\t\t\t\t\t.get(0);\n\t\t\t},\n\t\t\tsort: function(a, b) {\n\t\t\t\treturn (b.label - a.label);\n\t\t\t}\n\t\t});\n\n\t\t// Added to aid UI testing of global search\n\t\tinput.awesomplete = awesomplete;\n\n\t\t$input.on(\"input\", function(e) {\n\t\t\tvar value = e.target.value;\n\t\t\tvar txt = value.trim().replace(/\\s\\s+/g, ' ');\n\t\t\tvar last_space = txt.lastIndexOf(' ');\n\t\t\tme.global_results = [];\n\t\t\t// if(txt && txt.length > 1) {\n\t\t\t// \tme.global.get_awesome_bar_options(txt.toLowerCase(), me);\n\t\t\t// }\n\n\t\t\tvar $this = $(this);\n\t\t\tclearTimeout($this.data('timeout'));\n\n\t\t\t$this.data('timeout', setTimeout(function(){\n\t\t\t\tme.options = [];\n\t\t\t\tif(txt && txt.length > 1) {\n\t\t\t\t\tif(last_space !== -1) {\n\t\t\t\t\t\tme.set_specifics(txt.slice(0,last_space), txt.slice(last_space+1));\n\t\t\t\t\t}\n\t\t\t\t\tme.add_defaults(txt);\n\t\t\t\t\tme.options = me.options.concat(me.build_options(txt));\n\t\t\t\t\tme.options = me.options.concat(me.global_results);\n\t\t\t\t} else {\n\t\t\t\t\tme.options = me.options.concat(\n\t\t\t\t\t\tme.deduplicate(frappe.search.utils.get_recent_pages(txt || \"\")));\n\t\t\t\t\tme.options = me.options.concat(frappe.search.utils.get_frequent_links());\n\t\t\t\t}\n\t\t\t\tme.add_help();\n\n\t\t\t\tawesomplete.list = me.deduplicate(me.options);\n\t\t\t}, 100));\n\n\t\t});\n\n\t\tvar open_recent = function() {\n\t\t\tif (!this.autocomplete_open) {\n\t\t\t\t$(this).trigger(\"input\");\n\t\t\t}\n\t\t};\n\t\t$input.on(\"focus\", open_recent);\n\n\t\t$input.on(\"awesomplete-open\", function(e) {\n\t\t\tme.autocomplete_open = e.target;\n\t\t});\n\n\t\t$input.on(\"awesomplete-close\", function(e) {\n\t\t\tme.autocomplete_open = false;\n\t\t});\n\n\t\t$input.on(\"awesomplete-select\", function(e) {\n\t\t\tvar o = e.originalEvent;\n\t\t\tvar value = o.text.value;\n\t\t\tvar item = awesomplete.get_item(value);\n\n\t\t\tif(item.route_options) {\n\t\t\t\tfrappe.route_options = item.route_options;\n\t\t\t}\n\n\t\t\tif(item.onclick) {\n\t\t\t\titem.onclick(item.match);\n\t\t\t} else {\n\t\t\t\tvar previous_hash = window.location.hash;\n\t\t\t\tfrappe.set_route(item.route);\n\n\t\t\t\t// hashchange didn't fire!\n\t\t\t\tif (window.location.hash == previous_hash) {\n\t\t\t\t\tfrappe.route();\n\t\t\t\t}\n\t\t\t}\n\t\t\t$input.val(\"\");\n\t\t});\n\n\t\t$input.on(\"awesomplete-selectcomplete\", function(e) {\n\t\t\t$input.val(\"\");\n\t\t});\n\t\tfrappe.search.utils.setup_recent();\n\t},\n\n\tadd_help: function() {\n\t\tthis.options.push({\n\t\t\tvalue: __(\"Help on Search\"),\n\t\t\tindex: -10,\n\t\t\tdefault: \"Help\",\n\t\t\tonclick: function() {\n\t\t\t\tvar txt = '<table class=\"table table-bordered\">\\\n\t\t\t\t\t<tr><td style=\"width: 50%\">'+__('Create a new record')+'</td><td>'+\n\t\t\t\t\t\t__(\"new type of document\")+'</td></tr>\\\n\t\t\t\t\t<tr><td>'+__(\"List a document type\")+'</td><td>'+\n\t\t\t\t\t\t__(\"document type..., e.g. customer\")+'</td></tr>\\\n\t\t\t\t\t<tr><td>'+__(\"Search in a document type\")+'</td><td>'+\n\t\t\t\t\t\t__(\"text in document type\")+'</td></tr>\\\n\t\t\t\t\t<tr><td>'+__(\"Open a module or tool\")+'</td><td>'+\n\t\t\t\t\t\t__(\"module name...\")+'</td></tr>\\\n\t\t\t\t\t<tr><td>'+__(\"Calculate\")+'</td><td>'+\n\t\t\t\t\t\t__(\"e.g. (55 + 434) / 4 or =Math.sin(Math.PI/2)...\")+'</td></tr>\\\n\t\t\t\t</table>';\n\t\t\t\tfrappe.msgprint(txt, __(\"Search Help\"));\n\t\t\t}\n\t\t});\n\t},\n\n\tset_specifics: function(txt, end_txt) {\n\t\tvar me = this;\n\t\tvar results = this.build_options(txt);\n\t\tresults.forEach(function(r) {\n\t\t\tif(r.type && (r.type).toLowerCase().indexOf(end_txt.toLowerCase()) === 0) {\n\t\t\t\tme.options.push(r);\n\t\t\t}\n\t\t});\n\t},\n\n\tadd_defaults: function(txt) {\n\t\tthis.make_global_search(txt);\n\t\tthis.make_search_in_current(txt);\n\t\tthis.make_calculator(txt);\n\t},\n\n\tbuild_options: function(txt) {\n\t\tvar options = frappe.search.utils.get_creatables(txt).concat(\n\t\t\tfrappe.search.utils.get_search_in_list(txt),\n\t\t\tfrappe.search.utils.get_doctypes(txt),\n\t\t\tfrappe.search.utils.get_reports(txt),\n\t\t\tfrappe.search.utils.get_pages(txt),\n\t\t\tfrappe.search.utils.get_modules(txt),\n\t\t\tfrappe.search.utils.get_recent_pages(txt || \"\"),\n\t\t\tfrappe.search.utils.get_executables(txt)\n\t\t);\n\t\tvar out = this.deduplicate(options);\n\t\treturn out.sort(function(a, b) {\n\t\t\treturn b.index - a.index;\n\t\t});\n\t},\n\n\tdeduplicate: function(options) {\n\t\tvar out = [], routes = [];\n\t\toptions.forEach(function(option) {\n\t\t\tif(option.route) {\n\t\t\t\tif(option.route[0] === \"List\" && option.route[2] !== 'Report') {\n\t\t\t\t\toption.route.splice(2);\n\t\t\t\t}\n\t\t\t\tvar str_route = (typeof option.route==='string') ?\n\t\t\t\t\toption.route : option.route.join('/');\n\t\t\t\tif(routes.indexOf(str_route)===-1) {\n\t\t\t\t\tout.push(option);\n\t\t\t\t\troutes.push(str_route);\n\t\t\t\t} else {\n\t\t\t\t\tvar old = routes.indexOf(str_route);\n\t\t\t\t\tif(out[old].index < option.index && !option.recent) {\n\t\t\t\t\t\tout[old] = option;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tout.push(option);\n\t\t\t\troutes.push(\"\");\n\t\t\t}\n\t\t});\n\t\treturn out;\n\t},\n\n\tset_global_results: function(global_results, txt) {\n\t\tthis.global_results = this.global_results.concat(global_results);\n\t},\n\n\tmake_global_search: function(txt) {\n\t\tvar me = this;\n\t\tthis.options.push({\n\t\t\tlabel: __(\"Search for '{0}'\", [txt.bold()]),\n\t\t\tvalue: __(\"Search for '{0}'\", [txt]),\n\t\t\tmatch: txt,\n\t\t\tindex: 100,\n\t\t\tdefault: \"Search\",\n\t\t\tonclick: function() {\n\t\t\t\tfrappe.searchdialog.search.init_search(txt, \"global_search\");\n\t\t\t}\n\t\t});\n\t},\n\n\tmake_search_in_current: function(txt) {\n\t\tvar route = frappe.get_route();\n\t\tif(route[0]===\"List\" && txt.indexOf(\" in\") === -1) {\n\t\t\t// search in title field\n\t\t\tvar meta = frappe.get_meta(frappe.container.page.list_view.doctype);\n\t\t\tvar search_field = meta.title_field || \"name\";\n\t\t\tvar options = {};\n\t\t\toptions[search_field] = [\"like\", \"%\" + txt + \"%\"];\n\t\t\tthis.options.push({\n\t\t\t\tlabel: __('Find {0} in {1}', [txt.bold(), __(route[1]).bold()]),\n\t\t\t\tvalue: __('Find {0} in {1}', [txt, __(route[1])]),\n\t\t\t\troute_options: options,\n\t\t\t\tonclick: function() {\n\t\t\t\t\tcur_list.show();\n\t\t\t\t},\n\t\t\t\tindex: 90,\n\t\t\t\tdefault: \"Current\",\n\t\t\t\tmatch: txt\n\t\t\t});\n\t\t}\n\t},\n\n\tmake_calculator: function(txt) {\n\t\tvar first = txt.substr(0,1);\n\t\tif(first==parseInt(first) || first===\"(\" || first===\"=\") {\n\t\t\tif(first===\"=\") {\n\t\t\t\ttxt = txt.substr(1);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tvar val = eval(txt);\n\t\t\t\tvar formatted_value = __('{0} = {1}', [txt, (val + '').bold()]);\n\t\t\t\tthis.options.push({\n\t\t\t\t\tlabel: formatted_value,\n\t\t\t\t\tvalue: __('{0} = {1}', [txt, val]),\n\t\t\t\t\tmatch: val,\n\t\t\t\t\tindex: 80,\n\t\t\t\t\tdefault: \"Calculator\",\n\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\tfrappe.msgprint(formatted_value, \"Result\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch(e) {\n\t\t\t\t// pass\n\t\t\t}\n\t\t}\n\t},\n});\n","frappe.provide('frappe.search');\n\nfrappe.search.SearchDialog = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t},\n\n\tmake: function() {\n\t\tvar d = new frappe.ui.Dialog();\n\t\t$(d.header).html($(frappe.render_template(\"search_header\")));\n\t\tthis.search_dialog = d;\n\t\tthis.$search_modal = $(d.$wrapper).addClass('search-dialog');\n\t\tthis.$modal_body = $(d.body);\n\t\tthis.$input = this.$search_modal.find(\".search-input\");\n\t\tthis.setup();\n\t},\n\n\tsetup: function() {\n\t\tthis.modal_state = 0;\n\t\tthis.current_keyword = \"\";\n\t\tthis.more_count = 20;\n\t\tthis.full_lists = {};\n\t\tthis.nav_lists = {};\n\t\tthis.bind_input();\n\t\tthis.bind_events();\n\t},\n\n\tupdate: function($r) {\n\t\tthis.$search_modal.find('.loading-state').addClass('hide');\n\t\tthis.$modal_body.append($r);\n\t\tif(this.$modal_body.find('.search-results').length > 1) {\n\t\t\tthis.$modal_body.find('.search-results').first().addClass(\"hide\");\n\t\t\t$r.removeClass(\"hide\");\n\t\t\tthis.$modal_body.find('.search-results').first().remove();\n\t\t} else {\n\t\t\t$r.removeClass(\"hide\");\n\t\t}\n\t},\n\n\tput_placeholder: function(status_text) {\n\t\tvar $placeholder = $('<div class=\"row search-results hide\">' +\n\t\t\t\t'<div class=\"empty-state\"><span style=\"margin-top: -100px\">' +\n\t\t\t\t'<i class=\"mega-octicon octicon-telescope status-icon\">' +\n\t\t\t\t'<i class=\"fa fa-square cover twinkle-one hide\" style=\"left:0px;\"></i>'+\n\t\t\t\t'<i class=\"fa fa-square cover twinkle-two hide\" style=\"left:8px; top:5px;\"></i>'+\n\t\t\t\t'<i class=\"fa fa-square cover twinkle-three hide\" style=\"left:13px; top:-3px;\"></i></i>'+\n\t\t\t\t'<p>' + status_text + '</p></span></div>' +\n\t\t\t'</div>');\n\t\tthis.update($placeholder);\n\t},\n\n\tbind_input: function() {\n\t\tvar me = this;\n\t\tthis.$input.on(\"input\", function() {\n\t\t\tvar $this = $(this);\n\t\t\tclearTimeout($this.data('timeout'));\n\t\t\t$this.data('timeout', setTimeout(function() {\n\t\t\t\tif(me.$input.val() === me.current_keyword) return;\n\t\t\t\tvar keywords = me.$input.val();\n\t\t\t\tif(keywords.length > 1) {\n\t\t\t\t\tme.get_results(keywords);\n\t\t\t\t} else {\n\t\t\t\t\tme.current_keyword = \"\";\n\t\t\t\t\tme.put_placeholder(me.search.empty_state_text);\n\t\t\t\t}\n\t\t\t}, 300));\n\t\t});\n\t},\n\n\tbind_events: function() {\n\t\tvar me = this;\n\n\t\t// Sidebar\n\t\tthis.$modal_body.on('click', '.list-link',  function() {\n\t\t\tvar link = $(this);\n\t\t\tme.$modal_body.find('.search-sidebar').find(\".list-link\").removeClass(\"active select\");\n\t\t\tlink.addClass(\"active select\");\n\t\t\tvar type = link.attr('data-category');\n\t\t\tme.$modal_body.find('.results-area').empty().html(me.full_lists[type]);\n\t\t\tme.$modal_body.find('.module-section-link').first().focus();\n\t\t\tme.current_type = type;\n\t\t});\n\n\t\t// Summary more links\n\t\tthis.$modal_body.on('click', '.section-more', function() {\n\t\t\tvar type = $(this).attr('data-category');\n\t\t\tme.$modal_body.find('.search-sidebar').find('*[data-category=\"'+ type +'\"]').trigger('click');\n\t\t});\n\n\t\t// Back-links (mobile-view)\n\t\tthis.$modal_body.on('click', '.all-results-link', function() {\n\t\t\tme.$modal_body.find('.search-sidebar').find('*[data-category=\"All Results\"]').trigger('click');\n\t\t});\n\n\t\t// Full list more links\n\t\tthis.$modal_body.on('click', '.list-more', function() {\n\t\t\tvar type = $(this).attr('data-category');\n\t\t\tvar fetch_type = $(this).attr('data-search');\n\t\t\tvar current_count = me.$modal_body.find('.result').length;\n\t\t\tif(fetch_type === \"Global\") {\n\t\t\t\tfrappe.search.utils.get_global_results(me.current_keyword,\n\t\t\t\t\tcurrent_count, me.more_count, type)\n\t\t\t\t\t.then(function(doctype_results) {\n\t\t\t\t\t\tme.add_more_results(doctype_results);\n\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar results = me.nav_lists[type].slice(0, me.more_count);\n\t\t\t\tme.nav_lists[type].splice(0, me.more_count);\n\t\t\t\tme.add_more_results([{title: type, results: results}]);\n\t\t\t}\n\t\t});\n\n\t\t// Switch to global search link\n\t\tthis.$modal_body.on('click', '.switch-to-global-search', function() {\n\t\t\tme.search = me.searches['global_search'];\n\t\t\tme.$input.attr(\"placeholder\", me.search.input_placeholder);\n\t\t\tme.put_placeholder(me.search.empty_state_text);\n\t\t\tme.get_results(me.current_keyword);\n\t\t});\n\n\t\t// Help results\n\t\t// this.$modal_body.on('click', 'a[data-path]', frappe.help.show_results);\n\t\tthis.bind_keyboard_events();\n\t},\n\n\tbind_keyboard_events: function() {\n\t\tvar me = this;\n\t\tthis.$search_modal.on('keydown', function(e) {\n\n\t\t\tif(me.$modal_body.find('.list-link').length > 1) {\n\t\t\t\tif(me.modal_state === 0) {\n\t\t\t\t\t// DOWN and UP keys navigate sidebar\n\t\t\t\t\tvar { UP_ARROW, DOWN_ARROW, TAB } = frappe.ui.keyCode;\n\t\t\t\t\tif(e.which === DOWN_ARROW || e.which === TAB) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar $link = me.$modal_body.find('.list-link.select').next();\n\t\t\t\t\t\tif($link.length > 0) {\n\t\t\t\t\t\t\t// me.$modal_body.find('.list-link').removeClass('select');\n\t\t\t\t\t\t\t// $link.addClass('select');\n\t\t\t\t\t\t\t$link.trigger('click');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if(e.which === UP_ARROW) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar $link = me.$modal_body.find('.list-link.select').prev();\n\t\t\t\t\t\tif($link.length > 0) {\n\t\t\t\t\t\t\t$link.trigger('click');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!me.$input.is(\":focus\")) {\n\t\t\t\tme.$input.focus();\n\t\t\t}\n\t\t});\n\n\t},\n\n\tinit_search: function(keywords, search_type) {\n\t\tvar me = this;\n\t\tthis.search = this.searches[search_type];\n\t\tthis.$input.attr(\"placeholder\", this.search.input_placeholder);\n\t\tthis.put_placeholder(this.search.empty_state_text);\n\t\tthis.get_results(keywords);\n\t\tthis.search_dialog.show();\n\t\tthis.$input.val(keywords);\n\t\tsetTimeout(function() { me.$input.select(); }, 500);\n\t},\n\n\tget_results: function(keywords) {\n\t\tthis.current_keyword = keywords;\n\t\tif(this.$modal_body.find('.empty-state').length > 0) {\n\t\t\tthis.put_placeholder(__(\"Searching ...\"));\n\t\t\tthis.$modal_body.find('.cover').removeClass('hide')\n\t\t} else {\n\t\t\tthis.$search_modal.find('.loading-state').removeClass('hide');\n\t\t}\n\t\tthis.search.get_results(keywords, this.parse_results.bind(this));\n\t},\n\n\tparse_results: function(result_sets, keyword) {\n\t\tresult_sets = result_sets.filter(function(set) {\n\t\t\treturn set.results.length > 0;\n\t\t})\n\t\tif(result_sets.length > 0) {\n\t\t\tthis.render_data(result_sets);\n\t\t} else {\n\t\t\tthis.put_placeholder(this.search.no_results_status(keyword));\n\t\t}\n\t},\n\n\trender_data: function(result_sets) {\n\t\tvar me = this;\n\t\tvar $search_results = $(frappe.render_template(\"search\")).addClass('hide');\n\t\tvar $sidebar = $search_results.find(\".search-sidebar\").empty();\n\t\tvar sidebar_item_html = '<li class=\"module-sidebar-item list-link\" data-category=\"{0}\">' +\n\t\t\t'<a><span class=\"ellipsis\">{0}</span><i class=\"octicon octicon-chevron-right\"' +\n\t\t\t'></a></li>';\n\n\t\tthis.modal_state = 0;\n\t\tthis.full_lists = {\t'All Results': $('<div class=\"module-body results-summary\"></div>') };\n\t\tthis.nav_lists = {};\n\n\t\tresult_sets.forEach(function(set) {\n\t\t\t$sidebar.append($(__(sidebar_item_html, [set.title])));\n\t\t\tme.add_section_to_summary(set.title, set.results);\n\t\t\tme.full_lists[set.title] = me.render_full_list(set.title, set.results, set.fetch_type);\n\t\t});\n\n\t\tif(result_sets.length > 1) {\n\t\t\t$sidebar.prepend($(__(sidebar_item_html, [\"All Results\"])));\n\t\t}\n\n\t\tthis.update($search_results.clone());\n\t\tthis.$modal_body.find('.list-link').first().trigger('click');\n\t},\n\n\trender_full_list: function(type, results, fetch_type) {\n\t\tvar me = this, max_length = 20;\n\t\tvar $results_list = $(' <div class=\"module-body\"><div class=\"row module-section full-list '+\n\t\t\ttype+'-section\">'+'<div class=\"col-sm-12 module-section-column\">' +\n\t\t\t'<div class=\"back-link\"><a class=\"all-results-link small\"> All Results</a></div>' +\n\t\t\t'<div class=\"h4 section-head\">'+type+'</div>' +\n\t\t\t'<div class=\"section-body\"></div></div></div></div>');\n\n\t\tvar $results_col = $results_list.find('.module-section-column');\n\t\tfor(var i = 0; i < max_length && results.length > 0; i++) {\n\t\t\t$results_col.append(me.render_result(type, results.shift()));\n\t\t}\n\t\tif(results.length > 0) {\n\t\t\tif(fetch_type === \"Nav\") this.nav_lists[type] = results;\n\t\t\t$results_col.append('<a class=\"list-more small\" data-search=\"'+ fetch_type +\n\t\t\t\t'\" data-category=\"'+ type + '\" data-count=\"' + max_length +\n\t\t\t\t'\" style=\"margin-top:10px\">'+__(\"More...\")+'</a>');\n\t\t}\n\t\treturn $results_list;\n\t},\n\n\tadd_section_to_summary: function(type, results) {\n\t\tvar me = this;\n\t\tvar are_expansive = false;\n\t\tvar margin_more = \"10px\";\n\t\tfor(var i = 0; i < results.length; i++) {\n\t\t\tif(results[i][\"description\" || \"image\" || \"subtypes\"] || false) {\n\t\t\t\tare_expansive = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(results[0].image) margin_more = \"20px\";\n\t\tvar [section_length, col_width] = are_expansive ? [3, \"12\"] : [4, \"6\"];\n\n\t\t// check state of last summary section\n\t\tif(this.full_lists['All Results'].find('.module-section').last().find('.col-sm-6').length !== 1\n\t\t\t|| are_expansive) {\n\t\t\tthis.full_lists['All Results'].append($('<div class=\"row module-section\"></div>'));\n\t\t}\n\t\tvar $results_col = $(`<div class=\"col-sm-${col_width} module-section-column\" data-type=\"${type}\">\n\t\t\t<div class=\"h4 section-head\">${type}</div>\n\t\t\t<div class=\"section-body\"></div>\n\t\t\t</div>`);\n\t\tresults.slice(0, section_length).forEach(function(result) {\n\t\t\t$results_col.append(me.render_result(type, result));\n\t\t});\n\t\tif(results.length > section_length) {\n\t\t\t$results_col.append(`<div style=\"margin-top:${margin_more}\"><a class=\"section-more small\"\n\t\t\t\tdata-category=\"${type}\">${__(\"More...\")}</a></div>`);\n\t\t}\n\n\t\tthis.full_lists['All Results'].find('.module-section').last().append($results_col);\n\t},\n\n\trender_result: function(type, result) {\n\t\tvar $result = $('<div class=\"result '+ type +'-result\"></div>');\n\n\t\tfunction get_link(result) {\n\t\t\tvar link;\n\t\t\tif(result.route) {\n\t\t\t\tlink = 'href=\"#'+result.route.join('/')+'\" ';\n\t\t\t} else if (result.data_path) {\n\t\t\t\tlink = 'data-path=\"'+result.data_path+'\"';\n\t\t\t} else {\n\t\t\t\tlink = \"\";\n\t\t\t}\n\t\t\treturn link;\n\t\t}\n\n\t\tif(result.image) {\n\t\t\t$result.append('<a '+ get_link(result) +\n\t\t\t\t'><div class=\"result-image\"><img data-name=\"' + result.label\n\t\t\t\t\t+ '\" src=\"'+ result.image +'\" alt=\"' + result.label + '\"></div></a>');\n\t\t} else if (result.image === null) {\n\t\t\t$result.append('<a '+ get_link(result) +\n\t\t\t\t'><div class=\"result-image\"><div class=\"flex-text\"><span>'\n\t\t\t\t\t+ frappe.get_abbr(result.label) +'</span></div></div></a>');\n\t\t}\n\n\t\tvar title_html = '<a '+ get_link(result) +' class=\"module-section-link small\">'+ result.label +'</a>';\n\t\tvar $result_text = $('<div style=\"display: inline-block;\"></div>');\n\t\tif(result.description) {\n\t\t\t$result_text.append($('<b>' + title_html + '</b>'));\n\t\t\t$result_text.append('<p class=\"small\">'+ result.description +'</p>');\n\t\t} else {\n\t\t\t$result_text.append($(title_html));\n\t\t\tif(result.route_options) {\n\t\t\t\tfrappe.route_options = result.route_options;\n\t\t\t}\n\t\t\t$result.on('click', (e) => {\n\t\t\t\tthis.search_dialog.hide();\n\t\t\t\tif(result.onclick) {\n\t\t\t\t\tresult.onclick(result.match);\n\t\t\t\t} else {\n\t\t\t\t\tvar previous_hash = window.location.hash;\n\t\t\t\t\tfrappe.set_route(result.route);\n\n\t\t\t\t\t// hashchange didn't fire!\n\t\t\t\t\tif (window.location.hash == previous_hash) {\n\t\t\t\t\t\tfrappe.route();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$result.append($result_text);\n\n\t\tif(result.subtypes) {\n\t\t\tresult.subtypes.forEach(function(subtype) {\n\t\t\t\t$result.append(subtype);\n\t\t\t});\n\t\t}\n\n\t\treturn $result;\n\t},\n\n\tadd_more_results: function(results_set) {\n\t\tvar me = this;\n\t\tvar more_results = $('<div class=\"more-results last\"></div>');\n\t\tresults_set[0].results.forEach(function(result) {\n\t\t\tmore_results.append(me.render_result(results_set[0].title, result));\n\t\t});\n\t\tthis.$modal_body.find('.list-more').before(more_results);\n\n\t\tif(results_set[0].results.length < this.more_count) {\n\t\t\t// hide more button and add a result count\n\t\t\tthis.$modal_body.find('.list-more').hide();\n\t\t\tvar no_of_results = this.$modal_body.find('.result').length;\n\t\t\tvar no_of_results_cue = $('<p class=\"results-status text-muted small\">'+\n\t\t\t\tno_of_results +' results found</p>');\n\t\t\tthis.$modal_body.find(\".more-results:last\").append(no_of_results_cue);\n\t\t}\n\t\tthis.$modal_body.find('.more-results.last').slideDown(200, function() {});\n\t},\n\n\t// Search objects\n\tsearches: {\n\t\tglobal_search: {\n\t\t\tinput_placeholder: __(\"Global Search\"),\n\t\t\tempty_state_text: __(\"Search for anything\"),\n\t\t\tno_results_status: (keyword) => __(\"<p>No results found for '\" + keyword + \"' in Global Search</p>\"),\n\n\t\t\tget_results: function(keywords, callback) {\n\t\t\t\tvar start = 0, limit = 1000;\n\t\t\t\tvar results = frappe.search.utils.get_nav_results(keywords);\n\t\t\t\tfrappe.search.utils.get_global_results(keywords, start, limit)\n\t\t\t\t\t.then(function(global_results) {\n\t\t\t\t\t\tresults = results.concat(global_results);\n\t\t\t\t\t\tcallback(results, keywords);\n\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n\n});","frappe.provide('frappe.search');\n\nfrappe.search.utils = {\n\tsetup_recent: function() {\n\t\tthis.recent = JSON.parse(frappe.boot.user.recent || \"[]\") || [];\n\t},\n\n\tget_recent_pages: function(keywords) {\n\t\tif (keywords === null) keywords = '';\n\t\tvar me = this, values = [], options = [];\n\n\t\tfunction find(list, keywords, process) {\n\t\t\tlist.forEach(function(item, i) {\n\t\t\t\tvar _item = ($.isArray(item)) ? item[0] : item;\n\t\t\t\t_item = __(_item || '').toLowerCase().replace(/-/g, \" \");\n\n\t\t\t\tif(keywords===_item || _item.indexOf(keywords) !== -1) {\n\t\t\t\t\tvar option = process(item);\n\n\t\t\t\t\tif(option) {\n\t\t\t\t\t\tif($.isPlainObject(option)) {\n\t\t\t\t\t\t\toption = [option];\n\t\t\t\t\t\t}\n\t\t\t\t\t\toption.forEach(function(o) {\n\t\t\t\t\t\t\to.match = item; o.recent = true;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\toptions = option.concat(options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tme.recent.forEach(function(doctype, i) {\n\t\t\tvalues.push([doctype[1], ['Form', doctype[0], doctype[1]]]);\n\t\t});\n\n\t\tvalues = values.reverse();\n\n\t\tfrappe.route_history.forEach(function(route, i) {\n\t\t\tif(route[0]==='Form') {\n\t\t\t\tvalues.push([route[2], route]);\n\t\t\t} else if(['List', 'Tree', 'modules', 'query-report'].includes(route[0]) || route[2]==='Report') {\n\t\t\t\tif(route[1]) {\n\t\t\t\t\tvalues.push([route[1], route]);\n\t\t\t\t}\n\t\t\t} else if(route[0]) {\n\t\t\t\tvalues.push([frappe.route_titles[route.join('/')] || route[0], route]);\n\t\t\t}\n\t\t});\n\n\t\tfind(values, keywords, function(match) {\n\t\t\tvar out = {\n\t\t\t\troute: match[1]\n\t\t\t};\n\t\t\tif (match[1][0]==='Form') {\n\t\t\t\tif (match[1].length > 2 && match[1][1] !== match[1][2]) {\n\t\t\t\t\tout.label = __(match[1][1]) + \" \" + match[1][2].bold();\n\t\t\t\t\tout.value = __(match[1][1]) + \" \" + match[1][2];\n\t\t\t\t} else {\n\t\t\t\t\tout.label = __(match[1][1]).bold();\n\t\t\t\t\tout.value = __(match[1][1]);\n\t\t\t\t}\n\t\t\t} else if (['List', 'Tree', 'modules', 'query-report'].includes(match[1][0]) && (match[1].length > 1)) {\n\t\t\t\tvar type = match[1][0], label = type;\n\t\t\t\tif(type==='modules') label = 'Module';\n\t\t\t\telse if(type==='query-report' || match[1][2] ==='Report') label = 'Report';\n\t\t\t\tout.label = __(match[1][1]).bold() + \" \" + __(label);\n\t\t\t\tout.value = __(match[1][1]) + \" \" + __(label);\n\t\t\t} else if (match[0]) {\n\t\t\t\tout.label = match[0].bold();\n\t\t\t\tout.value = match[0];\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconsole.log('Illegal match', match);\n\t\t\t}\n\t\t\tout.index = 80;\n\t\t\treturn out;\n\t\t});\n\n\t\treturn options;\n\t},\n\n\tget_frequent_links() {\n\t\tlet options = [];\n\t\tfrappe.boot.frequently_visited_links.forEach(link => {\n\t\t\tconst label = frappe.utils.get_route_label(link.route);\n\t\t\toptions.push({\n\t\t\t\t'route': link.route,\n\t\t\t\t'label': label,\n\t\t\t\t'value': label,\n\t\t\t\t'index': link.count,\n\t\t\t});\n\t\t});\n\t\tif (!options.length) {\n\t\t\treturn this.get_recent_pages('');\n\t\t}\n\t\treturn options;\n\t},\n\n\tget_search_in_list: function(keywords) {\n\t\tvar me = this;\n\t\tvar out = [];\n\t\tif(in_list(keywords.split(\" \"), \"in\") && (keywords.slice(-2) !== \"in\")) {\n\t\t\tvar parts = keywords.split(\" in \");\n\t\t\tfrappe.boot.user.can_read.forEach(function(item) {\n\t\t\t\tif(frappe.boot.user.can_search.includes(item)) {\n\t\t\t\t\tvar level = me.fuzzy_search(parts[1], item);\n\t\t\t\t\tif(level) {\n\t\t\t\t\t\tout.push({\n\t\t\t\t\t\t\ttype: \"In List\",\n\t\t\t\t\t\t\tlabel: __('Find {0} in {1}', [__(parts[0]), me.bolden_match_part(__(item), parts[1])]),\n\t\t\t\t\t\t\tvalue: __('Find {0} in {1}', [__(parts[0]), __(item)]),\n\t\t\t\t\t\t\troute_options: {\"name\": [\"like\", \"%\" + parts[0] + \"%\"]},\n\t\t\t\t\t\t\tindex: 1 + level,\n\t\t\t\t\t\t\troute: [\"List\", item]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn out;\n\t},\n\n\tget_creatables: function(keywords) {\n\t\tvar me = this;\n\t\tvar out = [];\n\t\tvar firstKeyword = keywords.split(\" \")[0];\n\t\tif(firstKeyword.toLowerCase() === __(\"new\")) {\n\t\t\tfrappe.boot.user.can_create.forEach(function(item) {\n\t\t\t\tvar level = me.fuzzy_search(keywords.substr(4), item);\n\t\t\t\tif(level) {\n\t\t\t\t\tout.push({\n\t\t\t\t\t\ttype: \"New\",\n\t\t\t\t\t\tlabel: __(\"New {0}\", [me.bolden_match_part(__(item), keywords.substr(4))]),\n\t\t\t\t\t\tvalue: __(\"New {0}\", [__(item)]),\n\t\t\t\t\t\tindex: 1 + level,\n\t\t\t\t\t\tmatch: item,\n\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\tfrappe.new_doc(item, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn out;\n\t},\n\n\tget_doctypes: function(keywords) {\n\t\tvar me = this;\n\t\tvar out = [];\n\n\t\tvar level, target;\n\t\tvar option = function(type, route, order) {\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tlabel: me.bolden_match_part(__(target), keywords) + \" \" + __(type),\n\t\t\t\tvalue: __(target + \" \" + type),\n\t\t\t\tindex: level + order,\n\t\t\t\tmatch: target,\n\t\t\t\troute: route,\n\t\t\t};\n\t\t};\n\t\tfrappe.boot.user.can_read.forEach(function(item) {\n\t\t\tlevel = me.fuzzy_search(keywords, item);\n\t\t\tif (level) {\n\t\t\t\ttarget = item;\n\t\t\t\tif (in_list(frappe.boot.single_types, item)) {\n\t\t\t\t\tout.push(option(\"\", [\"Form\", item, item], 0.05));\n\n\t\t\t\t} else if (frappe.boot.user.can_search.includes(item)) {\n\t\t\t\t\t// include 'making new' option\n\t\t\t\t\tif (in_list(frappe.boot.user.can_create, item)) {\n\t\t\t\t\t\tvar match = item;\n\t\t\t\t\t\tout.push({\n\t\t\t\t\t\t\ttype: \"New\",\n\t\t\t\t\t\t\tlabel: __(\"New {0}\", [me.bolden_match_part(__(item), keywords)]),\n\t\t\t\t\t\t\tvalue: __(\"New {0}\", [__(item)]),\n\t\t\t\t\t\t\tindex: level + 0.015,\n\t\t\t\t\t\t\tmatch: item,\n\t\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\t\tfrappe.new_doc(match, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (in_list(frappe.boot.treeviews, item)) {\n\t\t\t\t\t\tout.push(option(\"Tree\", [\"Tree\", item], 0.05));\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tout.push(option(\"List\", [\"List\", item], 0.05));\n\t\t\t\t\t\tif (frappe.model.can_get_report(item)) {\n\t\t\t\t\t\t\tout.push(option(\"Report\", [\"List\", item, \"Report\"], 0.04));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn out;\n\t},\n\n\tget_reports: function(keywords) {\n\t\tvar me = this;\n\t\tvar out = [];\n\t\tvar route;\n\t\tObject.keys(frappe.boot.user.all_reports).forEach(function(item) {\n\t\t\tvar level = me.fuzzy_search(keywords, item);\n\t\t\tif(level > 0) {\n\t\t\t\tvar report = frappe.boot.user.all_reports[item];\n\t\t\t\tif(report.report_type == \"Report Builder\")\n\t\t\t\t\troute = [\"List\", report.ref_doctype, \"Report\", item];\n\t\t\t\telse\n\t\t\t\t\troute = [\"query-report\",  item];\n\t\t\t\tout.push({\n\t\t\t\t\ttype: \"Report\",\n\t\t\t\t\tlabel: __(\"Report {0}\" , [me.bolden_match_part(__(item), keywords)]),\n\t\t\t\t\tvalue: __(\"Report {0}\" , [__(item)]),\n\t\t\t\t\tindex: level,\n\t\t\t\t\troute: route\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn out;\n\t},\n\n\tget_pages: function(keywords) {\n\t\tvar me = this;\n\t\tvar out = [];\n\t\tthis.pages = {};\n\t\t$.each(frappe.boot.page_info, function(name, p) {\n\t\t\tme.pages[p.title] = p;\n\t\t\tp.name = name;\n\t\t});\n\t\tObject.keys(this.pages).forEach(function(item) {\n\t\t\tif(item == \"Hub\" || item == \"hub\") return;\n\t\t\tvar level = me.fuzzy_search(keywords, item);\n\t\t\tif(level) {\n\t\t\t\tvar page = me.pages[item];\n\t\t\t\tout.push({\n\t\t\t\t\ttype: \"Page\",\n\t\t\t\t\tlabel: __(\"Open {0}\", [me.bolden_match_part(__(item), keywords)]),\n\t\t\t\t\tvalue: __(\"Open {0}\", [__(item)]),\n\t\t\t\t\tmatch: item,\n\t\t\t\t\tindex: level,\n\t\t\t\t\troute: [page.route || page.name]\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tvar target = 'Calendar';\n\t\tif(__('calendar').indexOf(keywords.toLowerCase()) === 0) {\n\t\t\tout.push({\n\t\t\t\ttype: \"Calendar\",\n\t\t\t\tvalue: __(\"Open {0}\", [__(target)]),\n\t\t\t\tindex: me.fuzzy_search(keywords, 'Calendar'),\n\t\t\t\tmatch: target,\n\t\t\t\troute: ['List', 'Event', target],\n\t\t\t});\n\t\t}\n\t\ttarget = 'Hub';\n\t\tif(__('hub').indexOf(keywords.toLowerCase()) === 0) {\n\t\t\tout.push({\n\t\t\t\ttype: \"Hub\",\n\t\t\t\tvalue: __(\"Open {0}\", [__(target)]),\n\t\t\t\tindex: me.fuzzy_search(keywords, 'Hub'),\n\t\t\t\tmatch: target,\n\t\t\t\troute: [target, 'Item'],\n\t\t\t});\n\t\t}\n\t\tif(__('email inbox').indexOf(keywords.toLowerCase()) === 0) {\n\t\t\tout.push({\n\t\t\t\ttype: \"Inbox\",\n\t\t\t\tvalue: __(\"Open {0}\", [__('Email Inbox')]),\n\t\t\t\tindex: me.fuzzy_search(keywords, 'email inbox'),\n\t\t\t\tmatch: target,\n\t\t\t\troute: ['List', 'Communication', 'Inbox'],\n\t\t\t});\n\t\t}\n\t\treturn out;\n\t},\n\n\tget_modules: function(keywords) {\n\t\tvar me = this;\n\t\tvar out = [];\n\t\tObject.keys(frappe.modules).forEach(function(item) {\n\t\t\tvar level = me.fuzzy_search(keywords, item);\n\t\t\tif(level > 0) {\n\t\t\t\tvar module = frappe.modules[item];\n\t\t\t\tif (module._doctype) return;\n\n\t\t\t\t// disallow restricted modules\n\t\t\t\tif (frappe.boot.user.allow_modules &&\n\t\t\t\t\t!frappe.boot.user.allow_modules.includes(module.module_name)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar ret = {\n\t\t\t\t\ttype: \"Module\",\n\t\t\t\t\tlabel: __(\"Open {0}\", [me.bolden_match_part(__(item), keywords)]),\n\t\t\t\t\tvalue: __(\"Open {0}\", [__(item)]),\n\t\t\t\t\tindex: level,\n\t\t\t\t};\n\t\t\t\tif(module.link) {\n\t\t\t\t\tret.route = [module.link];\n\t\t\t\t} else {\n\t\t\t\t\tret.route = [\"Module\", item];\n\t\t\t\t}\n\t\t\t\tout.push(ret);\n\t\t\t}\n\t\t});\n\t\treturn out;\n\t},\n\n\tget_global_results: function(keywords, start, limit, doctype = \"\") {\n\t\tvar me = this;\n\t\tfunction get_results_sets(data) {\n\t\t\tvar results_sets = [], result, set;\n\t\t\tfunction get_existing_set(doctype) {\n\t\t\t\treturn results_sets.find(function(set) {\n\t\t\t\t\treturn set.title === doctype;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction make_description(content, doc_name) {\n\t\t\t\tvar parts = content.split(\" ||| \");\n\t\t\t\tvar result_max_length = 300;\n\t\t\t\tvar field_length = 120;\n\t\t\t\tvar fields = [];\n\t\t\t\tvar result_current_length = 0;\n\t\t\t\tvar field_text = \"\";\n\t\t\t\tfor(var i = 0; i < parts.length; i++) {\n\t\t\t\t\tvar part = parts[i];\n\t\t\t\t\tif(part.toLowerCase().indexOf(keywords) !== -1) {\n\t\t\t\t\t\t// If the field contains the keyword\n\t\t\t\t\t\tif(part.indexOf(' &&& ') !== -1) {\n\t\t\t\t\t\t\tvar colon_index = part.indexOf(' &&& ');\n\t\t\t\t\t\t\tvar field_value = part.slice(colon_index + 5);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar colon_index = part.indexOf(' : ');\n\t\t\t\t\t\t\tvar field_value = part.slice(colon_index + 3);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(field_value.length > field_length) {\n\t\t\t\t\t\t\t// If field value exceeds field_length, find the keyword in it\n\t\t\t\t\t\t\t// and trim field value by half the field_length at both sides\n\t\t\t\t\t\t\t// ellipsify if necessary\n\t\t\t\t\t\t\tvar field_data = \"\";\n\t\t\t\t\t\t\tvar index = field_value.indexOf(keywords);\n\t\t\t\t\t\t\tfield_data += index < field_length/2 ? field_value.slice(0, index)\n\t\t\t\t\t\t\t\t: '...' + field_value.slice(index - field_length/2, index);\n\t\t\t\t\t\t\tfield_data += field_value.slice(index, index + field_length/2);\n\t\t\t\t\t\t\tfield_data += index + field_length/2 < field_value.length ? \"...\" : \"\";\n\t\t\t\t\t\t\tfield_value = field_data;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar field_name = part.slice(0, colon_index);\n\n\t\t\t\t\t\t// Find remaining result_length and add field length to result_current_length\n\t\t\t\t\t\tvar remaining_length = result_max_length - result_current_length;\n\t\t\t\t\t\tresult_current_length += field_name.length + field_value.length + 2;\n\t\t\t\t\t\tif(result_current_length < result_max_length) {\n\t\t\t\t\t\t\t// We have room, push the entire field\n\t\t\t\t\t\t\tfield_text = '<span class=\"field-name text-muted\">' +\n\t\t\t\t\t\t\t\tme.bolden_match_part(field_name, keywords) + ': </span> ' +\n\t\t\t\t\t\t\t\tme.bolden_match_part(field_value, keywords);\n\t\t\t\t\t\t\tif(fields.indexOf(field_text) === -1 && doc_name !== field_value) {\n\t\t\t\t\t\t\t\tfields.push(field_text);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Not enough room\n\t\t\t\t\t\t\tif(field_name.length < remaining_length){\n\t\t\t\t\t\t\t\t// Ellipsify (trim at word end) and push\n\t\t\t\t\t\t\t\tremaining_length -= field_name.length;\n\t\t\t\t\t\t\t\tfield_text = '<span class=\"field-name text-muted\">' +\n\t\t\t\t\t\t\t\t\tme.bolden_match_part(field_name, keywords) + ': </span> ';\n\t\t\t\t\t\t\t\tfield_value = field_value.slice(0, remaining_length);\n\t\t\t\t\t\t\t\tfield_value = field_value.slice(0, field_value.lastIndexOf(' ')) + ' ...';\n\t\t\t\t\t\t\t\tfield_text += me.bolden_match_part(field_value, keywords);\n\t\t\t\t\t\t\t\tfields.push(field_text);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// No room for even the field name, skip\n\t\t\t\t\t\t\t\tfields.push('...');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn fields.join(', ');\n\t\t\t}\n\n\t\t\tdata.forEach(function(d) {\n\t\t\t\t// more properties\n\t\t\t\tresult = {\n\t\t\t\t\tlabel: d.name,\n\t\t\t\t\tvalue: d.name,\n\t\t\t\t\tdescription: make_description(d.content, d.name),\n\t\t\t\t\troute: ['Form', d.doctype, d.name],\n\t\t\t\t};\n\t\t\t\tif(d.image || d.image === null){\n\t\t\t\t\tresult.image = d.image;\n\t\t\t\t}\n\t\t\t\tset = get_existing_set(d.doctype);\n\t\t\t\tif(set) {\n\t\t\t\t\tset.results.push(result);\n\t\t\t\t} else {\n\t\t\t\t\tset = {\n\t\t\t\t\t\ttitle: d.doctype,\n\t\t\t\t\t\tresults: [result],\n\t\t\t\t\t\tfetch_type: \"Global\"\n\t\t\t\t\t};\n\t\t\t\t\tresults_sets.push(set);\n\t\t\t\t}\n\n\t\t\t});\n\t\t\treturn results_sets;\n\t\t}\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.utils.global_search.search\",\n\t\t\t\targs: {\n\t\t\t\t\ttext: keywords,\n\t\t\t\t\tstart: start,\n\t\t\t\t\tlimit: limit,\n\t\t\t\t\tdoctype: doctype\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(r.message) {\n\t\t\t\t\t\tresolve(get_results_sets(r.message));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve([]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tget_nav_results: function(keywords) {\n\t\tfunction sort_uniques(array) {\n\t\t\tvar routes = [], out = [];\n\t\t\tarray.forEach(function(d) {\n\t\t\t\tif(d.route) {\n\t\t\t\t\tif(d.route[0] === \"List\" && d.route[2]) {\n\t\t\t\t\t\td.route.splice(2);\n\t\t\t\t\t}\n\t\t\t\t\tvar str_route = d.route.join('/');\n\t\t\t\t\tif(routes.indexOf(str_route) === -1) {\n\t\t\t\t\t\troutes.push(str_route);\n\t\t\t\t\t\tout.push(d);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar old = routes.indexOf(str_route);\n\t\t\t\t\t\tif(out[old].index > d.index) {\n\t\t\t\t\t\t\tout[old] = d;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tout.push(d);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn out.sort(function(a, b) {\n\t\t\t\treturn b.index - a.index;\n\t\t\t});\n\t\t}\n\t\tvar lists = [], setup = [];\n\t\tvar all_doctypes = sort_uniques(this.get_doctypes(keywords));\n\t\tall_doctypes.forEach(function(d) {\n\t\t\tif(d.type === \"\") {\n\t\t\t\tsetup.push(d);\n\t\t\t} else {\n\t\t\t\tlists.push(d);\n\t\t\t}\n\t\t});\n\t\tvar in_keyword = keywords.split(\" in \")[0];\n\t\treturn [{\n\t\t\ttitle: \"Recents\",\n\t\t\tfetch_type: \"Nav\",\n\t\t\tresults: sort_uniques(this.get_recent_pages(keywords))\n\t\t},\n\t\t{\n\t\t\ttitle: \"Create a new ...\",\n\t\t\tfetch_type: \"Nav\",\n\t\t\tresults: sort_uniques(this.get_creatables(keywords))\n\t\t},\n\t\t{\n\t\t\ttitle: \"Lists\",\n\t\t\tfetch_type: \"Nav\",\n\t\t\tresults: lists\n\t\t},\n\t\t{\n\t\t\ttitle: \"Reports\",\n\t\t\tfetch_type: \"Nav\",\n\t\t\tresults: sort_uniques(this.get_reports(keywords))\n\t\t},\n\t\t{\n\t\t\ttitle: \"Administration\",\n\t\t\tfetch_type: \"Nav\",\n\t\t\tresults: sort_uniques(this.get_pages(keywords))\n\t\t},\n\t\t{\n\t\t\ttitle: \"Modules\",\n\t\t\tfetch_type: \"Nav\",\n\t\t\tresults: sort_uniques(this.get_modules(keywords))\n\t\t},\n\t\t{\n\t\t\ttitle: \"Setup\",\n\t\t\tfetch_type: \"Nav\",\n\t\t\tresults: setup\n\t\t},\n\t\t{\n\t\t\ttitle: \"Find '\" + in_keyword + \"' in ... \",\n\t\t\tfetch_type: \"Nav\",\n\t\t\tresults: sort_uniques(this.get_search_in_list(keywords))\n\t\t}];\n\t},\n\n\tfuzzy_search: function(keywords, _item) {\n\t\t// Returns 10 for case-perfect contain, 0 for not found\n\t\t//  \t9 for perfect contain,\n\t\t//  \t0 - 6 for fuzzy contain\n\n\t\t// **Specific use-case step**\n\t\tkeywords = keywords || '';\n\n\t\tvar item = __(_item || '').replace(/-/g, \" \");\n\n\t\tvar ilen = item.length;\n\t\tvar klen = keywords.length;\n\t\tvar length_ratio = klen/ilen;\n\t\tvar max_skips = 3, max_mismatch_len = 2;\n\n\t\tif (klen > ilen) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif(keywords === item || item.toLowerCase().indexOf(keywords) === 0) {\n\t\t\treturn 10 + length_ratio;\n\t\t}\n\n\t\tif (item.indexOf(keywords) !== -1 && keywords !== keywords.toLowerCase()) {\n\t\t\treturn 9 + length_ratio;\n\t\t}\n\n\t\titem = item.toLowerCase();\n\t\tkeywords = keywords.toLowerCase();\n\n\t\tif (item.indexOf(keywords) !== -1) {\n\t\t\treturn 8 + length_ratio;\n\t\t}\n\n\t\tvar skips = 0, mismatches = 0;\n\t\touter: for (var i = 0, j = 0; i < klen; i++) {\n\t\t\tif(mismatches !== 0) skips++;\n\t\t\tif(skips > max_skips) return 0;\n\t\t\tvar k_ch = keywords.charCodeAt(i);\n\t\t\tmismatches = 0;\n\t\t\twhile (j < ilen) {\n\t\t\t\tif (item.charCodeAt(j++) === k_ch) {\n\t\t\t\t\tcontinue outer;\n\t\t\t\t}\n\t\t\t\tif(++mismatches > max_mismatch_len)  return 0 ;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Since indexOf didn't pass, there will be atleast 1 skip\n\t\t// hence no divide by zero, but just to be safe\n\t\tif((skips + mismatches) > 0) {\n\t\t\treturn (5 + length_ratio)/(skips + mismatches);\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t},\n\n\tbolden_match_part: function(str, subseq) {\n\t\tvar rendered = \"\";\n\t\tif(this.fuzzy_search(subseq, str) === 0) {\n\t\t\treturn str;\n\t\t} else if(this.fuzzy_search(subseq, str) > 6) {\n\t\t\tvar regEx = new RegExp(\"(\"+ subseq +\")\", \"ig\");\n\t\t\treturn str.replace(regEx, '<b>$1</b>');\n\t\t} else {\n\t\t\tvar str_orig = str;\n\t\t\tvar str = str.toLowerCase();\n\t\t\tvar str_len = str.length;\n\t\t\tvar subseq = subseq.toLowerCase();\n\n\t\t\touter: for(var i = 0, j = 0; i < subseq.length; i++) {\n\t\t\t\tvar sub_ch = subseq.charCodeAt(i);\n\t\t\t\twhile(j < str_len) {\n\t\t\t\t\tif(str.charCodeAt(j) === sub_ch) {\n\t\t\t\t\t\tvar str_char = str_orig.charAt(j);\n\t\t\t\t\t\tif(str_char === str_char.toLowerCase()) {\n\t\t\t\t\t\t\trendered += '<b>' + subseq.charAt(i) + '</b>';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trendered += '<b>' + subseq.charAt(i).toUpperCase() + '</b>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tj++;\n\t\t\t\t\t\tcontinue outer;\n\t\t\t\t\t}\n\t\t\t\t\trendered += str_orig.charAt(j);\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\treturn str_orig;\n\t\t\t}\n\t\t\trendered += str_orig.slice(j);\n\t\t\treturn rendered;\n\t\t}\n\n\t},\n\n\tget_executables(keywords) {\n\t\tlet results = [];\n\t\tthis.searchable_functions.forEach(item => {\n\t\t\tconst target = item.label.toLowerCase();\n\t\t\tconst txt = keywords.toLowerCase();\n\t\t\tif (txt === target || target.indexOf(txt) === 0) {\n\t\t\t\tresults.push({\n\t\t\t\t\ttype: \"Executable\",\n\t\t\t\t\tvalue:  this.bolden_match_part(__(item.label), txt),\n\t\t\t\t\tindex: this.fuzzy_search(txt, target),\n\t\t\t\t\tmatch: item.label,\n\t\t\t\t\tonclick: item.action,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn results;\n\t},\n\tmake_function_searchable(_function, label=null) {\n\t\tif (typeof _function !== 'function') {\n\t\t\tthrow new Error('First argument should be a function');\n\t\t}\n\n\t\tthis.searchable_functions.push({\n\t\t\t'label': label || _function.name,\n\t\t\t'action': _function\n\t\t});\n\t},\n\tsearchable_functions: [],\n};\n","frappe.provide('frappe.ui.misc');\nfrappe.ui.misc.about = function() {\n\tif(!frappe.ui.misc.about_dialog) {\n\t\tvar d = new frappe.ui.Dialog({title: __('Frappe Framework')});\n\n\t\t$(d.body).html(repl(\"<div>\\\n\t\t<p>\"+__(\"Open Source Applications for the Web\")+\"</p>  \\\n\t\t<p><i class='fa fa-globe fa-fw'></i>\\\n\t\t\tWebsite: <a href='https://frappe.io' target='_blank'>https://frappe.io</a></p>\\\n\t\t<p><i class='fa fa-github fa-fw'></i>\\\n\t\t\tSource: <a href='https://github.com/frappe' target='_blank'>https://github.com/frappe</a></p>\\\n\t\t<hr>\\\n\t\t<h4>Installed Apps</h4>\\\n\t\t<div id='about-app-versions'>Loading versions...</div>\\\n\t\t<hr>\\\n\t\t<p class='text-muted'>&copy; Frappe Technologies Pvt. Ltd and contributors </p> \\\n\t\t</div>\", frappe.app));\n\n\t\tfrappe.ui.misc.about_dialog = d;\n\n\t\tfrappe.ui.misc.about_dialog.on_page_show = function() {\n\t\t\tif(!frappe.versions) {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"frappe.utils.change_log.get_versions\",\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tshow_versions(r.message);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t};\n\n\t\tvar show_versions = function(versions) {\n\t\t\tvar $wrap = $(\"#about-app-versions\").empty();\n\t\t\t$.each(Object.keys(versions).sort(), function(i, key) {\n\t\t\t\tvar v = versions[key];\n\t\t\t\tif(v.branch) {\n\t\t\t\t\tvar text = $.format('<p><b>{0}:</b> v{1} ({2})<br></p>',\n\t\t\t\t\t\t[v.title, v.branch_version || v.version, v.branch])\n\t\t\t\t} else {\n\t\t\t\t\tvar text = $.format('<p><b>{0}:</b> v{1}<br></p>',\n\t\t\t\t\t\t[v.title, v.version])\n\t\t\t\t}\n\t\t\t\t$(text).appendTo($wrap);\n\t\t\t});\n\n\t\t\tfrappe.versions = versions;\n\t\t}\n\n\t}\n\n\tfrappe.ui.misc.about_dialog.show();\n\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.toolbar\");\nfrappe.provide('frappe.search');\n\nfrappe.ui.toolbar.Toolbar = Class.extend({\n\tinit: function() {\n\t\t$('header').append(frappe.render_template(\"navbar\", {\n\t\t\tavatar: frappe.avatar(frappe.session.user)\n\t\t}));\n\t\t$('.dropdown-toggle').dropdown();\n\n\t\tlet awesome_bar = new frappe.search.AwesomeBar();\n\t\tawesome_bar.setup(\"#navbar-search\");\n\t\tawesome_bar.setup(\"#modal-search\");\n\n\t\tthis.make();\n\t},\n\n\tmake: function() {\n\t\tthis.setup_sidebar();\n\t\tthis.setup_help();\n\n\t\tthis.bind_events();\n\n\t\t$(document).trigger('toolbar_setup');\n\t},\n\n\tbind_events: function() {\n\t\t$(document).on(\"notification-update\", function() {\n\t\t\tfrappe.ui.notifications.update_notifications();\n\t\t});\n\n\t\t// clear all custom menus on page change\n\t\t$(document).on(\"page-change\", function() {\n\t\t\t$(\"header .navbar .custom-menu\").remove();\n\t\t});\n\n\t\t//focus search-modal on show in mobile view\n\t\t$('#search-modal').on('shown.bs.modal', function() {\n\t\t\tvar search_modal = $(this);\n\t\t\tsetTimeout(function() {\n\t\t\t\tsearch_modal.find('#modal-search').focus();\n\t\t\t}, 300);\n\t\t});\n\t\t$('.navbar-toggle-full-width').click(() => {\n\t\t\tfrappe.ui.toolbar.toggle_full_width();\n\t\t});\n\t},\n\n\tsetup_sidebar: function() {\n\t\tvar header = $('header');\n\t\theader.find(\".toggle-sidebar\").on(\"click\", function() {\n\t\t\tvar layout_side_section = $('.layout-side-section');\n\t\t\tvar overlay_sidebar = layout_side_section.find('.overlay-sidebar');\n\n\t\t\toverlay_sidebar.addClass('opened');\n\t\t\toverlay_sidebar.find('.reports-dropdown')\n\t\t\t\t.removeClass('dropdown-menu')\n\t\t\t\t.addClass('list-unstyled');\n\t\t\toverlay_sidebar.find('.dropdown-toggle')\n\t\t\t\t.addClass('text-muted').find('.caret')\n\t\t\t\t.addClass('hidden-xs hidden-sm');\n\n\t\t\t$('<div class=\"close-sidebar\">').hide().appendTo(layout_side_section).fadeIn();\n\n\t\t\tvar scroll_container = $('html');\n\t\t\tscroll_container.css(\"overflow-y\", \"hidden\");\n\n\t\t\tlayout_side_section.find(\".close-sidebar\").on('click', close_sidebar);\n\t\t\tlayout_side_section.on(\"click\", \"a\", close_sidebar);\n\n\t\t\tfunction close_sidebar(e) {\n\t\t\t\tscroll_container.css(\"overflow-y\", \"\");\n\n\t\t\t\tlayout_side_section.find(\"div.close-sidebar\").fadeOut(function() {\n\t\t\t\t\toverlay_sidebar.removeClass('opened')\n\t\t\t\t\t\t.find('.dropdown-toggle')\n\t\t\t\t\t\t.removeClass('text-muted');\n\t\t\t\t\toverlay_sidebar.find('.reports-dropdown')\n\t\t\t\t\t\t.addClass('dropdown-menu');\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tsetup_help: function() {\n\t\tfrappe.provide('frappe.help');\n\t\tfrappe.help.show_results = show_results;\n\n\t\tthis.search = new frappe.search.SearchDialog();\n\t\tfrappe.provide('frappe.searchdialog');\n\t\tfrappe.searchdialog.search = this.search;\n\n\t\t$(\".dropdown-help .dropdown-toggle\").on(\"click\", function() {\n\t\t\t$(\".dropdown-help input\").focus();\n\t\t});\n\n\t\t$(\".dropdown-help .dropdown-menu\").on(\"click\", \"input, button\", function(e) {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\t$(\"#input-help\").on(\"keydown\", function(e) {\n\t\t\tif(e.which == 13) {\n\t\t\t\t$(this).val(\"\");\n\t\t\t}\n\t\t});\n\n\t\t$(document).on(\"page-change\", function () {\n\t\t\tvar $help_links = $(\".dropdown-help #help-links\");\n\t\t\t$help_links.html(\"\");\n\n\t\t\tvar route = frappe.get_route_str();\n\t\t\tvar breadcrumbs = route.split(\"/\");\n\n\t\t\tvar links = [];\n\t\t\tfor (var i = 0; i < breadcrumbs.length; i++) {\n\t\t\t\tvar r = route.split(\"/\", i + 1);\n\t\t\t\tvar key = r.join(\"/\");\n\t\t\t\tvar help_links = frappe.help.help_links[key] || [];\n\t\t\t\tlinks = $.merge(links, help_links);\n\t\t\t}\n\n\t\t\tif(links.length === 0) {\n\t\t\t\t$help_links.next().hide();\n\t\t\t} else {\n\t\t\t\t$help_links.next().show();\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < links.length; i++) {\n\t\t\t\tvar link = links[i];\n\t\t\t\tvar url = link.url;\n\t\t\t\t$(\"<a>\", {\n\t\t\t\t\thref: link.url,\n\t\t\t\t\ttext: link.label,\n\t\t\t\t\ttarget: \"_blank\"\n\t\t\t\t}).appendTo($help_links);\n\t\t\t}\n\n\t\t\t$('.dropdown-help .dropdown-menu').on('click', 'a', show_results);\n\t\t});\n\n\t\tvar $result_modal = frappe.get_modal(\"\", \"\");\n\t\t$result_modal.addClass(\"help-modal\");\n\n\t\t$(document).on(\"click\", \".help-modal a\", show_results);\n\n\t\tfunction show_results(e) {\n\t\t\t//edit links\n\t\t\tvar href = e.target.href;\n\t\t\tif(href.indexOf('blob') > 0) {\n\t\t\t\twindow.open(href, '_blank');\n\t\t\t}\n\t\t\tvar path = $(e.target).attr(\"data-path\");\n\t\t\tif(path) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n});\n\n$.extend(frappe.ui.toolbar, {\n\tadd_dropdown_button: function(parent, label, click, icon) {\n\t\tvar menu = frappe.ui.toolbar.get_menu(parent);\n\t\tif(menu.find(\"li:not(.custom-menu)\").length && !menu.find(\".divider\").length) {\n\t\t\tfrappe.ui.toolbar.add_menu_divider(menu);\n\t\t}\n\n\t\treturn $('<li class=\"custom-menu\"><a><i class=\"fa-fw '\n\t\t\t+icon+'\"></i> '+label+'</a></li>')\n\t\t\t.insertBefore(menu.find(\".divider\"))\n\t\t\t.find(\"a\")\n\t\t\t.click(function() {\n\t\t\t\tclick.apply(this);\n\t\t\t});\n\t},\n\tget_menu: function(label) {\n\t\treturn $(\"#navbar-\" + label.toLowerCase());\n\t},\n\tadd_menu_divider: function(menu) {\n\t\tmenu = typeof menu == \"string\" ?\n\t\t\tfrappe.ui.toolbar.get_menu(menu) : menu;\n\n\t\t$('<li class=\"divider custom-menu\"></li>').prependTo(menu);\n\t},\n\tadd_icon_link(route, icon, index, class_name) {\n\t\tlet parent_element = $(\".navbar-right\").get(0);\n\t\tlet new_element = $(`<li class=\"${class_name}\">\n\t\t\t<a class=\"btn\" href=\"${route}\" title=\"${frappe.utils.to_title_case(class_name, true)}\" aria-haspopup=\"true\" aria-expanded=\"true\">\n\t\t\t\t<div>\n\t\t\t\t\t<i class=\"octicon ${icon}\"></i>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</li>`).get(0);\n\n\t\tparent_element.insertBefore(new_element, parent_element.children[index]);\n\t},\n\ttoggle_full_width() {\n\t\tlet fullwidth = JSON.parse(localStorage.container_fullwidth || 'false');\n\t\tfullwidth = !fullwidth;\n\t\tlocalStorage.container_fullwidth = fullwidth;\n\t\tfrappe.ui.toolbar.set_fullwidth_if_enabled();\n\t},\n\tset_fullwidth_if_enabled() {\n\t\tlet fullwidth = JSON.parse(localStorage.container_fullwidth || 'false');\n\t\t$(document.body).toggleClass('full-width', fullwidth);\n\t},\n});\n\nfrappe.ui.toolbar.clear_cache = function() {\n\tfrappe.assets.clear_local_storage();\n\tfrappe.call({\n\t\tmethod: 'frappe.sessions.clear',\n\t\tcallback: function(r) {\n\t\t\tif(!r.exc) {\n\t\t\t\tfrappe.show_alert({message:r.message, indicator:'green'});\n\t\t\t\tlocation.reload(true);\n\t\t\t}\n\t\t}\n\t});\n\treturn false;\n};\n\nfrappe.ui.toolbar.download_backup = function() {\n\tfrappe.msgprint(__(\"Your download is being built, this may take a few moments...\"));\n\t$c('frappe.utils.backups.get_backup',{},function(r,rt) {});\n\treturn false;\n};\n\nfrappe.ui.toolbar.show_about = function() {\n\ttry {\n\t\tfrappe.ui.misc.about();\n\t} catch(e) {\n\t\tconsole.log(e);\n\t}\n\treturn false;\n};\n","frappe.provide(\"frappe.ui.notifications\");\n\nfrappe.ui.notifications = {\n\tconfig: {\n\t\t\"ToDo\": { label: __(\"To Do\") },\n\t\t\"Event\": { label: __(\"Calendar\"), route: \"List/Event/Calendar\" },\n\t\t\"Email\": { label: __(\"Email\"), route: \"List/Communication/Inbox\" }\n\t},\n\n\tupdate_notifications: function() {\n\t\tthis.total = 0;\n\t\tthis.dropdown = $(\"#dropdown-notification\").empty();\n\t\tthis.boot_info = frappe.boot.notification_info;\n\t\tlet defaults = [\"Comment\", \"ToDo\", \"Event\"];\n\n\t\tthis.get_counts(this.boot_info.open_count_doctype, 1, defaults);\n\t\tthis.get_counts(this.boot_info.open_count_other, 1);\n\n\t\t// Target counts are stored for docs per doctype\n\t\tlet targets = { doctypes : {} }, map = this.boot_info.targets;\n\t\tObject.keys(map).map(doctype => {\n\t\t\tObject.keys(map[doctype]).map(doc => {\n\t\t\t\ttargets[doc] = map[doctype][doc];\n\t\t\t\ttargets.doctypes[doc] = doctype;\n\t\t\t});\n\t\t});\n\t\tthis.get_counts(targets, 1, null, [\"doctypes\"], true);\n\t\tthis.get_counts(this.boot_info.open_count_doctype,\n\t\t\t0, null, defaults);\n\n\t\tthis.bind_list();\n\n\t\t// switch colour on the navbar and disable if no notifications\n\t\t$(\".navbar-new-comments\")\n\t\t\t.html(this.total > 99 ? '99+' : this.total)\n\t\t\t.toggleClass(\"navbar-new-comments-true\", this.total ? true : false)\n\t\t\t.parent().toggleClass(\"disabled\", this.total ? false : true);\n\t},\n\n\tget_counts: function(map, divide, keys, excluded = [], target = false) {\n\t\tlet empty_map = 1;\n\t\tkeys = keys ? keys\n\t\t\t: Object.keys(map).sort().filter(e => !excluded.includes(e));\n\t\tkeys.map(key => {\n\t\t\tlet doc_dt = (map.doctypes) ? map.doctypes[key] : undefined;\n\t\t\tif(map[key] > 0 || target) {\n\t\t\t\tthis.add_notification(key, map[key], doc_dt, target);\n\t\t\t\tempty_map = 0;\n\t\t\t}\n\t\t});\n\t\tif(divide && !empty_map) {\n\t\t\tthis.dropdown.append($('<li class=\"divider\"></li>'));\n\t\t}\n\t},\n\n\tadd_notification: function(name, value, doc_dt, target = false) {\n\t\tlet label = this.config[name] ? this.config[name].label : name;\n\t\tlet title = target ? `title=\"Your Target\"` : '';\n\t\tlet $list_item = !target\n\t\t\t? $(`<li><a class=\"badge-hover\" data-doctype=\"${name}\" ${title}>${__(label)}\n\t\t\t\t<span class=\"badge pull-right\">${value}</span>\n\t\t\t</a></li>`)\n\t\t\t: $(`<li><a class=\"progress-small\" ${title} data-doctype=\"${doc_dt}\"\n\t\t\t\tdata-doc=\"${name}\"><span class=\"dropdown-item-label\">${__(label)}<span>\n\t\t\t\t<div class=\"progress-chart\"><div class=\"progress\">\n\t\t\t\t\t<div class=\"progress-bar\" style=\"width: ${value}%\"></div>\n\t\t\t\t</div></div>\n\t\t\t</a></li>`);\n\t\tthis.dropdown.append($list_item);\n\t\tif(!target) this.total += value;\n\t},\n\n\tbind_list: function() {\n\t\tvar me = this;\n\t\t$(\"#dropdown-notification a\").on(\"click\", function() {\n\t\t\tvar doctype = $(this).attr(\"data-doctype\");\n\t\t\tvar doc = $(this).attr(\"data-doc\");\n\t\t\tif(!doc) {\n\t\t\t\tvar config = me.config[doctype] || {};\n\t\t\t\tif (config.route) {\n\t\t\t\t\tfrappe.set_route(config.route);\n\t\t\t\t} else if (config.click) {\n\t\t\t\t\tconfig.click();\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.ui.notifications.show_open_count_list(doctype);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfrappe.set_route(\"Form\", doctype, doc);\n\t\t\t}\n\t\t});\n\t},\n\n\tshow_open_count_list: function(doctype) {\n\t\tlet filters = this.boot_info.conditions[doctype];\n\t\tif(filters && $.isPlainObject(filters)) {\n\t\t\tif (!frappe.route_options) {\n\t\t\t\tfrappe.route_options = {};\n\t\t\t}\n\t\t\t$.extend(frappe.route_options, filters);\n\t\t}\n\t\tfrappe.set_route(\"List\", doctype);\n\t},\n};\n","// Copyright (c) 2018, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.last_edited_communication = {};\nfrappe.standard_replies = {};\n\nfrappe.views.CommunicationComposer = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t},\n\tmake: function() {\n\t\tvar me = this;\n\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: (this.title || this.subject || __(\"New Email\")),\n\t\t\tno_submit_on_enter: true,\n\t\t\tfields: this.get_fields(),\n\t\t\tprimary_action_label: __(\"Send\"),\n\t\t\tprimary_action: function() {\n\t\t\t\tme.delete_saved_draft();\n\t\t\t\tme.send_action();\n\t\t\t}\n\t\t});\n\n\t\t['recipients', 'cc', 'bcc'].forEach(field => {\n\t\t\tthis.dialog.fields_dict[field].get_data = function() {\n\t\t\t\tconst data = me.dialog.fields_dict[field].get_value();\n\t\t\t\tconst txt = data.match(/[^,\\s*]*$/)[0] || '';\n\t\t\t\tlet options = [];\n\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"frappe.email.get_contact_list\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\ttxt: txt,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\toptions = r.message;\n\t\t\t\t\t\tme.dialog.fields_dict[field].set_data(options);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn options;\n\t\t\t}\n\t\t});\n\n\t\t$(document).on(\"upload_complete\", function(event, attachment) {\n\t\t\tif(me.dialog.display) {\n\t\t\t\tvar wrapper = $(me.dialog.fields_dict.select_attachments.wrapper);\n\n\t\t\t\t// find already checked items\n\t\t\t\tvar checked_items = wrapper.find('[data-file-name]:checked').map(function() {\n\t\t\t\t\treturn $(this).attr(\"data-file-name\");\n\t\t\t\t});\n\n\t\t\t\t// reset attachment list\n\t\t\t\tme.render_attach();\n\n\t\t\t\t// check latest added\n\t\t\t\tchecked_items.push(attachment.name);\n\n\t\t\t\t$.each(checked_items, function(i, filename) {\n\t\t\t\t\twrapper.find('[data-file-name=\"'+ filename +'\"]').prop(\"checked\", true);\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t\tthis.prepare();\n\t\tthis.dialog.show();\n\t},\n\n\tget_fields: function() {\n\t\tlet contactList = [];\n\t\tvar fields= [\n\t\t\t{label:__(\"To\"), fieldtype:\"MultiSelect\", reqd: 0, fieldname:\"recipients\",options:contactList},\n\t\t\t{fieldtype: \"Section Break\", collapsible: 1, label: __(\"CC, BCC & Email Template\")},\n\t\t\t{label:__(\"CC\"), fieldtype:\"MultiSelect\", fieldname:\"cc\",options:contactList},\n\t\t\t{label:__(\"BCC\"), fieldtype:\"MultiSelect\", fieldname:\"bcc\",options:contactList},\n\t\t\t{label:__(\"Email Template\"), fieldtype:\"Link\", options:\"Email Template\",\n\t\t\t\tfieldname:\"email_template\"},\n\t\t\t{fieldtype: \"Section Break\"},\n\t\t\t{label:__(\"Subject\"), fieldtype:\"Data\", reqd: 1,\n\t\t\t\tfieldname:\"subject\", length:524288},\n\t\t\t{fieldtype: \"Section Break\"},\n\t\t\t{\n\t\t\t\tlabel:__(\"Message\"),\n\t\t\t\tfieldtype:\"Text Editor\", reqd: 1,\n\t\t\t\tfieldname:\"content\",\n\t\t\t\tonchange: frappe.utils.debounce(this.save_as_draft.bind(this), 300)\n\t\t\t},\n\n\t\t\t{fieldtype: \"Section Break\"},\n\t\t\t{fieldtype: \"Column Break\"},\n\t\t\t{label:__(\"Send me a copy\"), fieldtype:\"Check\",\n\t\t\t\tfieldname:\"send_me_a_copy\", 'default': frappe.boot.user.send_me_a_copy},\n\t\t\t{label:__(\"Send Read Receipt\"), fieldtype:\"Check\",\n\t\t\t\tfieldname:\"send_read_receipt\"},\n\t\t\t{label:__(\"Attach Document Print\"), fieldtype:\"Check\",\n\t\t\t\tfieldname:\"attach_document_print\"},\n\t\t\t{label:__(\"Select Print Format\"), fieldtype:\"Select\",\n\t\t\t\tfieldname:\"select_print_format\"},\n\t\t\t{label:__(\"Select Languages\"), fieldtype:\"Select\",\n\t\t\t\tfieldname:\"language_sel\"},\n\t\t\t{fieldtype: \"Column Break\"},\n\t\t\t{label:__(\"Select Attachments\"), fieldtype:\"HTML\",\n\t\t\t\tfieldname:\"select_attachments\"}\n\t\t];\n\n\t\t// add from if user has access to multiple email accounts\n\t\tvar email_accounts = frappe.boot.email_accounts.filter(function(account, idx){\n\t\t\treturn !in_list([\"All Accounts\", \"Sent\", \"Spam\", \"Trash\"], account.email_account) &&\n\t\t\t\taccount.enable_outgoing\n\t\t})\n\t\tif(frappe.boot.email_accounts && email_accounts.length > 1) {\n\t\t\tfields = [\n\t\t\t\t{label: __(\"From\"), fieldtype: \"Select\", reqd: 1, fieldname: \"sender\",\n\t\t\t\t\toptions: email_accounts.map(function(e) { return e.email_id; }) }\n\t\t\t].concat(fields);\n\t\t}\n\n\t\treturn fields;\n\t},\n\tprepare: function() {\n\t\tthis.setup_subject_and_recipients();\n\t\tthis.setup_print_language();\n\t\tthis.setup_print();\n\t\tthis.setup_attach();\n\t\tthis.setup_email();\n\t\tthis.setup_last_edited_communication();\n\t\tthis.setup_email_template();\n\n\t\tthis.dialog.fields_dict.recipients.set_value(this.recipients || '');\n\t\tthis.dialog.fields_dict.cc.set_value(this.cc || '');\n\t\tthis.dialog.fields_dict.bcc.set_value(this.bcc || '');\n\n\t\tif(this.dialog.fields_dict.sender) {\n\t\t\tthis.dialog.fields_dict.sender.set_value(this.sender || '');\n\t\t}\n\t\tthis.dialog.fields_dict.subject.set_value(this.subject || '');\n\n\t\tthis.setup_earlier_reply();\n\t},\n\n\tsetup_subject_and_recipients: function() {\n\t\tthis.subject = this.subject || \"\";\n\n\t\tif(!this.forward && !this.recipients && this.last_email) {\n\t\t\tthis.recipients = this.last_email.sender;\n\t\t\tthis.cc = this.last_email.cc;\n\t\t\tthis.bcc = this.last_email.bcc;\n\t\t}\n\n\t\tif(!this.forward && !this.recipients) {\n\t\t\tthis.recipients = this.frm && this.frm.timeline.get_recipient();\n\t\t}\n\n\t\tif(!this.subject && this.frm) {\n\t\t\t// get subject from last communication\n\t\t\tvar last = this.frm.timeline.get_last_email();\n\n\t\t\tif(last) {\n\t\t\t\tthis.subject = last.subject;\n\t\t\t\tif(!this.recipients) {\n\t\t\t\t\tthis.recipients = last.sender;\n\t\t\t\t}\n\n\t\t\t\t// prepend \"Re:\"\n\t\t\t\tif(strip(this.subject.toLowerCase().split(\":\")[0])!=\"re\") {\n\t\t\t\t\tthis.subject = __(\"Re: {0}\", [this.subject]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.subject) {\n\t\t\t\tif (this.frm.subject_field && this.frm.doc[this.frm.subject_field]) {\n\t\t\t\t\tthis.subject = __(\"Re: {0}\", [this.frm.doc[this.frm.subject_field]]);\n\t\t\t\t} else {\n\t\t\t\t\tlet title = this.frm.doc.name;\n\t\t\t\t\tif(this.frm.meta.title_field && this.frm.doc[this.frm.meta.title_field]\n\t\t\t\t\t\t&& this.frm.doc[this.frm.meta.title_field] != this.frm.doc.name) {\n\t\t\t\t\t\ttitle = `${this.frm.doc[this.frm.meta.title_field]} (#${this.frm.doc.name})`;\n\t\t\t\t\t}\n\t\t\t\t\tthis.subject = `${__(this.frm.doctype)}: ${title}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tsetup_email_template: function() {\n\t\tvar me = this;\n\n\t\tthis.dialog.fields_dict[\"email_template\"].df.onchange = () => {\n\t\t\tvar email_template = me.dialog.fields_dict.email_template.get_value();\n\n\t\t\tvar prepend_reply = function(reply) {\n\t\t\t\tif(me.reply_added===email_template) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar content_field = me.dialog.fields_dict.content;\n\t\t\t\tvar subject_field = me.dialog.fields_dict.subject;\n\t\t\t\tvar content = content_field.get_value() || \"\";\n\t\t\t\tvar subject = subject_field.get_value() || \"\";\n\n\t\t\t\tvar parts = content.split('<!-- salutation-ends -->');\n\n\t\t\t\tif(parts.length===2) {\n\t\t\t\t\tcontent = [reply.message, \"<br>\", parts[1]];\n\t\t\t\t} else {\n\t\t\t\t\tcontent = [reply.message, \"<br>\", content];\n\t\t\t\t}\n\n\t\t\t\tcontent_field.set_value(content.join(''));\n\t\t\t\tif(subject === \"\") {\n\t\t\t\t\tsubject_field.set_value(reply.subject);\n\t\t\t\t}\n\n\t\t\t\tme.reply_added = email_template;\n\t\t\t}\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.email.doctype.email_template.email_template.get_email_template',\n\t\t\t\targs: {\n\t\t\t\t\ttemplate_name: email_template,\n\t\t\t\t\tdoc: me.frm.doc,\n\t\t\t\t\t_lang: me.dialog.get_value(\"language_sel\")\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tprepend_reply(r.message);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t},\n\n\tsetup_last_edited_communication: function() {\n\t\tvar me = this;\n\t\tif (!this.doc){\n\t\t\tif (cur_frm){\n\t\t\t\tthis.doc = cur_frm.doctype;\n\t\t\t}else{\n\t\t\t\tthis.doc = \"Inbox\";\n\t\t\t}\n\t\t}\n\t\tif (cur_frm && cur_frm.docname) {\n\t\t\tthis.key = cur_frm.docname;\n\t\t} else {\n\t\t\tthis.key = \"Inbox\";\n\t\t}\n\t\tif(this.last_email) {\n\t\t\tthis.key = this.key + \":\" + this.last_email.name;\n\t\t}\n\t\tif(this.subject){\n\t\t\tthis.key = this.key + \":\" + this.subject;\n\t\t}\n\t\tthis.dialog.onhide = function() {\n\t\t\tvar last_edited_communication = me.get_last_edited_communication();\n\t\t\t$.extend(last_edited_communication, {\n\t\t\t\tsender: me.dialog.get_value(\"sender\"),\n\t\t\t\trecipients: me.dialog.get_value(\"recipients\"),\n\t\t\t\tsubject: me.dialog.get_value(\"subject\"),\n\t\t\t\tcontent: me.dialog.get_value(\"content\"),\n\t\t\t});\n\t\t}\n\n\t\tthis.dialog.on_page_show = function() {\n\t\t\tif (!me.txt) {\n\t\t\t\tvar last_edited_communication = me.get_last_edited_communication();\n\t\t\t\tif(last_edited_communication.content) {\n\t\t\t\t\tme.dialog.set_value(\"sender\", last_edited_communication.sender || \"\");\n\t\t\t\t\tme.dialog.set_value(\"subject\", last_edited_communication.subject || \"\");\n\t\t\t\t\tme.dialog.set_value(\"recipients\", last_edited_communication.recipients || \"\");\n\t\t\t\t\tme.dialog.set_value(\"content\", last_edited_communication.content || \"\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tget_last_edited_communication: function() {\n\t\tif (!frappe.last_edited_communication[this.doc]) {\n\t\t\tfrappe.last_edited_communication[this.doc] = {};\n\t\t}\n\n\t\tif(!frappe.last_edited_communication[this.doc][this.key]) {\n\t\t\tfrappe.last_edited_communication[this.doc][this.key] = {};\n\t\t}\n\n\t\treturn frappe.last_edited_communication[this.doc][this.key];\n\t},\n\n\tselected_format: function() {\n\t\treturn this.dialog.fields_dict.select_print_format.input.value || (this.frm && this.frm.meta.default_print_format) || \"Standard\";\n\t},\n\n\tget_print_format: function(format) {\n\t\tif (!format) {\n\t\t\tformat = this.selected_format();\n\t\t}\n\n\t\tif (locals[\"Print Format\"] && locals[\"Print Format\"][format]) {\n\t\t\treturn locals[\"Print Format\"][format];\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t},\n\n\tsetup_print_language: function() {\n\t\tvar me = this;\n\t\tvar doc = this.doc || cur_frm.doc;\n\t\tvar fields = this.dialog.fields_dict;\n\n\t\t//Load default print language from doctype\n\t\tthis.lang_code = doc.language\n\n\t\tif (this.get_print_format().default_print_language) {\n\t\t\tvar default_print_language_code = this.get_print_format().default_print_language;\n\t\t\tme.lang_code = default_print_language_code;\n\t\t} else {\n\t\t\tvar default_print_language_code = null;\n\t\t}\n\n\t\t//On selection of language retrieve language code\n\t\t$(fields.language_sel.input).change(function(){\n\t\t\tme.lang_code = this.value\n\t\t})\n\n\t\t// Load all languages in the select field language_sel\n\t\t$(fields.language_sel.input)\n\t\t\t.empty()\n\t\t\t.add_options(frappe.get_languages());\n\n\t\tif (default_print_language_code) {\n\t\t\t$(fields.language_sel.input).val(default_print_language_code);\n\t\t} else {\n\t\t\t$(fields.language_sel.input).val(doc.language);\n\t\t}\n\t},\n\n\tsetup_print: function() {\n\t\t// print formats\n\t\tvar fields = this.dialog.fields_dict;\n\n\t\t// toggle print format\n\t\t$(fields.attach_document_print.input).click(function() {\n\t\t\t$(fields.select_print_format.wrapper).toggle($(this).prop(\"checked\"));\n\t\t});\n\n\t\t// select print format\n\t\t$(fields.select_print_format.wrapper).toggle(false);\n\n\t\tif (cur_frm) {\n\t\t\t$(fields.select_print_format.input)\n\t\t\t\t.empty()\n\t\t\t\t.add_options(cur_frm.print_preview.print_formats)\n\t\t\t\t.val(cur_frm.print_preview.print_formats[0]);\n\t\t} else {\n\t\t\t$(fields.attach_document_print.wrapper).toggle(false);\n\t\t}\n\n\t},\n\tsetup_attach: function() {\n\t\tvar fields = this.dialog.fields_dict;\n\t\tvar attach = $(fields.select_attachments.wrapper);\n\n\t\tif (!this.attachments) {\n\t\t\tthis.attachments = [];\n\t\t}\n\n\t\tlet args = {\n\t\t\tfolder: 'Home/Attachments',\n\t\t\ton_success: attachment => this.attachments.push(attachment)\n\t\t};\n\n\t\tif(this.frm) {\n\t\t\targs = {\n\t\t\t\tdoctype: this.frm.doctype,\n\t\t\t\tdocname: this.frm.docname,\n\t\t\t\tfolder: 'Home/Attachments',\n\t\t\t\ton_success: attachment => {\n\t\t\t\t\tthis.frm.attachments.attachment_uploaded(attachment);\n\t\t\t\t\tthis.render_attach();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t$(\"<h6 class='text-muted add-attachment' style='margin-top: 12px; cursor:pointer;'>\"\n\t\t\t+__(\"Select Attachments\")+\"</h6><div class='attach-list'></div>\\\n\t\t\t<p class='add-more-attachments'>\\\n\t\t\t<a class='text-muted small'><i class='octicon octicon-plus' style='font-size: 12px'></i> \"\n\t\t\t+__(\"Add Attachment\")+\"</a></p>\").appendTo(attach.empty())\n\t\tattach\n\t\t\t.find(\".add-more-attachments a\")\n\t\t\t.on('click',() => new frappe.ui.FileUploader(args));\n\t\tthis.render_attach();\n\t},\n\trender_attach:function(){\n\t\tvar fields = this.dialog.fields_dict;\n\t\tvar attach = $(fields.select_attachments.wrapper).find(\".attach-list\").empty();\n\n\t\tvar files = [];\n\t\tif (this.attachments && this.attachments.length) {\n\t\t\tfiles = files.concat(this.attachments);\n\t\t}\n\t\tif (cur_frm) {\n\t\t\tfiles = files.concat(cur_frm.get_files());\n\t\t}\n\n\t\tif(files.length) {\n\t\t\t$.each(files, function(i, f) {\n\t\t\t\tif (!f.file_name) return;\n\t\t\t\tf.file_url = frappe.urllib.get_full_url(f.file_url);\n\n\t\t\t\t$(repl('<p class=\"checkbox\">'\n\t\t\t\t\t+\t'<label><span><input type=\"checkbox\" data-file-name=\"%(name)s\"></input></span>'\n\t\t\t\t\t+\t\t'<span class=\"small\">%(file_name)s</span>'\n\t\t\t\t\t+\t' <a href=\"%(file_url)s\" target=\"_blank\" class=\"text-muted small\">'\n\t\t\t\t\t+\t\t'<i class=\"fa fa-share\" style=\"vertical-align: middle; margin-left: 3px;\"></i>'\n\t\t\t\t\t+ '</label></p>', f))\n\t\t\t\t\t.appendTo(attach)\n\t\t\t});\n\t\t}\n\t},\n\tsetup_email: function() {\n\t\t// email\n\t\tvar me = this;\n\t\tvar fields = this.dialog.fields_dict;\n\n\t\tif(this.attach_document_print) {\n\t\t\t$(fields.attach_document_print.input).click();\n\t\t\t$(fields.select_print_format.wrapper).toggle(true);\n\t\t}\n\n\t\t$(fields.send_me_a_copy.input).on('click', () => {\n\t\t\t// update send me a copy (make it sticky)\n\t\t\tlet val = fields.send_me_a_copy.get_value();\n\t\t\tfrappe.db.set_value('User', frappe.session.user, 'send_me_a_copy', val);\n\t\t\tfrappe.boot.user.send_me_a_copy = val;\n\t\t});\n\n\t},\n\n\tsend_action: function() {\n\t\tvar me = this;\n\t\tvar btn = me.dialog.get_primary_btn();\n\n\t\tvar form_values = this.get_values();\n\t\tif(!form_values) return;\n\n\t\tvar selected_attachments =\n\t\t\t$.map($(me.dialog.wrapper).find(\"[data-file-name]:checked\"), function (element) {\n\t\t\t\treturn $(element).attr(\"data-file-name\");\n\t\t\t});\n\n\n\t\tif(form_values.attach_document_print) {\n\t\t\tif (cur_frm.print_preview.is_old_style(form_values.select_print_format || \"\")) {\n\t\t\t\tcur_frm.print_preview.with_old_style({\n\t\t\t\t\tformat: form_values.select_print_format,\n\t\t\t\t\tcallback: function(print_html) {\n\t\t\t\t\t\tme.send_email(btn, form_values, selected_attachments, print_html);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tme.send_email(btn, form_values, selected_attachments, null, form_values.select_print_format || \"\");\n\t\t\t}\n\n\t\t} else {\n\t\t\tme.send_email(btn, form_values, selected_attachments);\n\t\t}\n\t},\n\n\tget_values: function() {\n\t\tvar form_values = this.dialog.get_values();\n\n\t\t// cc\n\t\tfor ( var i=0, l=this.dialog.fields.length; i < l; i++ ) {\n\t\t\tvar df = this.dialog.fields[i];\n\n\t\t\tif ( df.is_cc_checkbox ) {\n\t\t\t\t// concat in cc\n\t\t\t\tif ( form_values[df.fieldname] ) {\n\t\t\t\t\tform_values.cc = ( form_values.cc ? (form_values.cc + \", \") : \"\" ) + df.fieldname;\n\t\t\t\t\tform_values.bcc = ( form_values.bcc ? (form_values.bcc + \", \") : \"\" ) + df.fieldname;\n\t\t\t\t}\n\n\t\t\t\tdelete form_values[df.fieldname];\n\t\t\t}\n\t\t}\n\n\t\treturn form_values;\n\t},\n\n\tsave_as_draft: function() {\n\t\tif (this.dialog) {\n\t\t\ttry {\n\t\t\t\tlet message = this.dialog.get_value('content');\n\t\t\t\tmessage = message.split(frappe.separator_element)[0];\n\t\t\t\tlocalStorage.setItem(this.frm.doctype + this.frm.docname, message);\n\t\t\t} catch (e) {\n\t\t\t\t// silently fail\n\t\t\t\tconsole.log(e);\n\t\t\t\tconsole.warn('[Communication] localStorage is full. Cannot save message as draft');\n\t\t\t}\n\t\t}\n\t},\n\n\tdelete_saved_draft() {\n\t\tif (this.dialog) {\n\t\t\ttry {\n\t\t\t\tlocalStorage.removeItem(this.frm.doctype + this.frm.docname);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t\tconsole.warn('[Communication] Cannot delete localStorage item'); // eslint-disable-line\n\t\t\t}\n\t\t}\n\t},\n\n\tsend_email: function(btn, form_values, selected_attachments, print_html, print_format) {\n\t\tvar me = this;\n\t\tme.dialog.hide();\n\n\t\tif(!form_values.recipients) {\n\t\t\tfrappe.msgprint(__(\"Enter Email Recipient(s)\"));\n\t\t\treturn;\n\t\t}\n\n\t\tif(!form_values.attach_document_print) {\n\t\t\tprint_html = null;\n\t\t\tprint_format = null;\n\t\t}\n\n\n\t\tif(cur_frm && !frappe.model.can_email(me.doc.doctype, cur_frm)) {\n\t\t\tfrappe.msgprint(__(\"You are not allowed to send emails related to this document\"));\n\t\t\treturn;\n\t\t}\n\n\n\t\treturn frappe.call({\n\t\t\tmethod:\"frappe.core.doctype.communication.email.make\",\n\t\t\targs: {\n\t\t\t\trecipients: form_values.recipients,\n\t\t\t\tcc: form_values.cc,\n\t\t\t\tbcc: form_values.bcc,\n\t\t\t\tsubject: form_values.subject,\n\t\t\t\tcontent: form_values.content,\n\t\t\t\tdoctype: me.doc.doctype,\n\t\t\t\tname: me.doc.name,\n\t\t\t\tsend_email: 1,\n\t\t\t\tprint_html: print_html,\n\t\t\t\tsend_me_a_copy: form_values.send_me_a_copy,\n\t\t\t\tprint_format: print_format,\n\t\t\t\tsender: form_values.sender,\n\t\t\t\tsender_full_name: form_values.sender?frappe.user.full_name():undefined,\n\t\t\t\temail_template: form_values.email_template,\n\t\t\t\tattachments: selected_attachments,\n\t\t\t\t_lang : me.lang_code,\n\t\t\t\tread_receipt:form_values.send_read_receipt,\n\t\t\t\tprint_letterhead: me.is_print_letterhead_checked(),\n\t\t\t},\n\t\t\tbtn: btn,\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tfrappe.utils.play_sound(\"email\");\n\n\t\t\t\t\tif(r.message[\"emails_not_sent_to\"]) {\n\t\t\t\t\t\tfrappe.msgprint(__(\"Email not sent to {0} (unsubscribed / disabled)\",\n\t\t\t\t\t\t\t[ frappe.utils.escape_html(r.message[\"emails_not_sent_to\"]) ]) );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((frappe.last_edited_communication[me.doc] || {})[me.key]) {\n\t\t\t\t\t\tdelete frappe.last_edited_communication[me.doc][me.key];\n\t\t\t\t\t}\n\t\t\t\t\tif (cur_frm) {\n\t\t\t\t\t\t// clear input\n\t\t\t\t\t\tcur_frm.timeline.input && cur_frm.timeline.input.val(\"\");\n\t\t\t\t\t\tcur_frm.reload_doc();\n\t\t\t\t\t}\n\n\t\t\t\t\t// try the success callback if it exists\n\t\t\t\t\tif (me.success) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tme.success(r);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.msgprint(__(\"There were errors while sending email. Please try again.\"));\n\n\t\t\t\t\t// try the error callback if it exists\n\t\t\t\t\tif (me.error) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tme.error(r);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tis_print_letterhead_checked: function() {\n\t\tif (this.frm && $(this.frm.wrapper).find('.form-print-wrapper').is(':visible')){\n\t\t\treturn $(this.frm.wrapper).find('.print-letterhead').prop('checked') ? 1 : 0;\n\t\t} else {\n\t\t\treturn (frappe.model.get_doc(\":Print Settings\", \"Print Settings\") ||\n\t\t\t\t{ with_letterhead: 1 }).with_letterhead ? 1 : 0;\n\t\t}\n\t},\n\n\tsetup_earlier_reply: function() {\n\t\tlet fields = this.dialog.fields_dict;\n\t\tlet signature = frappe.boot.user.email_signature || \"\";\n\n\t\tif(!frappe.utils.is_html(signature)) {\n\t\t\tsignature = signature.replace(/\\n/g, \"<br>\");\n\t\t}\n\n\t\tif(this.txt) {\n\t\t\tthis.message = this.txt + (this.message ? (\"<br><br>\" + this.message) : \"\");\n\t\t} else {\n\t\t\t// saved draft in localStorage\n\t\t\tconst { doctype, docname } = this.frm || {};\n\t\t\tif (doctype && docname) {\n\t\t\t\tthis.message = localStorage.getItem(doctype + docname) || '';\n\t\t\t}\n\t\t}\n\n\t\tif(this.real_name) {\n\t\t\tthis.message = '<p>'+__('Dear') +' '\n\t\t\t\t+ this.real_name + \",</p><!-- salutation-ends --><br>\" + (this.message || \"\");\n\t\t}\n\n\t\tif(this.message && signature && this.message.includes(signature)) {\n\t\t\tsignature = \"\";\n\t\t}\n\n\t\tlet reply = (this.message || \"\") + (signature ? (\"<br>\" + signature) : \"\");\n\t\tlet content = '';\n\n\t\tif (this.is_a_reply === 'undefined') {\n\t\t\tthis.is_a_reply = true;\n\t\t}\n\n\t\tif (this.is_a_reply) {\n\t\t\tlet last_email = this.last_email;\n\n\t\t\tif (!last_email) {\n\t\t\t\tlast_email = this.frm && this.frm.timeline.get_last_email(true);\n\t\t\t}\n\n\t\t\tif (!last_email) return;\n\n\t\t\tlet last_email_content = last_email.original_comment || last_email.content;\n\n\t\t\t// convert the email context to text as we are enclosing\n\t\t\t// this inside <blockquote>\n\t\t\tlast_email_content = this.html2text(last_email_content).replace(/\\n/g, '<br>');\n\n\t\t\t// clip last email for a maximum of 20k characters\n\t\t\t// to prevent the email content from getting too large\n\t\t\tif (last_email_content.length > 20 * 1024) {\n\t\t\t\tlast_email_content += '<div>' + __('Message clipped') + '</div>' + last_email_content;\n\t\t\t\tlast_email_content = last_email_content.slice(0, 20 * 1024);\n\t\t\t}\n\n\t\t\tlet communication_date = last_email.communication_date || last_email.creation;\n\t\t\tcontent = `\n\t\t\t\t<div><br></div>\n\t\t\t\t${reply}\n\t\t\t\t${frappe.separator_element}\n\t\t\t\t<p>${__(\"On {0}, {1} wrote:\", [frappe.datetime.global_date_format(communication_date) , last_email.sender])}</p>\n\t\t\t\t<blockquote>\n\t\t\t\t${last_email_content}\n\t\t\t\t</blockquote>\n\t\t\t`;\n\t\t} else {\n\t\t\tcontent = \"<div><br></div>\" + reply;\n\t\t}\n\t\tfields.content.set_value(content);\n\t},\n\thtml2text: function(html) {\n\t\t// convert HTML to text and try and preserve whitespace\n\t\tvar d = document.createElement( 'div' );\n\t\td.innerHTML = html.replace(/<\\/div>/g, '<br></div>')  // replace end of blocks\n\t\t\t.replace(/<\\/p>/g, '<br></p>') // replace end of paragraphs\n\t\t\t.replace(/<br>/g, '\\n');\n\t\tlet text = d.textContent;\n\n\t\t// replace multiple empty lines with just one\n\t\treturn text.replace(/\\n{3,}/g, '\\n\\n');\n\t}\n});\n\n","frappe.views.TranslationManager = class TranslationManager {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tthis.data = [];\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\tfields: this.get_fields(),\n\t\t\ttitle: __('Translate {0}', [this.df.label]),\n\t\t\tno_submit_on_enter: true,\n\t\t\tprimary_action_label: __('Update Translations'),\n\t\t\tprimary_action:\n\t\t\t\t(values) => this.update_translations(values)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.dialog.hide();\n\n\t\t\t\t\t\tthis.data = [];\n\n\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\ttitle: __('Success'),\n\t\t\t\t\t\t\tmessage: __('Successfully updated translations'),\n\t\t\t\t\t\t\tindicator: 'green'\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t});\n\n\t\tthis.get_translations_data()\n\t\t\t.then(data => {\n\t\t\t\tthis.data.push(...(data || []));\n\t\t\t\tthis.dialog.refresh();\n\t\t\t\tthis.dialog.show();\n\t\t\t});\n\t}\n\n\tget_fields() {\n\t\tvar fields = [\n\t\t\t{\n\t\t\t\tlabel: __('Source Text'),\n\t\t\t\tfieldname: 'source',\n\t\t\t\tfieldtype: 'Data',\n\t\t\t\tread_only: 1,\n\t\t\t\tbold: 1,\n\t\t\t\tdefault: this.source_name\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Translations'),\n\t\t\t\tfieldname: 'translation_data',\n\t\t\t\tfieldtype: 'Table',\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Language',\n\t\t\t\t\t\tfieldname: 'language',\n\t\t\t\t\t\tfieldtype: 'Link',\n\t\t\t\t\t\toptions: 'Language',\n\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\tcolumns: 3\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Translation',\n\t\t\t\t\t\tfieldname: 'translation',\n\t\t\t\t\t\tfieldtype: 'Text',\n\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\tcolumns: 7\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tdata: this.data,\n\t\t\t\tget_data: () => {\n\t\t\t\t\treturn this.data;\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\treturn fields;\n\t}\n\n\tget_translations_data() {\n\t\treturn frappe.db.get_list('Translation', {\n\t\t\tfields: ['name', 'language', 'target_name as translation'],\n\t\t\tfilters: {\n\t\t\t\tsource_name: strip_html(this.source_name)\n\t\t\t}\n\t\t});\n\t}\n\n\tupdate_translations({ source, translation_data = [] }) {\n\t\tconst translation_dict = {};\n\t\ttranslation_data.map(row => {\n\t\t\ttranslation_dict[row.language] = row.translation;\n\t\t});\n\n\t\treturn frappe.call({\n\t\t\tmethod: 'frappe.translate.update_translations_for_source',\n\t\t\tbtn: this.dialog.get_primary_btn(),\n\t\t\targs: {\n\t\t\t\tsource,\n\t\t\t\ttranslation_dict\n\t\t\t}\n\t\t}).fail(() => {\n\t\t\tfrappe.msgprint({\n\t\t\t\ttitle: __('Something went wrong'),\n\t\t\t\tmessage: __('Please try again'),\n\t\t\t\tindicator: 'red'\n\t\t\t});\n\t\t});\n\t}\n};\n\n","frappe.ui.SortSelector = Class.extend({\n\t// parent:\n\t// change:\n\t// args:\n\t//\t\toptions: {fieldname:, label:}\n\t//\t\tsort_by:\n\t//\t\tsort_by_label:\n\t//\t\tsort_order:\n\t//\t\tdoctype: (optional)\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.labels = {};\n\t\tthis.make();\n\t},\n\tmake: function() {\n\t\tthis.prepare_args();\n\t\tthis.parent.find('.sort-selector').remove();\n\t\tthis.wrapper = $(frappe.render_template('sort_selector', this.args)).appendTo(this.parent);\n\t\tthis.bind_events();\n\t},\n\tbind_events: function() {\n\t\tvar me = this;\n\n\t\t// order\n\t\tthis.wrapper.find('.btn-order').on('click', function() {\n\t\t\tvar btn = $(this);\n\t\t\tvar order = $(this).attr('data-value')==='desc' ? 'asc' : 'desc';\n\n\t\t\tbtn.attr('data-value', order);\n\t\t\tme.sort_order = order;\n\t\t\tbtn.find('.octicon')\n\t\t\t\t.removeClass('octicon-arrow-' + (order==='asc' ? 'down' : 'up'))\n\t\t\t\t.addClass('octicon-arrow-' + (order==='desc' ? 'down' : 'up'));\n\t\t\t(me.onchange || me.change)(me.sort_by, me.sort_order);\n\t\t});\n\n\t\t// select field\n\t\tthis.wrapper.find('.dropdown a.option').on('click', function() {\n\t\t\tme.sort_by = $(this).attr('data-value');\n\t\t\tme.wrapper.find('.dropdown .dropdown-text').html($(this).html());\n\t\t\t(me.onchange || me.change)(me.sort_by, me.sort_order);\n\t\t});\n\n\t},\n\tprepare_args: function() {\n\t\tvar me = this;\n\t\tif(!this.args) {\n\t\t\tthis.args = {};\n\t\t}\n\n\t\t// args as string\n\t\tif(this.args && typeof this.args === 'string') {\n\t\t\tvar order_by = this.args;\n\t\t\tthis.args = {}\n\n\t\t\tif (order_by.includes('`.`')) {\n\t\t\t\t// scrub table name (separated by dot), like `tabTime Log`.`modified` desc`\n\t\t\t\torder_by = order_by.split('.')[1];\n\t\t\t}\n\n\t\t\tvar parts = order_by.split(' ');\n\t\t\tif (parts.length === 2) {\n\t\t\t\tvar fieldname = strip(parts[0], '`');\n\n\t\t\t\tthis.args.sort_by = fieldname;\n\t\t\t\tthis.args.sort_order = parts[1];\n\t\t\t}\n\t\t}\n\n\t\tif(this.args.options) {\n\t\t\tthis.args.options.forEach(function(o) {\n\t\t\t\tme.labels[o.fieldname] = o.label;\n\t\t\t});\n\t\t}\n\n\t\tthis.setup_from_doctype();\n\n\t\t// if label is missing, add from options\n\t\tif(this.args.sort_by && !this.args.sort_by_label) {\n\t\t\tthis.args.options.every(function(o) {\n\t\t\t\tif(o.fieldname===me.args.sort_by) {\n\t\t\t\t\tme.args.sort_by_label = o.label;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\n\t},\n\tsetup_from_doctype: function() {\n\t\tvar me = this;\n\t\tvar meta = frappe.get_meta(this.doctype);\n\t\tif (!meta) return;\n\n\t\tvar { meta_sort_field, meta_sort_order } = this.get_meta_sort_field();\n\n\t\tif(!this.args.sort_by) {\n\t\t\tif(meta_sort_field) {\n\t\t\t\tthis.args.sort_by = meta_sort_field;\n\t\t\t\tthis.args.sort_order = meta_sort_order;\n\t\t\t} else {\n\t\t\t\t// default\n\t\t\t\tthis.args.sort_by = 'modified';\n\t\t\t\tthis.args.sort_order = 'desc';\n\t\t\t}\n\t\t}\n\n\t\tif(!this.args.sort_by_label) {\n\t\t\tthis.args.sort_by_label = this.get_label(this.args.sort_by);\n\t\t}\n\n\t\tif(!this.args.options) {\n\t\t\t// default options\n\t\t\tvar _options = [\n\t\t\t\t{'fieldname': 'modified'}\n\t\t\t]\n\n\t\t\t// title field\n\t\t\tif(meta.title_field) {\n\t\t\t\t_options.push({'fieldname': meta.title_field});\n\t\t\t}\n\n\t\t\t// bold or mandatory\n\t\t\tmeta.fields.forEach(function(df) {\n\t\t\t\tif(df.mandatory || df.bold) {\n\t\t\t\t\t_options.push({fieldname: df.fieldname, label: df.label});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// meta sort field\n\t\t\tif(meta_sort_field) _options.push({ 'fieldname': meta_sort_field });\n\n\t\t\t// more default options\n\t\t\t_options.push(\n\t\t\t\t{'fieldname': 'name'},\n\t\t\t\t{'fieldname': 'creation'},\n\t\t\t\t{'fieldname': 'idx'}\n\t\t\t)\n\n\t\t\t// de-duplicate\n\t\t\tthis.args.options = _options.uniqBy(function(obj) {\n\t\t\t\treturn obj.fieldname;\n\t\t\t});\n\n\t\t\t// add missing labels\n\t\t\tthis.args.options.forEach(function(o) {\n\t\t\t\tif(!o.label) {\n\t\t\t\t\to.label = me.get_label(o.fieldname);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// set default\n\t\tthis.sort_by = this.args.sort_by;\n\t\tthis.sort_order = this.args.sort_order;\n\t},\n\tget_meta_sort_field: function() {\n\t\tvar meta = frappe.get_meta(this.doctype);\n\n\t\tif (!meta) {\n\t\t\treturn {\n\t\t\t\tmeta_sort_field: null,\n\t\t\t\tmeta_sort_order: null\n\t\t\t}\n\t\t}\n\n\t\tif(meta.sort_field && meta.sort_field.includes(',')) {\n\t\t\tvar parts = meta.sort_field.split(',')[0].split(' ');\n\t\t\treturn {\n\t\t\t\tmeta_sort_field: parts[0],\n\t\t\t\tmeta_sort_order: parts[1]\n\t\t\t}\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tmeta_sort_field: meta.sort_field || 'modified',\n\t\t\t\tmeta_sort_order: meta.sort_order ? meta.sort_order.toLowerCase() : ''\n\t\t\t}\n\t\t}\n\t},\n\tget_label: function(fieldname) {\n\t\tif(fieldname==='idx') {\n\t\t\treturn __(\"Most Used\");\n\t\t} else {\n\t\t\treturn this.labels[fieldname]\n\t\t\t\t|| frappe.meta.get_label(this.doctype, fieldname);\n\t\t}\n\t},\n\tget_sql_string: function() {\n\t\t// build string like `tabTask`.`subject` desc\n\t\treturn '`tab' + this.doctype + '`.`' + this.sort_by + '` ' +  this.sort_order;\n\t}\n})\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n/* eslint-disable no-console */\n\nfrappe.start_app = function() {\n\tif(!frappe.Application)\n\t\treturn;\n\tfrappe.assets.check();\n\tfrappe.provide('frappe.app');\n\tfrappe.app = new frappe.Application();\n};\n\n$(document).ready(function() {\n\tif(!frappe.utils.supportsES6) {\n\t\tfrappe.msgprint({\n\t\t\tindicator: 'red',\n\t\t\ttitle: __('Browser not supported'),\n\t\t\tmessage: __('Some of the features might not work in your browser. Please update your browser to the latest version.')\n\t\t});\n\t}\n\tfrappe.start_app();\n});\n\nfrappe.Application = Class.extend({\n\tinit: function() {\n\t\tthis.startup();\n\t},\n\n\tstartup: function() {\n\t\tfrappe.socketio.init();\n\t\tfrappe.model.init();\n\n\t\tif(frappe.boot.status==='failed') {\n\t\t\tfrappe.msgprint({\n\t\t\t\tmessage: frappe.boot.error,\n\t\t\t\ttitle: __('Session Start Failed'),\n\t\t\t\tindicator: 'red',\n\t\t\t});\n\t\t\tthrow 'boot failed';\n\t\t}\n\n\t\tthis.setup_frappe_vue();\n\t\tthis.load_bootinfo();\n\t\tthis.load_user_permissions();\n\t\tthis.make_nav_bar();\n\t\tthis.set_favicon();\n\t\tthis.setup_analytics();\n\t\tthis.set_fullwidth_if_enabled();\n\n\t\tthis.setup_energy_point_listeners();\n\n\t\tfrappe.ui.keys.setup();\n\t\tthis.set_rtl();\n\n\t\tif(frappe.boot) {\n\t\t\tif(localStorage.getItem(\"session_last_route\")) {\n\t\t\t\twindow.location.hash = localStorage.getItem(\"session_last_route\");\n\t\t\t\tlocalStorage.removeItem(\"session_last_route\");\n\t\t\t}\n\n\t\t}\n\n\t\t// page container\n\t\tthis.make_page_container();\n\n\t\t// route to home page\n\t\tfrappe.route();\n\n\t\t// trigger app startup\n\t\t$(document).trigger('startup');\n\n\t\tthis.start_notification_updates();\n\n\t\t$(document).trigger('app_ready');\n\n\t\tif (frappe.boot.messages) {\n\t\t\tfrappe.msgprint(frappe.boot.messages);\n\t\t}\n\n\t\tif (frappe.boot.change_log && frappe.boot.change_log.length && !window.Cypress) {\n\t\t\tthis.show_change_log();\n\t\t} else {\n\t\t\tthis.show_notes();\n\t\t}\n\n\t\tthis.show_update_available();\n\n\t\tif(frappe.ui.startup_setup_dialog && !frappe.boot.setup_complete) {\n\t\t\tfrappe.ui.startup_setup_dialog.pre_show();\n\t\t\tfrappe.ui.startup_setup_dialog.show();\n\t\t}\n\n\t\t// listen to csrf_update\n\t\tfrappe.realtime.on(\"csrf_generated\", function(data) {\n\t\t\t// handles the case when a user logs in again from another tab\n\t\t\t// and it leads to invalid request in the current tab\n\t\t\tif (data.csrf_token && data.sid===frappe.get_cookie(\"sid\")) {\n\t\t\t\tfrappe.csrf_token = data.csrf_token;\n\t\t\t}\n\t\t});\n\n\t\tfrappe.realtime.on(\"version-update\", function() {\n\t\t\tvar dialog = frappe.msgprint({\n\t\t\t\tmessage:__(\"The application has been updated to a new version, please refresh this page\"),\n\t\t\t\tindicator: 'green',\n\t\t\t\ttitle: __('Version Updated')\n\t\t\t});\n\t\t\tdialog.set_primary_action(__(\"Refresh\"), function() {\n\t\t\t\tlocation.reload(true);\n\t\t\t});\n\t\t\tdialog.get_close_btn().toggle(false);\n\t\t});\n\n\t\tthis.setup_social_listeners();\n\n\t\t// listen to build errors\n\t\tthis.setup_build_error_listener();\n\n\t\tif (frappe.sys_defaults.email_user_password){\n\t\t\tvar email_list =  frappe.sys_defaults.email_user_password.split(',');\n\t\t\tfor (var u in email_list) {\n\t\t\t\tif (email_list[u]===frappe.user.name){\n\t\t\t\t\tthis.set_password(email_list[u]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.link_preview = new frappe.ui.LinkPreview();\n\t},\n\n\tsetup_frappe_vue() {\n\t\tVue.prototype.__ = window.__;\n\t\tVue.prototype.frappe = window.frappe;\n\t},\n\n\tset_password: function(user) {\n\t\tvar me=this;\n\t\tfrappe.call({\n\t\t\tmethod: 'frappe.core.doctype.user.user.get_email_awaiting',\n\t\t\targs: {\n\t\t\t\t\"user\": user\n\t\t\t},\n\t\t\tcallback: function(email_account) {\n\t\t\t\temail_account = email_account[\"message\"];\n\t\t\t\tif (email_account) {\n\t\t\t\t\tvar i = 0;\n\t\t\t\t\tif (i < email_account.length) {\n\t\t\t\t\t\tme.email_password_prompt( email_account, user, i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\temail_password_prompt: function(email_account,user,i) {\n\t\tvar me = this;\n\t\tvar d = new frappe.ui.Dialog({\n\t\t\ttitle: __('Email Account setup please enter your password for: '+email_account[i][\"email_id\"]),\n\t\t\tfields: [\n\t\t\t\t{\t'fieldname': 'password',\n\t\t\t\t\t'fieldtype': 'Password',\n\t\t\t\t\t'label': 'Email Account Password',\n\t\t\t\t\t'reqd': 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"fieldtype\": \"Button\",\n\t\t\t\t\t\"label\": __(\"Submit\")\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t\td.get_input(\"submit\").on(\"click\", function() {\n\t\t\t//setup spinner\n\t\t\td.hide();\n\t\t\tvar s = new frappe.ui.Dialog({\n\t\t\t\ttitle: __(\"Checking one moment\"),\n\t\t\t\tfields: [{\n\t\t\t\t\t\"fieldtype\": \"HTML\",\n\t\t\t\t\t\"fieldname\": \"checking\"\n\t\t\t\t}]\n\t\t\t});\n\t\t\ts.fields_dict.checking.$wrapper.html('<i class=\"fa fa-spinner fa-spin fa-4x\"></i>');\n\t\t\ts.show();\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.core.doctype.user.user.set_email_password',\n\t\t\t\targs: {\n\t\t\t\t\t\"email_account\": email_account[i][\"email_account\"],\n\t\t\t\t\t\"user\": user,\n\t\t\t\t\t\"password\": d.get_value(\"password\")\n\t\t\t\t},\n\t\t\t\tcallback: function(passed) {\n\t\t\t\t\ts.hide();\n\t\t\t\t\td.hide();//hide waiting indication\n\t\t\t\t\tif (!passed[\"message\"]) {\n\t\t\t\t\t\tfrappe.show_alert(\"Login Failed please try again\", 5);\n\t\t\t\t\t\tme.email_password_prompt(email_account, user, i);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (i + 1 < email_account.length) {\n\t\t\t\t\t\t\ti = i + 1;\n\t\t\t\t\t\t\tme.email_password_prompt(email_account, user, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\td.show();\n\t},\n\tload_bootinfo: function() {\n\t\tif(frappe.boot) {\n\t\t\tfrappe.modules = {};\n\t\t\tfrappe.boot.allowed_modules.forEach(function(m) {\n\t\t\t\tfrappe.modules[m.module_name]=m;\n\t\t\t});\n\t\t\tfrappe.model.sync(frappe.boot.docs);\n\t\t\t$.extend(frappe._messages, frappe.boot.__messages);\n\t\t\tthis.check_metadata_cache_status();\n\t\t\tthis.set_globals();\n\t\t\tthis.sync_pages();\n\t\t\tmoment.locale(\"en\");\n\t\t\tmoment.user_utc_offset = moment().utcOffset();\n\t\t\tif(frappe.boot.timezone_info) {\n\t\t\t\tmoment.tz.add(frappe.boot.timezone_info);\n\t\t\t}\n\t\t\tif(frappe.boot.print_css) {\n\t\t\t\tfrappe.dom.set_style(frappe.boot.print_css, \"print-style\");\n\t\t\t}\n\t\t\tfrappe.user.name = frappe.boot.user.name;\n\t\t} else {\n\t\t\tthis.set_as_guest();\n\t\t}\n\t},\n\n\tload_user_permissions: function() {\n\t\tfrappe.defaults.update_user_permissions();\n\n\t\tfrappe.realtime.on('update_user_permissions', frappe.utils.debounce(() => {\n\t\t\tfrappe.defaults.update_user_permissions();\n\t\t}, 500));\n\t},\n\n\tcheck_metadata_cache_status: function() {\n\t\tif(frappe.boot.metadata_version != localStorage.metadata_version) {\n\t\t\tfrappe.assets.clear_local_storage();\n\t\t\tfrappe.assets.init_local_storage();\n\t\t}\n\t},\n\n\tstart_notification_updates: function() {\n\t\tvar me = this;\n\n\t\t// refresh_notifications will be called only once during a 1 second window\n\t\tthis.refresh_notifications = frappe.utils.debounce(this.refresh_notifications.bind(this), 1000);\n\n\t\t// kickoff\n\t\tthis.refresh_notifications();\n\n\t\tfrappe.realtime.on('clear_notifications', () => {\n\t\t\tme.refresh_notifications();\n\t\t});\n\n\t\t// first time loaded in boot\n\t\t$(document).trigger(\"notification-update\");\n\n\t\t// refresh notifications if user is back after sometime\n\t\t$(document).on(\"session_alive\", function() {\n\t\t\tme.refresh_notifications();\n\t\t});\n\t},\n\n\trefresh_notifications: function() {\n\t\tvar me = this;\n\t\tif(frappe.session_alive && frappe.boot && frappe.boot.home_page !== 'setup-wizard') {\n\t\t\tif (this._refresh_notifications) {\n\t\t\t\tthis._refresh_notifications.abort();\n\t\t\t}\n\t\t\tthis._refresh_notifications = frappe.call({\n\t\t\t\ttype: 'GET',\n\t\t\t\tmethod: \"frappe.desk.notifications.get_notifications\",\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(r.message) {\n\t\t\t\t\t\t$.extend(frappe.boot.notification_info, r.message);\n\t\t\t\t\t\t$(document).trigger(\"notification-update\");\n\n\t\t\t\t\t\tif(frappe.get_route()[0] != \"messages\") {\n\t\t\t\t\t\t\tif(r.message.new_messages.length) {\n\t\t\t\t\t\t\t\tfrappe.utils.set_title_prefix(\"(\" + r.message.new_messages.length + \")\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfreeze: false\n\t\t\t});\n\t\t}\n\t},\n\n\tset_globals: function() {\n\t\tfrappe.session.user = frappe.boot.user.name;\n\t\tfrappe.session.user_email = frappe.boot.user.email;\n\t\tfrappe.session.user_fullname = frappe.user_info().fullname;\n\n\t\tfrappe.user_defaults = frappe.boot.user.defaults;\n\t\tfrappe.user_roles = frappe.boot.user.roles;\n\t\tfrappe.sys_defaults = frappe.boot.sysdefaults;\n\n\t\tfrappe.ui.py_date_format = frappe.boot.sysdefaults.date_format.replace('dd', '%d').replace('mm', '%m').replace('yyyy', '%Y');\n\t\tfrappe.boot.user.last_selected_values = {};\n\n\t\t// Proxy for user globals\n\t\tObject.defineProperties(window, {\n\t\t\t'user': {\n\t\t\t\tget: function() {\n\t\t\t\t\tconsole.warn('Please use `frappe.session.user` instead of `user`. It will be deprecated soon.');\n\t\t\t\t\treturn frappe.session.user;\n\t\t\t\t}\n\t\t\t},\n\t\t\t'user_fullname': {\n\t\t\t\tget: function() {\n\t\t\t\t\tconsole.warn('Please use `frappe.session.user_fullname` instead of `user_fullname`. It will be deprecated soon.');\n\t\t\t\t\treturn frappe.session.user;\n\t\t\t\t}\n\t\t\t},\n\t\t\t'user_email': {\n\t\t\t\tget: function() {\n\t\t\t\t\tconsole.warn('Please use `frappe.session.user_email` instead of `user_email`. It will be deprecated soon.');\n\t\t\t\t\treturn frappe.session.user_email;\n\t\t\t\t}\n\t\t\t},\n\t\t\t'user_defaults': {\n\t\t\t\tget: function() {\n\t\t\t\t\tconsole.warn('Please use `frappe.user_defaults` instead of `user_defaults`. It will be deprecated soon.');\n\t\t\t\t\treturn frappe.user_defaults;\n\t\t\t\t}\n\t\t\t},\n\t\t\t'roles': {\n\t\t\t\tget: function() {\n\t\t\t\t\tconsole.warn('Please use `frappe.user_roles` instead of `roles`. It will be deprecated soon.');\n\t\t\t\t\treturn frappe.user_roles;\n\t\t\t\t}\n\t\t\t},\n\t\t\t'sys_defaults': {\n\t\t\t\tget: function() {\n\t\t\t\t\tconsole.warn('Please use `frappe.sys_defaults` instead of `sys_defaults`. It will be deprecated soon.');\n\t\t\t\t\treturn frappe.user_roles;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tsync_pages: function() {\n\t\t// clear cached pages if timestamp is not found\n\t\tif(localStorage[\"page_info\"]) {\n\t\t\tfrappe.boot.allowed_pages = [];\n\t\t\tvar page_info = JSON.parse(localStorage[\"page_info\"]);\n\t\t\t$.each(frappe.boot.page_info, function(name, p) {\n\t\t\t\tif(!page_info[name] || (page_info[name].modified != p.modified)) {\n\t\t\t\t\tdelete localStorage[\"_page:\" + name];\n\t\t\t\t}\n\t\t\t\tfrappe.boot.allowed_pages.push(name);\n\t\t\t});\n\t\t} else {\n\t\t\tfrappe.boot.allowed_pages = Object.keys(frappe.boot.page_info);\n\t\t}\n\t\tlocalStorage[\"page_info\"] = JSON.stringify(frappe.boot.page_info);\n\t},\n\tset_as_guest: function() {\n\t\tfrappe.session.user = 'Guest';\n\t\tfrappe.session.user_email = '';\n\t\tfrappe.session.user_fullname = 'Guest';\n\n\t\tfrappe.user_defaults = {};\n\t\tfrappe.user_roles = ['Guest'];\n\t\tfrappe.sys_defaults = {};\n\t},\n\tmake_page_container: function() {\n\t\tif($(\"#body_div\").length) {\n\t\t\t$(\".splash\").remove();\n\t\t\tfrappe.temp_container = $(\"<div id='temp-container' style='display: none;'>\")\n\t\t\t\t.appendTo(\"body\");\n\t\t\tfrappe.container = new frappe.views.Container();\n\t\t}\n\t},\n\tmake_nav_bar: function() {\n\t\t// toolbar\n\t\tif(frappe.boot && frappe.boot.home_page!=='setup-wizard') {\n\t\t\tfrappe.frappe_toolbar = new frappe.ui.toolbar.Toolbar();\n\t\t}\n\n\t},\n\tlogout: function() {\n\t\tvar me = this;\n\t\tme.logged_out = true;\n\t\treturn frappe.call({\n\t\t\tmethod:'logout',\n\t\t\tcallback: function(r) {\n\t\t\t\tif(r.exc) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tme.redirect_to_login();\n\t\t\t}\n\t\t});\n\t},\n\thandle_session_expired: function() {\n\t\tif(!frappe.app.session_expired_dialog) {\n\t\t\tvar dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Session Expired'),\n\t\t\t\tkeep_open: true,\n\t\t\t\tfields: [\n\t\t\t\t\t{ fieldtype:'Password', fieldname:'password',\n\t\t\t\t\t\tlabel: __('Please Enter Your Password to Continue') },\n\t\t\t\t],\n\t\t\t\tonhide: () => {\n\t\t\t\t\tif (!dialog.logged_in) {\n\t\t\t\t\t\tfrappe.app.redirect_to_login();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.set_primary_action(__('Login'), () => {\n\t\t\t\tdialog.set_message(__('Authenticating...'));\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: 'login',\n\t\t\t\t\targs: {\n\t\t\t\t\t\tusr: frappe.session.user,\n\t\t\t\t\t\tpwd: dialog.get_values().password\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\tif (r.message==='Logged In') {\n\t\t\t\t\t\t\tdialog.logged_in = true;\n\n\t\t\t\t\t\t\t// revert backdrop\n\t\t\t\t\t\t\t$('.modal-backdrop').css({\n\t\t\t\t\t\t\t\t'opacity': '',\n\t\t\t\t\t\t\t\t'background-color': '#334143'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t},\n\t\t\t\t\tstatusCode: () => {\n\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tfrappe.app.session_expired_dialog = dialog;\n\t\t}\n\t\tif(!frappe.app.session_expired_dialog.display) {\n\t\t\tfrappe.app.session_expired_dialog.show();\n\t\t\t// add backdrop\n\t\t\t$('.modal-backdrop').css({\n\t\t\t\t'opacity': 1,\n\t\t\t\t'background-color': '#4B4C9D'\n\t\t\t});\n\t\t}\n\t},\n\tredirect_to_login: function() {\n\t\twindow.location.href = '/';\n\t},\n\tset_favicon: function() {\n\t\tvar link = $('link[type=\"image/x-icon\"]').remove().attr(\"href\");\n\t\t$('<link rel=\"shortcut icon\" href=\"' + link + '\" type=\"image/x-icon\">').appendTo(\"head\");\n\t\t$('<link rel=\"icon\" href=\"' + link + '\" type=\"image/x-icon\">').appendTo(\"head\");\n\t},\n\n\ttrigger_primary_action: function() {\n\t\tif(window.cur_dialog && cur_dialog.display) {\n\t\t\t// trigger primary\n\t\t\tcur_dialog.get_primary_btn().trigger(\"click\");\n\t\t} else if(cur_frm && cur_frm.page.btn_primary.is(':visible')) {\n\t\t\tcur_frm.page.btn_primary.trigger('click');\n\t\t} else if(frappe.container.page.save_action) {\n\t\t\tfrappe.container.page.save_action();\n\t\t}\n\t},\n\n\tset_rtl: function() {\n\t\tif ([\"ar\", \"he\", \"fa\"].indexOf(frappe.boot.lang) >= 0) {\n\t\t\tvar ls = document.createElement('link');\n\t\t\tls.rel=\"stylesheet\";\n\t\t\tls.href= \"assets/css/frappe-rtl.css\";\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(ls);\n\t\t\t$('body').addClass('frappe-rtl');\n\t\t}\n\t},\n\n\tshow_change_log: function() {\n\t\tvar me = this;\n\t\tvar d = frappe.msgprint(\n\t\t\tfrappe.render_template(\"change_log\", {\"change_log\": frappe.boot.change_log}),\n\t\t\t__(\"Updated To New Version\")\n\t\t);\n\t\td.keep_open = true;\n\t\td.custom_onhide = function() {\n\t\t\tfrappe.call({\n\t\t\t\t\"method\": \"frappe.utils.change_log.update_last_known_versions\"\n\t\t\t});\n\t\t\tme.show_notes();\n\t\t};\n\t},\n\n\tshow_update_available: () => {\n\t\tfrappe.call({\n\t\t\t\"method\": \"frappe.utils.change_log.show_update_popup\"\n\t\t});\n\t},\n\n\tsetup_analytics: function() {\n\t\tif(window.mixpanel) {\n\t\t\twindow.mixpanel.identify(frappe.session.user);\n\t\t\twindow.mixpanel.people.set({\n\t\t\t\t\"$first_name\": frappe.boot.user.first_name,\n\t\t\t\t\"$last_name\": frappe.boot.user.last_name,\n\t\t\t\t\"$created\": frappe.boot.user.creation,\n\t\t\t\t\"$email\": frappe.session.user\n\t\t\t});\n\t\t}\n\t},\n\n\tset_fullwidth_if_enabled() {\n\t\tfrappe.ui.toolbar.set_fullwidth_if_enabled();\n\t},\n\n\tshow_notes: function() {\n\t\tvar me = this;\n\t\tif(frappe.boot.notes.length) {\n\t\t\tfrappe.boot.notes.forEach(function(note) {\n\t\t\t\tif(!note.seen || note.notify_on_every_login) {\n\t\t\t\t\tvar d = frappe.msgprint({message:note.content, title:note.title});\n\t\t\t\t\td.keep_open = true;\n\t\t\t\t\td.custom_onhide = function() {\n\t\t\t\t\t\tnote.seen = true;\n\n\t\t\t\t\t\t// Mark note as read if the Notify On Every Login flag is not set\n\t\t\t\t\t\tif (!note.notify_on_every_login) {\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: \"frappe.desk.doctype.note.note.mark_as_seen\",\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\tnote: note.name\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// next note\n\t\t\t\t\t\tme.show_notes();\n\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tsetup_build_error_listener() {\n\t\tif (frappe.boot.developer_mode) {\n\t\t\tfrappe.realtime.on('build_error', (data) => {\n\t\t\t\tconsole.log(data);\n\t\t\t});\n\t\t}\n\t},\n\n\tsetup_social_listeners() {\n\t\tfrappe.realtime.on('mention', (message) => {\n\t\t\tif (frappe.get_route()[0] !== 'social') {\n\t\t\t\tfrappe.show_alert(message);\n\t\t\t}\n\t\t});\n\t},\n\n\tsetup_energy_point_listeners() {\n\t\tfrappe.realtime.on('energy_point_alert', (message) => {\n\t\t\tfrappe.show_alert(message);\n\t\t});\n\t},\n});\n\nfrappe.get_module = function(m, default_module) {\n\tvar module = frappe.modules[m] || default_module;\n\tif (!module) {\n\t\treturn;\n\t}\n\n\tif(module._setup) {\n\t\treturn module;\n\t}\n\n\tif(module.type===\"module\" && !module.link) {\n\t\tmodule.link = \"modules/\" + module.module_name;\n\t}\n\n\tif(module.type===\"list\" && !module.link) {\n\t\tmodule.link = \"List/\" + module._doctype;\n\t}\n\n\tif (!module.link) module.link = \"\";\n\n\tif (!module._id) {\n\t\t// links can have complex values that range beyond simple plain text names, and so do not make for robust IDs.\n\t\t// an example from python: \"link\": r\"javascript:eval('window.open(\\'timetracking\\', \\'_self\\')')\"\n\t\t// this snippet allows a module to open a custom html page in the same window.\n\t\tmodule._id = module.module_name.toLowerCase();\n\t}\n\n\n\tif(!module.label) {\n\t\tmodule.label = m;\n\t}\n\n\tif(!module._label) {\n\t\tmodule._label = __(module.label);\n\t}\n\n\tif(!module._doctype) {\n\t\tmodule._doctype = '';\n\t}\n\n\tmodule._setup = true;\n\n\treturn module;\n};\n","/*!\n * Fuse.js v3.4.2 - Lightweight fuzzy-search (http://fusejs.io)\n * \n * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n * \n * http://www.apache.org/licenses/LICENSE-2.0\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Fuse\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Fuse\"] = factory();\n\telse\n\t\troot[\"Fuse\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./src/bitap/bitap_matched_indices.js\":\n/*!********************************************!*\\\n  !*** ./src/bitap/bitap_matched_indices.js ***!\n  \\********************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = function () {\n  var matchmask = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var minMatchCharLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var matchedIndices = [];\n  var start = -1;\n  var end = -1;\n  var i = 0;\n\n  for (var len = matchmask.length; i < len; i += 1) {\n    var match = matchmask[i];\n\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n\n      if (end - start + 1 >= minMatchCharLength) {\n        matchedIndices.push([start, end]);\n      }\n\n      start = -1;\n    }\n  } // (i-1 - start) + 1 => i - start\n\n\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    matchedIndices.push([start, i - 1]);\n  }\n\n  return matchedIndices;\n};\n\n/***/ }),\n\n/***/ \"./src/bitap/bitap_pattern_alphabet.js\":\n/*!*********************************************!*\\\n  !*** ./src/bitap/bitap_pattern_alphabet.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = function (pattern) {\n  var mask = {};\n  var len = pattern.length;\n\n  for (var i = 0; i < len; i += 1) {\n    mask[pattern.charAt(i)] = 0;\n  }\n\n  for (var _i = 0; _i < len; _i += 1) {\n    mask[pattern.charAt(_i)] |= 1 << len - _i - 1;\n  }\n\n  return mask;\n};\n\n/***/ }),\n\n/***/ \"./src/bitap/bitap_regex_search.js\":\n/*!*****************************************!*\\\n  !*** ./src/bitap/bitap_regex_search.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nvar SPECIAL_CHARS_REGEX = /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g;\n\nmodule.exports = function (text, pattern) {\n  var tokenSeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : / +/g;\n  var regex = new RegExp(pattern.replace(SPECIAL_CHARS_REGEX, '\\\\$&').replace(tokenSeparator, '|'));\n  var matches = text.match(regex);\n  var isMatch = !!matches;\n  var matchedIndices = [];\n\n  if (isMatch) {\n    for (var i = 0, matchesLen = matches.length; i < matchesLen; i += 1) {\n      var match = matches[i];\n      matchedIndices.push([text.indexOf(match), match.length - 1]);\n    }\n  }\n\n  return {\n    // TODO: revisit this score\n    score: isMatch ? 0.5 : 1,\n    isMatch: isMatch,\n    matchedIndices: matchedIndices\n  };\n};\n\n/***/ }),\n\n/***/ \"./src/bitap/bitap_score.js\":\n/*!**********************************!*\\\n  !*** ./src/bitap/bitap_score.js ***!\n  \\**********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = function (pattern, _ref) {\n  var _ref$errors = _ref.errors,\n      errors = _ref$errors === void 0 ? 0 : _ref$errors,\n      _ref$currentLocation = _ref.currentLocation,\n      currentLocation = _ref$currentLocation === void 0 ? 0 : _ref$currentLocation,\n      _ref$expectedLocation = _ref.expectedLocation,\n      expectedLocation = _ref$expectedLocation === void 0 ? 0 : _ref$expectedLocation,\n      _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 100 : _ref$distance;\n  var accuracy = errors / pattern.length;\n  var proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy;\n  }\n\n  return accuracy + proximity / distance;\n};\n\n/***/ }),\n\n/***/ \"./src/bitap/bitap_search.js\":\n/*!***********************************!*\\\n  !*** ./src/bitap/bitap_search.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar bitapScore = __webpack_require__(/*! ./bitap_score */ \"./src/bitap/bitap_score.js\");\n\nvar matchedIndices = __webpack_require__(/*! ./bitap_matched_indices */ \"./src/bitap/bitap_matched_indices.js\");\n\nmodule.exports = function (text, pattern, patternAlphabet, _ref) {\n  var _ref$location = _ref.location,\n      location = _ref$location === void 0 ? 0 : _ref$location,\n      _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 100 : _ref$distance,\n      _ref$threshold = _ref.threshold,\n      threshold = _ref$threshold === void 0 ? 0.6 : _ref$threshold,\n      _ref$findAllMatches = _ref.findAllMatches,\n      findAllMatches = _ref$findAllMatches === void 0 ? false : _ref$findAllMatches,\n      _ref$minMatchCharLeng = _ref.minMatchCharLength,\n      minMatchCharLength = _ref$minMatchCharLeng === void 0 ? 1 : _ref$minMatchCharLeng;\n  var expectedLocation = location; // Set starting location at beginning text and initialize the alphabet.\n\n  var textLen = text.length; // Highest score beyond which we give up.\n\n  var currentThreshold = threshold; // Is there a nearby exact match? (speedup)\n\n  var bestLocation = text.indexOf(pattern, expectedLocation);\n  var patternLen = pattern.length; // a mask of the matches\n\n  var matchMask = [];\n\n  for (var i = 0; i < textLen; i += 1) {\n    matchMask[i] = 0;\n  }\n\n  if (bestLocation !== -1) {\n    var score = bitapScore(pattern, {\n      errors: 0,\n      currentLocation: bestLocation,\n      expectedLocation: expectedLocation,\n      distance: distance\n    });\n    currentThreshold = Math.min(score, currentThreshold); // What about in the other direction? (speed up)\n\n    bestLocation = text.lastIndexOf(pattern, expectedLocation + patternLen);\n\n    if (bestLocation !== -1) {\n      var _score = bitapScore(pattern, {\n        errors: 0,\n        currentLocation: bestLocation,\n        expectedLocation: expectedLocation,\n        distance: distance\n      });\n\n      currentThreshold = Math.min(_score, currentThreshold);\n    }\n  } // Reset the best location\n\n\n  bestLocation = -1;\n  var lastBitArr = [];\n  var finalScore = 1;\n  var binMax = patternLen + textLen;\n  var mask = 1 << patternLen - 1;\n\n  for (var _i = 0; _i < patternLen; _i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    var binMin = 0;\n    var binMid = binMax;\n\n    while (binMin < binMid) {\n      var _score3 = bitapScore(pattern, {\n        errors: _i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation: expectedLocation,\n        distance: distance\n      });\n\n      if (_score3 <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    } // Use the result from this iteration as the maximum for the next.\n\n\n    binMax = binMid;\n    var start = Math.max(1, expectedLocation - binMid + 1);\n    var finish = findAllMatches ? textLen : Math.min(expectedLocation + binMid, textLen) + patternLen; // Initialize the bit array\n\n    var bitArr = Array(finish + 2);\n    bitArr[finish + 1] = (1 << _i) - 1;\n\n    for (var j = finish; j >= start; j -= 1) {\n      var currentLocation = j - 1;\n      var charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (charMatch) {\n        matchMask[currentLocation] = 1;\n      } // First pass: exact match\n\n\n      bitArr[j] = (bitArr[j + 1] << 1 | 1) & charMatch; // Subsequent passes: fuzzy match\n\n      if (_i !== 0) {\n        bitArr[j] |= (lastBitArr[j + 1] | lastBitArr[j]) << 1 | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = bitapScore(pattern, {\n          errors: _i,\n          currentLocation: currentLocation,\n          expectedLocation: expectedLocation,\n          distance: distance\n        }); // This match will almost certainly be better than any existing match.\n        // But check anyway.\n\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation; // Already passed `loc`, downhill from here on in.\n\n          if (bestLocation <= expectedLocation) {\n            break;\n          } // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n\n\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    } // No hope for a (better) match at greater error levels.\n\n\n    var _score2 = bitapScore(pattern, {\n      errors: _i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation: expectedLocation,\n      distance: distance\n    }); // console.log('score', score, finalScore)\n\n\n    if (_score2 > currentThreshold) {\n      break;\n    }\n\n    lastBitArr = bitArr;\n  } // console.log('FINAL SCORE', finalScore)\n  // Count exact matches (those with a score of 0) to be \"almost\" exact\n\n\n  return {\n    isMatch: bestLocation >= 0,\n    score: finalScore === 0 ? 0.001 : finalScore,\n    matchedIndices: matchedIndices(matchMask, minMatchCharLength)\n  };\n};\n\n/***/ }),\n\n/***/ \"./src/bitap/index.js\":\n/*!****************************!*\\\n  !*** ./src/bitap/index.js ***!\n  \\****************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar bitapRegexSearch = __webpack_require__(/*! ./bitap_regex_search */ \"./src/bitap/bitap_regex_search.js\");\n\nvar bitapSearch = __webpack_require__(/*! ./bitap_search */ \"./src/bitap/bitap_search.js\");\n\nvar patternAlphabet = __webpack_require__(/*! ./bitap_pattern_alphabet */ \"./src/bitap/bitap_pattern_alphabet.js\");\n\nvar Bitap =\n/*#__PURE__*/\nfunction () {\n  function Bitap(pattern, _ref) {\n    var _ref$location = _ref.location,\n        location = _ref$location === void 0 ? 0 : _ref$location,\n        _ref$distance = _ref.distance,\n        distance = _ref$distance === void 0 ? 100 : _ref$distance,\n        _ref$threshold = _ref.threshold,\n        threshold = _ref$threshold === void 0 ? 0.6 : _ref$threshold,\n        _ref$maxPatternLength = _ref.maxPatternLength,\n        maxPatternLength = _ref$maxPatternLength === void 0 ? 32 : _ref$maxPatternLength,\n        _ref$isCaseSensitive = _ref.isCaseSensitive,\n        isCaseSensitive = _ref$isCaseSensitive === void 0 ? false : _ref$isCaseSensitive,\n        _ref$tokenSeparator = _ref.tokenSeparator,\n        tokenSeparator = _ref$tokenSeparator === void 0 ? / +/g : _ref$tokenSeparator,\n        _ref$findAllMatches = _ref.findAllMatches,\n        findAllMatches = _ref$findAllMatches === void 0 ? false : _ref$findAllMatches,\n        _ref$minMatchCharLeng = _ref.minMatchCharLength,\n        minMatchCharLength = _ref$minMatchCharLeng === void 0 ? 1 : _ref$minMatchCharLeng;\n\n    _classCallCheck(this, Bitap);\n\n    this.options = {\n      location: location,\n      distance: distance,\n      threshold: threshold,\n      maxPatternLength: maxPatternLength,\n      isCaseSensitive: isCaseSensitive,\n      tokenSeparator: tokenSeparator,\n      findAllMatches: findAllMatches,\n      minMatchCharLength: minMatchCharLength\n    };\n    this.pattern = this.options.isCaseSensitive ? pattern : pattern.toLowerCase();\n\n    if (this.pattern.length <= maxPatternLength) {\n      this.patternAlphabet = patternAlphabet(this.pattern);\n    }\n  }\n\n  _createClass(Bitap, [{\n    key: \"search\",\n    value: function search(text) {\n      if (!this.options.isCaseSensitive) {\n        text = text.toLowerCase();\n      } // Exact match\n\n\n      if (this.pattern === text) {\n        return {\n          isMatch: true,\n          score: 0,\n          matchedIndices: [[0, text.length - 1]]\n        };\n      } // When pattern length is greater than the machine word length, just do a a regex comparison\n\n\n      var _this$options = this.options,\n          maxPatternLength = _this$options.maxPatternLength,\n          tokenSeparator = _this$options.tokenSeparator;\n\n      if (this.pattern.length > maxPatternLength) {\n        return bitapRegexSearch(text, this.pattern, tokenSeparator);\n      } // Otherwise, use Bitap algorithm\n\n\n      var _this$options2 = this.options,\n          location = _this$options2.location,\n          distance = _this$options2.distance,\n          threshold = _this$options2.threshold,\n          findAllMatches = _this$options2.findAllMatches,\n          minMatchCharLength = _this$options2.minMatchCharLength;\n      return bitapSearch(text, this.pattern, this.patternAlphabet, {\n        location: location,\n        distance: distance,\n        threshold: threshold,\n        findAllMatches: findAllMatches,\n        minMatchCharLength: minMatchCharLength\n      });\n    }\n  }]);\n\n  return Bitap;\n}(); // let x = new Bitap(\"od mn war\", {})\n// let result = x.search(\"Old Man's War\")\n// console.log(result)\n\n\nmodule.exports = Bitap;\n\n/***/ }),\n\n/***/ \"./src/helpers/deep_value.js\":\n/*!***********************************!*\\\n  !*** ./src/helpers/deep_value.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isArray = __webpack_require__(/*! ./is_array */ \"./src/helpers/is_array.js\");\n\nvar deepValue = function deepValue(obj, path, list) {\n  if (!path) {\n    // If there's no path left, we've gotten to the object we care about.\n    list.push(obj);\n  } else {\n    var dotIndex = path.indexOf('.');\n    var firstSegment = path;\n    var remaining = null;\n\n    if (dotIndex !== -1) {\n      firstSegment = path.slice(0, dotIndex);\n      remaining = path.slice(dotIndex + 1);\n    }\n\n    var value = obj[firstSegment];\n\n    if (value !== null && value !== undefined) {\n      if (!remaining && (typeof value === 'string' || typeof value === 'number')) {\n        list.push(value.toString());\n      } else if (isArray(value)) {\n        // Search each item in the array.\n        for (var i = 0, len = value.length; i < len; i += 1) {\n          deepValue(value[i], remaining, list);\n        }\n      } else if (remaining) {\n        // An object. Recurse further.\n        deepValue(value, remaining, list);\n      }\n    }\n  }\n\n  return list;\n};\n\nmodule.exports = function (obj, path) {\n  return deepValue(obj, path, []);\n};\n\n/***/ }),\n\n/***/ \"./src/helpers/is_array.js\":\n/*!*********************************!*\\\n  !*** ./src/helpers/is_array.js ***!\n  \\*********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = function (obj) {\n  return !Array.isArray ? Object.prototype.toString.call(obj) === '[object Array]' : Array.isArray(obj);\n};\n\n/***/ }),\n\n/***/ \"./src/index.js\":\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Bitap = __webpack_require__(/*! ./bitap */ \"./src/bitap/index.js\");\n\nvar deepValue = __webpack_require__(/*! ./helpers/deep_value */ \"./src/helpers/deep_value.js\");\n\nvar isArray = __webpack_require__(/*! ./helpers/is_array */ \"./src/helpers/is_array.js\");\n\nvar Fuse =\n/*#__PURE__*/\nfunction () {\n  function Fuse(list, _ref) {\n    var _ref$location = _ref.location,\n        location = _ref$location === void 0 ? 0 : _ref$location,\n        _ref$distance = _ref.distance,\n        distance = _ref$distance === void 0 ? 100 : _ref$distance,\n        _ref$threshold = _ref.threshold,\n        threshold = _ref$threshold === void 0 ? 0.6 : _ref$threshold,\n        _ref$maxPatternLength = _ref.maxPatternLength,\n        maxPatternLength = _ref$maxPatternLength === void 0 ? 32 : _ref$maxPatternLength,\n        _ref$caseSensitive = _ref.caseSensitive,\n        caseSensitive = _ref$caseSensitive === void 0 ? false : _ref$caseSensitive,\n        _ref$tokenSeparator = _ref.tokenSeparator,\n        tokenSeparator = _ref$tokenSeparator === void 0 ? / +/g : _ref$tokenSeparator,\n        _ref$findAllMatches = _ref.findAllMatches,\n        findAllMatches = _ref$findAllMatches === void 0 ? false : _ref$findAllMatches,\n        _ref$minMatchCharLeng = _ref.minMatchCharLength,\n        minMatchCharLength = _ref$minMatchCharLeng === void 0 ? 1 : _ref$minMatchCharLeng,\n        _ref$id = _ref.id,\n        id = _ref$id === void 0 ? null : _ref$id,\n        _ref$keys = _ref.keys,\n        keys = _ref$keys === void 0 ? [] : _ref$keys,\n        _ref$shouldSort = _ref.shouldSort,\n        shouldSort = _ref$shouldSort === void 0 ? true : _ref$shouldSort,\n        _ref$getFn = _ref.getFn,\n        getFn = _ref$getFn === void 0 ? deepValue : _ref$getFn,\n        _ref$sortFn = _ref.sortFn,\n        sortFn = _ref$sortFn === void 0 ? function (a, b) {\n      return a.score - b.score;\n    } : _ref$sortFn,\n        _ref$tokenize = _ref.tokenize,\n        tokenize = _ref$tokenize === void 0 ? false : _ref$tokenize,\n        _ref$matchAllTokens = _ref.matchAllTokens,\n        matchAllTokens = _ref$matchAllTokens === void 0 ? false : _ref$matchAllTokens,\n        _ref$includeMatches = _ref.includeMatches,\n        includeMatches = _ref$includeMatches === void 0 ? false : _ref$includeMatches,\n        _ref$includeScore = _ref.includeScore,\n        includeScore = _ref$includeScore === void 0 ? false : _ref$includeScore,\n        _ref$verbose = _ref.verbose,\n        verbose = _ref$verbose === void 0 ? false : _ref$verbose;\n\n    _classCallCheck(this, Fuse);\n\n    this.options = {\n      location: location,\n      distance: distance,\n      threshold: threshold,\n      maxPatternLength: maxPatternLength,\n      isCaseSensitive: caseSensitive,\n      tokenSeparator: tokenSeparator,\n      findAllMatches: findAllMatches,\n      minMatchCharLength: minMatchCharLength,\n      id: id,\n      keys: keys,\n      includeMatches: includeMatches,\n      includeScore: includeScore,\n      shouldSort: shouldSort,\n      getFn: getFn,\n      sortFn: sortFn,\n      verbose: verbose,\n      tokenize: tokenize,\n      matchAllTokens: matchAllTokens\n    };\n    this.setCollection(list);\n  }\n\n  _createClass(Fuse, [{\n    key: \"setCollection\",\n    value: function setCollection(list) {\n      this.list = list;\n      return list;\n    }\n  }, {\n    key: \"search\",\n    value: function search(pattern) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        limit: false\n      };\n\n      this._log(\"---------\\nSearch pattern: \\\"\".concat(pattern, \"\\\"\"));\n\n      var _this$_prepareSearche = this._prepareSearchers(pattern),\n          tokenSearchers = _this$_prepareSearche.tokenSearchers,\n          fullSearcher = _this$_prepareSearche.fullSearcher;\n\n      var _this$_search = this._search(tokenSearchers, fullSearcher),\n          weights = _this$_search.weights,\n          results = _this$_search.results;\n\n      this._computeScore(weights, results);\n\n      if (this.options.shouldSort) {\n        this._sort(results);\n      }\n\n      if (opts.limit && typeof opts.limit === 'number') {\n        results = results.slice(0, opts.limit);\n      }\n\n      return this._format(results);\n    }\n  }, {\n    key: \"_prepareSearchers\",\n    value: function _prepareSearchers() {\n      var pattern = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var tokenSearchers = [];\n\n      if (this.options.tokenize) {\n        // Tokenize on the separator\n        var tokens = pattern.split(this.options.tokenSeparator);\n\n        for (var i = 0, len = tokens.length; i < len; i += 1) {\n          tokenSearchers.push(new Bitap(tokens[i], this.options));\n        }\n      }\n\n      var fullSearcher = new Bitap(pattern, this.options);\n      return {\n        tokenSearchers: tokenSearchers,\n        fullSearcher: fullSearcher\n      };\n    }\n  }, {\n    key: \"_search\",\n    value: function _search() {\n      var tokenSearchers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var fullSearcher = arguments.length > 1 ? arguments[1] : undefined;\n      var list = this.list;\n      var resultMap = {};\n      var results = []; // Check the first item in the list, if it's a string, then we assume\n      // that every item in the list is also a string, and thus it's a flattened array.\n\n      if (typeof list[0] === 'string') {\n        // Iterate over every item\n        for (var i = 0, len = list.length; i < len; i += 1) {\n          this._analyze({\n            key: '',\n            value: list[i],\n            record: i,\n            index: i\n          }, {\n            resultMap: resultMap,\n            results: results,\n            tokenSearchers: tokenSearchers,\n            fullSearcher: fullSearcher\n          });\n        }\n\n        return {\n          weights: null,\n          results: results\n        };\n      } // Otherwise, the first item is an Object (hopefully), and thus the searching\n      // is done on the values of the keys of each item.\n\n\n      var weights = {};\n\n      for (var _i = 0, _len = list.length; _i < _len; _i += 1) {\n        var item = list[_i]; // Iterate over every key\n\n        for (var j = 0, keysLen = this.options.keys.length; j < keysLen; j += 1) {\n          var key = this.options.keys[j];\n\n          if (typeof key !== 'string') {\n            weights[key.name] = {\n              weight: 1 - key.weight || 1\n            };\n\n            if (key.weight <= 0 || key.weight > 1) {\n              throw new Error('Key weight has to be > 0 and <= 1');\n            }\n\n            key = key.name;\n          } else {\n            weights[key] = {\n              weight: 1\n            };\n          }\n\n          this._analyze({\n            key: key,\n            value: this.options.getFn(item, key),\n            record: item,\n            index: _i\n          }, {\n            resultMap: resultMap,\n            results: results,\n            tokenSearchers: tokenSearchers,\n            fullSearcher: fullSearcher\n          });\n        }\n      }\n\n      return {\n        weights: weights,\n        results: results\n      };\n    }\n  }, {\n    key: \"_analyze\",\n    value: function _analyze(_ref2, _ref3) {\n      var key = _ref2.key,\n          _ref2$arrayIndex = _ref2.arrayIndex,\n          arrayIndex = _ref2$arrayIndex === void 0 ? -1 : _ref2$arrayIndex,\n          value = _ref2.value,\n          record = _ref2.record,\n          index = _ref2.index;\n      var _ref3$tokenSearchers = _ref3.tokenSearchers,\n          tokenSearchers = _ref3$tokenSearchers === void 0 ? [] : _ref3$tokenSearchers,\n          _ref3$fullSearcher = _ref3.fullSearcher,\n          fullSearcher = _ref3$fullSearcher === void 0 ? [] : _ref3$fullSearcher,\n          _ref3$resultMap = _ref3.resultMap,\n          resultMap = _ref3$resultMap === void 0 ? {} : _ref3$resultMap,\n          _ref3$results = _ref3.results,\n          results = _ref3$results === void 0 ? [] : _ref3$results;\n\n      // Check if the texvaluet can be searched\n      if (value === undefined || value === null) {\n        return;\n      }\n\n      var exists = false;\n      var averageScore = -1;\n      var numTextMatches = 0;\n\n      if (typeof value === 'string') {\n        this._log(\"\\nKey: \".concat(key === '' ? '-' : key));\n\n        var mainSearchResult = fullSearcher.search(value);\n\n        this._log(\"Full text: \\\"\".concat(value, \"\\\", score: \").concat(mainSearchResult.score));\n\n        if (this.options.tokenize) {\n          var words = value.split(this.options.tokenSeparator);\n          var scores = [];\n\n          for (var i = 0; i < tokenSearchers.length; i += 1) {\n            var tokenSearcher = tokenSearchers[i];\n\n            this._log(\"\\nPattern: \\\"\".concat(tokenSearcher.pattern, \"\\\"\")); // let tokenScores = []\n\n\n            var hasMatchInText = false;\n\n            for (var j = 0; j < words.length; j += 1) {\n              var word = words[j];\n              var tokenSearchResult = tokenSearcher.search(word);\n              var obj = {};\n\n              if (tokenSearchResult.isMatch) {\n                obj[word] = tokenSearchResult.score;\n                exists = true;\n                hasMatchInText = true;\n                scores.push(tokenSearchResult.score);\n              } else {\n                obj[word] = 1;\n\n                if (!this.options.matchAllTokens) {\n                  scores.push(1);\n                }\n              }\n\n              this._log(\"Token: \\\"\".concat(word, \"\\\", score: \").concat(obj[word])); // tokenScores.push(obj)\n\n            }\n\n            if (hasMatchInText) {\n              numTextMatches += 1;\n            }\n          }\n\n          averageScore = scores[0];\n          var scoresLen = scores.length;\n\n          for (var _i2 = 1; _i2 < scoresLen; _i2 += 1) {\n            averageScore += scores[_i2];\n          }\n\n          averageScore = averageScore / scoresLen;\n\n          this._log('Token score average:', averageScore);\n        }\n\n        var finalScore = mainSearchResult.score;\n\n        if (averageScore > -1) {\n          finalScore = (finalScore + averageScore) / 2;\n        }\n\n        this._log('Score average:', finalScore);\n\n        var checkTextMatches = this.options.tokenize && this.options.matchAllTokens ? numTextMatches >= tokenSearchers.length : true;\n\n        this._log(\"\\nCheck Matches: \".concat(checkTextMatches)); // If a match is found, add the item to <rawResults>, including its score\n\n\n        if ((exists || mainSearchResult.isMatch) && checkTextMatches) {\n          // Check if the item already exists in our results\n          var existingResult = resultMap[index];\n\n          if (existingResult) {\n            // Use the lowest score\n            // existingResult.score, bitapResult.score\n            existingResult.output.push({\n              key: key,\n              arrayIndex: arrayIndex,\n              value: value,\n              score: finalScore,\n              matchedIndices: mainSearchResult.matchedIndices\n            });\n          } else {\n            // Add it to the raw result list\n            resultMap[index] = {\n              item: record,\n              output: [{\n                key: key,\n                arrayIndex: arrayIndex,\n                value: value,\n                score: finalScore,\n                matchedIndices: mainSearchResult.matchedIndices\n              }]\n            };\n            results.push(resultMap[index]);\n          }\n        }\n      } else if (isArray(value)) {\n        for (var _i3 = 0, len = value.length; _i3 < len; _i3 += 1) {\n          this._analyze({\n            key: key,\n            arrayIndex: _i3,\n            value: value[_i3],\n            record: record,\n            index: index\n          }, {\n            resultMap: resultMap,\n            results: results,\n            tokenSearchers: tokenSearchers,\n            fullSearcher: fullSearcher\n          });\n        }\n      }\n    }\n  }, {\n    key: \"_computeScore\",\n    value: function _computeScore(weights, results) {\n      this._log('\\n\\nComputing score:\\n');\n\n      for (var i = 0, len = results.length; i < len; i += 1) {\n        var output = results[i].output;\n        var scoreLen = output.length;\n        var currScore = 1;\n        var bestScore = 1;\n\n        for (var j = 0; j < scoreLen; j += 1) {\n          var weight = weights ? weights[output[j].key].weight : 1;\n          var score = weight === 1 ? output[j].score : output[j].score || 0.001;\n          var nScore = score * weight;\n\n          if (weight !== 1) {\n            bestScore = Math.min(bestScore, nScore);\n          } else {\n            output[j].nScore = nScore;\n            currScore *= nScore;\n          }\n        }\n\n        results[i].score = bestScore === 1 ? currScore : bestScore;\n\n        this._log(results[i]);\n      }\n    }\n  }, {\n    key: \"_sort\",\n    value: function _sort(results) {\n      this._log('\\n\\nSorting....');\n\n      results.sort(this.options.sortFn);\n    }\n  }, {\n    key: \"_format\",\n    value: function _format(results) {\n      var finalOutput = [];\n\n      if (this.options.verbose) {\n        var cache = [];\n\n        this._log('\\n\\nOutput:\\n\\n', JSON.stringify(results, function (key, value) {\n          if (_typeof(value) === 'object' && value !== null) {\n            if (cache.indexOf(value) !== -1) {\n              // Circular reference found, discard key\n              return;\n            } // Store value in our collection\n\n\n            cache.push(value);\n          }\n\n          return value;\n        }));\n\n        cache = null;\n      }\n\n      var transformers = [];\n\n      if (this.options.includeMatches) {\n        transformers.push(function (result, data) {\n          var output = result.output;\n          data.matches = [];\n\n          for (var i = 0, len = output.length; i < len; i += 1) {\n            var item = output[i];\n\n            if (item.matchedIndices.length === 0) {\n              continue;\n            }\n\n            var obj = {\n              indices: item.matchedIndices,\n              value: item.value\n            };\n\n            if (item.key) {\n              obj.key = item.key;\n            }\n\n            if (item.hasOwnProperty('arrayIndex') && item.arrayIndex > -1) {\n              obj.arrayIndex = item.arrayIndex;\n            }\n\n            data.matches.push(obj);\n          }\n        });\n      }\n\n      if (this.options.includeScore) {\n        transformers.push(function (result, data) {\n          data.score = result.score;\n        });\n      }\n\n      for (var i = 0, len = results.length; i < len; i += 1) {\n        var result = results[i];\n\n        if (this.options.id) {\n          result.item = this.options.getFn(result.item, this.options.id)[0];\n        }\n\n        if (!transformers.length) {\n          finalOutput.push(result.item);\n          continue;\n        }\n\n        var data = {\n          item: result.item\n        };\n\n        for (var j = 0, _len2 = transformers.length; j < _len2; j += 1) {\n          transformers[j](result, data);\n        }\n\n        finalOutput.push(data);\n      }\n\n      return finalOutput;\n    }\n  }, {\n    key: \"_log\",\n    value: function _log() {\n      if (this.options.verbose) {\n        var _console;\n\n        (_console = console).log.apply(_console, arguments);\n      }\n    }\n  }]);\n\n  return Fuse;\n}();\n\nmodule.exports = Fuse;\n\n/***/ })\n\n/******/ });\n});","!function(){\"use strict\";function e(){}function t(t,n){var o,r,i,l,a=W;for(l=arguments.length;l-- >2;)S.push(arguments[l]);n&&null!=n.children&&(S.length||S.push(n.children),delete n.children);while(S.length)if((r=S.pop())&&void 0!==r.pop)for(l=r.length;l--;)S.push(r[l]);else\"boolean\"==typeof r&&(r=null),(i=\"function\"!=typeof t)&&(null==r?r=\"\":\"number\"==typeof r?r+=\"\":\"string\"!=typeof r&&(i=!1)),i&&o?a[a.length-1]+=r:a===W?a=[r]:a.push(r),o=i;var _=new e;return _.nodeName=t,_.children=a,_.attributes=null==n?void 0:n,_.key=null==n?void 0:n.key,void 0!==M.vnode&&M.vnode(_),_}function n(e,t){for(var n in t)e[n]=t[n];return e}function o(e){!e.__d&&(e.__d=!0)&&1==A.push(e)&&(M.debounceRendering||V)(r)}function r(){var e,t=A;A=[];while(e=t.pop())e.__d&&N(e)}function i(e,t,n){return\"string\"==typeof t||\"number\"==typeof t?void 0!==e.splitText:\"string\"==typeof t.nodeName?!e._componentConstructor&&l(e,t.nodeName):n||e._componentConstructor===t.nodeName}function l(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function a(e){var t=n({},e.attributes);t.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===t[r]&&(t[r]=o[r]);return t}function _(e,t){var n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",e):document.createElement(e);return n.__n=e,n}function u(e){var t=e.parentNode;t&&t.removeChild(e)}function p(e,t,n,o,r){if(\"className\"===t&&(t=\"class\"),\"key\"===t);else if(\"ref\"===t)n&&n(null),o&&o(e);else if(\"class\"!==t||r)if(\"style\"===t){if(o&&\"string\"!=typeof o&&\"string\"!=typeof n||(e.style.cssText=o||\"\"),o&&\"object\"==typeof o){if(\"string\"!=typeof n)for(var i in n)i in o||(e.style[i]=\"\");for(var i in o)e.style[i]=\"number\"==typeof o[i]&&!1===P.test(i)?o[i]+\"px\":o[i]}}else if(\"html\"===t)o&&(e.innerHTML=o);else if(\"o\"==t[0]&&\"n\"==t[1]){var l=t!==(t=t.replace(/Capture$/,\"\"));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,s,l):e.removeEventListener(t,s,l),(e.__l||(e.__l={}))[t]=o}else if(\"list\"!==t&&\"type\"!==t&&!r&&t in e)c(e,t,null==o?\"\":o),null!=o&&!1!==o||e.removeAttribute(t);else{var a=r&&t!==(t=t.replace(/^xlink\\:?/,\"\"));null==o||!1===o?a?e.removeAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase()):e.removeAttribute(t):\"function\"!=typeof o&&(a?e.setAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||\"\"}function c(e,t,n){try{e[t]=n}catch(e){}}function s(e){return this.__l[e.type](M.event&&M.event(e)||e)}function f(){var e;while(e=E.pop())M.afterMount&&M.afterMount(e),e.on_mounted&&e.on_mounted()}function d(e,t,n,o,r,i){D++||(H=null!=r&&void 0!==r.ownerSVGElement,R=null!=e&&!(\"__hyperattr_\"in e));var l=h(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--D||(R=!1,i||f()),l}function h(e,t,n,o,r){var i=e,a=H;if(null!=t&&\"boolean\"!=typeof t||(t=\"\"),\"string\"==typeof t||\"number\"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),m(e,!0))),i.__hyperattr_=!0,i;var u=t.nodeName;if(\"function\"==typeof u)return k(e,t,n,o);if(H=\"svg\"===u||\"foreignObject\"!==u&&H,u+=\"\",(!e||!l(e,u))&&(i=_(u,H),e)){while(e.firstChild)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),m(e,!0)}var p=i.firstChild,c=i.__hyperattr_,s=t.children;if(null==c){c=i.__hyperattr_={};for(var f=i.attributes,d=f.length;d--;)c[f[d].name]=f[d].value}return!R&&s&&1===s.length&&\"string\"==typeof s[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=s[0]&&(p.nodeValue=s[0]):(s&&s.length||null!=p)&&v(i,s,n,o,R||null!=c.html),y(i,t.attributes,c),H=a,i}function v(e,t,n,o,r){var l,a,_,p,c,s=e.childNodes,f=[],d={},v=0,b=0,y=s.length,g=0,w=t?t.length:0;if(0!==y)for(var C=0;C<y;C++){var x=s[C],N=x.__hyperattr_,k=w&&N?x._component?x._component.__k:N.key:null;null!=k?(v++,d[k]=x):(N||(void 0!==x.splitText?!r||x.nodeValue.trim():r))&&(f[g++]=x)}if(0!==w)for(var C=0;C<w;C++){p=t[C],c=null;var k=p.key;if(null!=k)v&&void 0!==d[k]&&(c=d[k],d[k]=void 0,v--);else if(!c&&b<g)for(l=b;l<g;l++)if(void 0!==f[l]&&i(a=f[l],p,r)){c=a,f[l]=void 0,l===g-1&&g--,l===b&&b++;break}c=h(c,p,n,o),_=s[C],c&&c!==e&&c!==_&&(null==_?e.appendChild(c):c===_.nextSibling?u(_):e.insertBefore(c,_))}if(v)for(var C in d)void 0!==d[C]&&m(d[C],!1);while(b<=g)void 0!==(c=f[g--])&&m(c,!1)}function m(e,t){var n=e._component;n?U(n):(null!=e.__hyperattr_&&e.__hyperattr_.ref&&e.__hyperattr_.ref(null),!1!==t&&null!=e.__hyperattr_||u(e),b(e))}function b(e){e=e.lastChild;while(e){var t=e.previousSibling;m(e,!0),e=t}}function y(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||p(e,o,n[o],n[o]=void 0,H);for(o in t)\"children\"===o||\"innerHTML\"===o||o in n&&t[o]===(\"value\"===o||\"checked\"===o?e[o]:n[o])||p(e,o,n[o],n[o]=t[o],H)}function g(e){var t=e.constructor.name;(j[t]||(j[t]=[])).push(e)}function w(e,t,n){var o,r=j[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),L.call(o,t,n)):(o=new L(t,n),o.constructor=e,o.render=C),r)for(var i=r.length;i--;)if(r[i].constructor===e){o.__b=r[i].__b,r.splice(i,1);break}return o}function C(e,t,n){return this.constructor(e,n)}function x(e,t,n,r,i){e.__x||(e.__x=!0,(e.__r=t.ref)&&delete t.ref,(e.__k=t.key)&&delete t.key,!e.base||i?e.on_mount&&e.on_mount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.__c||(e.__c=e.context),e.context=r),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===M.syncComponentUpdates&&e.base?o(e):N(e,1,i)),e.__r&&e.__r(e))}function N(e,t,o,r){if(!e.__x){var i,l,_,u=e.props,p=e.state,c=e.context,s=e.__p||u,h=e.__s||p,v=e.__c||c,b=e.base,y=e.__b,g=b||y,C=e._component,k=!1;if(b&&(e.props=s,e.state=h,e.context=v,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,p,c)?k=!0:e.componentWillUpdate&&e.componentWillUpdate(u,p,c),e.props=u,e.state=p,e.context=c),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!k){i=e.render(u,p,c),e.getChildContext&&(c=n(n({},c),e.getChildContext()));var L,T,S=i&&i.nodeName;if(\"function\"==typeof S){var W=a(i);l=C,l&&l.constructor===S&&W.key==l.__k?x(l,W,1,c,!1):(L=l,e._component=l=w(S,W,c),l.__b=l.__b||y,l.__u=e,x(l,W,0,c,!1),N(l,1,o,!0)),T=l.base}else _=g,L=C,L&&(_=e._component=null),(g||1===t)&&(_&&(_._component=null),T=d(_,i,c,o||!b,g&&g.parentNode,!0));if(g&&T!==g&&l!==C){var P=g.parentNode;P&&T!==P&&(P.replaceChild(T,g),L||(g._component=null,m(g,!1)))}if(L&&U(L),e.base=T,T&&!r){var V=e,A=e;while(A=A.__u)(V=A).base=T;T._component=V,T._componentConstructor=V.constructor}}if(!b||o?E.unshift(e):k||(e.on_updated&&e.on_updated(s,h,v),M.afterUpdate&&M.afterUpdate(e)),null!=e.__h)while(e.__h.length)e.__h.pop().call(e);D||r||f()}}function k(e,t,n,o){var r=e&&e._component,i=r,l=e,_=r&&e._componentConstructor===t.nodeName,u=_,p=a(t);while(r&&!u&&(r=r.__u))u=r.constructor===t.nodeName;return r&&u&&(!o||r._component)?(x(r,p,3,n,o),e=r.base):(i&&!_&&(U(i),e=l=null),r=w(t.nodeName,p,n),e&&!r.__b&&(r.__b=e,l=null),x(r,p,1,n,o),e=r.base,l&&e!==l&&(l._component=null,m(l,!1))),e}function U(e){M.beforeUnmount&&M.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?U(n):t&&(t.__hyperattr_&&t.__hyperattr_.ref&&t.__hyperattr_.ref(null),e.__b=t,u(t),g(e),b(t)),e.__r&&e.__r(null)}function L(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{}}function T(e,t,n){return d(n,e,{},!1,t,!1)}var M={},S=[],W=[],P=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,V=\"function\"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,A=[],E=[],D=0,H=!1,R=!1,j={};n(L.prototype,{set_state:function(e,t){var r=this.state;this.__s||(this.__s=n({},r)),n(r,\"function\"==typeof e?e(r,this.props):e),t&&(this.__h=this.__h||[]).push(t),o(this)},forceUpdate:function(e){e&&(this.__h=this.__h||[]).push(e),N(this,2)},render:function(){}});var I={h:t,Component:L,render:T};\"undefined\"!=typeof module?module.exports=I:self.hyper=I}();","// Frappe Chat\n// Author - Achilles Rasquinha <achilles@frappe.io>\n\nimport Fuse   from 'fuse.js'\nimport hyper  from '../lib/hyper.min'\n\nimport './socketio_client'\n\nimport './ui/dialog'\nimport './ui/capture'\n\nimport './misc/user'\n\n/* eslint semi: \"never\" */\n// Fuck semicolons - https://mislav.net/2010/05/semicolons\n\n// frappe extensions\n\n/**\n * @description The base class for all Frappe Errors.\n *\n * @example\n * try\n *      throw new frappe.Error(\"foobar\")\n * catch (e)\n *      console.log(e.name)\n * // returns \"FrappeError\"\n *\n * @see  https://stackoverflow.com/a/32749533\n * @todo Requires \"transform-builtin-extend\" for Babel 6\n */\nfrappe.Error = Error\n// class extends Error {\n// \tconstructor (message) {\n// \t\tsuper (message)\n\n// \t\tthis.name = 'FrappeError'\n\n// \t\tif ( typeof Error.captureStackTrace === 'function' )\n// \t\t\tError.captureStackTrace(this, this.constructor)\n// \t\telse\n// \t\t\tthis.stack = (new Error(message)).stack\n// \t}\n// }\n\n/**\n * @description TypeError\n */\nfrappe.TypeError  = TypeError\n// class extends frappe.Error {\n// \tconstructor (message) {\n// \t\tsuper (message)\n\n// \t\tthis.name = this.constructor.name\n// \t}\n// }\n\n/**\n * @description ValueError\n */\nfrappe.ValueError = Error\n// class extends frappe.Error {\n// \tconstructor (message) {\n// \t\tsuper (message)\n\n// \t\tthis.name = this.constructor.name\n// \t}\n// }\n\n/**\n * @description ImportError\n */\nfrappe.ImportError = Error\n// class extends frappe.Error {\n// \tconstructor (message) {\n// \t\tsuper (message)\n\n// \t\tthis.name  = this.constructor.name\n// \t}\n// }\n\n// frappe.datetime\nfrappe.provide('frappe.datetime')\n\n/**\n * @description Frappe's datetime object. (Inspired by Python's datetime object).\n *\n * @example\n * const datetime = new frappe.datetime.datetime()\n */\nfrappe.datetime.datetime = class {\n\t/**\n\t * @description Frappe's datetime Class's constructor.\n\t */\n\tconstructor (instance, format = null) {\n\t\tif ( typeof moment === 'undefined' )\n\t\t\tthrow new frappe.ImportError(`Moment.js not installed.`)\n\n\t\tthis.moment = instance ? moment(instance, format) : moment()\n\t}\n\n\t/**\n\t * @description Returns a formatted string of the datetime object.\n\t */\n\tformat (format = null) {\n\t\tconst  formatted = this.moment.format(format)\n\t\treturn formatted\n\t}\n}\n\n/**\n * @description Frappe's daterange object.\n *\n * @example\n * const range = new frappe.datetime.range(frappe.datetime.now(), frappe.datetime.now())\n * range.contains(frappe.datetime.now())\n */\nfrappe.datetime.range   = class {\n\tconstructor (start, end) {\n\t\tif ( typeof moment === undefined )\n\t\t\tthrow new frappe.ImportError(`Moment.js not installed.`)\n\n\t\tthis.start = start\n\t\tthis.end   = end\n\t}\n\n\tcontains (datetime) {\n\t\tconst  contains = datetime.moment.isBetween(this.start.moment, this.end.moment)\n\t\treturn contains\n\t}\n}\n\n/**\n * @description Returns the current datetime.\n *\n * @example\n * const datetime = new frappe.datetime.now()\n */\nfrappe.datetime.now   = () => new frappe.datetime.datetime()\n\nfrappe.datetime.equal = (a, b, type) => {\n\ta = a.moment\n\tb = b.moment\n\n\tconst equal = a.isSame(b, type)\n\n\treturn equal\n}\n\n/**\n * @description Compares two frappe.datetime.datetime objects.\n *\n * @param   {frappe.datetime.datetime} a - A frappe.datetime.datetime/moment object.\n * @param   {frappe.datetime.datetime} b - A frappe.datetime.datetime/moment object.\n *\n * @returns {number} 0 (if a and b are equal), 1 (if a is before b), -1 (if a is after b).\n *\n * @example\n * frappe.datetime.compare(frappe.datetime.now(), frappe.datetime.now())\n * // returns 0\n * const then = frappe.datetime.now()\n *\n * frappe.datetime.compare(then, frappe.datetime.now())\n * // returns 1\n */\nfrappe.datetime.compare = (a, b) => {\n\ta = a.moment\n\tb = b.moment\n\n\tif ( a.isBefore(b) )\n\t\treturn  1\n\telse\n\tif ( b.isBefore(a) )\n\t\treturn -1\n\telse\n\t\treturn  0\n}\n\n// frappe.quick_edit\nfrappe.quick_edit      = (doctype, docname, fn) => {\n\treturn new Promise(resolve => {\n\t\tfrappe.model.with_doctype(doctype, () => {\n\t\t\tfrappe.db.get_doc(doctype, docname).then(doc  => {\n\t\t\t\tconst meta     = frappe.get_meta(doctype)\n\t\t\t\tconst fields   = meta.fields\n\t\t\t\tconst required = fields.filter(f => f.reqd || f.bold && !f.read_only)\n\n\t\t\t\trequired.map(f => {\n\t\t\t\t\tif(f.fieldname == 'content' && doc.type == 'File') {\n\t\t\t\t\t\tf['read_only'] = 1;\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tconst dialog   = new frappe.ui.Dialog({\n\t\t\t\t\t title: __(`Edit ${doctype} (${docname})`),\n\t\t\t\t\tfields: required,\n\t\t\t\t\taction: {\n\t\t\t\t\t\tprimary: {\n\t\t\t\t\t\t\t   label: __(\"Save\"),\n\t\t\t\t\t\t\tonsubmit: (values) => {\n\t\t\t\t\t\t\t\tfrappe.call('frappe.client.save',\n\t\t\t\t\t\t\t\t\t{ doc: { doctype: doctype, docname: docname, ...doc, ...values } })\n\t\t\t\t\t\t\t\t\t  .then(r => {\n\t\t\t\t\t\t\t\t\t\tif ( fn )\n\t\t\t\t\t\t\t\t\t\t\tfn(r.message)\n\n\t\t\t\t\t\t\t\t\t\tresolve(r.message)\n\t\t\t\t\t\t\t\t\t  })\n\n\t\t\t\t\t\t\t\tdialog.hide()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsecondary: {\n\t\t\t\t\t\t\tlabel: __(\"Discard\")\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tdialog.set_values(doc)\n\n\t\t\t\tconst $element = $(dialog.body)\n\t\t\t\t$element.append(`\n\t\t\t\t\t<div class=\"qe-fp\" style=\"padding-top: '15px'; padding-bottom: '15px'; padding-left: '7px'\">\n\t\t\t\t\t\t<button class=\"btn btn-default btn-sm\">\n\t\t\t\t\t\t\t${__(\"Edit in Full Page\")}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t`)\n\t\t\t\t$element.find('.qe-fp').click(() => {\n\t\t\t\t\tdialog.hide()\n\t\t\t\t\tfrappe.set_route(`Form/${doctype}/${docname}`)\n\t\t\t\t})\n\n\t\t\t\tdialog.show()\n\t\t\t})\n\t\t})\n\t})\n}\n\n// frappe._\n// frappe's utility namespace.\nfrappe.provide('frappe._')\n\n// String Utilities\n\n/**\n * @description Python-inspired format extension for string objects.\n *\n * @param  {string} string - A string with placeholders.\n * @param  {object} object - An object with placeholder, value pairs.\n *\n * @return {string}        - The formatted string.\n *\n * @example\n * frappe._.format('{foo} {bar}', { bar: 'foo', foo: 'bar' })\n * // returns \"bar foo\"\n */\nfrappe._.format = (string, object) => {\n\tfor (const key in object)\n\t\tstring  = string.replace(`{${key}}`, object[key])\n\n\treturn string\n}\n\n/**\n * @description Fuzzy Search a given query within a dataset.\n *\n * @param  {string} query   - A query string.\n * @param  {array}  dataset - A dataset to search within, can contain singletons or objects.\n * @param  {object} options - Options as per fuze.js\n *\n * @return {array}          - The fuzzy matched index/object within the dataset.\n *\n * @example\n * frappe._.fuzzy_search(\"foobar\", [\"foobar\", \"bartender\"])\n * // returns [0, 1]\n *\n * @see http://fusejs.io\n */\nfrappe._.fuzzy_search = (query, dataset, options) => {\n\tconst DEFAULT     = {\n\t\t\t\tshouldSort: true,\n\t\t\t\t threshold: 0.6,\n\t\t\t\t  location: 0,\n\t\t\t\t  distance: 100,\n\t\tminMatchCharLength: 1,\n\t\t  maxPatternLength: 32\n\t}\n\toptions       = { ...DEFAULT, ...options }\n\n\tconst fuse    = new Fuse(dataset, options)\n\tconst result  = fuse.search(query)\n\n\treturn result\n}\n\n/**\n * @description Pluralizes a given word.\n *\n * @param  {string} word  - The word to be pluralized.\n * @param  {number} count - The count.\n *\n * @return {string}       - The pluralized string.\n *\n * @example\n * frappe._.pluralize('member',  1)\n * // returns \"member\"\n * frappe._.pluralize('members', 0)\n * // returns \"members\"\n *\n * @todo Handle more edge cases.\n */\nfrappe._.pluralize = (word, count = 0, suffix = 's') => `${word}${count === 1 ? '' : suffix}`\n\n/**\n * @description Captializes a given string.\n *\n * @param   {word}  - The word to be capitalized.\n *\n * @return {string} - The capitalized word.\n *\n * @example\n * frappe._.capitalize('foobar')\n * // returns \"Foobar\"\n */\nfrappe._.capitalize = word => `${word.charAt(0).toUpperCase()}${word.slice(1)}`\n\n// Array Utilities\n\n/**\n * @description Returns the first element of an array.\n *\n * @param   {array} array - The array.\n *\n * @returns - The first element of an array, undefined elsewise.\n *\n * @example\n * frappe._.head([1, 2, 3])\n * // returns 1\n * frappe._.head([])\n * // returns undefined\n */\nfrappe._.head = arr => frappe._.is_empty(arr) ? undefined : arr[0]\n\n/**\n * @description Returns a copy of the given array (shallow).\n *\n * @param   {array} array - The array to be copied.\n *\n * @returns {array}       - The copied array.\n *\n * @example\n * frappe._.copy_array([\"foobar\", \"barfoo\"])\n * // returns [\"foobar\", \"barfoo\"]\n *\n * @todo Add optional deep copy.\n */\nfrappe._.copy_array = array => {\n\tif ( Array.isArray(array) )\n\t\treturn array.slice()\n\telse\n\t\tthrow frappe.TypeError(`Expected Array, recieved ${typeof array} instead.`)\n}\n\n/**\n * @description Check whether an array|string|object|jQuery is empty.\n *\n * @param   {any}     value - The value to be checked on.\n *\n * @returns {boolean}       - Returns if the object is empty.\n *\n * @example\n * frappe._.is_empty([])      // returns true\n * frappe._.is_empty([\"foo\"]) // returns false\n *\n * frappe._.is_empty(\"\")      // returns true\n * frappe._.is_empty(\"foo\")   // returns false\n *\n * frappe._.is_empty({ })            // returns true\n * frappe._.is_empty({ foo: \"bar\" }) // returns false\n *\n * frappe._.is_empty($('.papito'))   // returns false\n *\n * @todo Handle other cases.\n */\nfrappe._.is_empty = value => {\n\tlet empty = false\n\n\tif ( value === undefined || value === null )\n\t\tempty = true\n\telse\n\tif ( Array.isArray(value) || typeof value === 'string' || value instanceof $ )\n\t\tempty = value.length === 0\n\telse\n\tif ( typeof value === 'object' )\n\t\tempty = Object.keys(value).length === 0\n\n\treturn empty\n}\n\n/**\n * @description Converts a singleton to an array, if required.\n *\n * @param {object} item - An object\n *\n * @example\n * frappe._.as_array(\"foo\")\n * // returns [\"foo\"]\n *\n * frappe._.as_array([\"foo\"])\n * // returns [\"foo\"]\n *\n * @see https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList-T...-\n */\nfrappe._.as_array = item => Array.isArray(item) ? item : [item]\n\n/**\n * @description Return a singleton if array contains a single element.\n *\n * @param   {array}        list - An array to squash.\n *\n * @returns {array|object}      - Returns an array if there's more than 1 object else the first object itself.\n *\n * @example\n * frappe._.squash([\"foo\"])\n * // returns \"foo\"\n *\n * frappe._.squash([\"foo\", \"bar\"])\n * // returns [\"foo\", \"bar\"]\n */\nfrappe._.squash = list => Array.isArray(list) && list.length === 1 ? list[0] : list\n\n/**\n * @description Returns true, if the current device is a mobile device.\n *\n * @example\n * frappe._.is_mobile()\n * // returns true|false\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\n */\nfrappe._.is_mobile = () => {\n\tconst regex    = new RegExp(\"Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini\", \"i\")\n\tconst agent    = navigator.userAgent\n\tconst mobile   = regex.test(agent)\n\n\treturn mobile\n}\n\n/**\n * @description Removes falsey values from an array.\n *\n * @example\n * frappe._.compact([1, 2, false, NaN, ''])\n * // returns [1, 2]\n */\nfrappe._.compact   = array => array.filter(Boolean)\n\n// extend utils to base.\nfrappe.utils       = { ...frappe.utils, ...frappe._ }\n\n// frappe extensions\n\n// frappe.user extensions\n/**\n * @description Returns the first name of a User.\n *\n * @param {string} user - User\n *\n * @returns The first name of the user.\n *\n * @example\n * frappe.user.first_name(\"Rahul Malhotra\")\n * // returns \"Rahul\"\n */\nfrappe.provide('frappe.user')\nfrappe.user.first_name = user => frappe._.head(frappe.user.full_name(user).split(\" \"))\n\nfrappe.provide('frappe.ui.keycode')\nfrappe.ui.keycode = { RETURN: 13 }\n\n/**\n * @description Frappe's Store Class\n */\n // frappe.stores  - A registry for frappe stores.\nfrappe.provide('frappe.stores')\nfrappe.stores = [ ]\nfrappe.Store  = class\n{\n\t/**\n\t * @description Frappe's Store Class's constructor.\n\t *\n\t * @param {string} name - Name of the logger.\n\t */\n\tconstructor (name) {\n\t\tif ( typeof name !== 'string' )\n\t\t\tthrow new frappe.TypeError(`Expected string for name, got ${typeof name} instead.`)\n\t\tthis.name = name\n\t}\n\n\t/**\n\t * @description Get instance of frappe.Store (return registered one if declared).\n\t *\n\t * @param {string} name - Name of the store.\n\t */\n\tstatic get (name) {\n\t\tif ( !(name in frappe.stores) )\n\t\t\tfrappe.stores[name] = new frappe.Store(name)\n\t\treturn frappe.stores[name]\n\t}\n\n\tset (key, value) { localStorage.setItem(`${this.name}:${key}`, value) }\n\tget (key, value) { return localStorage.getItem(`${this.name}:${key}`) }\n}\n\n// frappe.loggers - A registry for frappe loggers.\nfrappe.provide('frappe.loggers')\n/**\n * @description Frappe's Logger Class\n *\n * @example\n * frappe.log       = frappe.Logger.get('foobar')\n * frappe.log.level = frappe.Logger.DEBUG\n *\n * frappe.log.info('foobar')\n * // prints '[timestamp] foobar: foobar'\n */\nfrappe.Logger = class {\n\t/**\n\t * @description Frappe's Logger Class's constructor.\n\t *\n\t * @param {string} name - Name of the logger.\n\t */\n\tconstructor (name, level) {\n\t\tif ( typeof name !== 'string' )\n\t\t\tthrow new frappe.TypeError(`Expected string for name, got ${typeof name} instead.`)\n\n\t\tthis.name   = name\n\t\tthis.level  = level\n\n\t\tif ( !this.level ) {\n\t\t\tif ( frappe.boot.developer_mode )\n\t\t\t\tthis.level = frappe.Logger.ERROR\n\t\t\telse\n\t\t\t\tthis.level = frappe.Logger.NOTSET\n\t\t}\n\t\tthis.format = frappe.Logger.FORMAT\n\t}\n\n\t/**\n\t * @description Get instance of frappe.Logger (return registered one if declared).\n\t *\n\t * @param {string} name - Name of the logger.\n\t */\n\tstatic get (name, level) {\n\t\tif ( !(name in frappe.loggers) )\n\t\t\tfrappe.loggers[name] = new frappe.Logger(name, level)\n\t\treturn frappe.loggers[name]\n\t}\n\n\tdebug (message) { this.log(message, frappe.Logger.DEBUG) }\n\tinfo  (message) { this.log(message, frappe.Logger.INFO)  }\n\twarn  (message) { this.log(message, frappe.Logger.WARN)  }\n\terror (message) { this.log(message, frappe.Logger.ERROR) }\n\n\tlog (message, level) {\n\t\tconst timestamp   = frappe.datetime.now()\n\n\t\tif ( level.value <= this.level.value ) {\n\t\t\tconst format  = frappe._.format(this.format, {\n\t\t\t\ttime: timestamp.format('HH:mm:ss'),\n\t\t\t\tname: this.name\n\t\t\t})\n\t\t\tconsole.log(`%c ${format}:`, `color: ${level.color}`, message)\n\t\t}\n\t}\n}\n\nfrappe.Logger.DEBUG  = { value: 10, color: '#616161', name: 'DEBUG'  }\nfrappe.Logger.INFO   = { value: 20, color: '#2196F3', name: 'INFO'   }\nfrappe.Logger.WARN   = { value: 30, color: '#FFC107', name: 'WARN'   }\nfrappe.Logger.ERROR  = { value: 40, color: '#F44336', name: 'ERROR'  }\nfrappe.Logger.NOTSET = { value:  0,                   name: 'NOTSET' }\n\nfrappe.Logger.FORMAT = '{time} {name}'\n\n// frappe.chat\nfrappe.provide('frappe.chat')\n\nfrappe.log = frappe.Logger.get('frappe.chat', frappe.Logger.NOTSET)\n\n// frappe.chat.profile\nfrappe.provide('frappe.chat.profile')\n\n/**\n * @description Create a Chat Profile.\n *\n * @param   {string|array} fields - (Optional) fields to be retrieved after creating a Chat Profile.\n * @param   {function}     fn     - (Optional) callback with the returned Chat Profile.\n *\n * @returns {Promise}\n *\n * @example\n * frappe.chat.profile.create(console.log)\n *\n * frappe.chat.profile.create(\"status\").then(console.log) // { status: \"Online\" }\n */\nfrappe.chat.profile.create = (fields, fn) => {\n\tif ( typeof fields === \"function\" ) {\n\t\tfn     = fields\n\t\tfields = null\n\t} else\n\tif ( typeof fields === \"string\" )\n\t\tfields = frappe._.as_array(fields)\n\n\treturn new Promise(resolve => {\n\t\tfrappe.call(\"frappe.chat.doctype.chat_profile.chat_profile.create\",\n\t\t\t{ user: frappe.session.user, exists_ok: true, fields: fields },\n\t\t\t\tresponse => {\n\t\t\t\t\tif ( fn )\n\t\t\t\t\t\tfn(response.message)\n\n\t\t\t\t\tresolve(response.message)\n\t\t\t\t})\n\t})\n}\n\n/**\n * @description Updates a Chat Profile.\n *\n * @param   {string} user   - (Optional) Chat Profile User, defaults to session user.\n * @param   {object} update - (Required) Updates to be dispatched.\n *\n * @example\n * frappe.chat.profile.update(frappe.session.user, { \"status\": \"Offline\" })\n */\nfrappe.chat.profile.update = (user, update, fn) => {\n\treturn new Promise(resolve => {\n\t\tfrappe.call(\"frappe.chat.doctype.chat_profile.chat_profile.update\",\n\t\t\t{ user: user || frappe.session.user, data: update },\n\t\t\t\tresponse => {\n\t\t\t\t\tif ( fn )\n\t\t\t\t\t\tfn(response.message)\n\n\t\t\t\t\tresolve(response.message)\n\t\t\t\t})\n\t})\n}\n\n// frappe.chat.profile.on\nfrappe.provide('frappe.chat.profile.on')\n\n/**\n * @description Triggers on a Chat Profile update of a user (Only if there's a one-on-one conversation).\n *\n * @param   {function} fn - (Optional) callback with the User and the Chat Profile update.\n *\n * @returns {Promise}\n *\n * @example\n * frappe.chat.profile.on.update(function (user, update)\n * {\n *      // do stuff\n * })\n */\nfrappe.chat.profile.on.update = function (fn) {\n\tfrappe.realtime.on(\"frappe.chat.profile:update\", r => fn(r.user, r.data))\n}\nfrappe.chat.profile.STATUSES\n=\n[\n\t{\n\t\tname: \"Online\",\n\t   color: \"green\"\n\t},\n\t{\n\t\t name: \"Away\",\n\t\tcolor: \"yellow\"\n\t},\n\t{\n\t\t name: \"Busy\",\n\t\tcolor: \"red\"\n\t},\n\t{\n\t\t name: \"Offline\",\n\t\tcolor: \"darkgrey\"\n\t}\n]\n\n// frappe.chat.room\nfrappe.provide('frappe.chat.room')\n\n/**\n * @description Creates a Chat Room.\n *\n * @param   {string}       kind  - (Required) \"Direct\", \"Group\" or \"Visitor\".\n * @param   {string}       owner - (Optional) Chat Room owner (defaults to current user).\n * @param   {string|array} users - (Required for \"Direct\" and \"Visitor\", Optional for \"Group\") User(s) within Chat Room.\n * @param   {string}       name  - Chat Room name.\n * @param   {function}     fn    - callback with created Chat Room.\n *\n * @returns {Promise}\n *\n * @example\n * frappe.chat.room.create(\"Direct\", frappe.session.user, \"foo@bar.com\", function (room) {\n *      // do stuff\n * })\n * frappe.chat.room.create(\"Group\",  frappe.session.user, [\"santa@gmail.com\", \"banta@gmail.com\"], \"Santa and Banta\", function (room) {\n *      // do stuff\n * })\n */\nfrappe.chat.room.create = function (kind, owner, users, name, fn) {\n\tif ( typeof name === \"function\" ) {\n\t\tfn   = name\n\t\tname = null\n\t}\n\n\tusers    = frappe._.as_array(users)\n\n\treturn new Promise(resolve => {\n\t\tfrappe.call(\"frappe.chat.doctype.chat_room.chat_room.create\",\n\t\t\t{ kind: kind, owner: owner || frappe.session.user, users: users, name: name },\n\t\t\tr => {\n\t\t\t\tlet room = r.message\n\t\t\t\troom     = { ...room, creation: new frappe.datetime.datetime(room.creation) }\n\n\t\t\t\tif ( fn )\n\t\t\t\t\tfn(room)\n\n\t\t\t\tresolve(room)\n\t\t\t})\n\t})\n}\n\n/**\n * @description Returns Chat Room(s).\n *\n * @param   {string|array} names   - (Optional) Chat Room(s) to retrieve.\n * @param   {string|array} fields  - (Optional) fields to be retrieved for each Chat Room.\n * @param   {function}     fn      - (Optional) callback with the returned Chat Room(s).\n *\n * @returns {Promise}\n *\n * @example\n * frappe.chat.room.get(function (rooms) {\n *      // do stuff\n * })\n * frappe.chat.room.get().then(function (rooms) {\n *      // do stuff\n * })\n *\n * frappe.chat.room.get(null, [\"room_name\", \"avatar\"], function (rooms) {\n *      // do stuff\n * })\n *\n * frappe.chat.room.get(\"CR00001\", \"room_name\", function (room) {\n *      // do stuff\n * })\n *\n * frappe.chat.room.get([\"CR00001\", \"CR00002\"], [\"room_name\", \"last_message\"], function (rooms) {\n *\n * })\n */\nfrappe.chat.room.get = function (names, fields, fn) {\n\tif ( typeof names === \"function\" ) {\n\t\tfn     = names\n\t\tnames  = null\n\t\tfields = null\n\t}\n\telse\n\tif ( typeof names === \"string\" ) {\n\t\tnames  = frappe._.as_array(names)\n\n\t\tif ( typeof fields === \"function\" ) {\n\t\t\tfn     = fields\n\t\t\tfields = null\n\t\t}\n\t\telse\n\t\tif ( typeof fields === \"string\" )\n\t\t\tfields = frappe._.as_array(fields)\n\t}\n\n\treturn new Promise(resolve => {\n\t\tfrappe.call(\"frappe.chat.doctype.chat_room.chat_room.get\",\n\t\t\t{ user: frappe.session.user, rooms: names, fields: fields },\n\t\t\t\tresponse => {\n\t\t\t\t\tlet rooms = response.message\n\t\t\t\t\tif ( rooms ) { // frappe.api BOGZ! (emtpy arrays are falsified, not good design).\n\t\t\t\t\t\trooms = frappe._.as_array(rooms)\n\t\t\t\t\t\trooms = rooms.map(room => {\n\t\t\t\t\t\t\treturn { ...room, creation: new frappe.datetime.datetime(room.creation),\n\t\t\t\t\t\t\t\tlast_message: room.last_message ? {\n\t\t\t\t\t\t\t\t\t...room.last_message,\n\t\t\t\t\t\t\t\t\tcreation: new frappe.datetime.datetime(room.last_message.creation)\n\t\t\t\t\t\t\t\t} : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\trooms = frappe._.squash(rooms)\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\trooms = [ ]\n\n\t\t\t\t\tif ( fn )\n\t\t\t\t\t\tfn(rooms)\n\n\t\t\t\t\tresolve(rooms)\n\t\t\t\t})\n\t})\n}\n\n/**\n * @description Subscribe current user to said Chat Room(s).\n *\n * @param {string|array} rooms - Chat Room(s).\n *\n * @example\n * frappe.chat.room.subscribe(\"CR00001\")\n */\nfrappe.chat.room.subscribe = function (rooms) {\n\tfrappe.realtime.publish(\"frappe.chat.room:subscribe\", rooms)\n}\n\n/**\n * @description Get Chat Room history.\n *\n * @param   {string} name - Chat Room name\n *\n * @returns {Promise}     - Chat Message(s)\n *\n * @example\n * frappe.chat.room.history(function (messages)\n * {\n *      // do stuff.\n * })\n */\nfrappe.chat.room.history = function (name, fn) {\n\treturn new Promise(resolve => {\n\t\tfrappe.call(\"frappe.chat.doctype.chat_room.chat_room.history\",\n\t\t\t{ room: name, user: frappe.session.user },\n\t\t\t\tr => {\n\t\t\t\t\tlet messages = r.message ? frappe._.as_array(r.message) : [ ] // frappe.api BOGZ! (emtpy arrays are falsified, not good design).\n\t\t\t\t\tmessages     = messages.map(m => {\n\t\t\t\t\t\treturn { ...m,\n\t\t\t\t\t\t\tcreation: new frappe.datetime.datetime(m.creation)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\tif ( fn )\n\t\t\t\t\t\tfn(messages)\n\n\t\t\t\t\tresolve(messages)\n\t\t\t\t})\n\t})\n}\n\n/**\n * @description Searches Rooms based on a query.\n *\n * @param   {string} query - The query string.\n * @param   {array}  rooms - A list of Chat Rooms.\n *\n * @returns {array}        - A fuzzy searched list of rooms.\n */\nfrappe.chat.room.search = function (query, rooms) {\n\tconst dataset = rooms.map(r => {\n\t\tif ( r.room_name )\n\t\t\treturn r.room_name\n\t\telse\n\t\t\tif ( r.owner === frappe.session.user )\n\t\t\t\treturn frappe.user.full_name(frappe._.squash(r.users))\n\t\t\telse\n\t\t\t\treturn frappe.user.full_name(r.owner)\n\t})\n\tconst results = frappe._.fuzzy_search(query, dataset)\n\trooms         = results.map(i => rooms[i])\n\n\treturn rooms\n}\n\n/**\n * @description Sort Chat Room(s) based on Last Message Timestamp or Creation Date.\n *\n * @param {array}   - A list of Chat Room(s)\n * @param {compare} - (Optional) a comparision function.\n */\nfrappe.chat.room.sort = function (rooms, compare = null) {\n\tcompare = compare || function (a, b) {\n\t\tif ( a.last_message && b.last_message )\n\t\t\treturn frappe.datetime.compare(a.last_message.creation, b.last_message.creation)\n\t\telse\n\t\tif ( a.last_message )\n\t\t\treturn frappe.datetime.compare(a.last_message.creation, b.creation)\n\t\telse\n\t\tif ( b.last_message )\n\t\t\treturn frappe.datetime.compare(a.creation, b.last_message.creation)\n\t\telse\n\t\t\treturn frappe.datetime.compare(a.creation, b.creation)\n\t}\n\trooms.sort(compare)\n\n\treturn rooms\n}\n\n// frappe.chat.room.on\nfrappe.provide('frappe.chat.room.on')\n\n/**\n * @description Triggers on Chat Room updated.\n *\n * @param {function} fn - callback with the Chat Room and Update.\n */\nfrappe.chat.room.on.update = function (fn) {\n\tfrappe.realtime.on(\"frappe.chat.room:update\", r => {\n\t\tif ( r.data.last_message )\n\t\t\t// creation to frappe.datetime.datetime (easier to manipulate).\n\t\t\tr.data = { ...r.data, last_message: { ...r.data.last_message, creation: new frappe.datetime.datetime(r.data.last_message.creation) } }\n\n\t\tfn(r.room, r.data)\n\t})\n}\n\n/**\n * @description Triggers on Chat Room created.\n *\n * @param {function} fn - callback with the created Chat Room.\n */\nfrappe.chat.room.on.create = function (fn) {\n\tfrappe.realtime.on(\"frappe.chat.room:create\", r =>\n\t\tfn({ ...r, creation: new frappe.datetime.datetime(r.creation) })\n\t)\n}\n\n/**\n * @description Triggers when a User is typing in a Chat Room.\n *\n * @param {function} fn - callback with the typing User within the Chat Room.\n */\nfrappe.chat.room.on.typing = function (fn) {\n\tfrappe.realtime.on(\"frappe.chat.room:typing\", r => fn(r.room, r.user))\n}\n\n// frappe.chat.message\nfrappe.provide('frappe.chat.message')\n\nfrappe.chat.message.typing = function (room, user) {\n\tfrappe.realtime.publish(\"frappe.chat.message:typing\", { user: user || frappe.session.user, room: room })\n}\n\nfrappe.chat.message.send   = function (room, message, type = \"Content\") {\n\tfrappe.call(\"frappe.chat.doctype.chat_message.chat_message.send\",\n\t\t{ user: frappe.session.user, room: room, content: message, type: type })\n}\n\nfrappe.chat.message.update = function (message, update, fn) {\n\treturn new Promise(resolve => {\n\t\tfrappe.call('frappe.chat.doctype.chat_message.chat_message.update',\n\t\t\t{ user: frappe.session.user, message: message, update: update },\n\t\t\tr =>  {\n\t\t\t\tif ( fn )\n\t\t\t\t\tfn(response.message)\n\n\t\t\t\tresolve(response.message)\n\t\t\t})\n\t})\n}\n\nfrappe.chat.message.sort   = (messages) => {\n\tif ( !frappe._.is_empty(messages) )\n\t\tmessages.sort((a, b) => frappe.datetime.compare(b.creation, a.creation))\n\n\treturn messages\n}\n\n/**\n * @description Add user to seen (defaults to session.user)\n */\nfrappe.chat.message.seen   = (mess, user) => {\n\tfrappe.call('frappe.chat.doctype.chat_message.chat_message.seen',\n\t\t{ message: mess, user: user || frappe.session.user })\n}\n\nfrappe.provide('frappe.chat.message.on')\nfrappe.chat.message.on.create = function (fn) {\n\tfrappe.realtime.on(\"frappe.chat.message:create\", r =>\n\t\tfn({ ...r, creation: new frappe.datetime.datetime(r.creation) })\n\t)\n}\n\nfrappe.chat.message.on.update = function (fn) {\n\tfrappe.realtime.on(\"frappe.chat.message:update\", r => fn(r.message, r.data))\n}\n\nfrappe.chat.pretty_datetime   = function (date) {\n\tconst today    = moment()\n\tconst instance = date.moment\n\n\tif ( today.isSame(instance, \"d\") )\n\t\treturn instance.format(\"hh:mm A\")\n\telse\n\tif ( today.isSame(instance, \"week\") )\n\t\treturn instance.format(\"dddd\")\n\telse\n\t\treturn instance.format(\"DD/MM/YYYY\")\n}\n\n// frappe.chat.sound\nfrappe.provide('frappe.chat.sound')\n\n/**\n * @description Plays a given registered sound.\n *\n * @param {value} - The name of the registered sound.\n *\n * @example\n * frappe.chat.sound.play(\"message\")\n */\nfrappe.chat.sound.play  = function (name, volume = 0.1) {\n\t// frappe._.play_sound(`chat-${name}`)\n\tconst $audio = $(`<audio class=\"chat-audio\"/>`)\n\t$audio.attr('volume', volume)\n\n\tif  ( frappe._.is_empty($audio) )\n\t\t$(document).append($audio)\n\n\tif  ( !$audio.paused ) {\n\t\tfrappe.log.info('Stopping sound playing.')\n\t\t$audio[0].pause()\n\t\t$audio.attr('currentTime', 0)\n\t}\n\n\tfrappe.log.info('Playing sound.')\n\t$audio.attr('src', `${frappe.chat.sound.PATH}/chat-${name}.mp3`)\n\t$audio[0].play()\n}\nfrappe.chat.sound.PATH  = '/assets/frappe/sounds'\n\n// frappe.chat.emoji\nfrappe.chat.emojis = [ ]\nfrappe.chat.emoji  = function (fn) {\n\treturn new Promise(resolve => {\n\t\tif ( !frappe._.is_empty(frappe.chat.emojis) ) {\n\t\t\tif ( fn )\n\t\t\t\tfn(frappe.chat.emojis)\n\n\t\t\tresolve(frappe.chat.emojis)\n\t\t}\n\t\telse\n\t\t\t$.get('https://cdn.rawgit.com/frappe/emoji/master/emoji', (data) => {\n\t\t\t\tfrappe.chat.emojis = JSON.parse(data)\n\n\t\t\t\tif ( fn )\n\t\t\t\t\tfn(frappe.chat.emojis)\n\n\t\t\t\tresolve(frappe.chat.emojis)\n\t\t\t})\n\t})\n}\n\n// Website Settings\nfrappe.provide('frappe.chat.website.settings')\nfrappe.chat.website.settings = (fields, fn) =>\n{\n\tif ( typeof fields === \"function\" ) {\n\t\tfn     = fields\n\t\tfields = null\n\t} else\n\tif ( typeof fields === \"string\" )\n\t\tfields = frappe._.as_array(fields)\n\n\treturn new Promise(resolve => {\n\t\tfrappe.call(\"frappe.chat.website.settings\",\n\t\t\t{ fields: fields })\n\t\t\t.then(response => {\n\t\t\t\tvar message = response.message\n\n\t\t\t\tif ( message.enable_from )\n\t\t\t\t\tmessage   = { ...message, enable_from: new frappe.datetime.datetime(message.enable_from, 'HH:mm:ss') }\n\t\t\t\tif ( message.enable_to )\n\t\t\t\t\tmessage   = { ...message, enable_to:   new frappe.datetime.datetime(message.enable_to,   'HH:mm:ss') }\n\n\t\t\t\tif ( fn )\n\t\t\t\t\tfn(message)\n\n\t\t\t\tresolve(message)\n\t\t\t})\n\t})\n}\n\nfrappe.chat.website.token    = (fn) =>\n{\n\treturn new Promise(resolve => {\n\t\tfrappe.call(\"frappe.chat.website.token\")\n\t\t\t.then(response => {\n\t\t\t\tif ( fn )\n\t\t\t\t\tfn(response.message)\n\n\t\t\t\tresolve(response.message)\n\t\t\t})\n\t})\n}\n\nconst { h, Component } = hyper\n\n// frappe.components\n// frappe's component namespace.\nfrappe.provide('frappe.components')\n\nfrappe.provide('frappe.chat.component')\n\n/**\n * @description Button Component\n *\n * @prop {string}  type  - (Optional) \"default\", \"primary\", \"info\", \"success\", \"warning\", \"danger\" (defaults to \"default\")\n * @prop {boolean} block - (Optional) Render a button block (defaults to false).\n */\nfrappe.components.Button\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props } = this\n\t\tconst size      = frappe.components.Button.SIZE[props.size]\n\n\t\treturn (\n\t\t\th(\"button\", { ...props, class: `btn ${size && size.class} btn-${props.type} ${props.block ? \"btn-block\" : \"\"} ${props.class ? props.class : \"\"}` },\n\t\t\t\tprops.children\n\t\t\t)\n\t\t)\n\t}\n}\nfrappe.components.Button.SIZE\n=\n{\n\tsmall: {\n\t\tclass: \"btn-sm\"\n\t},\n\tlarge: {\n\t\tclass: \"btn-lg\"\n\t}\n}\nfrappe.components.Button.defaultProps\n=\n{\n\t type: \"default\",\n\tblock: false\n}\n\n/**\n * @description FAB Component\n *\n * @extends frappe.components.Button\n */\nfrappe.components.FAB\n=\nclass extends frappe.components.Button {\n\trender ( ) {\n\t\tconst { props } = this\n\t\tconst size      = frappe.components.FAB.SIZE[props.size]\n\n\t\treturn (\n\t\t\th(frappe.components.Button, { ...props, class: `${props.class} ${size && size.class}`},\n\t\t\t\th(\"i\", { class: props.icon })\n\t\t\t)\n\t\t)\n\t}\n}\nfrappe.components.FAB.defaultProps\n=\n{\n\ticon: \"octicon octicon-plus\"\n}\nfrappe.components.FAB.SIZE\n=\n{\n\tsmall:\n\t{\n\t\tclass: \"frappe-fab-sm\"\n\t},\n\tlarge:\n\t{\n\t\tclass: \"frappe-fab-lg\"\n\t}\n}\n\n/**\n * @description Octicon Component\n *\n * @prop color - (Required) color for the indicator\n */\nfrappe.components.Indicator\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props } = this\n\n\t\treturn props.color ? h(\"span\", { ...props, class: `indicator ${props.color}` }) : null\n\t}\n}\n\n/**\n * @description FontAwesome Component\n */\nfrappe.components.FontAwesome\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props } = this\n\n\t\treturn props.type ? h(\"i\", { ...props, class: `fa ${props.fixed ? \"fa-fw\" : \"\"} fa-${props.type} ${props.class}` }) : null\n\t}\n}\nfrappe.components.FontAwesome.defaultProps\n=\n{\n\tfixed: false\n}\n\n/**\n * @description Octicon Component\n *\n * @extends frappe.Component\n */\nfrappe.components.Octicon\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props } = this\n\n\t\treturn props.type ? h(\"i\", { ...props, class: `octicon octicon-${props.type}` }) : null\n\t}\n}\n\n/**\n * @description Avatar Component\n *\n * @prop {string} title - (Optional) title for the avatar.\n * @prop {string} abbr  - (Optional) abbreviation for the avatar, defaults to the first letter of the title.\n * @prop {string} size  - (Optional) size of the avatar to be displayed.\n * @prop {image}  image - (Optional) image for the avatar, defaults to the first letter of the title.\n */\nfrappe.components.Avatar\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props } = this\n\t\tconst abbr      = props.abbr || props.title.substr(0, 1)\n\t\tconst size      = frappe.components.Avatar.SIZE[props.size] || frappe.components.Avatar.SIZE.medium\n\n\t\treturn (\n\t\t\th(\"span\", { class: `avatar ${size.class} ${props.class ? props.class : \"\"}` },\n\t\t\t\tprops.image ?\n\t\t\t\t\th(\"img\", { class: \"media-object\", src: props.image })\n\t\t\t\t\t:\n\t\t\t\t\th(\"div\", { class: \"standard-image\" }, abbr)\n\t\t\t)\n\t\t)\n\t}\n}\nfrappe.components.Avatar.SIZE\n=\n{\n\tsmall:\n\t{\n\t\tclass: \"avatar-small\"\n\t},\n\tlarge:\n\t{\n\t\tclass: \"avatar-large\"\n\t},\n\tmedium:\n\t{\n\t\tclass: \"avatar-medium\"\n\t}\n}\n\n/**\n * @description Frappe Chat Object.\n *\n * @example\n * const chat = new frappe.Chat(options) // appends to \"body\"\n * chat.render()\n * const chat = new frappe.Chat(\".selector\", options)\n * chat.render()\n *\n * const chat = new frappe.Chat()\n * chat.set_wrapper('.selector')\n *     .set_options(options)\n *     .render()\n */\nfrappe.Chat\n=\nclass {\n\t/**\n\t * @description Frappe Chat Object.\n\t *\n\t * @param {string} selector - A query selector, HTML Element or jQuery object.\n\t * @param {object} options  - Optional configurations.\n\t */\n\tconstructor (selector, options) {\n\t\tif ( !(typeof selector === \"string\" || selector instanceof $ || selector instanceof HTMLElement) ) {\n\t\t\toptions  = selector\n\t\t\tselector = null\n\t\t}\n\n\t\tthis.options = frappe.Chat.OPTIONS\n\n\t\tthis.set_wrapper(selector ? selector : \"body\")\n\t\tthis.set_options(options)\n\n\t\t// Load Emojis.\n\t\tfrappe.chat.emoji()\n\t}\n\n\t/**\n\t * Set the container on which the chat widget is mounted on.\n\t * @param   {string|HTMLElement} selector - A query selector, HTML Element or jQuery object.\n\t *\n\t * @returns {frappe.Chat}                 - The instance.\n\t *\n\t * @example\n\t * const chat = new frappe.Chat()\n\t * chat.set_wrapper(\".selector\")\n\t */\n\tset_wrapper (selector) {\n\t\tthis.$wrapper = $(selector)\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Set the configurations for the chat interface.\n\t * @param   {object}      options - Optional Configurations.\n\t *\n\t * @returns {frappe.Chat}         - The instance.\n\t *\n\t * @example\n\t * const chat = new frappe.Chat()\n\t * chat.set_options({ layout: frappe.Chat.Layout.PAGE })\n\t */\n\tset_options (options) {\n\t\tthis.options = { ...this.options, ...options }\n\n\t\treturn this\n\t}\n\n\t/**\n\t * @description Destory the chat widget.\n\t *\n\t * @returns {frappe.Chat} - The instance.\n\t *\n\t * @example\n\t * const chat = new frappe.Chat()\n\t * chat.render()\n\t *     .destroy()\n\t */\n\tdestroy ( ) {\n\t\tconst $wrapper = this.$wrapper\n\t\t$wrapper.remove(\".frappe-chat\")\n\n\t\treturn this\n\t}\n\n\t/**\n\t * @description Render the chat widget component onto destined wrapper.\n\t *\n\t * @returns {frappe.Chat} - The instance.\n\t *\n\t * @example\n\t * const chat = new frappe.Chat()\n\t * chat.render()\n\t */\n\trender (props = { }) {\n\t\tthis.destroy()\n\n\t\tconst $wrapper   = this.$wrapper\n\t\tconst options    = this.options\n\n\t\tconst component  = h(frappe.Chat.Widget, {\n\t\t\tlayout: options.layout,\n\t\t\ttarget: options.target,\n\t\t\t...props\n\t\t})\n\n\t\thyper.render(component, $wrapper[0])\n\n\t\treturn this\n\t}\n}\nfrappe.Chat.Layout\n=\n{\n\tPAGE: \"page\", POPPER: \"popper\"\n}\nfrappe.Chat.OPTIONS\n=\n{\n\tlayout: frappe.Chat.Layout.POPPER\n}\n\n/**\n * @description The base Component for Frappe Chat\n */\nfrappe.Chat.Widget\n=\nclass extends Component {\n\tconstructor (props) {\n\t\tsuper (props)\n\n\t\tthis.setup(props)\n\t\tthis.make()\n\t}\n\n\tsetup (props) {\n\t\t// room actions\n\t\tthis.room           = { }\n\t\tthis.room.add       = rooms => {\n\t\t\trooms           = frappe._.as_array(rooms)\n\t\t\tconst names     = rooms.map(r => r.name)\n\n\t\t\tfrappe.log.info(`Subscribing ${frappe.session.user} to Chat Rooms ${names.join(\", \")}.`)\n\t\t\tfrappe.chat.room.subscribe(names)\n\n\t\t\tconst state     = [ ]\n\n\t\t\tfor (const room of rooms)\n\t\t\t\tif ( [\"Group\", \"Visitor\"].includes(room.type) || room.owner === frappe.session.user || room.last_message ) {\n\t\t\t\t\tfrappe.log.info(`Adding ${room.name} to component.`)\n\t\t\t\t\tstate.push(room)\n\t\t\t\t}\n\n\t\t\tthis.set_state({ rooms: [ ...this.state.rooms, ...state ] })\n\t\t}\n\t\tthis.room.update    = (room, update) => {\n\t\t\tconst { state } = this\n\t\t\tvar   exists    = false\n\t\t\tconst rooms     = state.rooms.map(r => {\n\t\t\t\tif ( r.name === room ) {\n\t\t\t\t\texists  = true\n\t\t\t\t\tif ( update.typing ) {\n\t\t\t\t\t\tif ( !frappe._.is_empty(r.typing) ) {\n\t\t\t\t\t\t\tconst usr = update.typing\n\t\t\t\t\t\t\tif ( !r.typing.includes(usr) ) {\n\t\t\t\t\t\t\t\tupdate.typing = frappe._.copy_array(r.typing)\n\t\t\t\t\t\t\t\tupdate.typing.push(usr)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tupdate.typing = frappe._.as_array(update.typing)\n\t\t\t\t\t}\n\n\t\t\t\t\treturn { ...r, ...update }\n\t\t\t\t}\n\n\t\t\t\treturn r\n\t\t\t})\n\n\t\t\tif ( frappe.session.user !== 'Guest' ) {\n\t\t\t\tif ( !exists )\n\t\t\t\t\tfrappe.chat.room.get(room, (room) => this.room.add(room))\n\t\t\t\telse\n\t\t\t\t\tthis.set_state({ rooms })\n\t\t\t}\n\n\t\t\tif ( state.room.name === room ) {\n\t\t\t\tif ( update.typing ) {\n\t\t\t\t\tif ( !frappe._.is_empty(state.room.typing) ) {\n\t\t\t\t\t\tconst usr = update.typing\n\t\t\t\t\t\tif ( !state.room.typing.includes(usr) ) {\n\t\t\t\t\t\t\tupdate.typing = frappe._.copy_array(state.room.typing)\n\t\t\t\t\t\t\tupdate.typing.push(usr)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else\n\t\t\t\t\t\tupdate.typing = frappe._.as_array(update.typing)\n\t\t\t\t}\n\n\t\t\t\tconst room  = { ...state.room, ...update }\n\n\t\t\t\tthis.set_state({ room })\n\t\t\t}\n\t\t}\n\t\tthis.room.select    = (name) => {\n\t\t\tfrappe.chat.room.history(name, (messages) => {\n\t\t\t\tconst  { state } = this\n\t\t\t\tconst room       = state.rooms.find(r => r.name === name)\n\n\t\t\t\tthis.set_state({\n\t\t\t\t\troom: { ...state.room, ...room, messages: messages }\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\tthis.state = { ...frappe.Chat.Widget.defaultState, ...props }\n\t}\n\n\tmake ( ) {\n\t\tif ( frappe.session.user !== 'Guest' ) {\n\t\t\tfrappe.chat.profile.create([\n\t\t\t\t\"status\", \"message_preview\", \"notification_tones\", \"conversation_tones\"\n\t\t\t]).then(profile => {\n\t\t\t\tthis.set_state({ profile })\n\n\t\t\t\tfrappe.chat.room.get(rooms => {\n\t\t\t\t\trooms = frappe._.as_array(rooms)\n\t\t\t\t\tfrappe.log.info(`User ${frappe.session.user} is subscribed to ${rooms.length} ${frappe._.pluralize('room', rooms.length)}.`)\n\n\t\t\t\t\tif ( !frappe._.is_empty(rooms) )\n\t\t\t\t\t\tthis.room.add(rooms)\n\t\t\t\t})\n\n\t\t\t\tthis.bind()\n\t\t\t})\n\t\t} else {\n\t\t\tthis.bind()\n\t\t}\n\t}\n\n\tbind ( ) {\n\t\tfrappe.chat.profile.on.update((user, update) => {\n\t\t\tfrappe.log.warn(`TRIGGER: Chat Profile update ${JSON.stringify(update)} of User ${user}.`)\n\n\t\t\tif ( 'status' in update ) {\n\t\t\t\tif ( user === frappe.session.user ) {\n\t\t\t\t\tthis.set_state({\n\t\t\t\t\t\tprofile: { ...this.state.profile, status: update.status }\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tconst status = frappe.chat.profile.STATUSES.find(s => s.name === update.status)\n\t\t\t\t\tconst color  = status.color\n\n\t\t\t\t\tconst alert  = `<span class=\"indicator ${color}\"/> ${frappe.user.full_name(user)} is currently <b>${update.status}</b>`\n\t\t\t\t\tfrappe.show_alert(alert, 3)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tfrappe.chat.room.on.create((room) => {\n\t\t\tfrappe.log.warn(`TRIGGER: Chat Room ${room.name} created.`)\n\t\t\tthis.room.add(room)\n\t\t})\n\n\t\tfrappe.chat.room.on.update((room, update) => {\n\t\t\tfrappe.log.warn(`TRIGGER: Chat Room ${room} update ${JSON.stringify(update)} recieved.`)\n\t\t\tthis.room.update(room, update)\n\t\t})\n\n\t\tfrappe.chat.room.on.typing((room, user) => {\n\t\t\tif ( user !== frappe.session.user ) {\n\t\t\t\tfrappe.log.warn(`User ${user} typing in Chat Room ${room}.`)\n\t\t\t\tthis.room.update(room, { typing: user })\n\n\t\t\t\tsetTimeout(() => this.room.update(room, { typing: null }), 5000)\n\t\t\t}\n\t\t})\n\n\t\tfrappe.chat.message.on.create((r) => {\n\t\t\tconst { state } = this\n\n\t\t\t// play sound.\n\t\t\tif ( state.room.name )\n\t\t\t\tstate.profile.conversation_tones && frappe.chat.sound.play('message')\n\t\t\telse\n\t\t\t\tstate.profile.notification_tones && frappe.chat.sound.play('notification')\n\n\t\t\tif ( r.user !== frappe.session.user && state.profile.message_preview && !state.toggle ) {\n\t\t\t\tconst $element = $('body').find('.frappe-chat-alert')\n\t\t\t\t$element.remove()\n\n\t\t\t\tconst  alert   = // TODO: ellipses content\n\t\t\t\t`\n\t\t\t\t<span data-action=\"show-message\" class=\"cursor-pointer\">\n\t\t\t\t\t<span class=\"indicator yellow\"/> <b>${frappe.user.first_name(r.user)}</b>: ${r.content}\n\t\t\t\t</span>\n\t\t\t\t`\n\t\t\t\tfrappe.show_alert(alert, 3, {\n\t\t\t\t\t\"show-message\": function (r) {\n\t\t\t\t\t\tthis.room.select(r.room)\n\t\t\t\t\t\tthis.base.firstChild._component.toggle()\n\t\t\t\t\t}.bind(this, r)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif ( r.room === state.room.name ) {\n\t\t\t\tconst mess  = frappe._.copy_array(state.room.messages)\n\t\t\t\tmess.push(r)\n\n\t\t\t\tthis.set_state({ room: { ...state.room, messages: mess } })\n\t\t\t}\n\t\t})\n\n\t\tfrappe.chat.message.on.update((message, update) => {\n\t\t\tfrappe.log.warn(`TRIGGER: Chat Message ${message} update ${JSON.stringify(update)} recieved.`)\n\t\t})\n\t}\n\n\trender ( ) {\n\t\tconst { props, state } = this\n\t\tconst me               = this\n\n\t\tconst ActionBar        = h(frappe.Chat.Widget.ActionBar, {\n\t\t\tplaceholder: __(\"Search or Create a New Chat\"),\n\t\t\t\t  class: \"level\",\n\t\t\t\t layout: props.layout,\n\t\t\t\tactions:\n\t\t\tfrappe._.compact([\n\t\t\t\t{\n\t\t\t\t\t  label: __(\"New\"),\n\t\t\t\t\tonclick: function ( ) {\n\t\t\t\t\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\t\t\t\t\t  title: __(\"New Chat\"),\n\t\t\t\t\t\t\t fields: [\n\t\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\t\t\t label: __(\"Chat Type\"),\n\t\t\t\t\t\t\t\t\t fieldname: \"type\",\n\t\t\t\t\t\t\t\t\t fieldtype: \"Select\",\n\t\t\t\t\t\t\t\t\t   options: [\"Group\", \"Direct Chat\"],\n\t\t\t\t\t\t\t\t\t   default: \"Group\",\n\t\t\t\t\t\t\t\t\t  onchange: () =>  {\n\t\t\t\t\t\t\t\t\t\t\tconst type     = dialog.get_value(\"type\")\n\t\t\t\t\t\t\t\t\t\t\tconst is_group = type === \"Group\"\n\n\t\t\t\t\t\t\t\t\t\t\tdialog.set_df_property(\"group_name\", \"reqd\",  is_group)\n\t\t\t\t\t\t\t\t\t\t\tdialog.set_df_property(\"user\",       \"reqd\", !is_group)\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\t\t\t label: __(\"Group Name\"),\n\t\t\t\t\t\t\t\t\t fieldname: \"group_name\",\n\t\t\t\t\t\t\t\t\t fieldtype: \"Data\",\n\t\t\t\t\t\t\t\t\t\t  reqd: true,\n\t\t\t\t\t\t\t\t\tdepends_on: \"eval:doc.type == 'Group'\"\n\t\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\t\t\t label: __(\"Users\"),\n\t\t\t\t\t\t\t\t\t fieldname: \"users\",\n\t\t\t\t\t\t\t\t\t fieldtype: \"MultiSelect\",\n\t\t\t\t\t\t\t\t\t   options: frappe.user.get_emails(),\n\t\t\t\t\t\t\t\t\tdepends_on: \"eval:doc.type == 'Group'\"\n\t\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\t\t\t label: __(\"User\"),\n\t\t\t\t\t\t\t\t\t fieldname: \"user\",\n\t\t\t\t\t\t\t\t\t fieldtype: \"Link\",\n\t\t\t\t\t\t\t\t\t   options: \"User\",\n\t\t\t\t\t\t\t\t\tdepends_on: \"eval:doc.type == 'Direct Chat'\"\n\t\t\t\t\t\t\t\t }\n\t\t\t\t\t\t\t ],\n\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\tprimary: {\n\t\t\t\t\t\t\t\t\t   label: __('Create'),\n\t\t\t\t\t\t\t\t\tonsubmit: (values) => {\n\t\t\t\t\t\t\t\t\t\tif ( values.type === \"Group\" ) {\n\t\t\t\t\t\t\t\t\t\t\tif ( !frappe._.is_empty(values.users) ) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst name  = values.group_name\n\t\t\t\t\t\t\t\t\t\t\t\tconst users = dialog.fields_dict.users.get_values()\n\n\t\t\t\t\t\t\t\t\t\t\t\tfrappe.chat.room.create(\"Group\",  null, users, name)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tconst user      = values.user\n\n\t\t\t\t\t\t\t\t\t\t\tfrappe.chat.room.create(\"Direct\", null, user)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdialog.hide()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tdialog.show()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfrappe._.is_mobile() && {\n\t\t\t\t\t   icon: \"octicon octicon-x\",\n\t\t\t\t\t   class: \"frappe-chat-close\",\n\t\t\t\t\tonclick: () => this.set_state({ toggle: false })\n\t\t\t\t}\n\t\t\t], Boolean),\n\t\t\tchange: query => { me.set_state({ query }) },\n\t\t\t  span: span  => { me.set_state({ span  }) },\n\t\t})\n\n\t\tvar   contacts   = [ ]\n\t\tif ( 'user_info' in frappe.boot ) {\n\t\t\tconst emails = frappe.user.get_emails()\n\t\t\tfor (const email of emails) {\n\t\t\t\tvar exists = false\n\n\t\t\t\tfor (const room of state.rooms) {\n\t\t\t\t\tif ( room.type === 'Direct' ) {\n\t\t\t\t\t\tif ( room.owner === email || frappe._.squash(room.users) === email )\n\t\t\t\t\t\t\texists = true\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( !exists )\n\t\t\t\t\tcontacts.push({ owner: frappe.session.user, users: [email] })\n\t\t\t}\n\t\t}\n\t\tconst rooms      = state.query ? frappe.chat.room.search(state.query, state.rooms.concat(contacts)) : frappe.chat.room.sort(state.rooms)\n\n\t\tconst layout     = state.span  ? frappe.Chat.Layout.PAGE : frappe.Chat.Layout.POPPER\n\n\t\tconst RoomList   = frappe._.is_empty(rooms) && !state.query ?\n\t\t\th(\"div\", { class: \"vcenter\" },\n\t\t\t\th(\"div\", { class: \"text-center text-extra-muted\" },\n\t\t\t\t\th(\"p\",\"\",__(\"You don't have any messages yet.\"))\n\t\t\t\t)\n\t\t\t)\n\t\t\t:\n\t\t\th(frappe.Chat.Widget.RoomList, { rooms: rooms, click: room =>  {\n\t\t\t\tif ( room.name )\n\t\t\t\t\tthis.room.select(room.name)\n\t\t\t\telse\n\t\t\t\t\tfrappe.chat.room.create(\"Direct\", room.owner, frappe._.squash(room.users), ({ name }) => this.room.select(name))\n\t\t\t}})\n\t\tconst Room       = h(frappe.Chat.Widget.Room, { ...state.room, layout: layout, destroy: () => {\n\t\t\tthis.set_state({\n\t\t\t\troom: { name: null, messages: [ ] }\n\t\t\t})\n\t\t}})\n\n\t\tconst component  = layout === frappe.Chat.Layout.POPPER ?\n\t\t\th(frappe.Chat.Widget.Popper, { heading: ActionBar, page: state.room.name && Room, target: props.target,\n\t\t\t\ttoggle: (t) => this.set_state({ toggle: t }) },\n\t\t\t\tRoomList\n\t\t\t)\n\t\t\t:\n\t\t\th(\"div\", { class: \"frappe-chat-popper\" },\n\t\t\t\th(\"div\", { class: \"frappe-chat-popper-collapse\" },\n\t\t\t\t\th(\"div\", { class: \"panel panel-default panel-span\", style: { width: \"25%\" } },\n\t\t\t\t\t\th(\"div\", { class: \"panel-heading\" },\n\t\t\t\t\t\t\tActionBar\n\t\t\t\t\t\t),\n\t\t\t\t\t\tRoomList\n\t\t\t\t\t),\n\t\t\t\t\tRoom\n\t\t\t\t)\n\t\t\t)\n\n\t\treturn (\n\t\t\th(\"div\", { class: \"frappe-chat\" },\n\t\t\t\tcomponent\n\t\t\t)\n\t\t)\n\t}\n}\nfrappe.Chat.Widget.defaultState =  {\n\t  query: \"\",\n\tprofile: { },\n\t  rooms: [ ],\n\t   room: { name: null, messages: [ ], typing: [ ] },\n\t toggle: false,\n\t   span: false\n}\nfrappe.Chat.Widget.defaultProps = {\n\tlayout: frappe.Chat.Layout.POPPER\n}\n\n/**\n * @description Chat Widget Popper HOC.\n */\nfrappe.Chat.Widget.Popper\n=\nclass extends Component {\n\tconstructor (props) {\n\t\tsuper (props)\n\n\t\tthis.setup(props);\n\t}\n\n\tsetup (props) {\n\t\tthis.toggle = this.toggle.bind(this)\n\n\t\tthis.state  = frappe.Chat.Widget.Popper.defaultState\n\n\t\tif ( props.target )\n\t\t\t$(props.target).click(() => this.toggle())\n\n\t\tfrappe.chat.widget = this\n\t}\n\n\ttoggle  (active) {\n\t\tlet toggle\n\t\tif ( arguments.length === 1 )\n\t\t\ttoggle = active\n\t\telse\n\t\t\ttoggle = this.state.active ? false : true\n\n\t\tthis.set_state({ active: toggle })\n\n\t\tthis.props.toggle(toggle)\n\t}\n\n\ton_mounted ( ) {\n\t\t$(document.body).on('click', '.page-container, .frappe-chat-close', ({ currentTarget }) => {\n\t\t\tthis.toggle(false)\n\t\t})\n\t}\n\n\trender  ( )  {\n\t\tconst { props, state } = this\n\n\t\treturn !state.destroy ?\n\t\t(\n\t\t\th(\"div\", { class: \"frappe-chat-popper\", style: !props.target ? { \"margin-bottom\": \"80px\" } : null },\n\t\t\t\t!props.target ?\n\t\t\t\t\th(frappe.components.FAB, {\n\t\t\t\t\t\t  class: \"frappe-fab\",\n\t\t\t\t\t\t   icon: state.active ? \"fa fa-fw fa-times\" : \"font-heavy octicon octicon-comment\",\n\t\t\t\t\t\t   size: frappe._.is_mobile() ? null : \"large\",\n\t\t\t\t\t\t   type: \"primary\",\n\t\t\t\t\t\tonclick: () => this.toggle(),\n\t\t\t\t\t}) : null,\n\t\t\t\tstate.active ?\n\t\t\t\t\th(\"div\", { class: \"frappe-chat-popper-collapse\" },\n\t\t\t\t\t\tprops.page ? props.page : (\n\t\t\t\t\t\t\th(\"div\", { class: `panel panel-default ${frappe._.is_mobile() ? \"panel-span\" : \"\"}` },\n\t\t\t\t\t\t\t\th(\"div\", { class: \"panel-heading\" },\n\t\t\t\t\t\t\t\t\tprops.heading\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tprops.children\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t) : null\n\t\t\t)\n\t\t) : null\n\t}\n}\nfrappe.Chat.Widget.Popper.defaultState\n=\n{\n\t active: false,\n\tdestroy: false\n}\n\n/**\n * @description frappe.Chat.Widget ActionBar Component\n */\nfrappe.Chat.Widget.ActionBar\n=\nclass extends Component {\n\tconstructor (props) {\n\t\tsuper (props)\n\n\t\tthis.change = this.change.bind(this)\n\t\tthis.submit = this.submit.bind(this)\n\n\t\tthis.state  = frappe.Chat.Widget.ActionBar.defaultState\n\t}\n\n\tchange (e) {\n\t\tconst { props, state } = this\n\n\t\tthis.set_state({\n\t\t\t[e.target.name]: e.target.value\n\t\t})\n\n\t\tprops.change(state.query)\n\t}\n\n\tsubmit (e) {\n\t\tconst { props, state } = this\n\n\t\te.preventDefault()\n\n\t\tprops.submit(state.query)\n\t}\n\n\trender ( ) {\n\t\tconst me               = this\n\t\tconst { props, state } = this\n\t\tconst { actions }      = props\n\n\t\treturn (\n\t\t\th(\"div\", { class: `frappe-chat-action-bar ${props.class ? props.class : \"\"}` },\n\t\t\t\th(\"form\", { oninput: this.change, onsubmit: this.submit },\n\t\t\t\t\th(\"input\", { autocomplete: \"off\", class: \"form-control input-sm\", name: \"query\", value: state.query, placeholder: props.placeholder || \"Search\" }),\n\t\t\t\t),\n\t\t\t\t!frappe._.is_empty(actions) ?\n\t\t\t\t\tactions.map(action => h(frappe.Chat.Widget.ActionBar.Action, { ...action })) : null,\n\t\t\t\t!frappe._.is_mobile() ?\n\t\t\t\t\th(frappe.Chat.Widget.ActionBar.Action, {\n\t\t\t\t\t\ticon: `octicon octicon-screen-${state.span ? \"normal\" : \"full\"}`,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tconst span = !state.span\n\t\t\t\t\t\t\tme.set_state({ span })\n\t\t\t\t\t\t\tprops.span(span)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t:\n\t\t\t\t\tnull\n\t\t\t)\n\t\t)\n\t}\n}\nfrappe.Chat.Widget.ActionBar.defaultState\n=\n{\n\tquery: null,\n\t span: false\n}\n\n/**\n * @description frappe.Chat.Widget ActionBar's Action Component.\n */\nfrappe.Chat.Widget.ActionBar.Action\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props } = this\n\n\t\treturn (\n\t\t\th(frappe.components.Button, { size: \"small\", class: \"btn-action\", ...props },\n\t\t\t\tprops.icon ? h(\"i\", { class: props.icon }) : null,\n\t\t\t\t`${props.icon ? \" \" : \"\"}${props.label ? props.label : \"\"}`\n\t\t\t)\n\t\t)\n\t}\n}\n\n/**\n * @description frappe.Chat.Widget RoomList Component\n */\nfrappe.Chat.Widget.RoomList\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props } = this\n\t\tconst rooms     = props.rooms\n\n\t\treturn !frappe._.is_empty(rooms) ? (\n\t\t\th(\"ul\", { class: \"frappe-chat-room-list nav nav-pills nav-stacked\" },\n\t\t\t\trooms.map(room => h(frappe.Chat.Widget.RoomList.Item, { ...room, click: props.click }))\n\t\t\t)\n\t\t) : null\n\t}\n}\n\n/**\n * @description frappe.Chat.Widget RoomList's Item Component\n */\nfrappe.Chat.Widget.RoomList.Item\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props }    = this\n\t\tconst item         = { }\n\n\t\tif ( props.type === \"Group\" ) {\n\t\t\titem.title     = props.room_name\n\t\t\titem.image     = props.avatar\n\n\t\t\tif ( !frappe._.is_empty(props.typing) ) {\n\t\t\t\tprops.typing  = frappe._.as_array(props.typing) // HACK: (BUG) why does typing return a string?\n\t\t\t\tconst names   = props.typing.map(user => frappe.user.first_name(user))\n\t\t\t\titem.subtitle = `${names.join(\", \")} typing...`\n\t\t\t} else\n\t\t\tif ( props.last_message ) {\n\t\t\t\tconst message = props.last_message\n\t\t\t\tconst content = message.content\n\n\t\t\t\tif ( message.type === \"File\" ) {\n\t\t\t\t\titem.subtitle = ` ${content.name}`\n\t\t\t\t} else {\n\t\t\t\t\titem.subtitle = props.last_message.content\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst user     = props.owner === frappe.session.user ? frappe._.squash(props.users) : props.owner\n\n\t\t\titem.title     = frappe.user.full_name(user)\n\t\t\titem.image     = frappe.user.image(user)\n\t\t\titem.abbr      = frappe.user.abbr(user)\n\n\t\t\tif ( !frappe._.is_empty(props.typing) )\n\t\t\t\titem.subtitle = 'typing...'\n\t\t\telse\n\t\t\tif ( props.last_message ) {\n\t\t\t\tconst message = props.last_message\n\t\t\t\tconst content = message.content\n\n\t\t\t\tif ( message.type === \"File\" ) {\n\t\t\t\t\titem.subtitle = ` ${content.name}`\n\t\t\t\t} else {\n\t\t\t\t\titem.subtitle = props.last_message.content\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet is_unread = false\n\t\tif ( props.last_message ) {\n\t\t\titem.timestamp = frappe.chat.pretty_datetime(props.last_message.creation)\n\t\t\tis_unread = !props.last_message.seen.includes(frappe.session.user)\n\t\t}\n\n\t\treturn (\n\t\t\th(\"li\", null,\n\t\t\t\th(\"a\", { class: props.active ? \"active\": \"\", onclick: () => {\n\t\t\t\t\tif (props.last_message) {\n\t\t\t\t\t\tfrappe.chat.message.seen(props.last_message.name);\n\t\t\t\t\t}\n\t\t\t\t\tprops.click(props)\n\t\t\t\t} },\n\t\t\t\t\th(\"div\", { class: \"row\" },\n\t\t\t\t\t\th(\"div\", { class: \"col-xs-9\" },\n\t\t\t\t\t\t\th(frappe.Chat.Widget.MediaProfile, { ...item })\n\t\t\t\t\t\t),\n\t\t\t\t\t\th(\"div\", { class: \"col-xs-3 text-right\" },\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\th(\"div\", { class: \"text-muted\", style: { \"font-size\": \"9px\" } }, item.timestamp),\n\t\t\t\t\t\t\t\tis_unread ? h(\"span\", { class: \"indicator red\" }) : null\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t),\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t}\n}\n\n/**\n * @description frappe.Chat.Widget's MediProfile Component.\n */\nfrappe.Chat.Widget.MediaProfile\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props } = this\n\t\tconst position  = frappe.Chat.Widget.MediaProfile.POSITION[props.position || \"left\"]\n\t\tconst avatar    = (\n\t\t\th(\"div\", { class: `${position.class} media-middle` },\n\t\t\t\th(frappe.components.Avatar, { ...props,\n\t\t\t\t\ttitle: props.title,\n\t\t\t\t\timage: props.image,\n\t\t\t\t\t size: props.size,\n\t\t\t\t\t abbr: props.abbr\n\t\t\t\t})\n\t\t\t)\n\t\t)\n\n\t\treturn (\n\t\t\th(\"div\", { class: \"media\", style: position.class === \"media-right\" ? { \"text-align\": \"right\" } : null },\n\t\t\t\tposition.class === \"media-left\"  ? avatar : null,\n\t\t\t\th(\"div\", { class: \"media-body\" },\n\t\t\t\t\th(\"div\", { class: \"media-heading ellipsis small\", style: `max-width: ${props.width_title || \"100%\"} display: inline-block` }, props.title),\n\t\t\t\t\tprops.content  ? h(\"div\",\"\",h(\"small\",\"\",props.content))  : null,\n\t\t\t\t\tprops.subtitle ? h(\"div\",{ class: \"media-subtitle small\" },h(\"small\", { class: \"text-muted\" }, props.subtitle)) : null\n\t\t\t\t),\n\t\t\t\tposition.class === \"media-right\" ? avatar : null\n\t\t\t)\n\t\t)\n\t}\n}\nfrappe.Chat.Widget.MediaProfile.POSITION\n=\n{\n\tleft: { class: \"media-left\" }, right: { class: \"media-right\" }\n}\n\n/**\n * @description frappe.Chat.Widget Room Component\n */\nfrappe.Chat.Widget.Room\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props, state } = this\n\t\tconst hints            =\n\t\t[\n\t\t\t{\n\t\t\t\t match: /@(\\w*)$/,\n\t\t\t\tsearch: function (keyword, callback) {\n\t\t\t\t\tif ( props.type === 'Group' ) {\n\t\t\t\t\t\tconst query = keyword.slice(1)\n\t\t\t\t\t\tconst users = [].concat(frappe._.as_array(props.owner), props.users)\n\t\t\t\t\t\tconst grep  = users.filter(user => user !== frappe.session.user && user.indexOf(query) === 0)\n\n\t\t\t\t\t\tcallback(grep)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomponent: function (item) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\th(frappe.Chat.Widget.MediaProfile, {\n\t\t\t\t\t\t\ttitle: frappe.user.full_name(item),\n\t\t\t\t\t\t\timage: frappe.user.image(item),\n\t\t\t\t\t\t\t size: \"small\"\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tmatch: /:([a-z]*)$/,\n\t\t\t   search: function (keyword, callback) {\n\t\t\t\t\tfrappe.chat.emoji(function (emojis) {\n\t\t\t\t\t\tconst query = keyword.slice(1)\n\t\t\t\t\t\tconst items = [ ]\n\t\t\t\t\t\tfor (const emoji of emojis)\n\t\t\t\t\t\t\tfor (const alias of emoji.aliases)\n\t\t\t\t\t\t\t\tif ( alias.indexOf(query) === 0 )\n\t\t\t\t\t\t\t\t\titems.push({ name: alias, value: emoji.emoji })\n\n\t\t\t\t\t\tcallback(items)\n\t\t\t\t\t})\n\t\t\t   },\n\t\t\t\t content: (item) => item.value,\n\t\t\t   component: function (item) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\th(frappe.Chat.Widget.MediaProfile, {\n\t\t\t\t\t\t\ttitle: item.name,\n\t\t\t\t\t\t\t abbr: item.value,\n\t\t\t\t\t\t\t size: \"small\"\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t   }\n\t\t   }\n\t\t]\n\n\t\tconst actions = frappe._.compact([\n\t\t\t!frappe._.is_mobile() && {\n\t\t\t\t icon: \"camera\",\n\t\t\t\tlabel: \"Camera\",\n\t\t\t\tonclick: ( ) => {\n\t\t\t\t\tconst capture = new frappe.ui.Capture({\n\t\t\t\t\t\tanimate: false,\n\t\t\t\t\t\t  error: true\n\t\t\t\t\t})\n\t\t\t\t\tcapture.show()\n\n\t\t\t\t\tcapture.submit(data_url => {\n\t\t\t\t\t\t// data_url\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t icon: \"file\",\n\t\t\t\tlabel: \"File\",\n\t\t\t\tonclick: ( ) => {\n\t\t\t\t\tnew frappe.ui.FileUploader({\n\t\t\t\t\t\tdoctype: \"Chat Room\",\n\t\t\t\t\t\tdocname: props.name,\n\t\t\t\t\t\ton_success(file_doc) {\n\t\t\t\t\t\t\tconst { file_url, filename } = file_doc\n\t\t\t\t\t\t\tfrappe.chat.message.send(props.name, { path: file_url, name: filename }, \"File\")\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t])\n\n\t\tif ( frappe.session.user !== 'Guest' ) {\n\t\t\tif (props.messages) {\n\t\t\t\tprops.messages = frappe._.as_array(props.messages)\n\t\t\t\tfor (const message of props.messages)\n\t\t\t\t\tif ( !message.seen.includes(frappe.session.user) )\n\t\t\t\t\t\tfrappe.chat.message.seen(message.name)\n\t\t\t\t\telse\n\t\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\th(\"div\", { class: `panel panel-default\n\t\t\t\t${props.name ? \"panel-bg\" : \"\"}\n\t\t\t\t${props.layout === frappe.Chat.Layout.PAGE || frappe._.is_mobile() ? \"panel-span\" : \"\"}`,\n\t\t\t\tstyle: props.layout === frappe.Chat.Layout.PAGE && { width: \"75%\", left: \"25%\", \"box-shadow\": \"none\" } },\n\t\t\t\tprops.name && h(frappe.Chat.Widget.Room.Header, { ...props, on_back: props.destroy }),\n\t\t\t\tprops.name ?\n\t\t\t\t\t!frappe._.is_empty(props.messages) ?\n\t\t\t\t\t\th(frappe.chat.component.ChatList, {\n\t\t\t\t\t\t\tmessages: props.messages\n\t\t\t\t\t\t})\n\t\t\t\t\t\t:\n\t\t\t\t\t\th(\"div\", { class: \"panel-body\", style: { \"height\": \"100%\" } },\n\t\t\t\t\t\t\th(\"div\", { class: \"vcenter\" },\n\t\t\t\t\t\t\t\th(\"div\", { class: \"text-center text-extra-muted\" },\n\t\t\t\t\t\t\t\t\th(frappe.components.Octicon, { type: \"comment-discussion\", style: \"font-size: 48px\" }),\n\t\t\t\t\t\t\t\t\th(\"p\",\"\",__(\"Start a conversation.\"))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t:\n\t\t\t\t\th(\"div\", { class: \"panel-body\", style: { \"height\": \"100%\" } },\n\t\t\t\t\t\th(\"div\", { class: \"vcenter\" },\n\t\t\t\t\t\t\th(\"div\", { class: \"text-center text-extra-muted\" },\n\t\t\t\t\t\t\t\th(frappe.components.Octicon, { type: \"comment-discussion\", style: \"font-size: 125px\" }),\n\t\t\t\t\t\t\t\th(\"p\",\"\",__(\"Select a chat to start messaging.\"))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\tprops.name ?\n\t\t\t\t\th(\"div\", { class: \"chat-room-footer\" },\n\t\t\t\t\t\th(frappe.chat.component.ChatForm, { actions: actions,\n\t\t\t\t\t\t\tonchange: () => {\n\t\t\t\t\t\t\t\tfrappe.chat.message.typing(props.name)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonsubmit: (message) => {\n\t\t\t\t\t\t\t\tfrappe.chat.message.send(props.name, message)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thint: hints\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t\t:\n\t\t\t\t\tnull\n\t\t\t)\n\t\t)\n\t}\n}\n\nfrappe.Chat.Widget.Room.Header\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props }     = this\n\n\t\tconst item          = { }\n\n\t\tif ( [\"Group\", \"Visitor\"].includes(props.type) ) {\n\t\t\titem.route      = `Form/Chat Room/${props.name}`\n\n\t\t\titem.title      = props.room_name\n\t\t\titem.image      = props.avatar\n\n\t\t\tif ( !frappe._.is_empty(props.typing) ) {\n\t\t\t\tprops.typing  = frappe._.as_array(props.typing) // HACK: (BUG) why does typing return as a string?\n\t\t\t\tconst users   = props.typing.map(user => frappe.user.first_name(user))\n\t\t\t\titem.subtitle = `${users.join(\", \")} typing...`\n\t\t\t} else\n\t\t\t\titem.subtitle = props.type === \"Group\" ?\n\t\t\t\t\t__(`${props.users.length} ${frappe._.pluralize('member', props.users.length)}`)\n\t\t\t\t\t:\n\t\t\t\t\t\"\"\n\t\t}\n\t\telse {\n\t\t\tconst user      = props.owner === frappe.session.user ? frappe._.squash(props.users) : props.owner\n\n\t\t\titem.route      = `Form/User/${user}`\n\n\t\t\titem.title      = frappe.user.full_name(user)\n\t\t\titem.image      = frappe.user.image(user)\n\n\t\t\tif ( !frappe._.is_empty(props.typing) )\n\t\t\t\titem.subtitle = 'typing...'\n\t\t}\n\n\t\tconst popper        = props.layout === frappe.Chat.Layout.POPPER || frappe._.is_mobile()\n\n\t\treturn (\n\t\t\th(\"div\", { class: \"panel-heading\", style: { \"height\": \"50px\" } }, // sorry. :(\n\t\t\t\th(\"div\", { class: \"level\" },\n\t\t\t\t\tpopper && frappe.session.user !== \"Guest\" ?\n\t\t\t\t\t\th(frappe.components.Button,{class:\"btn-back\",onclick:props.on_back},\n\t\t\t\t\t\t\th(frappe.components.Octicon, { type: \"chevron-left\" })\n\t\t\t\t\t\t) : null,\n\t\t\t\t\th(\"div\",\"\",\n\t\t\t\t\t\th(\"div\", { class: \"panel-title\" },\n\t\t\t\t\t\t\th(\"div\", { class: \"cursor-pointer\", onclick: () => { frappe.set_route(item.route) }},\n\t\t\t\t\t\t\t\th(frappe.Chat.Widget.MediaProfile, { ...item })\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\th(\"div\", { class: popper ? \"col-xs-1\"  : \"col-xs-3\" },\n\t\t\t\t\t\th(\"div\", { class: \"text-right\" },\n\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t}\n}\n\n/**\n * @description ChatList Component\n *\n * @prop {array} messages - ChatMessage(s)\n */\nfrappe.chat.component.ChatList\n=\nclass extends Component {\n\ton_mounted ( ) {\n\t\tthis.$element  = $('.frappe-chat').find('.chat-list')\n\t\tthis.$element.scrollTop(this.$element[0].scrollHeight)\n\t}\n\n\ton_updated ( ) {\n\t\tthis.$element.scrollTop(this.$element[0].scrollHeight)\n\t}\n\n\trender ( ) {\n\t\tvar messages = [ ]\n\t\tfor (var i   = 0 ; i < this.props.messages.length ; ++i) {\n\t\t\tvar   message   = this.props.messages[i]\n\t\t\tconst me        = message.user === frappe.session.user\n\n\t\t\tif ( i === 0 || !frappe.datetime.equal(message.creation, this.props.messages[i - 1].creation, 'day') )\n\t\t\t\tmessages.push({ type: \"Notification\", content: message.creation.format('MMMM DD') })\n\n\t\t\tmessages.push(message)\n\t\t}\n\n\t\treturn (\n\t\t\th(\"div\",{class:\"chat-list list-group\"},\n\t\t\t\t!frappe._.is_empty(messages) ?\n\t\t\t\t\tmessages.map(m => h(frappe.chat.component.ChatList.Item, {...m})) : null\n\t\t\t)\n\t\t)\n\t}\n}\n\n/**\n * @description ChatList.Item Component\n *\n * @prop {string} name       - ChatMessage name\n * @prop {string} user       - ChatMessage user\n * @prop {string} room       - ChatMessage room\n * @prop {string} room_type  - ChatMessage room_type (\"Direct\", \"Group\" or \"Visitor\")\n * @prop {string} content    - ChatMessage content\n * @prop {frappe.datetime.datetime} creation - ChatMessage creation\n *\n * @prop {boolean} groupable - Whether the ChatMessage is groupable.\n */\nfrappe.chat.component.ChatList.Item\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props } = this\n\n\t\tconst me        = props.user === frappe.session.user\n\t\tconst content   = props.content\n\n\t\treturn (\n\t\t\th(\"div\",{class: \"chat-list-item list-group-item\"},\n\t\t\t\tprops.type === \"Notification\" ?\n\t\t\t\t\th(\"div\",{class:\"chat-list-notification\"},\n\t\t\t\t\t\th(\"div\",{class:\"chat-list-notification-content\"},\n\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t:\n\t\t\t\t\th(\"div\",{class:`${me ? \"text-right\" : \"\"}`},\n\t\t\t\t\t\tprops.room_type === \"Group\" && !me ?\n\t\t\t\t\t\t\th(frappe.components.Avatar, {\n\t\t\t\t\t\t\t\ttitle: frappe.user.full_name(props.user),\n\t\t\t\t\t\t\t\timage: frappe.user.image(props.user)\n\t\t\t\t\t\t\t}) : null,\n\t\t\t\t\t\th(frappe.chat.component.ChatBubble, props)\n\t\t\t\t\t)\n\t\t\t)\n\t\t)\n\t}\n}\n\n/**\n * @description ChatBubble Component\n *\n * @prop {string} name       - ChatMessage name\n * @prop {string} user       - ChatMessage user\n * @prop {string} room       - ChatMessage room\n * @prop {string} room_type  - ChatMessage room_type (\"Direct\", \"Group\" or \"Visitor\")\n * @prop {string} content    - ChatMessage content\n * @prop {frappe.datetime.datetime} creation - ChatMessage creation\n *\n * @prop {boolean} groupable - Whether the ChatMessage is groupable.\n */\nfrappe.chat.component.ChatBubble\n=\nclass extends Component {\n\tconstructor (props) {\n\t\tsuper (props)\n\n\t\tthis.onclick = this.onclick.bind(this)\n\t}\n\n\tonclick ( ) {\n\t\tconst { props } = this\n\t\tif ( props.user === frappe.session.user ) {\n\t\t\tfrappe.quick_edit(\"Chat Message\", props.name, (values) => {\n\n\t\t\t})\n\t\t}\n\t}\n\n\trender  ( ) {\n\t\tconst { props } = this\n\t\tconst creation \t= props.creation.format('hh:mm A')\n\n\t\tconst me        = props.user === frappe.session.user\n\t\tconst read      = !frappe._.is_empty(props.seen) && !props.seen.includes(frappe.session.user)\n\n\t\tconst content   = props.content\n\n\t\treturn (\n\t\t\th(\"div\",{class:`chat-bubble ${props.groupable ? \"chat-groupable\" : \"\"} chat-bubble-${me ? \"r\" : \"l\"}`,\n\t\t\t\tonclick: this.onclick},\n\t\t\t\tprops.room_type === \"Group\" && !me?\n\t\t\t\t\th(\"div\",{class:\"chat-bubble-author\"},\n\t\t\t\t\t\th(\"a\", { onclick: () => { frappe.set_route(`Form/User/${props.user}`) } },\n\t\t\t\t\t\t\tfrappe.user.full_name(props.user)\n\t\t\t\t\t\t)\n\t\t\t\t\t) : null,\n\t\t\t\th(\"div\",{class:\"chat-bubble-content\"},\n\t\t\t\t\t\th(\"small\",\"\",\n\t\t\t\t\t\t\tprops.type === \"File\" ?\n\t\t\t\t\t\t\t\th(\"a\", { class: \"no-decoration\", href: content.path, target: \"_blank\" },\n\t\t\t\t\t\t\t\t\th(frappe.components.FontAwesome, { type: \"file\", fixed: true }), ` ${content.name}`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\th(\"div\",{class:\"chat-bubble-meta\"},\n\t\t\t\t\th(\"span\",{class:\"chat-bubble-creation\"},creation),\n\t\t\t\t\tme && read ?\n\t\t\t\t\t\th(\"span\",{class:\"chat-bubble-check\"},\n\t\t\t\t\t\t\th(frappe.components.Octicon,{type:\"check\"})\n\t\t\t\t\t\t) : null\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t}\n}\n\n/**\n * @description ChatForm Component\n */\nfrappe.chat.component.ChatForm\n=\nclass extends Component {\n\tconstructor (props) {\n\t\tsuper (props)\n\n\t\tthis.onchange   = this.onchange.bind(this)\n\t\tthis.onsubmit   = this.onsubmit.bind(this)\n\n\t\tthis.hint        = this.hint.bind(this)\n\n\t\tthis.state       = frappe.chat.component.ChatForm.defaultState\n\t}\n\n\tonchange (e) {\n\t\tconst { props, state } = this\n\t\tconst value            = e.target.value\n\n\t\tthis.set_state({\n\t\t\t[e.target.name]: value\n\t\t})\n\n\t\tprops.onchange(state)\n\n\t\tthis.hint(value)\n\t}\n\n\thint (value) {\n\t\tconst { props, state } = this\n\n\t\tif ( props.hint ) {\n\t\t\tconst tokens =  value.split(\" \")\n\t\t\tconst sliced = tokens.slice(0, tokens.length - 1)\n\n\t\t\tconst token  = tokens[tokens.length - 1]\n\n\t\t\tif ( token ) {\n\t\t\t\tprops.hint   = frappe._.as_array(props.hint)\n\t\t\t\tconst hint   = props.hint.find(hint => hint.match.test(token))\n\n\t\t\t\tif ( hint ) {\n\t\t\t\t\thint.search(token, items => {\n\t\t\t\t\t\tconst hints = items.map(item => {\n\t\t\t\t\t\t\t// You should stop writing one-liners! >_>\n\t\t\t\t\t\t\tconst replace = token.replace(hint.match, hint.content ? hint.content(item) : item)\n\t\t\t\t\t\t\tconst content = `${sliced.join(\" \")} ${replace}`.trim()\n\t\t\t\t\t\t\titem          = { component: hint.component(item), content: content }\n\n\t\t\t\t\t\t\treturn item\n\t\t\t\t\t\t}).slice(0, hint.max || 5)\n\n\t\t\t\t\t\tthis.set_state({ hints })\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tthis.set_state({ hints: [ ] })\n\t\t\t} else\n\t\t\t\tthis.set_state({ hints: [ ] })\n\t\t}\n\t}\n\n\tonsubmit (e) {\n\t\te.preventDefault()\n\n\t\tif ( this.state.content ) {\n\t\t\tthis.props.onsubmit(this.state.content)\n\n\t\t\tthis.set_state({ content: null })\n\t\t}\n\t}\n\n\trender ( ) {\n\t\tconst { props, state } = this\n\n\t\treturn (\n\t\t\th(\"div\",{class:\"chat-form\"},\n\t\t\t\tstate.hints.length ?\n\t\t\t\t\th(\"ul\", { class: \"hint-list list-group\" },\n\t\t\t\t\t\tstate.hints.map((item) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\th(\"li\", { class: \"hint-list-item list-group-item\" },\n\t\t\t\t\t\t\t\t\th(\"a\", { href: \"javascript:void(0)\", onclick: () => {\n\t\t\t\t\t\t\t\t\t\tthis.set_state({ content: item.content, hints: [ ] })\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t\titem.component\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t) : null,\n\t\t\t\th(\"form\", { oninput: this.onchange, onsubmit: this.onsubmit },\n\t\t\t\t\th(\"div\",{class:\"input-group input-group-lg\"},\n\t\t\t\t\t\t!frappe._.is_empty(props.actions) ?\n\t\t\t\t\t\t\th(\"div\",{class:\"input-group-btn dropup\"},\n\t\t\t\t\t\t\t\th(frappe.components.Button,{ class: \"dropdown-toggle\", \"data-toggle\": \"dropdown\"},\n\t\t\t\t\t\t\t\t\th(frappe.components.FontAwesome, { class: \"text-muted\", type: \"paperclip\", fixed: true })\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\th(\"div\",{ class:\"dropdown-menu dropdown-menu-left\", onclick: e => e.stopPropagation() },\n\t\t\t\t\t\t\t\t\t!frappe._.is_empty(props.actions) && props.actions.map((action) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\th(\"li\", null,\n\t\t\t\t\t\t\t\t\t\t\t\th(\"a\",{onclick:action.onclick},\n\t\t\t\t\t\t\t\t\t\t\t\t\th(frappe.components.FontAwesome,{type:action.icon,fixed:true}), ` ${action.label}`,\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) : null,\n\t\t\t\t\t\th(\"textarea\", {\n\t\t\t\t\t\t\t\t\tclass: \"form-control\",\n\t\t\t\t\t\t\t\t\t name: \"content\",\n\t\t\t\t\t\t\t\t\tvalue: state.content,\n\t\t\t\t\t\t\t  placeholder: \"Type a message\",\n\t\t\t\t\t\t\t\tautofocus: true,\n\t\t\t\t\t\t\t   onkeypress: (e) => {\n\t\t\t\t\t\t\t\t\tif ( e.which === frappe.ui.keycode.RETURN && !e.shiftKey )\n\t\t\t\t\t\t\t\t\t\tthis.onsubmit(e)\n\t\t\t\t\t\t\t   }\n\t\t\t\t\t\t}),\n\t\t\t\t\t\th(\"div\",{class:\"input-group-btn\"},\n\t\t\t\t\t\t\th(frappe.components.Button, { onclick: this.onsubmit },\n\t\t\t\t\t\t\t\th(frappe.components.FontAwesome, { class: !frappe._.is_empty(state.content) ? \"text-primary\" : \"text-muted\", type: \"send\", fixed: true })\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t}\n}\nfrappe.chat.component.ChatForm.defaultState\n=\n{\n\tcontent: null,\n\t  hints: [ ],\n}\n\n/**\n * @description EmojiPicker Component\n *\n * @todo Under Development\n */\nfrappe.chat.component.EmojiPicker\n=\nclass extends Component  {\n\trender ( ) {\n\t\tconst { props } = this\n\n\t\treturn (\n\t\t\th(\"div\", { class: `frappe-chat-emoji dropup ${props.class}` },\n\t\t\t\th(frappe.components.Button, { type: \"primary\", class: \"dropdown-toggle\", \"data-toggle\": \"dropdown\" },\n\t\t\t\t\th(frappe.components.FontAwesome, { type: \"smile-o\", fixed: true })\n\t\t\t\t),\n\t\t\t\th(\"div\", { class: \"dropdown-menu dropdown-menu-right\", onclick: e => e.stopPropagation() },\n\t\t\t\t\th(\"div\", { class: \"panel panel-default\" },\n\t\t\t\t\t\th(frappe.chat.component.EmojiPicker.List)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t}\n}\nfrappe.chat.component.EmojiPicker.List\n=\nclass extends Component {\n\trender ( ) {\n\t\tconst { props } = this\n\n\t\treturn (\n\t\t\th(\"div\", { class: \"list-group\" },\n\n\t\t\t)\n\t\t)\n\t}\n}\n\n/**\n * @description Python equivalent to sys.platform\n */\nfrappe.provide('frappe._')\nfrappe._.platform   = () => {\n\tconst string    = navigator.appVersion\n\n\tif ( string.includes(\"Win\") ) \treturn \"Windows\"\n\tif ( string.includes(\"Mac\") ) \treturn \"Darwin\"\n\tif ( string.includes(\"X11\") ) \treturn \"UNIX\"\n\tif ( string.includes(\"Linux\") ) return \"Linux\"\n\n\treturn undefined\n}\n\n/**\n * @description Frappe's Asset Helper\n */\nfrappe.provide('frappe.assets')\nfrappe.assets.image = (image, app = 'frappe') => {\n\tconst  path     = `/assets/${app}/images/${image}`\n\treturn path\n}\n\n/**\n * @description Notify using Web Push Notifications\n */\nfrappe.provide('frappe.boot')\nfrappe.provide('frappe.browser')\nfrappe.browser.Notification = 'Notification' in window\n\nfrappe.notify     = (string, options) => {\n\tfrappe.log    = frappe.Logger.get('frappe.notify')\n\n\tconst OPTIONS = {\n\t\ticon: frappe.assets.image('favicon.png', 'frappe'),\n\t\tlang: frappe.boot.lang || \"en\"\n\t}\n\toptions       = Object.assign({ }, OPTIONS, options)\n\n\tif ( !frappe.browser.Notification )\n\t\tfrappe.log.error('ERROR: This browser does not support desktop notifications.')\n\n\tNotification.requestPermission(status => {\n\t\tif ( status === \"granted\" ) {\n\t\t\tconst notification = new Notification(string, options)\n\t\t}\n\t})\n}\n\nfrappe.chat.render = (render = true, force = false) =>\n{\n\tfrappe.log.info(`${render ? \"Enable\" : \"Disable\"} Chat for User.`)\n\n\tconst desk = 'desk' in frappe\n\tif ( desk ) {\n\t\t// With the assumption, that there's only one navbar.\n\t\tconst $placeholder = $('.navbar .frappe-chat-dropdown')\n\n\t\t// Render if frappe-chat-toggle doesn't exist.\n\t\tif ( frappe.utils.is_empty($placeholder.has('.frappe-chat-toggle')) ) {\n\t\t\tconst $template = $(`\n\t\t\t\t<a class=\"dropdown-toggle frappe-chat-toggle\" data-toggle=\"dropdown\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<i class=\"octicon octicon-comment-discussion\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`)\n\n\t\t\t$placeholder.addClass('dropdown hidden')\n\t\t\t$placeholder.html($template)\n\t\t}\n\n\t\tif ( render ) {\n\t\t\t$placeholder.removeClass('hidden')\n\t\t} else {\n\t\t\t$placeholder.addClass('hidden')\n\t\t}\n\t}\n\n\t// Avoid re-renders. Once is enough.\n\tif ( !frappe.chatter || force ) {\n\t\tfrappe.chatter = new frappe.Chat({\n\t\t\ttarget: desk ? '.frappe-chat-toggle' : null\n\t\t})\n\n\t\tif ( render ) {\n\t\t\tif ( frappe.session.user === 'Guest' && !desk ) {\n\t\t\t\tfrappe.store = frappe.Store.get('frappe.chat')\n\t\t\t\tvar token\t = frappe.store.get('guest_token')\n\n\t\t\t\tfrappe.log.info(`Local Guest Token - ${token}`)\n\n\t\t\t\tconst setup_room = (token) =>\n\t\t\t\t{\n\t\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\t\tfrappe.chat.room.create(\"Visitor\", token).then(room => {\n\t\t\t\t\t\t\tfrappe.log.info(`Visitor Room Created: ${room.name}`)\n\t\t\t\t\t\t\tfrappe.chat.room.subscribe(room.name)\n\n\t\t\t\t\t\t\tvar reference = room\n\n\t\t\t\t\t\t\tfrappe.chat.room.history(room.name).then(messages => {\n\t\t\t\t\t\t\t\tconst  room = { ...reference, messages: messages }\n\t\t\t\t\t\t\t\treturn room\n\t\t\t\t\t\t\t}).then(room => {\n\t\t\t\t\t\t\t\tresolve(room)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tif ( !token ) {\n\t\t\t\t\tfrappe.chat.website.token().then(token => {\n\t\t\t\t\t\tfrappe.log.info(`Generated Guest Token - ${token}`)\n\t\t\t\t\t\tfrappe.store.set('guest_token', token)\n\n\t\t\t\t\t\tsetup_room(token).then(room => {\n\t\t\t\t\t\t\tfrappe.chatter.render({ room })\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tsetup_room(token).then(room => {\n\t\t\t\t\t\tfrappe.chatter.render({ room })\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfrappe.chatter.render()\n\t\t\t}\n\t\t}\n\t}\n}\n\nfrappe.chat.setup  = () => {\n\tfrappe.log     = frappe.Logger.get('frappe.chat')\n\n\tfrappe.log.info('Setting up frappe.chat')\n\tfrappe.log.warn('TODO: frappe.chat.<object> requires a storage.')\n\n\tif ( frappe.session.user !== 'Guest' ) {\n\t\t// Create/Get Chat Profile for session User, retrieve enable_chat\n\t\tfrappe.log.info('Creating a Chat Profile.')\n\n\t\tfrappe.chat.profile.create('enable_chat').then(({ enable_chat }) => {\n\t\t\tfrappe.log.info(`Chat Profile created for User ${frappe.session.user}.`)\n\n\t\t\tif ( 'desk' in frappe ) { // same as desk?\n\t\t\t\tconst should_render = Boolean(parseInt(frappe.sys_defaults.enable_chat)) && enable_chat\n\t\t\t\tfrappe.chat.render(should_render)\n\t\t\t}\n\t\t})\n\n\t\t// Triggered when a User updates his/her Chat Profile.\n\t\t// Don't worry, enable_chat is broadcasted to this user only. No overhead. :)\n\t\tfrappe.chat.profile.on.update((user, profile) => {\n\t\t\tif ( user === frappe.session.user && 'enable_chat' in profile ) {\n\t\t\t\tfrappe.log.warn(`Chat Profile update (Enable Chat - ${Boolean(profile.enable_chat)})`)\n\t\t\t\tconst should_render = Boolean(parseInt(frappe.sys_defaults.enable_chat)) && profile.enable_chat\n\t\t\t\tfrappe.chat.render(should_render)\n\t\t\t}\n\t\t})\n\t} else {\n\t\t// Website Settings\n\t\tfrappe.log.info('Retrieving Chat Website Settings.')\n\t\tfrappe.chat.website.settings([\"socketio\", \"enable\", \"enable_from\", \"enable_to\"])\n\t\t\t.then(settings => {\n\t\t\t\tfrappe.log.info(`Chat Website Setting - ${JSON.stringify(settings)}`)\n\t\t\t\tfrappe.log.info(`Chat Website Setting - ${settings.enable ? \"Enable\" : \"Disable\"}`)\n\n\t\t\t\tvar should_render = settings.enable\n\t\t\t\tif ( settings.enable_from && settings.enable_to ) {\n\t\t\t\t\tfrappe.log.info(`Enabling Chat Schedule - ${settings.enable_from.format()} : ${settings.enable_to.format()}`)\n\n\t\t\t\t\tconst range   = new frappe.datetime.range(settings.enable_from, settings.enable_to)\n\t\t\t\t\tshould_render = range.contains(frappe.datetime.now())\n\t\t\t\t}\n\n\t\t\t\tif ( should_render ) {\n\t\t\t\t\tfrappe.log.info(\"Initializing Socket.IO\")\n\t\t\t\t\tfrappe.socketio.init(settings.socketio.port)\n\t\t\t\t}\n\n\t\t\t\tfrappe.chat.render(should_render)\n\t\t})\n\t}\n}\n\n$(document).on('ready toolbar_setup', () =>\n{\n\tfrappe.chat.setup()\n})\n","frappe.views.SocialFactory = class SocialFactory extends frappe.views.Factory {\n\tshow() {\n\t\tif (frappe.pages.social) {\n\t\t\tfrappe.container.change_to('social');\n\t\t} else {\n\t\t\tthis.make('social');\n\t\t}\n\t}\n\n\tmake(page_name) {\n\t\tconst assets = [\n\t\t\t'/assets/js/social.min.js'\n\t\t];\n\n\t\tfrappe.require(assets, () => {\n\t\t\tfrappe.social.home = new frappe.social.Home({\n\t\t\t\tparent: this.make_page(true, page_name)\n\t\t\t});\n\t\t});\n\t}\n};\n","// Copyright (c) 2019, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.energy_points');\n\nObject.assign(frappe.energy_points, {\n\tget_points(points) {\n\t\treturn `<span class='bold' style=\"color: ${points >= 0 ? '#45A163': '#e42121'}\">\n\t\t\t${points > 0 ? '+': ''}${points}\n\t\t</span>`;\n\t},\n\tformat_form_log(log) {\n\t\tconst separator = `<span>&nbsp;-&nbsp;</span>`;\n\t\tconst formatted_log = `<span>\n\t\t\t${this.get_points(log.points)}&nbsp;\n\t\t\t<a href=\"#Form/Energy Point Log/${log.name}\">${this.get_form_log_message(log)}</a>\n\t\t\t${log.reason ? separator + log.reason: ''}\n\t\t</span>`;\n\t\treturn formatted_log;\n\t},\n\tformat_history_log(log) {\n\t\t// redundant code to honor readability and to avoid confusion\n\t\tconst separator = `<span>&nbsp;-&nbsp;</span>`;\n\t\tconst route = frappe.utils.get_form_link(log.reference_doctype, log.reference_name);\n\t\tconst formatted_log = `<span>\n\t\t\t${this.get_points(log.points)}&nbsp;\n\t\t\t<a href=\"${route}\">${this.get_history_log_message(log)}</a>\n\t\t\t${log.reason ? separator + log.reason: ''}\n\t\t\t${separator + frappe.datetime.comment_when(log.creation)}\n\t\t</span>`;\n\t\treturn formatted_log;\n\t},\n\tget_history_log_message(log) {\n\t\tconst owner_name = frappe.user.full_name(log.owner).bold();\n\t\tconst user = frappe.user.full_name(log.user).bold();\n\t\tconst ref_doc = log.reference_name;\n\n\t\tif (log.type === 'Appreciation') {\n\t\t\treturn __('{0} appreciated on {1}', [owner_name, ref_doc]);\n\t\t}\n\t\tif (log.type === 'Criticism') {\n\t\t\treturn __('{0} criticized on {1}', [owner_name, ref_doc]);\n\t\t}\n\t\tif (log.type === 'Revert') {\n\t\t\treturn __('{0} reverted {1}', [user, log.revert_of]);\n\t\t}\n\t\treturn __('via automatic rule {0} on {1}', [log.rule.bold(), ref_doc]);\n\t},\n\tget_form_log_message(log) {\n\t\t// redundant code to honor readability and to avoid confusion\n\t\tconst owner_name = frappe.user.full_name(log.owner).bold();\n\t\tconst user = frappe.user.full_name(log.user).bold();\n\t\tif (log.type === 'Appreciation') {\n\t\t\treturn __('{0} appreciated {1}', [owner_name, user]);\n\t\t}\n\t\tif (log.type === 'Criticism') {\n\t\t\treturn __('{0} criticized {1}', [owner_name, user]);\n\t\t}\n\t\tif (log.type === 'Revert') {\n\t\t\treturn __('{0} reverted {1}', [user,\n\t\t\t\tfrappe.utils.get_form_link('Energy Point Log', log.revert_of, true)]);\n\t\t}\n\t\treturn __('gained by {0} via automatic rule {1}', [user, log.rule.bold()]);\n\t},\n});"],"names":["global","fnTest","test","Class","extend","props","_super","this","prototype","proto","Object","create","name","fn","tmp","ret","apply","arguments","newClass","init","hasOwnProperty","constructor","format","str","args","undefined","unkeyed_index","replace","match","key","bind","close_grid_and_dialog","open_row","$","length","data","toggle_view","cur_dialog","no_cancel_flag","cancel","String","includes","search","start","indexOf","Array","defineProperty","value","searchElement","fromIndex","TypeError","o","len","n","k","Math","max","abs","trimLeft","trimRight","assign","target","to","index","nextSource","nextKey","call","writable","configurable","window","frappe","provide","namespace","nsl","split","parent","i","require","items","callback","assets","execute","check","_version_number","localStorage","getItem","clear_local_storage","console","log","_last_load","not_updated_since","Date","init_local_storage","boot","metadata_version","each","removeItem","executed_","to_fetch","l","exists","push","fetch","eval_assets","path","handler","extn","get","src","developer_mode","type","method","r","add","message","freeze","txt","set","e","setItem","slice","js","dom","eval","css","set_style","jQuery","form","link_formatters","formatters","_right","options","inline","only_value","Data","Select","__","Float","docfield","doc","precision","cint","sysdefaults","float_precision","trim","Currency","always_show_decimals","is_null","temp","cstr","format_number","Int","Percent","flt","Rating","from","map","_","join","currency","meta","get_field_currency","currency_precision","parts","decimals","const","fraction","model","get_value","format_currency","Check","Link","doctype","_options","original_value","for_print","substring","link_onclick","repl","onclick","encodeURIComponent","label","datetime","str_to_user","DateRange","isArray","Datetime","m","moment","convert_to_user_tz","time_zone","tz","date_format","toUpperCase","Text","tags","utils","replace_newlines","LikedBy","html","JSON","parse","v","avatar","Tag","Comment","comment","Assign","SmallText","TextEditor","Code","text","WorkflowState","workflow_state","get_doc","style","toLowerCase","icon","Email","FileSize","TableMultiSelect","rows","df","link_field","get_meta","fields","find","fieldtype","row","fieldname","get_formatter","formatted","formatter","remove_script_and_style","get_format_helper","helper","get_formatted","get_docfield","id_count","freeze_count","by_id","id","document","getElementById","get_unique_id","set_unique_id","ele","$ele","attr","el","createElement","appendChild","createTextNode","getElementsByTagName","evil_tags","RegExp","tag","div","innerHTML","found","forEach","elements","parentNode","removeChild","getAttribute","is_element_in_viewport","tolerance","rect","getBoundingClientRect","top","left","bottom","height","right","width","se","element","styleSheet","cssText","newtag","className","cs","substr","c","s","activate","$parent","$child","common_class","active_class","removeClass","addClass","msg","css_class","on","cur_frm","cur_grid","appendTo","setTimeout","unfreeze","remove","save_selection","getSelection","sel","getRangeAt","rangeCount","ranges","selection","createRange","restore_selection","savedSel","removeAllRanges","addRange","select","is_touchscreen","handle_broken_images","container","currentTarget","scroll_to_bottom","$container","scrollTop","scrollHeight","file_to_base64","file_obj","Promise","resolve","reader","FileReader","onload","result","readAsDataURL","scroll_to_section","section_name","section","hasClass","click","ui","scroll","pixel_to_inches","pixels","body","inches","offsetWidth","ellipsis","run_serially","tasks","task","then","load_image","onerror","preprocess","tester","Image","timeout","seconds","scrub","spacer","get_modal","title","content","is_online","navigator","onLine","show_alert","indicator","add_options","options_list","j","is_value_null","is_label_null","is_disabled","Boolean","disabled","prop","selectedIndex","set_working","done_working","allowTabChar","keydown","which","focus","selectionStart","val","selStart","selectionEnd","textRange","collapse","pasteIntoInput","keypress","allowTabs","jquery","nodeType","nodeName","Layout","opts","views","pages","sections","fields_list","fields_dict","make","wrapper","get_doctype_fields","setup_tabbing","render","show_empty_form_message","show_message","let","frm","reqd","hidden","get_status","field","is_new","autoname","concat","sort_docfields","docfield_map","color","message_color","empty","new_fields","me","column","with_dashboard","setup_dashboard_section","no_opening_section","make_section","make_page","make_column","make_field","unshift","cssClass","collapsible","replace_field","fieldobj","init_field","$wrapper","splice","perm","refresh_fields","colspan","make_control","render_input","layout","head","page","fold_btn","next","scroll_to","folded","unfold","trigger","Section","Column","refresh","attach_doc_and_docfields","refresh_dependency","refresh_sections","refresh_section_collapse","cnt","$this","fieldnames","set_input","add_fields","collapsible_depends_on","evaluate_depends_on_value","has_missing_mandatory","docname","refresh_section_count","ev","current","handle_tab","shiftKey","shift","grid_row","prev","focused","get_open_grid_row","set_focus","primary_button","focus_on_next_field","is_visible","idx","grid","grid_rows","start_idx","add_new_row","show_form","in_list","no_value_type","disp_status","is","editor","$input","has_dep","fkey","f","dependencies_clear","depends_on","guardian_has_value","hidden_due_to_dependency","expression","out","get_values","istable","throw","script_manager","make_head","description","collapse_link","hide","get_perm","permlevel","toggleClass","missing_mandatory","section_df","resize_all_columns","FieldGroup","dirty","values","set_values","def_value","get_today","no_submit_on_enter","catch_enter_as_submit","first_button","focus_on_first_input","no_focus","has_primary_action","preventDefault","get_primary_btn","get_input","input","get_field","ignore_errors","errors","msgprint","set_value","dict","clear","set_df_property","open_dialogs","Dialog","[object Object]","super","display","is_dialog","animate","size","static","modal","backdrop","keyboard","get_close_btn","modal_body","$body","$message","header","action","primary","secondary","primary_action","onsubmit","set_primary_action","primary_action_label","secondary_action","set_secondary_action","secondary_action_label","pop","onhide","on_hide","on_page_show","blur","clear_message","primary_action_fulfilled","set_title","t","toggle","messages","waiting","get_waiting_message","Error","confirm","ifyes","ifno","d","show","confirm_dialog","prompt","primary_label","isPlainObject","alert","msg_dialog","custom_onhide","msg_area","msg_exists","wide","classList","contains","append","hide_msgprint","instant","update_msgprint","verify_password","password","exc","show_progress","count","total","cur_progress","dialog","progress","progress_bar","margin-top","percent","hide_progress","actions","body_html","keys","delay","fadeOut","warn","setup","get_key","handlers","_out","keycode","keyCode","key_map","fromCharCode","ctrlKey","metaKey","altKey","app","trigger_primary_action","route","get_route","new_doc","get_open_grid_form","open_next","open_prev","toolbar","clear_cache","8","9","13","16","17","91","18","27","37","39","38","40","32","112","113","114","115","116","ESCAPE","LEFT","RIGHT","UP","DOWN","ENTER","TAB","SPACE","BACKSPACE","color_map","red","brown","orange","peach","yellow","yellowgreen","green","cyan","skyblue","blue","purple","pink","white","black","color_name","shade","get_color_shade","get_color","color_names","shades","default","light","extra-light","dark","all","reduce","acc","curr","names","is_standard","startsWith","get_color_name","hex","get_contrast_color","validate_hex","brightness","lighten","parseInt","p","R","G","B","round","toString","hex_to_rgb","rgb","g","b","Sidebar","ref","make_dom","$sidebar","item","h6","$section","$li_item","get_section","href","on_click","section_heading","LinkPreview","$links","LINK_CLASSES","popover_timeout","setup_events","link_hovered","is_link","tagName","parents","identify_doc","popover","setup_popover_control","get_preview_fields","preview_fields","data_timeout","create_popover","handle_popover_hide","get_preview_fields_value","preview_data","clearTimeout","new_content","get_popover_html","init_preview_popover","pageX","clear_all_popovers","$el","dt","with_doctype","meta_fields","show_preview_popup","filter","in_preview","field_list","xcall","popover_content","placement","animation","tip","location","image_html","id_html","content_html","title_field","image_field","encodeURI","truncate_value","get_label","request","url","ajax_count","waiting_for_ajax","params","reject","error","always","ajax","headers","quiet","no_spinner","module","cmd","docs","success","response_text","task_id","socketio","subscribe","queued","btn","freeze_message","async","prepare","statusCode","200","xhr","success_callback","responseText","401","session_expired_dialog","redirect_to_login","handle_session_expired","404","403","get_cookie","responseJSON","_error_message","_server_messages","508","play_sound","413","max_file_size","417","error_callback","501","500","report_error","504","502","ajax_args","dataType","X-Frappe-CSRF-Token","csrf_token","Accept","cache","last_request","done","textStatus","docinfo","sync","__messages","_messages","status_code_handler","status","trace","cleanup","fail","stringify","session_expired","silent","_debug_messages","last_response","after_server_call","after_ajax","request_opts","error_report_email","cleanup_request_opts","error_dialog","error_report_message","versions","get_route_str","CommunicationComposer","subject","nowdate","recipients","session","user","strip","ajaxSend","ajaxComplete","open_tasks","open_docs","emit_queue","port","io","disable_async","socket","protocol","connect","get_host","secure","server","setup_listeners","setup_reconnect","uploader","SocketIOUploader","doc_subscribe","doc_open","doc_close","onbeforeunload","host","origin","dev_server","socketio_port","emit","task_subscribe","task_unsubscribe","flags","doc_unsubscribe","last_doc","process_response","locals","status_code","realtime","event","off","publish","place","currentSlice","chunk_size","file","min","on_progress","readAsArrayBuffer","started","keep_alive","file_url","disconnect","use_socketio_to_upload_file","connected","fallback","is_private","filename","next_check","with_message","keyList","hasProp","equal","a","arrA","arrB","dateA","dateB","getTime","regexpA","regexpB","get_random","possible","charAt","floor","random","get_file_link","is_url","is_html","is_xs","is_sm","is_md","is_json","strip_whitespace","encode_tags","tagsToReplace","&","<",">","strip_original_content","part","newline","tt","escape_html","html2text","textContent","to_title_case","string","with_space","replace_with","toggle_blockquote","before","additional_offset","y","header_offset","offset","filter_dict","filters","comma_or","list","comma_sep","comma_and","sep","set_footnote","footnote_area","get_args_dict_from_url","decodeURIComponent","arg","get_url_from_dict","validate_type","regExp","guess_style","default_style","_colour","colour","has_words","guess_colour","sort","compare_type","reverse","sort_fn","localeCompare","number","unique","arr","remove_nulls","new_list","lst","row_idx","new_row","key_idx","sum","previous_value","current_value","arrays_equal","arr1","arr2","intersection","ai","bi","resize_image","max_width","max_height","tempImg","tempW","tempH","canvas","getContext","drawImage","dataURL","toDataURL","csv_to_array","strData","strDelimiter","objPattern","arrData","arrMatches","exec","strMatchedValue","strMatchedDelimiter","warn_page_name_change","notify","_original_title","_title_prefix","set_title_prefix","prefix","is_image_file","mute_sounds","audio","volume","play","split_emails","email_list","email","supportsES6","Function","err","throttle","func","wait","context","previous","later","leading","now","remaining","trailing","debounce","immediate","callNow","get_form_link","get_route_label","route_str","report_column_total","is_numeric_field","deep_equal","file_name_ellipsis","first_part_length","last_part_length","first_part","last_part","get_decoded_string","dataURI","encoded_data","escape","atob","uniqBy","seen","EventEmitterMixin","jq","evt","once","one","unbind","make_event_emitter","object","re_route","#login","route_titles","route_flags","route_history","view_factory","view_factories","route_options","hash","re_route_val","cur_route_val","_cur_route","history","back","title_cased_route","route_name","xss_sanitise","pageview","mixpanel","track","get_raw_route_str","doc_name","_decode_str","query_params","get_query_params","set_route","get_prev_route","URIError","rawRoute","set_favicon","set_re_route","hide_on_page_refresh","route_history_queue","routes_to_skip","save_routes","routes","records","catch","is_route_useful","fmt_money","toTitle","word_in","word_out","w","set_value_in","ftype","fopt","copy_dict","validate_email","validate_spl_chars","nth","esc_quotes","has_common","list1","list2","add_lists","l1","l2","docstring","obj","remove_from_list","$c","command","freeze_msg","show_spinner","$c_obj","$c_obj_csv","as_csv","open_url_post","_open_url_post","URL","PARAMS","new_window","x","opt","submit","prettyDate","time","mini","sys_defaults","locale","lang","fromNow","date","diff","day_diff","isNaN","ceil","creation","now_datetime","defaults","get_user_default","is_a_user_permission_key","in_user_permission","get_user_defaults","get_global_default","get_global_defaults","set_default","set_user_default_local","get_default","user_permission","get_user_permissions","unscrub","some","_user_permissions","update_user_permissions","RoleEditor","disable","roles","show_roles","roles_editor","role_toolbar","checked","role","role_value","role_display","change","set_roles_in_table","show_permissions","checkbox","user_role","set_enable_disable","get_roles","existing_roles_map","existing_roles_list","unchecked_roles","clear_doc","checked_roles","add_child","refresh_field","perm_dialog","make_perm_dialog","template","compiled","debug","compile","fn_str","p1","p2","lineNumber","columnNumber","render_template","templates","render_grid","columns","getColumns","report","dataView","slickgrid_tools","get_filtered_items","getData","getItems","landscape","base_url","urllib","get_base_url","print_css","open","write","close","render_tree","tree","render_pdf","formData","FormData","orientation","blob","Blob","XMLHttpRequest","setRequestHeader","responseType","response","objectUrl","createObjectURL","send","settings","no_history","NEWLINE","UP_ARROW","DOWN_ARROW","_f","_p","_r","frms","full_name","ln","get_arg","results","get_dict","get_full_url","get_url_arg","get_url_dict","cordova","make_query_string","make_app_page","Page","set_document_title","buttons","add_main_section","get_empty_state","load_lib","required_libs","single_column","add_view","setup_page","$title_area","$sub_title_area","get_main_icon","main","sidebar","footer","page_actions","btn_primary","btn_secondary","menu","menu_btn_group","actions_btn_group","page_form","prependTo","inner_toolbar","icon_group","set_indicator","clear_indicator","add_action_icon","get_icon_label","set_action","clear_action_of","btn_disable_enable","working_label","removeAttr","clear_primary_action","clear_secondary_action","clear_actions","clear_icons","add_menu_item","standard","add_dropdown_item","clear_menu","clear_btn_group","show_menu","hide_menu","show_icon_group","hide_icon_group","show_actions_menu","hide_actions_menu","add_action_item","add_actions_menu_item","clear_actions_menu","show_parent","$li","$link","is_in_group_button_dropdown","divider","insertBefore","selector","add_divider","get_or_add_inner_group_button","$group","get_inner_group_button","set_inner_btn_group_as_primary","add_inner_button","group","_action","button","remove_inner_button","add_inner_message","prepend","clear_inner_toolbar","add_sidebar_item","insert_after","li","link","insertAfter","clear_user_actions","get_title_area","stripHtml","tabTitle","strip_html","set_title_sub","add_help_button","add_button","is_title","add_dropdown_button","add_label","add_select","add_field","add_data","add_date","add_check","add_break","only_input","tooltip","make_input","clear_fields","hide_form","get_form_values","current_view","set_view","current_view_name","previous_view_name","Slide","slide","data-slide-id","data-slide-name","before_load","$content","$form","$primary_btn","slides_footer","help","image_src","reqd_fields","made","render_parent_dots","setup_done_state","setup_form","get_atomic_fields","add_more","bind_more_button","set_reqd_fields","mandatory_entry","validate","$more","max_count","unbind_primary_action","bind_fields_to_action_btn","reset_action_button_state","bind_primary_action","before_show","resetup_primary_button","first","Slides","slides","slide_class","unidirectional","done_state","on_update","slide_dict","made_slide_ids","tabindex","$slide_progress","$footer","render_progress_dots","make_prev_next_buttons","show_slide","destroy","show_hide_prev_next","$dot","data-step-id","current_id","completed","bind_progress_dots","$prev_btn","$next_btn","current_slide","before_show_slide","update_values","hide_slide","page_primary_action","IconBar","n_groups","get_group","$ul","add_btn","check_if_all_hidden","LinkSelector","searchfield","set_custom_query","is_grid","fieldinfo","get_query","link_search","set_in_grid","parse_validate_and_set_in_model","can_create","more","updated","qty_fieldname","qty","dynamic_link_field","dynamic_link_reference","MultiSelectDialog","page_length","date_field","setters","setter","doctype_plural","endsWith","get_checked_values","results_area","$results","$make_new_btn","make_new","$placeholder","bind_events","get_results","make_list_row","contents","$row","render_result_list","date_val","filter_fields","query","as_dict","parsed_date","get_data_uri","$element","$canvas","Capture","OPTIONS","set_options","mediaDevices","getUserMedia","video","stream","$e","TEMPLATE","srcObject","data_url","ERR_MESSAGE","app_icon","get_html","small","emoji","icon_style","_label","DropZone","$dropzone","$title","files","originalEvent","dataTransfer","drop","layout_fields","std_fields_list","core_doctypes_list","std_fields","numeric_fieldtypes","std_fields_table","table_fields","new_names","events","user_settings","ListView","trigger_list_update","is_saving","modified","__needs_refresh","show_if_needs_refresh","__unsaved","remove_from_locals","is_value_type","is_non_std_field","get_std_field","ignore","DocType","cached_timestamp","cached_doc","cached_docs","with_parent","init_doctype","updated_on","__list_js","__calendar_js","__map_js","__tree_js","__templates","with_doc","get_docinfo","set_docinfo","get_shared","shared","get_server_module_name","module_app","keywords","can_read","can_write","can_get_report","can_delete","can_cancel","has_workflow","get_list","document_type","is_active","is_submittable","is_table","is_single","single_types","can_import","user_roles","import","can_export","export","can_print","print","can_email","can_share","share","can_set_user_permissions","set_user_permissions","has_value","dn","parenttype","parentfield","docsdict","isEmptyObject","to_update","__unedited","runner","event_doc","_promise","get_children","children","clear_table","formview","opendocs","parent_doc","newlist","get_no_copy_list","no_copy_list","docfields","no_copy","delete_doc","rt","rename_doc","old","new","new_name","merge","round_floats_in","get_fieldnames","validate_missing","get_all_docs","get_full_column_name","db","limit","get_single_value","insert","sync_messages","__print_formats","__workflow_docs","docfield_list","make_docfield_copy_for","docfield_copy","every","get_docfield_copy","set_formatter","set_indicator_formatter","get_text","get_docfields","get_linked_fields","get_fields_to_check_permissions","ignore_user_permissions","has_field","get_table_fields","get_doctype_for_field","get_parentfield","parent_dt","child_dt","owner","modified_by","get_print_formats","print_format_list","default_print_format","enable_raw_printing","print_formats","doc_type","print_format_type","raw_printing","get_field_precision","number_format","get_number_format","get_number_format_info","update_in_locals","add_to_locals","__last_sync_on","localname","__islocal","get_new_name","local_doc","clear_keys","source","local_d","new_name_count","get_new_doc","with_mandatory_children","docstatus","set_default_values","create_mandatory_children","__run_link_triggers","name_field","make_new_doc_and_get_name","fid","get_default_value","user_default","user_permissions","allowed_records","default_doc","filter_allowed_docs_for_doctype","has_user_permissions","linked_document_type","user_defaults","remember_last_selected_value","last_selected_values","user_fullname","boot_doc","get_default_from_boot_docs","is_allowed_default","now_time","ref_fieldname","ref_value","ref_doc","child","sorted","copy_doc","from_amend","newdoc","open_mapped_doc","source_name","selected_children","get_selected","run_link_triggers","create_routes","init_callback","make_quick_entry","READ","WRITE","CREATE","DELETE","SUBMIT","CANCEL","AMEND","rights","doctype_perm","has_perm","ptype","perms","permissions","read","build_role_permissions","if_owner","get_match_rules","match_rules","rules","fields_to_check","user_permissions_for_doctype","get_allowed_docs_for_doctype","Owner","get_field_display_status","explain","allow_on_submit","state_fieldname","read_only","states","update_fields","set_only_once","with_default_doc","filtered_perms","applicable_for","allowed_docs","is_default","record","workflow","state_fields","workflows","wf","workflow_state_field","get_state_fieldname","get_default_state","doc_status","state","get_transitions","get_document_state","is_self_approval_enabled","allow_self_approval","is_read_only","allow_edit","get_update_fields","update_field","save","old_user_settings","new_user_settings","update","get_user_settings","h","charCodeAt","unescape","q","define","amd","md5","user_info","uid","fullname","image","abbr","capitalize","get_abbr","get_palette","set_user_background","background","has_role","rl","get_desktop_items","allowed_modules","module_name","modules","allow_modules","is_help","allowed_pages","_doctype","is_report_manager","get_formatted_email","quote","get_emails","session_alive","session_alive_timeout","max_length","gravatars","get_gravatar","email_id","param","replace_all","t1","t2","chars","lstrip","rstrip","first_char","last_char","get_cookies","cookie","cookies","$1","$0","palette","is_mobile","sanitised","HTML_ESCAPE_MAP","\"","'","/","strategies","char","regex","comment_when","refresh_when","setInterval","click_button","click_link","click_element","set_control","control","click_check","getDefaultOpts","simple","defaultOptions","omitExtraWLInCodeBlocks","defaultValue","describe","noHeaderId","prefixHeaderId","rawPrefixHeaderId","ghCompatibleHeaderId","rawHeaderId","headerLevelStart","parseImgDimensions","simplifiedAutoLink","excludeTrailingPunctuationFromURLs","literalMidWordUnderscores","literalMidWordAsterisks","strikethrough","tables","tablesHeaderId","ghCodeBlocks","tasklists","smoothLivePreview","smartIndentationFix","disableForced4SpacesIndentedSublists","simpleLineBreaks","requireSpaceBeforeHeadingText","ghMentions","ghMentionsLink","encodeEmails","openLinksInNewWindow","backslashEscapesHTMLTags","underline","completeHTMLDocument","metadata","splitAdjacentBlockquotes","showdown","parsers","extensions","globalOptions","setFlavor","flavor","github","original","ghost","vanilla","allOn","allOptionsOn","extension","errMsg","valid","baseMsg","ext","isString","isUndefined","listeners","escapeCharactersCallback","wholeMatch","m1","setOption","getOption","getOptions","resetOptions","preset","option","getFlavor","getFlavorOptions","getDefaultOptions","subParser","stdExtName","validExtension","getAllExtensions","removeExtension","resetExtensions","validateExtension","isFunction","escapeCharacters","charsToEscape","afterBackslash","regexString","unescapeHTMLEntities","rgxFindMatchPos","end","pos","lastIndex","matchRecursiveRegExp","matchPos","replaceRecursiveRegExp","replacement","repStr","finalStr","lng","bits","regexIndexOf","splitAtIndex","encodeEmailAddress","mail","encode","ch","padEnd","targetLength","padString","repeat","regexes","asteriskDashAndColon","emojis","+1","-1","100","1234","1st_place_medal","2nd_place_medal","3rd_place_medal","8ball","ab","abc","abcd","accept","aerial_tramway","airplane","alarm_clock","alembic","alien","ambulance","amphora","anchor","angel","anger","angry","anguished","ant","apple","aquarius","aries","arrow_backward","arrow_double_down","arrow_double_up","arrow_down","arrow_down_small","arrow_forward","arrow_heading_down","arrow_heading_up","arrow_left","arrow_lower_left","arrow_lower_right","arrow_right","arrow_right_hook","arrow_up","arrow_up_down","arrow_up_small","arrow_upper_left","arrow_upper_right","arrows_clockwise","arrows_counterclockwise","art","articulated_lorry","artificial_satellite","astonished","athletic_shoe","atm","atom_symbol","avocado","baby","baby_bottle","baby_chick","baby_symbol","bacon","badminton","baggage_claim","baguette_bread","balance_scale","balloon","ballot_box","ballot_box_with_check","bamboo","banana","bangbang","bank","bar_chart","barber","baseball","basketball","basketball_man","basketball_woman","bat","bath","bathtub","battery","beach_umbrella","bear","bed","bee","beer","beers","beetle","beginner","bell","bellhop_bell","bento","biking_man","bike","biking_woman","bikini","biohazard","bird","birthday","black_circle","black_flag","black_heart","black_joker","black_large_square","black_medium_small_square","black_medium_square","black_nib","black_small_square","black_square_button","blonde_man","blonde_woman","blossom","blowfish","blue_book","blue_car","blue_heart","blush","boar","boat","bomb","book","bookmark","bookmark_tabs","books","boom","bouquet","bowing_man","bow_and_arrow","bowing_woman","bowling","boxing_glove","boy","bread","bride_with_veil","bridge_at_night","briefcase","broken_heart","bug","building_construction","bulb","bullettrain_front","bullettrain_side","burrito","bus","business_suit_levitating","busstop","bust_in_silhouette","busts_in_silhouette","butterfly","cactus","cake","calendar","call_me_hand","calling","camel","camera","camera_flash","camping","cancer","candle","candy","canoe","capital_abcd","capricorn","car","card_file_box","card_index","card_index_dividers","carousel_horse","carrot","cat","cat2","cd","chains","champagne","chart","chart_with_downwards_trend","chart_with_upwards_trend","checkered_flag","cheese","cherries","cherry_blossom","chestnut","chicken","children_crossing","chipmunk","chocolate_bar","christmas_tree","church","cinema","circus_tent","city_sunrise","city_sunset","cityscape","cl","clamp","clap","clapper","classical_building","clinking_glasses","clipboard","clock1","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","closed_book","closed_lock_with_key","closed_umbrella","cloud","cloud_with_lightning","cloud_with_lightning_and_rain","cloud_with_rain","cloud_with_snow","clown_face","clubs","cocktail","coffee","coffin","cold_sweat","comet","computer","computer_mouse","confetti_ball","confounded","confused","congratulations","construction","construction_worker_man","construction_worker_woman","control_knobs","convenience_store","cool","policeman","copyright","corn","couch_and_lamp","couple","couple_with_heart_woman_man","couple_with_heart_man_man","couple_with_heart_woman_woman","couplekiss_man_man","couplekiss_man_woman","couplekiss_woman_woman","cow","cow2","cowboy_hat_face","crab","crayon","credit_card","crescent_moon","cricket","crocodile","croissant","crossed_fingers","crossed_flags","crossed_swords","crown","cry","crying_cat_face","crystal_ball","cucumber","cupid","curly_loop","currency_exchange","curry","custard","customs","cyclone","dagger","dancer","dancing_women","dancing_men","dango","dark_sunglasses","dart","dash","deciduous_tree","deer","department_store","derelict_house","desert","desert_island","desktop_computer","male_detective","diamond_shape_with_a_dot_inside","diamonds","disappointed","disappointed_relieved","dizzy","dizzy_face","do_not_litter","dog","dog2","dollar","dolls","dolphin","door","doughnut","dove","dragon","dragon_face","dress","dromedary_camel","drooling_face","droplet","drum","duck","dvd","e-mail","eagle","ear","ear_of_rice","earth_africa","earth_americas","earth_asia","egg","eggplant","eight_pointed_black_star","eight_spoked_asterisk","electric_plug","elephant","envelope_with_arrow","euro","european_castle","european_post_office","evergreen_tree","exclamation","expressionless","eye","eye_speech_bubble","eyeglasses","eyes","face_with_head_bandage","face_with_thermometer","fist_oncoming","factory","fallen_leaf","family_man_woman_boy","family_man_boy","family_man_boy_boy","family_man_girl","family_man_girl_boy","family_man_girl_girl","family_man_man_boy","family_man_man_boy_boy","family_man_man_girl","family_man_man_girl_boy","family_man_man_girl_girl","family_man_woman_boy_boy","family_man_woman_girl","family_man_woman_girl_boy","family_man_woman_girl_girl","family_woman_boy","family_woman_boy_boy","family_woman_girl","family_woman_girl_boy","family_woman_girl_girl","family_woman_woman_boy","family_woman_woman_boy_boy","family_woman_woman_girl","family_woman_woman_girl_boy","family_woman_woman_girl_girl","fast_forward","fax","fearful","feet","female_detective","ferris_wheel","ferry","field_hockey","file_cabinet","file_folder","film_projector","film_strip","fire","fire_engine","fireworks","first_quarter_moon","first_quarter_moon_with_face","fish","fish_cake","fishing_pole_and_fish","fist_raised","fist_left","fist_right","flashlight","fleur_de_lis","flight_arrival","flight_departure","floppy_disk","flower_playing_cards","flushed","fog","foggy","football","footprints","fork_and_knife","fountain","fountain_pen","four_leaf_clover","fox_face","framed_picture","free","fried_egg","fried_shrimp","fries","frog","frowning","frowning_face","frowning_man","frowning_woman","middle_finger","fuelpump","full_moon","full_moon_with_face","funeral_urn","game_die","gear","gem","gemini","gift","gift_heart","girl","globe_with_meridians","goal_net","goat","golf","golfing_man","golfing_woman","gorilla","grapes","green_apple","green_book","green_heart","green_salad","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","guardswoman","guitar","gun","haircut_woman","haircut_man","hamburger","hammer","hammer_and_pick","hammer_and_wrench","hamster","hand","handbag","handshake","hankey","hatched_chick","hatching_chick","headphones","hear_no_evil","heart","heart_decoration","heart_eyes","heart_eyes_cat","heartbeat","heartpulse","hearts","heavy_check_mark","heavy_division_sign","heavy_dollar_sign","heavy_heart_exclamation","heavy_minus_sign","heavy_multiplication_x","heavy_plus_sign","helicopter","herb","hibiscus","high_brightness","high_heel","hocho","hole","honey_pot","horse","horse_racing","hospital","hot_pepper","hotdog","hotel","hotsprings","hourglass","hourglass_flowing_sand","house","house_with_garden","houses","hugs","hushed","ice_cream","ice_hockey","ice_skate","icecream","ideograph_advantage","imp","inbox_tray","incoming_envelope","tipping_hand_woman","information_source","innocent","interrobang","iphone","izakaya_lantern","jack_o_lantern","japan","japanese_castle","japanese_goblin","japanese_ogre","jeans","joy","joy_cat","joystick","kaaba","keycap_ten","kick_scooter","kimono","kiss","kissing","kissing_cat","kissing_closed_eyes","kissing_heart","kissing_smiling_eyes","kiwi_fruit","koala","koko","large_blue_circle","large_blue_diamond","large_orange_diamond","last_quarter_moon","last_quarter_moon_with_face","latin_cross","laughing","leaves","ledger","left_luggage","left_right_arrow","leftwards_arrow_with_hook","lemon","leo","leopard","level_slider","libra","light_rail","lion","lips","lipstick","lizard","lock","lock_with_ink_pen","lollipop","loop","loud_sound","loudspeaker","love_hotel","love_letter","low_brightness","lying_face","mag","mag_right","mahjong","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","man","man_artist","man_astronaut","man_cartwheeling","man_cook","man_dancing","man_facepalming","man_factory_worker","man_farmer","man_firefighter","man_health_worker","man_in_tuxedo","man_judge","man_juggling","man_mechanic","man_office_worker","man_pilot","man_playing_handball","man_playing_water_polo","man_scientist","man_shrugging","man_singer","man_student","man_teacher","man_technologist","man_with_gua_pi_mao","man_with_turban","tangerine","mans_shoe","mantelpiece_clock","maple_leaf","martial_arts_uniform","mask","massage_woman","massage_man","meat_on_bone","medal_military","medal_sports","mega","melon","memo","men_wrestling","menorah","mens","metal","metro","microphone","microscope","milk_glass","milky_way","minibus","minidisc","mobile_phone_off","money_mouth_face","money_with_wings","moneybag","monkey","monkey_face","monorail","moon","mortar_board","mosque","motor_boat","motor_scooter","motorcycle","motorway","mount_fuji","mountain","mountain_biking_man","mountain_biking_woman","mountain_cableway","mountain_railway","mountain_snow","mouse","mouse2","movie_camera","moyai","mrs_claus","muscle","mushroom","musical_keyboard","musical_note","musical_score","mute","nail_care","name_badge","national_park","nauseated_face","necktie","negative_squared_cross_mark","nerd_face","neutral_face","new_moon","new_moon_with_face","newspaper","newspaper_roll","next_track_button","ng","no_good_man","no_good_woman","night_with_stars","no_bell","no_bicycles","no_entry","no_entry_sign","no_mobile_phones","no_mouth","no_pedestrians","no_smoking","non-potable_water","nose","notebook","notebook_with_decorative_cover","notes","nut_and_bolt","o2","ocean","octopus","oden","office","oil_drum","ok","ok_hand","ok_man","ok_woman","old_key","older_man","older_woman","om","oncoming_automobile","oncoming_bus","oncoming_police_car","oncoming_taxi","open_file_folder","open_hands","open_mouth","open_umbrella","ophiuchus","orange_book","orthodox_cross","outbox_tray","owl","ox","package","page_facing_up","page_with_curl","pager","paintbrush","palm_tree","pancakes","panda_face","paperclip","paperclips","parasol_on_ground","parking","part_alternation_mark","partly_sunny","passenger_ship","passport_control","pause_button","peace_symbol","peanuts","pear","pen","pencil2","penguin","pensive","performing_arts","persevere","person_fencing","pouting_woman","phone","pick","pig","pig2","pig_nose","pill","pineapple","ping_pong","pisces","pizza","place_of_worship","plate_with_cutlery","play_or_pause_button","point_down","point_left","point_right","point_up","point_up_2","police_car","policewoman","poodle","popcorn","post_office","postal_horn","postbox","potable_water","potato","pouch","poultry_leg","pound","rage","pouting_cat","pouting_man","pray","prayer_beads","pregnant_woman","previous_track_button","prince","princess","printer","purple_heart","purse","pushpin","put_litter_in_its_place","question","rabbit","rabbit2","racehorse","racing_car","radio","radio_button","radioactive","railway_car","railway_track","rainbow","rainbow_flag","raised_back_of_hand","raised_hand_with_fingers_splayed","raised_hands","raising_hand_woman","raising_hand_man","ram","ramen","rat","record_button","recycle","red_circle","registered","relaxed","relieved","reminder_ribbon","repeat_one","rescue_worker_helmet","restroom","revolving_hearts","rewind","rhinoceros","ribbon","rice","rice_ball","rice_cracker","rice_scene","right_anger_bubble","ring","robot","rocket","rofl","roll_eyes","roller_coaster","rooster","rose","rosette","rotating_light","round_pushpin","rowing_man","rowing_woman","rugby_football","running_man","running_shirt_with_sash","running_woman","sa","sagittarius","sake","sandal","santa","satellite","saxophone","school","school_satchel","scissors","scorpion","scorpius","scream","scream_cat","seat","secret","see_no_evil","seedling","selfie","shallow_pan_of_food","shamrock","shark","shaved_ice","sheep","shell","shield","shinto_shrine","ship","shirt","shopping","shopping_cart","shower","shrimp","signal_strength","six_pointed_star","ski","skier","skull","skull_and_crossbones","sleeping","sleeping_bed","sleepy","slightly_frowning_face","slightly_smiling_face","slot_machine","small_airplane","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","smile","smile_cat","smiley","smiley_cat","smiling_imp","smirk","smirk_cat","smoking","snail","snake","sneezing_face","snowboarder","snowflake","snowman","snowman_with_snow","sob","soccer","soon","sos","sound","space_invader","spades","spaghetti","sparkle","sparkler","sparkles","sparkling_heart","speak_no_evil","speaker","speaking_head","speech_balloon","speedboat","spider","spider_web","spiral_calendar","spiral_notepad","spoon","squid","stadium","star","star2","star_and_crescent","star_of_david","stars","station","statue_of_liberty","steam_locomotive","stew","stop_button","stop_sign","stopwatch","straight_ruler","strawberry","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","studio_microphone","stuffed_flatbread","sun_behind_large_cloud","sun_behind_rain_cloud","sun_behind_small_cloud","sun_with_face","sunflower","sunglasses","sunny","sunrise","sunrise_over_mountains","surfing_man","surfing_woman","sushi","suspension_railway","sweat","sweat_drops","sweat_smile","sweet_potato","swimming_man","swimming_woman","symbols","synagogue","syringe","taco","tada","tanabata_tree","taurus","taxi","tea","telephone_receiver","telescope","tennis","tent","thermometer","thinking","thought_balloon","ticket","tickets","tiger","tiger2","timer_clock","tipping_hand_man","tired_face","tm","toilet","tokyo_tower","tomato","tongue","tophat","tornado","trackball","tractor","traffic_light","train","train2","tram","triangular_flag_on_post","triangular_ruler","trident","triumph","trolleybus","trophy","tropical_drink","tropical_fish","truck","trumpet","tulip","tumbler_glass","turkey","turtle","tv","twisted_rightwards_arrows","two_hearts","two_men_holding_hands","two_women_holding_hands","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7981","u7a7a","umbrella","unamused","underage","unicorn","unlock","up","upside_down_face","vertical_traffic_light","vhs","vibration_mode","video_camera","video_game","violin","virgo","volcano","volleyball","vs","vulcan_salute","walking_man","walking_woman","waning_crescent_moon","waning_gibbous_moon","warning","wastebasket","watch","water_buffalo","watermelon","wave","wavy_dash","waxing_crescent_moon","wc","weary","wedding","weight_lifting_man","weight_lifting_woman","whale","whale2","wheel_of_dharma","wheelchair","white_check_mark","white_circle","white_flag","white_flower","white_large_square","white_medium_small_square","white_medium_square","white_small_square","white_square_button","wilted_flower","wind_chime","wind_face","wine_glass","wink","wolf","woman","woman_artist","woman_astronaut","woman_cartwheeling","woman_cook","woman_facepalming","woman_factory_worker","woman_farmer","woman_firefighter","woman_health_worker","woman_judge","woman_juggling","woman_mechanic","woman_office_worker","woman_pilot","woman_playing_handball","woman_playing_water_polo","woman_scientist","woman_shrugging","woman_singer","woman_student","woman_teacher","woman_technologist","woman_with_turban","womans_clothes","womans_hat","women_wrestling","womens","world_map","worried","wrench","writing_hand","yellow_heart","yen","yin_yang","yum","zap","zipper_mouth_face","zzz","octocat","Converter","converterOptions","langExtensions","outputModifiers","setConvFlavor","parsed","raw","_parseExtension","legacyExtensionLoading","validExt","listen","gOpt","_constructor","_dispatch","evtName","globals","ei","nText","makeHtml","gHtmlBlocks","gHtmlMdBlocks","gHtmlSpans","gUrls","gTitles","gDimensions","gListLevel","hashLinkCounts","converter","rsp","rgx","rTrimInputText","makeMarkdown","makeMd","HTMLParser","preList","pres","querySelectorAll","presPH","childElementCount","firstChild","language","classes","matches","outerHTML","setAttribute","substitutePreCodeTags","clean","node","childNodes","nodeValue","nodes","mdDoc","addExtension","useExtension","extensionName","output","getMetadata","getMetadataFormat","_setMetadataPair","_setMetadataFormat","_setMetadataRaw","writeAnchorTag","linkText","linkId","m5","m6","wm","st","mentions","username","lnk","simpleURLRegex","simpleURLRegex2","delimUrlRegex","simpleMailRegex","delimMailRegex","replaceLink","leadingMagicChars","m2","m3","trailingPunctuation","trailingMagicChars","lnkTxt","lmc","tmc","replaceMail","bq","pre","codeblock","nextChar","doctypeParsed","charset","leadingText","numSpaces","emojiCode","delim","blockText","blockTags","repFunc","inside","opTagPos","rgx1","patLeft","patRight","subTexts","newSubText1","hashHTMLSpan","repText","num","setextRegexH1","setextRegexH2","spanGamut","hID","headerId","hashBlock","matchFound","hLevel","atxStyle","customizedHeaderId","hText","span","writeImageTag","altText","gDims","parseInside","lead","processListItems","listStr","trimTrailing","isParagraphed","m4","taskbtn","bulletStyle","otp","wm2","styleStartNumber","listType","res","parseConsecutiveLists","olRgx","ulRgx","counterRxg","parseCL","parseMetadataContents","wholematch","grafs","grafsOut","grafsOutIt","codeFlag","$2","re","replaceFunc","blankLines","parseCells","cell","parseTable","rawTable","tableLines","sLine","rawHeaders","rawStyles","rawCells","styles","cells","tableHeaderId","ii","tb","tblLgn","buildTable","charCodeToReplace","hasChildNodes","childrenLength","innerTxt","headerLevel","headerMark","hasAttribute","listItems","listItemsLenght","listNum","listItemTxt","childrenLenght","spansOnly","tableArray","headings","headContent","allign","cols","cellContent","cellSpacesCount","strLen","exports","parseFloat","strip_number_groups","_round","def","info","group_regex","group_sep","decimal_str","decimal_regex","symbol","get_currency_symbol","hide_currency_symbol","currency_symbols","number_format_info","is_negative","pow","toFixed","roundNumber","remainder","numerator","denominator","multiplier","_remainder","round_based_on_smallest_currency_fraction","smallest_currency_fraction_value","remainder_val","tools","downloadify","csv_data","to_csv","blob_object","download","markdown","md2html","whitespace_len","first_line","txt1","col","getLength","get_view_data","col_row","col_map","valueOf","add_property_setter_on_resize","onColumnsResized","previousWidth","doctype_or_field","field_name","property","defaultDateFormat","defaultTimeFormat","defaultDatetimeFormat","defaultFormat","date_obj","local","convert_to_system_tz","is_timezone_same","utcOffset","str_to_obj","_d","obj_to_str","obj_to_user","get_user_fmt","get_diff","d1","d2","get_hour_diff","get_day_diff","add_days","days","add_months","months","week_start","startOf","week_end","endOf","month_start","month_end","year_start","year_end","only_time","user_fmt","get_datetime_as_string","user_to_str","system_fmt","user_to_obj","global_date_format","now_date","as_obj","_date","moment_to_date_obj","date_array","toArray","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds","get_time","timestamp","isValid","defineProperties","dateutil","#,###.##","#.###,##","# ###.##","# ###,##","#'###.##","#, ###.##","#,##,###.##","#,###.###","#.###","#,###","group_position","integer","youtube_id","has_help","show_video","help_feedback_link","help_links","contacts","clear_address_and_contact","render_address_and_contact","__onload","get_last_doc","last_route","preview_email","file_manager","files_to_move","old_folder","new_folder","reset","old_folder_","new_folder_","file_list","new_parent","old_parent","can_paste","mounted","is_image","fr","file_size","file_name","computed","uploaded","failed","components","TreeNode","is_leaf","fetching","fetched","filtered","selected_node","filter_text","toggle_node","methods","select_node","get_files_in_folder","folder","is_folder","apply_filter","search_string","show_upload_button","allow_multiple","as_dataurl","on_success","restrictions","max_number_of_files","allowed_file_types","upload_notes","FilePreview","FileBrowser","WebLink","is_dragging","currently_uploading","show_file_browser","show_web_link","newvalue","oldvalue","upload_complete","dragover","dragleave","dropfiles","add_files","browse_files","$refs","file_input","on_file_input","remove_file","toggle_private","private","toggle_all_private","flag","file_array","check_restrictions","uploading","is_correct_type","valid_file_size","upload_files","upload_via_file_browser","upload_via_web_link","return_as_dataurl","upload_file","selected_file","file_browser","web_link","promises","dataurl","upload","addEventListener","lengthComputable","loaded","onreadystatechange","readyState","DONE","file_doc","form_data","FileUploader","make_dialog","$fileuploader","Vue","FileUploaderComponent","$children","upload_area","integration_service","gsuite","create_gsuite_file","attachment","Tree","setup_treenode_class","with_skeleton","icon_set","closed","leaf","setup_root_node","is_root","tree_method","expanded","parent_label","parent_node","make_node_element","on_render","root_node","expandable","expand_node","load_children","$tree_link","make_icon_and_label","$toolbar","get_toolbar","get_selected_node","deep","get_all_nodes","data_list","render_children_of_all_nodes","set_selected_node","get_nodes","data_set","render_node_children","child_node","add_node","show_toolbar","select_link","cur_toolbar","icon_html","get_node_label","on_node_click","condition","btnClass","cur_page","Container","_intro","pagewidth","pagemargin","has_sidebar","old_name","breadcrumbs","rename","add_page","change_to","keep_open","_route","page_route","preferred","File","Dashboard","Dashboard Chart","Dashboard Chart Source","set_doctype_module","get_doctype_module","current_page","visible_modules","$breadcrumbs","from_module","get_module","module_info","blocked","issingle","treeviews","last_view","old_route_str","new_route_str","Factory","page_name","on_show","show_not_found","double_column","instances","onDocumentClick","align","fullwidth","isOpen","directives","outside","binding","dataset","outsideClickIndex","popoverClasses","pin-r","pin-l","w-full","togglePopover","closePopover","Popover","dropdownItems","setRoute","$router","Dropdown","hovered","iconClass","dropdown_links","links","$emit","class","DeskModuleBox","show_module_card_customize_dialog","get_data","generate_route","is_query_report","DeskSection","module_categories","category","home_settings_fetched","created","fetch_home_settings","home_settings","update_modules_with_home_settings","hidden_modules","default_links","new_links","new_link","get_modules_for_category","show_hide_cards_dialog","all_modules","modules_to_show","flatMap","modules_to_hide","hs","get_query_string","query_string","query_list","pair","with_page","standard_pages","script","_dynamic_page","home_page","desktop","Desktop","pagedoc","__script","trigger_page_event","eventname","show_message_page","img","show_not_permitted","home","ModulesFactory","Home","AwesomeBar","global_results","awesomplete","Awesomplete","minChars","maxItems","autoFirst","term","get_item","last_space","lastIndexOf","set_specifics","add_defaults","build_options","deduplicate","get_recent_pages","get_frequent_links","add_help","autocomplete_open","previous_hash","setup_recent","end_txt","make_global_search","make_search_in_current","make_calculator","get_creatables","get_search_in_list","get_doctypes","get_reports","get_pages","get_modules","get_executables","str_route","recent","set_global_results","bold","searchdialog","init_search","list_view","cur_list","formatted_value","SearchDialog","search_dialog","$search_modal","$modal_body","modal_state","current_keyword","more_count","full_lists","nav_lists","bind_input","$r","put_placeholder","status_text","empty_state_text","current_type","fetch_type","current_count","get_global_results","doctype_results","add_more_results","searches","input_placeholder","bind_keyboard_events","search_type","parse_results","result_sets","keyword","render_data","no_results_status","$search_results","sidebar_item_html","All Results","add_section_to_summary","render_full_list","clone","$results_list","$results_col","render_result","are_expansive","margin_more","last","col_width","section_length","$result","get_link","data_path","title_html","$result_text","subtypes","subtype","results_set","more_results","no_of_results","no_of_results_cue","slideDown","global_search","get_nav_results","process","_item","frequently_visited_links","can_search","level","fuzzy_search","bolden_match_part","order","all_reports","report_type","ref_doctype","page_info","get_results_sets","results_sets","make_description","result_current_length","field_text","colon_index","field_value","field_data","field_length","remaining_length","sort_uniques","array","lists","in_keyword","ilen","klen","length_ratio","skips","mismatches","outer","k_ch","subseq","rendered","regEx","str_orig","str_len","sub_ch","str_char","searchable_functions","make_function_searchable","_function","misc","about","about_dialog","show_versions","$wrap","branch","branch_version","version","Toolbar","dropdown","awesome_bar","setup_sidebar","setup_help","notifications","update_notifications","search_modal","toggle_full_width","layout_side_section","overlay_sidebar","fadeIn","scroll_container","close_sidebar","show_results","stopPropagation","$help_links","get_menu","add_menu_divider","add_icon_link","class_name","parent_element","new_element","container_fullwidth","set_fullwidth_if_enabled","reload","download_backup","show_about","config","ToDo","Event","boot_info","notification_info","get_counts","open_count_doctype","open_count_other","targets","doctypes","bind_list","divide","excluded","empty_map","doc_dt","add_notification","$list_item","show_open_count_list","conditions","last_edited_communication","standard_replies","get_fields","delete_saved_draft","send_action","set_data","select_attachments","checked_items","render_attach","contactList","onchange","save_as_draft","send_me_a_copy","email_accounts","account","email_account","enable_outgoing","setup_subject_and_recipients","setup_print_language","setup_print","setup_attach","setup_email","setup_last_edited_communication","setup_email_template","cc","bcc","sender","setup_earlier_reply","forward","last_email","timeline","get_recipient","get_last_email","subject_field","email_template","template_name","_lang","reply","reply_added","content_field","prepend_reply","get_last_edited_communication","selected_format","select_print_format","get_print_format","lang_code","default_print_language","default_print_language_code","language_sel","get_languages","attach_document_print","print_preview","attach","attachments","attachment_uploaded","get_files","form_values","selected_attachments","is_old_style","with_old_style","print_html","send_email","is_cc_checkbox","separator_element","print_format","sender_full_name","read_receipt","send_read_receipt","print_letterhead","is_print_letterhead_checked","reload_doc","with_letterhead","signature","email_signature","real_name","is_a_reply","last_email_content","original_comment","communication_date","TranslationManager","update_translations","get_translations_data","in_list_view","translation_dict","translation_data","translation","SortSelector","labels","prepare_args","sort_order","sort_by","order_by","setup_from_doctype","sort_by_label","get_meta_sort_field","meta_sort_field","meta_sort_order","mandatory","sort_field","get_sql_string","start_app","Application","ready","startup","setup_frappe_vue","load_bootinfo","load_user_permissions","make_nav_bar","setup_analytics","setup_energy_point_listeners","set_rtl","make_page_container","start_notification_updates","change_log","Cypress","show_change_log","show_notes","show_update_available","startup_setup_dialog","setup_complete","pre_show","sid","setup_social_listeners","setup_build_error_listener","email_user_password","u","set_password","link_preview","email_password_prompt","checking","passed","check_metadata_cache_status","set_globals","sync_pages","user_utc_offset","timezone_info","set_as_guest","refresh_notifications","_refresh_notifications","abort","new_messages","user_email","py_date_format","temp_container","frappe_toolbar","logout","logged_out","logged_in","set_message","usr","pwd","opacity","background-color","save_action","ls","rel","identify","people","$first_name","first_name","$last_name","last_name","$created","$email","note","notify_on_every_login","default_module","_setup","_id","installedModules","__webpack_require__","moduleId","getter","enumerable","Symbol","toStringTag","mode","__esModule","ns","./src/bitap/bitap_matched_indices.js","matchmask","minMatchCharLength","matchedIndices","./src/bitap/bitap_pattern_alphabet.js","pattern","_i","./src/bitap/bitap_regex_search.js","SPECIAL_CHARS_REGEX","tokenSeparator","isMatch","matchesLen","score","./src/bitap/bitap_score.js","_ref","_ref$errors","_ref$currentLocation","currentLocation","_ref$expectedLocation","expectedLocation","_ref$distance","distance","accuracy","proximity","./src/bitap/bitap_search.js","bitapScore","patternAlphabet","_ref$location","_ref$threshold","threshold","_ref$findAllMatches","findAllMatches","_ref$minMatchCharLeng","textLen","currentThreshold","bestLocation","patternLen","matchMask","_score","lastBitArr","finalScore","binMax","binMin","binMid","finish","bitArr","charMatch","./src/bitap/index.js","_defineProperties","descriptor","bitapRegexSearch","bitapSearch","Bitap","_ref$maxPatternLength","maxPatternLength","_ref$isCaseSensitive","isCaseSensitive","_ref$tokenSeparator","instance","Constructor","_classCallCheck","protoProps","staticProps","_this$options","_this$options2","./src/helpers/deep_value.js","deepValue","dotIndex","firstSegment","./src/helpers/is_array.js","./src/index.js","_typeof","iterator","Fuse","_ref$caseSensitive","caseSensitive","_ref$id","_ref$keys","_ref$shouldSort","shouldSort","_ref$getFn","getFn","_ref$sortFn","sortFn","_ref$tokenize","tokenize","_ref$matchAllTokens","matchAllTokens","_ref$includeMatches","includeMatches","_ref$includeScore","includeScore","_ref$verbose","verbose","setCollection","_log","_this$_prepareSearche","_prepareSearchers","tokenSearchers","fullSearcher","_this$_search","_search","weights","_computeScore","_sort","_format","tokens","resultMap","_analyze","_len","keysLen","weight","_ref2","_ref3","_ref2$arrayIndex","arrayIndex","_ref3$tokenSearchers","_ref3$fullSearcher","_ref3$resultMap","_ref3$results","averageScore","numTextMatches","mainSearchResult","words","scores","tokenSearcher","hasMatchInText","word","tokenSearchResult","scoresLen","_i2","checkTextMatches","existingResult","_i3","scoreLen","currScore","bestScore","nScore","finalOutput","transformers","indices","_len2","_console","__d","A","N","splitText","_componentConstructor","__n","attributes","defaultProps","P","removeEventListener","__l","removeAttribute","removeAttributeNS","setAttributeNS","E","on_mounted","D","H","ownerSVGElement","_component","replaceChild","__hyperattr_","createElementNS","nextSibling","C","__k","U","lastChild","previousSibling","L","__b","__x","__r","base","on_mount","componentWillReceiveProps","__c","__p","M","syncComponentUpdates","__s","shouldComponentUpdate","componentWillUpdate","getChildContext","T","S","W","__u","V","on_updated","afterUpdate","__h","componentWillUnmount","set_state","forceUpdate","I","Component","ValueError","ImportError","range","isBetween","isSame","compare","isBefore","quick_edit","required","pluralize","suffix","is_empty","copy_array","as_array","squash","agent","userAgent","compact","RETURN","stores","Store","Logger","ERROR","NOTSET","FORMAT","loggers","DEBUG","INFO","WARN","chat","profile","exists_ok","STATUSES","room","kind","users","rooms","last_message","room_name","typing","mess","pretty_datetime","today","$audio","paused","pause","PATH","website","enable_from","enable_to","token","Button","SIZE","block","large","FAB","Indicator","FontAwesome","fixed","Octicon","Avatar","medium","Chat","HTMLElement","set_wrapper","component","Widget","hyper","PAGE","POPPER","this$1","defaultState","conversation_tones","notification_tones","message_preview","show-message","ActionBar","placeholder","is_group","group_name","RoomList","Room","Popper","heading","widget","active","margin-bottom","oninput","autocomplete","Action","Item","subtitle","is_unread","MediaProfile","font-size","position","POSITION","text-align","width_title","hints","aliases","alias","capture","box-shadow","Header","on_back","ChatList","ChatForm","hint","popper","room_type","ChatBubble","groupable","sliced","data-toggle","autofocus","onkeypress","EmojiPicker","List","platform","appVersion","browser","Notification","requestPermission","force","desk","has","$template","chatter","store","setup_room","reference","should_render","enable_chat","enable","SocialFactory","social","energy_points","get_points","points","format_form_log","get_form_log_message","reason","format_history_log","reference_doctype","reference_name","get_history_log_message","owner_name","revert_of","rule"],"mappings":"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"}